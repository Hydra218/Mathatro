(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const M of document.querySelectorAll('link[rel="modulepreload"]'))P(M);new MutationObserver(M=>{for(const D of M)if(D.type==="childList")for(const v of D.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&P(v)}).observe(document,{childList:!0,subtree:!0});function x(M){const D={};return M.integrity&&(D.integrity=M.integrity),M.referrerPolicy&&(D.referrerPolicy=M.referrerPolicy),M.crossOrigin==="use-credentials"?D.credentials="include":M.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function P(M){if(M.ep)return;M.ep=!0;const D=x(M);fetch(M.href,D)}})();var Qd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jd(A){return A&&A.__esModule&&Object.prototype.hasOwnProperty.call(A,"default")?A.default:A}var Nl={exports:{}};(function(A,c){(function(P,M){A.exports=M()})(Qd,()=>(()=>{var x={50792:v=>{var E=Object.prototype.hasOwnProperty,t="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(t=!1));function g(e,n,h){this.fn=e,this.context=n,this.once=h||!1}function a(e,n,h,i,l){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new g(h,i||e,l),u=t?t+n:n;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],f]:e._events[u].push(f):(e._events[u]=f,e._eventsCount++),e}function r(e,n){--e._eventsCount===0?e._events=new o:delete e._events[n]}function s(){this._events=new o,this._eventsCount=0}s.prototype.eventNames=function(){var n=[],h,i;if(this._eventsCount===0)return n;for(i in h=this._events)E.call(h,i)&&n.push(t?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(h)):n},s.prototype.listeners=function(n){var h=t?t+n:n,i=this._events[h];if(!i)return[];if(i.fn)return[i.fn];for(var l=0,f=i.length,u=new Array(f);l<f;l++)u[l]=i[l].fn;return u},s.prototype.listenerCount=function(n){var h=t?t+n:n,i=this._events[h];return i?i.fn?1:i.length:0},s.prototype.emit=function(n,h,i,l,f,u){var d=t?t+n:n;if(!this._events[d])return!1;var p=this._events[d],m=arguments.length,T,y;if(p.fn){switch(p.once&&this.removeListener(n,p.fn,void 0,!0),m){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,h),!0;case 3:return p.fn.call(p.context,h,i),!0;case 4:return p.fn.call(p.context,h,i,l),!0;case 5:return p.fn.call(p.context,h,i,l,f),!0;case 6:return p.fn.call(p.context,h,i,l,f,u),!0}for(y=1,T=new Array(m-1);y<m;y++)T[y-1]=arguments[y];p.fn.apply(p.context,T)}else{var S=p.length,C;for(y=0;y<S;y++)switch(p[y].once&&this.removeListener(n,p[y].fn,void 0,!0),m){case 1:p[y].fn.call(p[y].context);break;case 2:p[y].fn.call(p[y].context,h);break;case 3:p[y].fn.call(p[y].context,h,i);break;case 4:p[y].fn.call(p[y].context,h,i,l);break;default:if(!T)for(C=1,T=new Array(m-1);C<m;C++)T[C-1]=arguments[C];p[y].fn.apply(p[y].context,T)}}return!0},s.prototype.on=function(n,h,i){return a(this,n,h,i,!1)},s.prototype.once=function(n,h,i){return a(this,n,h,i,!0)},s.prototype.removeListener=function(n,h,i,l){var f=t?t+n:n;if(!this._events[f])return this;if(!h)return r(this,f),this;var u=this._events[f];if(u.fn)u.fn===h&&(!l||u.once)&&(!i||u.context===i)&&r(this,f);else{for(var d=0,p=[],m=u.length;d<m;d++)(u[d].fn!==h||l&&!u[d].once||i&&u[d].context!==i)&&p.push(u[d]);p.length?this._events[f]=p.length===1?p[0]:p:r(this,f)}return this},s.prototype.removeAllListeners=function(n){var h;return n?(h=t?t+n:n,this._events[h]&&r(this,h)):(this._events=new o,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=t,s.EventEmitter=s,v.exports=s},11517:(v,E,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(38829),g=function(a,r,s,e){for(var n=a[0],h=1;h<a.length;h++){var i=a[h];o(i,n,r,s,e),n=i}return a};v.exports=g},80318:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"angle",r,s,e,n)};v.exports=g},60757:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){for(var a=0;a<t.length;a++){var r=t[a];o.call(g,r)}return t};v.exports=E},69927:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){g===void 0&&(g=0);for(var a=g;a<t.length;a++){var r=t[a],s=!0;for(var e in o)r[e]!==o[e]&&(s=!1);if(s)return r}return null};v.exports=E},32265:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){g===void 0&&(g=0);for(var a=t.length-1;a>=g;a--){var r=t[a],s=!0;for(var e in o)r[e]!==o[e]&&(s=!1);if(s)return r}return null};v.exports=E},94420:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(11879),g=t(60461),a=t(95540),r=t(29747),s=t(41481),e=new s({sys:{queueDepthSort:r,events:{once:r}}},0,0,1,1).setOrigin(0,0),n=function(h,i){i===void 0&&(i={});var l=i.hasOwnProperty("width"),f=i.hasOwnProperty("height"),u=a(i,"width",-1),d=a(i,"height",-1),p=a(i,"cellWidth",1),m=a(i,"cellHeight",p),T=a(i,"position",g.TOP_LEFT),y=a(i,"x",0),S=a(i,"y",0),C=0,R=0,I=u*p,L=d*m;e.setPosition(y,S),e.setSize(p,m);for(var w=0;w<h.length;w++)if(o(h[w],e,T),l&&u===-1)e.x+=p;else if(f&&d===-1)e.y+=m;else if(f&&!l){if(R+=m,e.y+=m,R===L&&(R=0,C+=p,e.y=S,e.x+=p,C===I))break}else if(C+=p,e.x+=p,C===I&&(C=0,R+=m,e.x=y,e.y+=m,R===L))break;return h};v.exports=n},41721:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"alpha",r,s,e,n)};v.exports=g},67285:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"x",r,s,e,n)};v.exports=g},9074:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n,h,i){return s==null&&(s=r),o(a,"x",r,e,h,i),o(a,"y",s,n,h,i)};v.exports=g},75222:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"y",r,s,e,n)};v.exports=g},22983:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g===void 0&&(g=0),a===void 0&&(a=6.28);for(var r=g,s=(a-g)/t.length,e=o.x,n=o.y,h=o.radius,i=0;i<t.length;i++)t[i].x=e+h*Math.cos(r),t[i].y=n+h*Math.sin(r),r+=s;return t};v.exports=E},95253:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g===void 0&&(g=0),a===void 0&&(a=6.28);for(var r=g,s=(a-g)/t.length,e=o.width/2,n=o.height/2,h=0;h<t.length;h++)t[h].x=o.x+e*Math.cos(r),t[h].y=o.y+n*Math.sin(r),r+=s;return t};v.exports=E},88505:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15258),g=t(26708),a=function(r,s,e){var n;e?n=g(s,e,r.length):n=o(s,r.length);for(var h=0;h<r.length;h++){var i=r[h],l=n[h];i.x=l.x,i.y=l.y}return r};v.exports=a},41346:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(14649),g=t(86003),a=t(49498),r=function(s,e,n){n===void 0&&(n=0);var h=o(e,!1,s.length);n>0?g(h,n):n<0&&a(h,Math.abs(n));for(var i=0;i<s.length;i++)s[i].x=h[i].x,s[i].y=h[i].y;return s};v.exports=r},11575:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84993),g=function(a,r,s){var e=o({x1:r.x1,y1:r.y1,x2:r.x2,y2:r.y2},s),n=o({x1:r.x2,y1:r.y2,x2:r.x3,y2:r.y3},s),h=o({x1:r.x3,y1:r.y3,x2:r.x1,y2:r.y1},s);e.pop(),n.pop(),h.pop(),e=e.concat(n,h);for(var i=e.length/a.length,l=0,f=0;f<a.length;f++){var u=a[f],d=e[Math.floor(l)];u.x=d.x,u.y=d.y,l+=i}return a};v.exports=g},29953:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){for(var a=0;a<t.length;a++){var r=t[a];r.anims&&r.anims.play(o,g)}return t};v.exports=E},66979:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r,s){a===void 0&&(a=0),r===void 0&&(r=0),s===void 0&&(s=1);var e,n=0,h=t.length;if(s===1)for(e=r;e<h;e++)t[e][o]+=g+n*a,n++;else for(e=r;e>=0;e--)t[e][o]+=g+n*a,n++;return t};v.exports=E},43967:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r,s){a===void 0&&(a=0),r===void 0&&(r=0),s===void 0&&(s=1);var e,n=0,h=t.length;if(s===1)for(e=r;e<h;e++)t[e][o]=g+n*a,n++;else for(e=r;e>=0;e--)t[e][o]=g+n*a,n++;return t};v.exports=E},88926:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28176),g=function(a,r){for(var s=0;s<a.length;s++)o(r,a[s]);return a};v.exports=g},33286:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(24820),g=function(a,r){for(var s=0;s<a.length;s++)o(r,a[s]);return a};v.exports=g},96e3:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65822),g=function(a,r){for(var s=0;s<a.length;s++)o(r,a[s]);return a};v.exports=g},28789:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26597),g=function(a,r){for(var s=0;s<a.length;s++)o(r,a[s]);return a};v.exports=g},97154:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(90260),g=function(a,r){for(var s=0;s<a.length;s++)o(r,a[s]);return a};v.exports=g},20510:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"rotation",r,s,e,n)};v.exports=g},91051:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(1163),g=t(20339),a=function(r,s,e){for(var n=s.x,h=s.y,i=0;i<r.length;i++){var l=r[i];o(l,n,h,e,Math.max(1,g(l.x,l.y,n,h)))}return r};v.exports=a},76332:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(1163),g=function(a,r,s,e){var n=r.x,h=r.y;if(e===0)return a;for(var i=0;i<a.length;i++)o(a[i],n,h,s,e);return a};v.exports=g},61619:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"scaleX",r,s,e,n)};v.exports=g},94868:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n,h,i){return s==null&&(s=r),o(a,"scaleX",r,e,h,i),o(a,"scaleY",s,n,h,i)};v.exports=g},95532:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66979),g=function(a,r,s,e,n){return o(a,"scaleY",r,s,e,n)};v.exports=g},8689:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"alpha",r,s,e,n)};v.exports=g},2645:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e){return o(a,"blendMode",r,0,s,e)};v.exports=g},32372:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"depth",r,s,e,n)};v.exports=g},85373:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){for(var a=0;a<t.length;a++)t[a].setInteractive(o,g);return t};v.exports=E},81583:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n,h,i){return s==null&&(s=r),o(a,"originX",r,e,h,i),o(a,"originY",s,n,h,i),a.forEach(function(l){l.updateDisplayOrigin()}),a};v.exports=g},79939:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"rotation",r,s,e,n)};v.exports=g},2699:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n,h,i){return s==null&&(s=r),o(a,"scaleX",r,e,h,i),o(a,"scaleY",s,n,h,i)};v.exports=g},98739:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"scaleX",r,s,e,n)};v.exports=g},98476:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"scaleY",r,s,e,n)};v.exports=g},6207:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n,h,i){return s==null&&(s=r),o(a,"scrollFactorX",r,e,h,i),o(a,"scrollFactorY",s,n,h,i)};v.exports=g},6607:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"scrollFactorX",r,s,e,n)};v.exports=g},72248:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"scrollFactorY",r,s,e,n)};v.exports=g},14036:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){for(var s=0;s<t.length;s++)t[s].setTint(o,g,a,r);return t};v.exports=E},50159:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e){return o(a,"visible",r,0,s,e)};v.exports=g},77597:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"x",r,s,e,n)};v.exports=g},83194:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n,h,i){return s==null&&(s=r),o(a,"x",r,e,h,i),o(a,"y",s,n,h,i)};v.exports=g},67678:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43967),g=function(a,r,s,e,n){return o(a,"y",r,s,e,n)};v.exports=g},35850:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n){e===void 0&&(e=0),n===void 0&&(n=new o);var h,i,l=a.length;if(l===1)h=a[0].x,i=a[0].y,a[0].x=r,a[0].y=s;else{var f=1,u=0;e===0&&(u=l-1,f=l-2),h=a[u].x,i=a[u].y,a[u].x=r,a[u].y=s;for(var d=0;d<l;d++)if(!(f>=l||f===-1)){var p=a[f],m=p.x,T=p.y;p.x=h,p.y=i,h=m,i=T,e===0?f--:f++}}return n.x=h,n.y=i,n};v.exports=g},8628:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33680),g=function(a){return o(a)};v.exports=g},21837:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7602),g=function(a,r,s,e,n){n===void 0&&(n=!1);var h=Math.abs(e-s)/a.length,i;if(n)for(i=0;i<a.length;i++)a[i][r]+=o(i*h,s,e);else for(i=0;i<a.length;i++)a[i][r]=o(i*h,s,e);return a};v.exports=g},21910:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54261),g=function(a,r,s,e,n){n===void 0&&(n=!1);var h=Math.abs(e-s)/a.length,i;if(n)for(i=0;i<a.length;i++)a[i][r]+=o(i*h,s,e);else for(i=0;i<a.length;i++)a[i][r]=o(i*h,s,e);return a};v.exports=g},62054:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){if(r===void 0&&(r=!1),t.length===0)return t;if(t.length===1)return r?t[0][o]+=(a+g)/2:t[0][o]=(a+g)/2,t;var s=Math.abs(a-g)/(t.length-1),e;if(r)for(e=0;e<t.length;e++)t[e][o]+=e*s+g;else for(e=0;e<t.length;e++)t[e][o]=e*s+g;return t};v.exports=E},79815:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){for(var o=0;o<t.length;o++)t[o].visible=!t[o].visible;return t};v.exports=E},39665:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       samme <samme.npm@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15994),g=function(a,r,s){s===void 0&&(s=0);for(var e=0;e<a.length;e++){var n=a[e];n.x=o(n.x,r.left-s,r.right+s),n.y=o(n.y,r.top-s,r.bottom+s)}return a};v.exports=g},61061:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AlignTo:t(11517),Angle:t(80318),Call:t(60757),GetFirst:t(69927),GetLast:t(32265),GridAlign:t(94420),IncAlpha:t(41721),IncX:t(67285),IncXY:t(9074),IncY:t(75222),PlaceOnCircle:t(22983),PlaceOnEllipse:t(95253),PlaceOnLine:t(88505),PlaceOnRectangle:t(41346),PlaceOnTriangle:t(11575),PlayAnimation:t(29953),PropertyValueInc:t(66979),PropertyValueSet:t(43967),RandomCircle:t(88926),RandomEllipse:t(33286),RandomLine:t(96e3),RandomRectangle:t(28789),RandomTriangle:t(97154),Rotate:t(20510),RotateAround:t(91051),RotateAroundDistance:t(76332),ScaleX:t(61619),ScaleXY:t(94868),ScaleY:t(95532),SetAlpha:t(8689),SetBlendMode:t(2645),SetDepth:t(32372),SetHitArea:t(85373),SetOrigin:t(81583),SetRotation:t(79939),SetScale:t(2699),SetScaleX:t(98739),SetScaleY:t(98476),SetScrollFactor:t(6207),SetScrollFactorX:t(6607),SetScrollFactorY:t(72248),SetTint:t(14036),SetVisible:t(50159),SetX:t(77597),SetXY:t(83194),SetY:t(67678),ShiftPosition:t(35850),Shuffle:t(8628),SmootherStep:t(21910),SmoothStep:t(21837),Spread:t(62054),ToggleVisible:t(79815),WrapInRectangle:t(39665)}},42099:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(74943),r=t(81957),s=t(41138),e=t(35154),n=t(90126),h=new g({initialize:function(l,f,u){this.manager=l,this.key=f,this.type="frame",this.frames=this.getFrames(l.textureManager,e(u,"frames",[]),e(u,"defaultTextureKey",null),e(u,"sortFrames",!0)),this.frameRate=e(u,"frameRate",null),this.duration=e(u,"duration",null),this.msPerFrame,this.skipMissedFrames=e(u,"skipMissedFrames",!0),this.delay=e(u,"delay",0),this.repeat=e(u,"repeat",0),this.repeatDelay=e(u,"repeatDelay",0),this.yoyo=e(u,"yoyo",!1),this.showBeforeDelay=e(u,"showBeforeDelay",!1),this.showOnStart=e(u,"showOnStart",!1),this.hideOnComplete=e(u,"hideOnComplete",!1),this.randomFrame=e(u,"randomFrame",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(a.PAUSE_ALL,this.pause,this),this.manager.on(a.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(i,l,f,u){f===null&&u===null?(i.frameRate=24,i.duration=24/l*1e3):f&&u===null?(i.duration=f,i.frameRate=l/(f/1e3)):(i.frameRate=u,i.duration=l/u*1e3),i.msPerFrame=1e3/i.frameRate},addFrame:function(i){return this.addFrameAt(this.frames.length,i)},addFrameAt:function(i,l){var f=this.getFrames(this.manager.textureManager,l);if(f.length>0){if(i===0)this.frames=f.concat(this.frames);else if(i===this.frames.length)this.frames=this.frames.concat(f);else{var u=this.frames.slice(0,i),d=this.frames.slice(i);this.frames=u.concat(f,d)}this.updateFrameSequence()}return this},checkFrame:function(i){return i>=0&&i<this.frames.length},getFirstTick:function(i){i.accumulator=0,i.nextTick=i.currentFrame.duration?i.currentFrame.duration:i.msPerFrame},getFrameAt:function(i){return this.frames[i]},getFrames:function(i,l,f,u){u===void 0&&(u=!0);var d=[],p,m,T=1,y,S;if(typeof l=="string"){if(S=l,!i.exists(S))return console.warn('Texture "%s" not found',S),d;var C=i.get(S),R=C.getFrameNames();u&&n(R),l=[],R.forEach(function(V){l.push({key:S,frame:V})})}if(!Array.isArray(l)||l.length===0)return d;for(y=0;y<l.length;y++){var I=l[y],L=e(I,"key",f);if(L){var w=e(I,"frame",0),O=i.getFrame(L,w);if(!O){console.warn('Texture "%s" not found',L);continue}m=new s(L,w,T,O),m.duration=e(I,"duration",0),m.isFirst=!p,p&&(p.nextFrame=m,m.prevFrame=p),d.push(m),p=m,T++}}if(d.length>0){m.isLast=!0,m.nextFrame=d[0],d[0].prevFrame=m;var B=1/(d.length-1);for(y=0;y<d.length;y++)d[y].progress=y*B}return d},getNextTick:function(i){i.accumulator-=i.nextTick,i.nextTick=i.currentFrame.duration?i.currentFrame.duration:i.msPerFrame},getFrameByProgress:function(i){return i=o(i,0,1),r(i,this.frames,"progress")},nextFrame:function(i){var l=i.currentFrame;l.isLast?i.yoyo?this.handleYoyoFrame(i,!1):i.repeatCounter>0?i.inReverse&&i.forward?i.forward=!1:this.repeatAnimation(i):i.complete():this.updateAndGetNextTick(i,l.nextFrame)},handleYoyoFrame:function(i,l){if(l||(l=!1),i.inReverse===!l&&i.repeatCounter>0){(i.repeatDelay===0||i.pendingRepeat)&&(i.forward=l),this.repeatAnimation(i);return}if(i.inReverse!==l&&i.repeatCounter===0){i.complete();return}i.forward=l;var f=l?i.currentFrame.nextFrame:i.currentFrame.prevFrame;this.updateAndGetNextTick(i,f)},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(i){var l=i.currentFrame;l.isFirst?i.yoyo?this.handleYoyoFrame(i,!0):i.repeatCounter>0?i.inReverse&&!i.forward?this.repeatAnimation(i):(i.forward=!0,this.repeatAnimation(i)):i.complete():this.updateAndGetNextTick(i,l.prevFrame)},updateAndGetNextTick:function(i,l){i.setCurrentFrame(l),this.getNextTick(i)},removeFrame:function(i){var l=this.frames.indexOf(i);return l!==-1&&this.removeFrameAt(l),this},removeFrameAt:function(i){return this.frames.splice(i,1),this.updateFrameSequence(),this},repeatAnimation:function(i){if(i._pendingStop===2){if(i._pendingStopValue===0)return i.stop();i._pendingStopValue--}i.repeatDelay>0&&!i.pendingRepeat?(i.pendingRepeat=!0,i.accumulator-=i.nextTick,i.nextTick+=i.repeatDelay):(i.repeatCounter--,i.forward?i.setCurrentFrame(i.currentFrame.nextFrame):i.setCurrentFrame(i.currentFrame.prevFrame),i.isPlaying&&(this.getNextTick(i),i.handleRepeat()))},toJSON:function(){var i={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showBeforeDelay:this.showBeforeDelay,showOnStart:this.showOnStart,randomFrame:this.randomFrame,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(l){i.frames.push(l.toJSON())}),i},updateFrameSequence:function(){for(var i=this.frames.length,l=1/(i-1),f,u=0;u<i;u++)f=this.frames[u],f.index=u+1,f.isFirst=!1,f.isLast=!1,f.progress=u*l,u===0?(f.isFirst=!0,i===1?(f.isLast=!0,f.nextFrame=f,f.prevFrame=f):(f.isLast=!1,f.prevFrame=this.frames[i-1],f.nextFrame=this.frames[u+1])):u===i-1&&i>1?(f.isLast=!0,f.prevFrame=this.frames[i-2],f.nextFrame=this.frames[0]):i>1&&(f.prevFrame=this.frames[u-1],f.nextFrame=this.frames[u+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(a.PAUSE_ALL,this.pause,this),this.manager.off(a.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var i=0;i<this.frames.length;i++)this.frames[i].destroy();this.frames=[],this.manager=null}});v.exports=h},41138:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n,h){h===void 0&&(h=!1),this.textureKey=r,this.textureFrame=s,this.index=e,this.frame=n,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=h},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});v.exports=g},60848:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42099),g=t(83419),a=t(90330),r=t(50792),s=t(74943),e=t(8443),n=t(95540),h=t(35154),i=t(36383),l=t(20283),f=t(41836),u=new g({Extends:r,initialize:function(p){r.call(this),this.game=p,this.textureManager=null,this.globalTimeScale=1,this.anims=new a,this.mixes=new a,this.paused=!1,this.name="AnimationManager",p.events.once(e.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(e.DESTROY,this.destroy,this)},addMix:function(d,p,m){var T=this.anims,y=this.mixes,S=typeof d=="string"?d:d.key,C=typeof p=="string"?p:p.key;if(T.has(S)&&T.has(C)){var R=y.get(S);R||(R={}),R[C]=m,y.set(S,R)}return this},removeMix:function(d,p){var m=this.mixes,T=typeof d=="string"?d:d.key,y=m.get(T);if(y)if(p){var S=typeof p=="string"?p:p.key;y.hasOwnProperty(S)&&delete y[S]}else p||m.delete(T);return this},getMix:function(d,p){var m=this.mixes,T=typeof d=="string"?d:d.key,y=typeof p=="string"?p:p.key,S=m.get(T);return S&&S.hasOwnProperty(y)?S[y]:0},add:function(d,p){return this.anims.has(d)?(console.warn("Animation key exists: "+d),this):(p.key=d,this.anims.set(d,p),this.emit(s.ADD_ANIMATION,d,p),this)},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,p,m){var T=[],y=this.game.cache.json.get(d);if(!y)return console.warn("No Aseprite data found for: "+d),T;var S=this,C=h(y,"meta",null),R=h(y,"frames",null);if(C&&R){var I=h(C,"frameTags",[]);I.forEach(function(L){var w=[],O=n(L,"name",null),B=n(L,"from",0),V=n(L,"to",0),b=n(L,"direction","forward");if(O&&(!p||p&&p.indexOf(O)>-1)){for(var X=0,K=B;K<=V;K++){var Q=K.toString(),U=R[Q];if(U){var W=n(U,"duration",i.MAX_SAFE_INTEGER);w.push({key:d,frame:Q,duration:W}),X+=W}}b==="reverse"&&(w=w.reverse());var F={key:O,frames:w,duration:X,yoyo:b==="pingpong"},G;m?m.anims&&(G=m.anims.create(F)):G=S.create(F),G&&T.push(G)}})}return T},create:function(d){var p=d.key,m=!1;return p&&(m=this.get(p),m?console.warn("AnimationManager key already exists: "+p):(m=new o(this,p,d),this.anims.set(p,m),this.emit(s.ADD_ANIMATION,p,m))),m},fromJSON:function(d,p){p===void 0&&(p=!1),p&&this.anims.clear(),typeof d=="string"&&(d=JSON.parse(d));var m=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var T=0;T<d.anims.length;T++)m.push(this.create(d.anims[T]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&d.type==="frame"&&m.push(this.create(d));return m},generateFrameNames:function(d,p){var m=h(p,"prefix",""),T=h(p,"start",0),y=h(p,"end",0),S=h(p,"suffix",""),C=h(p,"zeroPad",0),R=h(p,"outputArray",[]),I=h(p,"frames",!1);if(!this.textureManager.exists(d))return console.warn('Texture "%s" not found',d),R;var L=this.textureManager.get(d);if(!L)return R;var w;if(p)for(I||(I=l(T,y)),w=0;w<I.length;w++){var O=m+f(I[w],C,"0",1)+S;L.has(O)?R.push({key:d,frame:O}):console.warn('Frame "%s" not found in texture "%s"',O,d)}else for(I=L.getFrameNames(),w=0;w<I.length;w++)R.push({key:d,frame:I[w]});return R},generateFrameNumbers:function(d,p){var m=h(p,"start",0),T=h(p,"end",-1),y=h(p,"first",!1),S=h(p,"outputArray",[]),C=h(p,"frames",!1);if(!this.textureManager.exists(d))return console.warn('Texture "%s" not found',d),S;var R=this.textureManager.get(d);if(!R)return S;y&&R.has(y)&&S.push({key:d,frame:y}),C||(T===-1&&(T=R.frameTotal-2),C=l(m,T));for(var I=0;I<C.length;I++){var L=C[I];R.has(L)?S.push({key:d,frame:L}):console.warn('Frame "%s" not found in texture "%s"',L,d)}return S},get:function(d){return this.anims.get(d)},getAnimsFromTexture:function(d){for(var p=this.textureManager.get(d),m=p.key,T=this.anims.getArray(),y=[],S=0;S<T.length;S++)for(var C=T[S],R=C.frames,I=0;I<R.length;I++)if(R[I].textureKey===m){y.push(C.key);break}return y},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(s.PAUSE_ALL)),this},play:function(d,p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)p[m].anims.play(d);return this},staggerPlay:function(d,p,m,T){m===void 0&&(m=0),T===void 0&&(T=!0),Array.isArray(p)||(p=[p]);var y=p.length;T||y--;for(var S=0;S<p.length;S++){var C=m<0?Math.abs(m)*(y-S):m*S;p[S].anims.playAfterDelay(d,C)}return this},remove:function(d){var p=this.get(d);return p&&(this.emit(s.REMOVE_ANIMATION,d,p),this.anims.delete(d),this.removeMix(d)),p},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(s.RESUME_ALL)),this},toJSON:function(d){var p={anims:[],globalTimeScale:this.globalTimeScale};return d!==void 0&&d!==""?p.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(m,T){p.anims.push(T.toJSON())}),p},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});v.exports=u},9674:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42099),g=t(30976),a=t(83419),r=t(90330),s=t(74943),e=t(95540),n=new a({initialize:function(i){this.parent=i,this.animationManager=i.scene.sys.anims,this.animationManager.on(s.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.randomFrame=!1,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showBeforeDelay=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(h){var i=this.parent;if(h===void 0)return this.nextAnimsQueue.length=0,this.nextAnim=null,i;Array.isArray(h)||(h=[h]);for(var l=0;l<h.length;l++){var f=h[l];this.nextAnim?this.nextAnimsQueue.push(f):this.nextAnim=f}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(h){this.isPlaying&&this.stop();var i=this.animationManager,l=typeof h=="string"?h:e(h,"key",null),f=this.exists(l)?this.get(l):i.get(l);if(!f)console.warn("Missing animation: "+l);else{this.currentAnim=f;var u=f.getTotalFrames(),d=e(h,"frameRate",f.frameRate),p=e(h,"duration",f.duration);f.calculateDuration(this,u,p,d),this.delay=e(h,"delay",f.delay),this.repeat=e(h,"repeat",f.repeat),this.repeatDelay=e(h,"repeatDelay",f.repeatDelay),this.yoyo=e(h,"yoyo",f.yoyo),this.showBeforeDelay=e(h,"showBeforeDelay",f.showBeforeDelay),this.showOnStart=e(h,"showOnStart",f.showOnStart),this.hideOnComplete=e(h,"hideOnComplete",f.hideOnComplete),this.skipMissedFrames=e(h,"skipMissedFrames",f.skipMissedFrames),this.randomFrame=e(h,"randomFrame",f.randomFrame),this.timeScale=e(h,"timeScale",this.timeScale);var m=e(h,"startFrame",0);m>u&&(m=0),this.randomFrame&&(m=g(0,u-1));var T=f.frames[m];m===0&&!this.forward&&(T=f.getLastFrame()),this.currentFrame=T}return this.parent},pause:function(h){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),h!==void 0&&this.setCurrentFrame(h),this.parent},resume:function(h){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),h!==void 0&&this.setCurrentFrame(h),this.parent},playAfterDelay:function(h,i){if(!this.isPlaying)this.delayCounter=i,this.play(h,!0);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.nextAnim=h,this._pendingStop=1,this._pendingStopValue=i}return this.parent},playAfterRepeat:function(h,i){if(i===void 0&&(i=1),!this.isPlaying)this.play(h);else{var l=this.nextAnim,f=this.nextAnimsQueue;l&&f.unshift(l),this.repeatCounter!==-1&&i>this.repeatCounter&&(i=this.repeatCounter),this.nextAnim=h,this._pendingStop=2,this._pendingStopValue=i}return this.parent},play:function(h,i){i===void 0&&(i=!1);var l=this.currentAnim,f=this.parent,u=typeof h=="string"?h:h.key;if(i&&this.isPlaying&&l.key===u)return f;if(l&&this.isPlaying){var d=this.animationManager.getMix(l.key,h);if(d>0)return this.playAfterDelay(h,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(h)},playReverse:function(h,i){i===void 0&&(i=!1);var l=typeof h=="string"?h:h.key;return i&&this.isPlaying&&this.currentAnim.key===l?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(h))},startAnimation:function(h){this.load(h);var i=this.currentAnim,l=this.parent;return i&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat,i.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,this.delayCounter===0?this.handleStart():this.showBeforeDelay&&this.setCurrentFrame(this.currentFrame)),l},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(s.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(s.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(s.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(s.ANIMATION_COMPLETE,s.ANIMATION_COMPLETE_KEY)},emitEvents:function(h,i){var l=this.currentAnim;if(l){var f=this.currentFrame,u=this.parent,d=f.textureFrame;u.emit(h,l,f,u,d),i&&u.emit(i+l.key,l,f,u,d)}},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var h=this.currentFrame;if(!h)return 0;var i=h.progress;return this.inReverse&&(i*=-1),i},setProgress:function(h){return this.forward||(h=1-h),this.setCurrentFrame(this.currentAnim.getFrameByProgress(h)),this.parent},setRepeat:function(h){return this.repeatCounter=h===-1?Number.MAX_VALUE:h,this.parent},globalRemove:function(h,i){i===void 0&&(i=this.currentAnim),this.isPlaying&&i.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(h,i){h===void 0&&(h=!1),i===void 0&&(i=!1);var l=this.currentAnim,f=this.parent;return l?(i&&(this.repeatCounter=this.repeat===-1?Number.MAX_VALUE:this.repeat),l.getFirstTick(this),this.emitEvents(s.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!h,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(l.frames[0]),this.parent):f},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var h=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(h)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.delayCounter=0,this.currentAnim&&this.handleStop(),this.nextAnim){var h=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(h)}return this.parent},stopAfterDelay:function(h){return this._pendingStop=1,this._pendingStopValue=h,this.parent},stopAfterRepeat:function(h){return h===void 0&&(h=1),this.repeatCounter!==-1&&h>this.repeatCounter&&(h=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=h,this.parent},stopOnFrame:function(h){return this._pendingStop=3,this._pendingStopValue=h,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(h,i){var l=this.currentAnim;if(!(!this.isPlaying||!l||l.paused)){if(this.accumulator+=i*this.timeScale*this.animationManager.globalTimeScale,this._pendingStop===1&&(this._pendingStopValue-=i,this._pendingStopValue<=0))return this.stop();if(!this.hasStarted)this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart());else if(this.accumulator>=this.nextTick&&(this.forward?l.nextFrame(this):l.previousFrame(this),this.isPlaying&&this._pendingStop===0&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var f=0;do this.forward?l.nextFrame(this):l.previousFrame(this),f++;while(this.isPlaying&&this.accumulator>this.nextTick&&f<60)}}},setCurrentFrame:function(h){var i=this.parent;return this.currentFrame=h,i.texture=h.frame.texture,i.frame=h.frame,i.isCropped&&i.frame.updateCropUVs(i._crop,i.flipX,i.flipY),h.setAlpha&&(i.alpha=h.alpha),i.setSizeToFrame(),i._originComponent&&(h.frame.customPivot?i.setOrigin(h.frame.pivotX,h.frame.pivotY):i.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(s.ANIMATION_UPDATE),this._pendingStop===3&&this._pendingStopValue===h&&this.stop()),i},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(h){return this.anims?this.anims.get(h):null},exists:function(h){return this.anims?this.anims.has(h):!1},create:function(h){var i=h.key,l=!1;return i&&(l=this.get(i),l?console.warn("Animation key already exists: "+i):(l=new o(this,i,h),this.anims||(this.anims=new r),this.anims.set(i,l))),l},createFromAseprite:function(h,i){return this.animationManager.createFromAseprite(h,i,this.parent)},generateFrameNames:function(h,i){return this.animationManager.generateFrameNames(h,i)},generateFrameNumbers:function(h,i){return this.animationManager.generateFrameNumbers(h,i)},remove:function(h){var i=this.get(h);return i&&(this.currentAnim===i&&this.stop(),this.anims.delete(h)),i},destroy:function(){this.animationManager.off(s.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});v.exports=n},57090:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="add"},25312:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationcomplete"},89580:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationcomplete-"},52860:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationrepeat"},63850:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationrestart"},99085:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationstart"},28087:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationstop"},1794:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="animationupdate"},52562:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pauseall"},57953:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="remove"},68339:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resumeall"},74943:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ADD_ANIMATION:t(57090),ANIMATION_COMPLETE:t(25312),ANIMATION_COMPLETE_KEY:t(89580),ANIMATION_REPEAT:t(52860),ANIMATION_RESTART:t(63850),ANIMATION_START:t(99085),ANIMATION_STOP:t(28087),ANIMATION_UPDATE:t(1794),PAUSE_ALL:t(52562),REMOVE_ANIMATION:t(57953),RESUME_ALL:t(68339)}},60421:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Animation:t(42099),AnimationFrame:t(41138),AnimationManager:t(60848),AnimationState:t(9674),Events:t(74943)}},2161:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(90330),a=t(50792),r=t(24736),s=new o({initialize:function(){this.entries=new g,this.events=new a},add:function(e,n){return this.entries.set(e,n),this.events.emit(r.ADD,this,e,n),this},has:function(e){return this.entries.has(e)},exists:function(e){return this.entries.has(e)},get:function(e){return this.entries.get(e)},remove:function(e){var n=this.get(e);return n&&(this.entries.delete(e),this.events.emit(r.REMOVE,this,e,n.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});v.exports=s},24047:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2161),g=t(83419),a=t(8443),r=new g({initialize:function(e){this.game=e,this.binary=new o,this.bitmapFont=new o,this.json=new o,this.physics=new o,this.shader=new o,this.audio=new o,this.video=new o,this.text=new o,this.html=new o,this.obj=new o,this.tilemap=new o,this.xml=new o,this.custom={},this.game.events.once(a.DESTROY,this.destroy,this)},addCustom:function(s){return this.custom.hasOwnProperty(s)||(this.custom[s]=new o),this.custom[s]},destroy:function(){for(var s=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<s.length;e++)this[s[e]].destroy(),this[s[e]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});v.exports=r},51464:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="add"},59261:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="remove"},24736:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ADD:t(51464),REMOVE:t(59261)}},83388:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BaseCache:t(2161),CacheManager:t(24047),Events:t(24736)}},71911:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(39506),r=t(50792),s=t(19715),e=t(87841),n=t(61340),h=t(80333),i=t(26099),l=new o({Extends:r,Mixins:[g.AlphaSingle,g.Visible],initialize:function(u,d,p,m){u===void 0&&(u=0),d===void 0&&(d=0),p===void 0&&(p=0),m===void 0&&(m=0),r.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new e,this.dirty=!0,this._x=u,this._y=d,this._width=p,this._height=m,this._bounds=new e,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new n,this.transparent=!0,this.backgroundColor=h("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new i(p/2,m/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[],this.isSceneCamera=!0},addToRenderList:function(f){this.renderList.push(f)},setOrigin:function(f,u){return f===void 0&&(f=.5),u===void 0&&(u=f),this.originX=f,this.originY=u,this},getScroll:function(f,u,d){d===void 0&&(d=new i);var p=this.width*.5,m=this.height*.5;return d.x=f-p,d.y=u-m,this.useBounds&&(d.x=this.clampX(d.x),d.y=this.clampY(d.y)),d},centerOnX:function(f){var u=this.width*.5;return this.midPoint.x=f,this.scrollX=f-u,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(f){var u=this.height*.5;return this.midPoint.y=f,this.scrollY=f-u,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(f,u){return this.centerOnX(f),this.centerOnY(u),this},centerToBounds:function(){if(this.useBounds){var f=this._bounds,u=this.width*.5,d=this.height*.5;this.midPoint.set(f.centerX,f.centerY),this.scrollX=f.centerX-u,this.scrollY=f.centerY-d}return this},centerToSize:function(){return this.scrollX=this.width*.5,this.scrollY=this.height*.5,this},cull:function(f){if(this.disableCull)return f;var u=this.matrix.matrix,d=u[0],p=u[1],m=u[2],T=u[3],y=d*T-p*m;if(!y)return f;var S=u[4],C=u[5],R=this.scrollX,I=this.scrollY,L=this.width,w=this.height,O=this.y,B=O+w,V=this.x,b=V+L,X=this.culledObjects,K=f.length;y=1/y,X.length=0;for(var Q=0;Q<K;++Q){var U=f[Q];if(!U.hasOwnProperty("width")||U.parentContainer){X.push(U);continue}var W=U.width,F=U.height,G=U.x-R*U.scrollFactorX-W*U.originX,z=U.y-I*U.scrollFactorY-F*U.originY,Y=G*d+z*m+S,$=G*p+z*T+C,j=(G+W)*d+(z+F)*m+S,Z=(G+W)*p+(z+F)*T+C;j>V&&Y<b&&Z>O&&$<B&&X.push(U)}return X},getWorldPoint:function(f,u,d){d===void 0&&(d=new i);var p=this.matrix.matrix,m=p[0],T=p[1],y=p[2],S=p[3],C=p[4],R=p[5],I=m*S-T*y;if(!I)return d.x=f,d.y=u,d;I=1/I;var L=S*I,w=-T*I,O=-y*I,B=m*I,V=(y*R-S*C)*I,b=(T*C-m*R)*I,X=Math.cos(this.rotation),K=Math.sin(this.rotation),Q=this.zoomX,U=this.zoomY,W=this.scrollX,F=this.scrollY,G=f+(W*X-F*K)*Q,z=u+(W*K+F*X)*U;return d.x=G*L+z*O+V,d.y=G*w+z*B+b,d},ignore:function(f){var u=this.id;Array.isArray(f)||(f=[f]);for(var d=0;d<f.length;d++){var p=f[d];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=u}return this},preRender:function(){this.renderList.length=0;var f=this.width,u=this.height,d=f*.5,p=u*.5,m=this.zoomX,T=this.zoomY,y=this.matrix,S=f*this.originX,C=u*this.originY,R=this.scrollX,I=this.scrollY;this.useBounds&&(R=this.clampX(R),I=this.clampY(I)),this.scrollX=R,this.scrollY=I;var L=R+d,w=I+p;this.midPoint.set(L,w);var O=f/m,B=u/T;this.worldView.setTo(L-O/2,w-B/2,O,B),y.applyITRS(this.x+S,this.y+C,this.rotation,m,T),y.translate(-S,-C)},clampX:function(f){var u=this._bounds,d=this.displayWidth,p=u.x+(d-this.width)/2,m=Math.max(p,p+u.width-d);return f<p?f=p:f>m&&(f=m),f},clampY:function(f){var u=this._bounds,d=this.displayHeight,p=u.y+(d-this.height)/2,m=Math.max(p,p+u.height-d);return f<p?f=p:f>m&&(f=m),f},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(f){return f===void 0&&(f=0),this.rotation=a(f),this},setBackgroundColor:function(f){return f===void 0&&(f="rgba(0,0,0,0)"),this.backgroundColor=h(f),this.transparent=this.backgroundColor.alpha===0,this},setBounds:function(f,u,d,p,m){return m===void 0&&(m=!1),this._bounds.setTo(f,u,d,p),this.dirty=!0,this.useBounds=!0,m?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(f){f===void 0&&(f=new e);var u=this._bounds;return f.setTo(u.x,u.y,u.width,u.height),f},setName:function(f){return f===void 0&&(f=""),this.name=f,this},setPosition:function(f,u){return u===void 0&&(u=f),this.x=f,this.y=u,this},setRotation:function(f){return f===void 0&&(f=0),this.rotation=f,this},setRoundPixels:function(f){return this.roundPixels=f,this},setScene:function(f,u){u===void 0&&(u=!0),this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=f,this.isSceneCamera=u;var d=f.sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(f,u){return u===void 0&&(u=f),this.scrollX=f,this.scrollY=u,this},setSize:function(f,u){return u===void 0&&(u=f),this.width=f,this.height=u,this},setViewport:function(f,u,d,p){return this.x=f,this.y=u,this.width=d,this.height=p,this},setZoom:function(f,u){return f===void 0&&(f=1),u===void 0&&(u=f),f===0&&(f=.001),u===0&&(u=.001),this.zoomX=f,this.zoomY=u,this},setMask:function(f,u){return u===void 0&&(u=!0),this.mask=f,this._maskCamera=u?this.cameraManager.default:this,this},clearMask:function(f){return f===void 0&&(f=!1),f&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var f={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(f.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),f},update:function(){},setIsSceneCamera:function(f){return this.isSceneCamera=f,this},updateSystem:function(){if(!(!this.scaleManager||!this.isSceneCamera)){var f=this._x!==0||this._y!==0||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,u=this.sceneManager;f&&!this._customViewport?u.customViewports++:!f&&this._customViewport&&u.customViewports--,this.dirty=!0,this._customViewport=f}},destroy:function(){this.emit(s.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(f){this._x=f,this.updateSystem()}},y:{get:function(){return this._y},set:function(f){this._y=f,this.updateSystem()}},width:{get:function(){return this._width},set:function(f){this._width=f,this.updateSystem()}},height:{get:function(){return this._height},set:function(f){this._height=f,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(f){f!==this._scrollX&&(this._scrollX=f,this.dirty=!0)}},scrollY:{get:function(){return this._scrollY},set:function(f){f!==this._scrollY&&(this._scrollY=f,this.dirty=!0)}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(f){this._zoomX=f,this._zoomY=f,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(f){this._zoomX=f,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(f){this._zoomY=f,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(f){this._rotation=f,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});v.exports=l},38058:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71911),g=t(67502),a=t(45319),r=t(83419),s=t(31401),e=t(20052),n=t(19715),h=t(28915),i=t(87841),l=t(26099),f=new r({Extends:o,Mixins:[s.PostPipeline],initialize:function(d,p,m,T){o.call(this,d,p,m,T),this.initPostPipeline(),this.inputEnabled=!0,this.fadeEffect=new e.Fade(this),this.flashEffect=new e.Flash(this),this.shakeEffect=new e.Shake(this),this.panEffect=new e.Pan(this),this.rotateToEffect=new e.RotateTo(this),this.zoomEffect=new e.Zoom(this),this.lerp=new l(1,1),this.followOffset=new l,this.deadzone=null,this._follow=null},setDeadzone:function(u,d){if(u===void 0)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=u,this.deadzone.height=d):this.deadzone=new i(0,0,u,d),this._follow){var p=this.width/2,m=this.height/2,T=this._follow.x-this.followOffset.x,y=this._follow.y-this.followOffset.y;this.midPoint.set(T,y),this.scrollX=T-p,this.scrollY=y-m}g(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(u,d,p,m,T,y){return this.fadeEffect.start(!1,u,d,p,m,!0,T,y)},fadeOut:function(u,d,p,m,T,y){return this.fadeEffect.start(!0,u,d,p,m,!0,T,y)},fadeFrom:function(u,d,p,m,T,y,S){return this.fadeEffect.start(!1,u,d,p,m,T,y,S)},fade:function(u,d,p,m,T,y,S){return this.fadeEffect.start(!0,u,d,p,m,T,y,S)},flash:function(u,d,p,m,T,y,S){return this.flashEffect.start(u,d,p,m,T,y,S)},shake:function(u,d,p,m,T){return this.shakeEffect.start(u,d,p,m,T)},pan:function(u,d,p,m,T,y,S){return this.panEffect.start(u,d,p,m,T,y,S)},rotateTo:function(u,d,p,m,T,y,S){return this.rotateToEffect.start(u,d,p,m,T,y,S)},zoomTo:function(u,d,p,m,T,y){return this.zoomEffect.start(u,d,p,m,T,y)},preRender:function(){this.renderList.length=0;var u=this.width,d=this.height,p=u*.5,m=d*.5,T=this.zoom,y=this.matrix,S=u*this.originX,C=d*this.originY,R=this._follow,I=this.deadzone,L=this.scrollX,w=this.scrollY;I&&g(I,this.midPoint.x,this.midPoint.y);var O=!1;if(R&&!this.panEffect.isRunning){var B=this.lerp,V=R.x-this.followOffset.x,b=R.y-this.followOffset.y;I?(V<I.x?L=h(L,L-(I.x-V),B.x):V>I.right&&(L=h(L,L+(V-I.right),B.x)),b<I.y?w=h(w,w-(I.y-b),B.y):b>I.bottom&&(w=h(w,w+(b-I.bottom),B.y))):(L=h(L,V-S,B.x),w=h(w,b-C,B.y)),O=!0}this.useBounds&&(L=this.clampX(L),w=this.clampY(w)),this.scrollX=L,this.scrollY=w;var X=L+p,K=w+m;this.midPoint.set(X,K);var Q=u/T,U=d/T,W=Math.floor(X-Q/2),F=Math.floor(K-U/2);this.worldView.setTo(W,F,Q,U),y.applyITRS(Math.floor(this.x+S),Math.floor(this.y+C),this.rotation,T,T),y.translate(-S,-C),this.shakeEffect.preRender(),O&&this.emit(n.FOLLOW_UPDATE,this,R)},setLerp:function(u,d){return u===void 0&&(u=1),d===void 0&&(d=u),this.lerp.set(u,d),this},setFollowOffset:function(u,d){return u===void 0&&(u=0),d===void 0&&(d=0),this.followOffset.set(u,d),this},startFollow:function(u,d,p,m,T,y){d===void 0&&(d=!1),p===void 0&&(p=1),m===void 0&&(m=p),T===void 0&&(T=0),y===void 0&&(y=T),this._follow=u,this.roundPixels=d,p=a(p,0,1),m=a(m,0,1),this.lerp.set(p,m),this.followOffset.set(T,y);var S=this.width/2,C=this.height/2,R=u.x-T,I=u.y-y;return this.midPoint.set(R,I),this.scrollX=R-S,this.scrollY=I-C,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(u,d){this.visible&&(this.rotateToEffect.update(u,d),this.panEffect.update(u,d),this.zoomEffect.update(u,d),this.shakeEffect.update(u,d),this.flashEffect.update(u,d),this.fadeEffect.update(u,d))},destroy:function(){this.resetFX(),o.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});v.exports=f},32743:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(38058),g=t(83419),a=t(95540),r=t(37277),s=t(37303),e=t(97480),n=t(44594),h=new g({initialize:function(l){this.scene=l,this.systems=l.sys,this.roundPixels=l.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,l.sys.events.once(n.BOOT,this.boot,this),l.sys.events.on(n.START,this.start,this)},boot:function(){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new o(0,0,i.scale.width,i.scale.height).setScene(this.scene),i.game.scale.on(e.RESIZE,this.onResize,this),this.systems.events.once(n.DESTROY,this.destroy,this)},start:function(){if(!this.main){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0]}var l=this.systems.events;l.on(n.UPDATE,this.update,this),l.once(n.SHUTDOWN,this.shutdown,this)},add:function(i,l,f,u,d,p){i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=this.scene.sys.scale.width),u===void 0&&(u=this.scene.sys.scale.height),d===void 0&&(d=!1),p===void 0&&(p="");var m=new o(i,l,f,u);return m.setName(p),m.setScene(this.scene),m.setRoundPixels(this.roundPixels),m.id=this.getNextID(),this.cameras.push(m),d&&(this.main=m),m},addExisting:function(i,l){l===void 0&&(l=!1);var f=this.cameras.indexOf(i);return f===-1?(i.id=this.getNextID(),i.setRoundPixels(this.roundPixels),this.cameras.push(i),l&&(this.main=i),i):null},getNextID:function(){for(var i=this.cameras,l=1,f=0;f<32;f++){for(var u=!1,d=0;d<i.length;d++){var p=i[d];if(p&&p.id===l){u=!0;continue}}if(u)l=l<<1;else return l}return 0},getTotal:function(i){i===void 0&&(i=!1);for(var l=0,f=this.cameras,u=0;u<f.length;u++){var d=f[u];(!i||i&&d.visible)&&l++}return l},fromJSON:function(i){Array.isArray(i)||(i=[i]);for(var l=this.scene.sys.scale.width,f=this.scene.sys.scale.height,u=0;u<i.length;u++){var d=i[u],p=a(d,"x",0),m=a(d,"y",0),T=a(d,"width",l),y=a(d,"height",f),S=this.add(p,m,T,y);S.name=a(d,"name",""),S.zoom=a(d,"zoom",1),S.rotation=a(d,"rotation",0),S.scrollX=a(d,"scrollX",0),S.scrollY=a(d,"scrollY",0),S.roundPixels=a(d,"roundPixels",!1),S.visible=a(d,"visible",!0);var C=a(d,"backgroundColor",!1);C&&S.setBackgroundColor(C);var R=a(d,"bounds",null);if(R){var I=a(R,"x",0),L=a(R,"y",0),w=a(R,"width",l),O=a(R,"height",f);S.setBounds(I,L,w,O)}}return this},getCamera:function(i){for(var l=this.cameras,f=0;f<l.length;f++)if(l[f].name===i)return l[f];return null},getCamerasBelowPointer:function(i){for(var l=this.cameras,f=i.x,u=i.y,d=[],p=0;p<l.length;p++){var m=l[p];m.visible&&m.inputEnabled&&s(m,f,u)&&d.unshift(m)}return d},remove:function(i,l){l===void 0&&(l=!0),Array.isArray(i)||(i=[i]);for(var f=0,u=this.cameras,d=0;d<i.length;d++){var p=u.indexOf(i[d]);p!==-1&&(l?u[p].destroy():u[p].renderList=[],u.splice(p,1),f++)}return!this.main&&u[0]&&(this.main=u[0]),f},render:function(i,l){for(var f=this.scene,u=this.cameras,d=0;d<u.length;d++){var p=u[d];if(p.visible&&p.alpha>0){p.preRender();var m=this.getVisibleChildren(l.getChildren(),p);i.render(f,m,p)}}},getVisibleChildren:function(i,l){return i.filter(function(f){return f.willRender(l)})},resetAll:function(){for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(i,l){for(var f=0;f<this.cameras.length;f++)this.cameras[f].update(i,l)},onResize:function(i,l,f,u,d){for(var p=0;p<this.cameras.length;p++){var m=this.cameras[p];m._x===0&&m._y===0&&m._width===u&&m._height===d&&m.setSize(l.width,l.height)}},resize:function(i,l){for(var f=0;f<this.cameras.length;f++)this.cameras[f].setSize(i,l)},shutdown:function(){this.main=void 0;for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();this.cameras=[];var l=this.systems.events;l.off(n.UPDATE,this.update,this),l.off(n.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.systems.events.off(n.START,this.start,this),this.systems.events.off(n.DESTROY,this.destroy,this),this.systems.game.scale.off(e.RESIZE,this.onResize,this),this.scene=null,this.systems=null}});r.register("CameraManager",h,"cameras"),v.exports=h},5020:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),r=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(s,e,n,h,i,l,f,u){if(s===void 0&&(s=!0),e===void 0&&(e=1e3),n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=!1),f===void 0&&(f=null),u===void 0&&(u=this.camera.scene),!l&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=s,this.progress=0,this.red=n,this.green=h,this.blue=i,this.alpha=s?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=f,this._onUpdateScope=u;var d=s?a.FADE_OUT_START:a.FADE_IN_START;return this.camera.emit(d,this.camera,this,e,n,h,i),this.camera},update:function(s,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(s){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return s.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",s.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(s,e){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,h=this.red/255,i=this.green/255,l=this.blue/255;return s.drawFillRect(n.x,n.y,n.width,n.height,e(l,i,h,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var s=this.direction?a.FADE_OUT_COMPLETE:a.FADE_IN_COMPLETE;this.camera.emit(s,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=r},10662:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),r=new g({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=1,this.progress=0,this._elapsed=0,this._alpha,this._onUpdate,this._onUpdateScope},start:function(s,e,n,h,i,l,f){return s===void 0&&(s=250),e===void 0&&(e=255),n===void 0&&(n=255),h===void 0&&(h=255),i===void 0&&(i=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene),!i&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=s,this.progress=0,this.red=e,this.green=n,this.blue=h,this._alpha=this.alpha,this._elapsed=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(a.FLASH_START,this.camera,this,s,e,n,h),this.camera)},update:function(s,e){this.isRunning&&(this._elapsed+=e,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this._alpha*(1-this.progress):this.effectComplete())},postRenderCanvas:function(s){if(!this.isRunning)return!1;var e=this.camera;return s.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",s.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(s,e){if(!this.isRunning)return!1;var n=this.camera,h=this.red/255,i=this.green/255,l=this.blue/255;return s.drawFillRect(n.x,n.y,n.width,n.height,e(l,i,h,1),this.alpha),!0},effectComplete:function(){this.alpha=this._alpha,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=r},20359:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(62640),r=t(19715),s=t(26099),e=new g({initialize:function(h){this.camera=h,this.isRunning=!1,this.duration=0,this.source=new s,this.current=new s,this.destination=new s,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(n,h,i,l,f,u,d){i===void 0&&(i=1e3),l===void 0&&(l=a.Linear),f===void 0&&(f=!1),u===void 0&&(u=null),d===void 0&&(d=this.camera.scene);var p=this.camera;return!f&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(n,h),p.getScroll(n,h,this.current),typeof l=="string"&&a.hasOwnProperty(l)?this.ease=a[l]:typeof l=="function"&&(this.ease=l),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=d,this.camera.emit(r.PAN_START,this.camera,this,i,n,h)),p},update:function(n,h){if(this.isRunning){this._elapsed+=h;var i=o(this._elapsed/this.duration,0,1);this.progress=i;var l=this.camera;if(this._elapsed<this.duration){var f=this.ease(i);l.getScroll(this.destination.x,this.destination.y,this.current);var u=this.source.x+(this.current.x-this.source.x)*f,d=this.source.y+(this.current.y-this.source.y)*f;l.setScroll(u,d),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,i,u,d)}else l.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,l,i,l.scrollX,l.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});v.exports=e},34208:(v,E,t)=>{/**
 * @author       Jason Nicholls <nicholls.jason@gmail.com>
 * @copyright    2018 Photon Storm Ltd.
 * @license      {@link https://github.com/photonstorm/phaser/blob/master/license.txt|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),r=t(62640),s=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(e,n,h,i,l,f,u){h===void 0&&(h=1e3),i===void 0&&(i=r.Linear),l===void 0&&(l=!1),f===void 0&&(f=null),u===void 0&&(u=this.camera.scene),n===void 0&&(n=!1),this.shortestPath=n;var d=e;e<0?(d=-1*e,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;d=d-Math.floor(d/p)*p;var m=this.camera;if(!l&&this.isRunning)return m;if(this.isRunning=!0,this.duration=h,this.progress=0,this.source=m.rotation,this.destination=d,typeof i=="string"&&r.hasOwnProperty(i)?this.ease=r[i]:typeof i=="function"&&(this.ease=i),this._elapsed=0,this._onUpdate=f,this._onUpdateScope=u,this.shortestPath){var T=0,y=0;this.destination>this.source?T=Math.abs(this.destination-this.source):T=Math.abs(this.destination+p)-this.source,this.source>this.destination?y=Math.abs(this.source-this.destination):y=Math.abs(this.source+p)-this.destination,T<y?this.clockwise=!0:T>y&&(this.clockwise=!1)}return this.camera.emit(a.ROTATE_START,this.camera,this,h,d),m},update:function(e,n){if(this.isRunning){this._elapsed+=n;var h=o(this._elapsed/this.duration,0,1);this.progress=h;var i=this.camera;if(this._elapsed<this.duration){var l=this.ease(h);this.current=i.rotation;var f=0,u=360*Math.PI/180,d=this.destination,p=this.current;this.clockwise===!1&&(d=this.current,p=this.destination),d>=p?f=Math.abs(d-p):f=Math.abs(d+u)-p;var m=0;this.clockwise?m=i.rotation+f*l:m=i.rotation-f*l,i.rotation=m,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,h,m)}else i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,h,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});v.exports=s},30330:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(19715),r=t(26099),s=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.intensity=new r,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(e,n,h,i,l){return e===void 0&&(e=100),n===void 0&&(n=.05),h===void 0&&(h=!1),i===void 0&&(i=null),l===void 0&&(l=this.camera.scene),!h&&this.isRunning?this.camera:(this.isRunning=!0,this.duration=e,this.progress=0,typeof n=="number"?this.intensity.set(n):this.intensity.set(n.x,n.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=i,this._onUpdateScope=l,this.camera.emit(a.SHAKE_START,this.camera,this,e,n),this.camera)},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(e,n){if(this.isRunning)if(this._elapsed+=n,this.progress=o(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var h=this.intensity,i=this.camera.width,l=this.camera.height,f=this.camera.zoom;this._offsetX=(Math.random()*h.x*i*2-h.x*i)*f,this._offsetY=(Math.random()*h.y*l*2-h.y*l)*f,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(a.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});v.exports=s},45641:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(62640),r=t(19715),s=new g({initialize:function(n){this.camera=n,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(e,n,h,i,l,f){n===void 0&&(n=1e3),h===void 0&&(h=a.Linear),i===void 0&&(i=!1),l===void 0&&(l=null),f===void 0&&(f=this.camera.scene);var u=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source=u.zoom,this.destination=e,typeof h=="string"&&a.hasOwnProperty(h)?this.ease=a[h]:typeof h=="function"&&(this.ease=h),this._elapsed=0,this._onUpdate=l,this._onUpdateScope=f,this.camera.emit(r.ZOOM_START,this.camera,this,n,e)),u},update:function(e,n){this.isRunning&&(this._elapsed+=n,this.progress=o(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(r.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});v.exports=s},20052:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Fade:t(5020),Flash:t(10662),Pan:t(20359),Shake:t(30330),RotateTo:t(34208),Zoom:t(45641)}},16438:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="cameradestroy"},32726:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerafadeincomplete"},87807:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerafadeinstart"},45917:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerafadeoutcomplete"},95666:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerafadeoutstart"},47056:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="cameraflashcomplete"},91261:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="cameraflashstart"},45047:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="followupdate"},81927:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerapancomplete"},74264:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerapanstart"},54419:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="postrender"},79330:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="prerender"},93183:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerarotatecomplete"},80112:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerarotatestart"},62252:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerashakecomplete"},86017:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerashakestart"},539:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerazoomcomplete"},51892:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="camerazoomstart"},19715:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={DESTROY:t(16438),FADE_IN_COMPLETE:t(32726),FADE_IN_START:t(87807),FADE_OUT_COMPLETE:t(45917),FADE_OUT_START:t(95666),FLASH_COMPLETE:t(47056),FLASH_START:t(91261),FOLLOW_UPDATE:t(45047),PAN_COMPLETE:t(81927),PAN_START:t(74264),POST_RENDER:t(54419),PRE_RENDER:t(79330),ROTATE_COMPLETE:t(93183),ROTATE_START:t(80112),SHAKE_COMPLETE:t(62252),SHAKE_START:t(86017),ZOOM_COMPLETE:t(539),ZOOM_START:t(51892)}},87969:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Camera:t(38058),BaseCamera:t(71911),CameraManager:t(32743),Effects:t(20052),Events:t(19715)}},63091:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(35154),a=new o({initialize:function(s){this.camera=g(s,"camera",null),this.left=g(s,"left",null),this.right=g(s,"right",null),this.up=g(s,"up",null),this.down=g(s,"down",null),this.zoomIn=g(s,"zoomIn",null),this.zoomOut=g(s,"zoomOut",null),this.zoomSpeed=g(s,"zoomSpeed",.01),this.minZoom=g(s,"minZoom",.001),this.maxZoom=g(s,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=g(s,"speed",null);typeof e=="number"?(this.speedX=e,this.speedY=e):(this.speedX=g(s,"speed.x",0),this.speedY=g(s,"speed.y",0)),this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var s=this.camera;this.up&&this.up.isDown?s.scrollY-=this.speedY*r|0:this.down&&this.down.isDown&&(s.scrollY+=this.speedY*r|0),this.left&&this.left.isDown?s.scrollX-=this.speedX*r|0:this.right&&this.right.isDown&&(s.scrollX+=this.speedX*r|0),this.zoomIn&&this.zoomIn.isDown?(s.zoom-=this.zoomSpeed,s.zoom<this.minZoom&&(s.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(s.zoom+=this.zoomSpeed,s.zoom>this.maxZoom&&(s.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});v.exports=a},58818:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(35154),a=new o({initialize:function(s){this.camera=g(s,"camera",null),this.left=g(s,"left",null),this.right=g(s,"right",null),this.up=g(s,"up",null),this.down=g(s,"down",null),this.zoomIn=g(s,"zoomIn",null),this.zoomOut=g(s,"zoomOut",null),this.zoomSpeed=g(s,"zoomSpeed",.01),this.minZoom=g(s,"minZoom",.001),this.maxZoom=g(s,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=g(s,"acceleration",null);typeof e=="number"?(this.accelX=e,this.accelY=e):(this.accelX=g(s,"acceleration.x",0),this.accelY=g(s,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=g(s,"drag",null);typeof n=="number"?(this.dragX=n,this.dragY=n):(this.dragX=g(s,"drag.x",0),this.dragY=g(s,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var h=g(s,"maxSpeed",null);typeof h=="number"?(this.maxSpeedX=h,this.maxSpeedY=h):(this.maxSpeedX=g(s,"maxSpeed.x",0),this.maxSpeedY=g(s,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=this.camera!==null},start:function(){return this.active=this.camera!==null,this},stop:function(){return this.active=!1,this},setCamera:function(r){return this.camera=r,this},update:function(r){if(this.active){r===void 0&&(r=1);var s=this.camera;this._speedX>0?(this._speedX-=this.dragX*r,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*r,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*r,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*r,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,this._speedX!==0&&(s.scrollX-=this._speedX*r|0),this._speedY!==0&&(s.scrollY-=this._speedY*r|0),this._zoom!==0&&(s.zoom+=this._zoom,s.zoom<this.minZoom?s.zoom=this.minZoom:s.zoom>this.maxZoom&&(s.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});v.exports=a},38865:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={FixedKeyControl:t(63091),SmoothedKeyControl:t(58818)}},26638:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Controls:t(38865),Scene2D:t(87969)}},8054:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={VERSION:"3.80.1",BlendModes:t(10312),ScaleModes:t(29795),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};v.exports=o},69547:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(8054),a=t(42363),r=t(82264),s=t(95540),e=t(35154),n=t(41212),h=t(29747),i=t(75508),l=t(36060),f=t(80333),u=new o({initialize:function(p){p===void 0&&(p={});var m=["#ff0000","#ffff00","#00ff00","#00ffff","#000000"],T="#ffffff",y=e(p,"scale",null);this.width=e(y,"width",1024,p),this.height=e(y,"height",768,p),this.zoom=e(y,"zoom",1,p),this.parent=e(y,"parent",void 0,p),this.scaleMode=e(y,y?"mode":"scaleMode",0,p),this.expandParent=e(y,"expandParent",!0,p),this.autoRound=e(y,"autoRound",!1,p),this.autoCenter=e(y,"autoCenter",0,p),this.resizeInterval=e(y,"resizeInterval",500,p),this.fullscreenTarget=e(y,"fullscreenTarget",null,p),this.minWidth=e(y,"min.width",0,p),this.maxWidth=e(y,"max.width",0,p),this.minHeight=e(y,"min.height",0,p),this.maxHeight=e(y,"max.height",0,p),this.snapWidth=e(y,"snap.width",0,p),this.snapHeight=e(y,"snap.height",0,p),this.renderType=e(p,"type",g.AUTO),this.canvas=e(p,"canvas",null),this.context=e(p,"context",null),this.canvasStyle=e(p,"canvasStyle",null),this.customEnvironment=e(p,"customEnvironment",!1),this.sceneConfig=e(p,"scene",null),this.seed=e(p,"seed",[(Date.now()*Math.random()).toString()]),i.RND=new i.RandomDataGenerator(this.seed),this.gameTitle=e(p,"title",""),this.gameURL=e(p,"url","https://phaser.io"),this.gameVersion=e(p,"version",""),this.autoFocus=e(p,"autoFocus",!0),this.stableSort=e(p,"stableSort",-1),this.stableSort===-1&&(this.stableSort=r.browser.es2019?1:0),r.features.stableSort=this.stableSort,this.domCreateContainer=e(p,"dom.createContainer",!1),this.domPointerEvents=e(p,"dom.pointerEvents","none"),this.inputKeyboard=e(p,"input.keyboard",!0),this.inputKeyboardEventTarget=e(p,"input.keyboard.target",window),this.inputKeyboardCapture=e(p,"input.keyboard.capture",[]),this.inputMouse=e(p,"input.mouse",!0),this.inputMouseEventTarget=e(p,"input.mouse.target",null),this.inputMousePreventDefaultDown=e(p,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=e(p,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=e(p,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=e(p,"input.mouse.preventDefaultWheel",!0),this.inputTouch=e(p,"input.touch",r.input.touch),this.inputTouchEventTarget=e(p,"input.touch.target",null),this.inputTouchCapture=e(p,"input.touch.capture",!0),this.inputActivePointers=e(p,"input.activePointers",1),this.inputSmoothFactor=e(p,"input.smoothFactor",0),this.inputWindowEvents=e(p,"input.windowEvents",!0),this.inputGamepad=e(p,"input.gamepad",!1),this.inputGamepadEventTarget=e(p,"input.gamepad.target",window),this.disableContextMenu=e(p,"disableContextMenu",!1),this.audio=e(p,"audio",{}),this.hideBanner=e(p,"banner",null)===!1,this.hidePhaser=e(p,"banner.hidePhaser",!1),this.bannerTextColor=e(p,"banner.text",T),this.bannerBackgroundColor=e(p,"banner.background",m),this.gameTitle===""&&this.hidePhaser&&(this.hideBanner=!0),this.fps=e(p,"fps",null),this.disablePreFX=e(p,"disablePreFX",!1),this.disablePostFX=e(p,"disablePostFX",!1);var S=e(p,"render",null);this.pipeline=e(S,"pipeline",null,p),this.autoMobilePipeline=e(S,"autoMobilePipeline",!0,p),this.defaultPipeline=e(S,"defaultPipeline",l.MULTI_PIPELINE,p),this.antialias=e(S,"antialias",!0,p),this.antialiasGL=e(S,"antialiasGL",!0,p),this.mipmapFilter=e(S,"mipmapFilter","",p),this.desynchronized=e(S,"desynchronized",!1,p),this.roundPixels=e(S,"roundPixels",!0,p),this.pixelArt=e(S,"pixelArt",this.zoom!==1,p),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=e(S,"transparent",!1,p),this.clearBeforeRender=e(S,"clearBeforeRender",!0,p),this.preserveDrawingBuffer=e(S,"preserveDrawingBuffer",!1,p),this.premultipliedAlpha=e(S,"premultipliedAlpha",!0,p),this.failIfMajorPerformanceCaveat=e(S,"failIfMajorPerformanceCaveat",!1,p),this.powerPreference=e(S,"powerPreference","default",p),this.batchSize=e(S,"batchSize",4096,p),this.maxTextures=e(S,"maxTextures",-1,p),this.maxLights=e(S,"maxLights",10,p);var C=e(p,"backgroundColor",0);this.backgroundColor=f(C),this.transparent&&(this.backgroundColor=f(0),this.backgroundColor.alpha=0),this.preBoot=e(p,"callbacks.preBoot",h),this.postBoot=e(p,"callbacks.postBoot",h),this.physics=e(p,"physics",{}),this.defaultPhysicsSystem=e(this.physics,"default",!1),this.loaderBaseURL=e(p,"loader.baseURL",""),this.loaderPath=e(p,"loader.path",""),this.loaderMaxParallelDownloads=e(p,"loader.maxParallelDownloads",r.os.android?6:32),this.loaderCrossOrigin=e(p,"loader.crossOrigin",void 0),this.loaderResponseType=e(p,"loader.responseType",""),this.loaderAsync=e(p,"loader.async",!0),this.loaderUser=e(p,"loader.user",""),this.loaderPassword=e(p,"loader.password",""),this.loaderTimeout=e(p,"loader.timeout",0),this.loaderWithCredentials=e(p,"loader.withCredentials",!1),this.loaderImageLoadType=e(p,"loader.imageLoadType","XHR"),this.loaderLocalScheme=e(p,"loader.localScheme",["file://","capacitor://"]),this.glowFXQuality=e(p,"fx.glow.quality",.1),this.glowFXDistance=e(p,"fx.glow.distance",10),this.installGlobalPlugins=[],this.installScenePlugins=[];var R=e(p,"plugins",null),I=a.DefaultScene;R&&(Array.isArray(R)?this.defaultPlugins=R:n(R)&&(this.installGlobalPlugins=s(R,"global",[]),this.installScenePlugins=s(R,"scene",[]),Array.isArray(R.default)?I=R.default:Array.isArray(R.defaultMerge)&&(I=I.concat(R.defaultMerge)))),this.defaultPlugins=I;var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=e(p,"images.default",L+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=e(p,"images.missing",L+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=e(p,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=g.WEBGL:window.FORCE_CANVAS&&(this.renderType=g.CANVAS))}});v.exports=u},86054:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20623),g=t(27919),a=t(8054),r=t(89357),s=function(e){var n=e.config;if((n.customEnvironment||n.canvas)&&n.renderType===a.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!n.customEnvironment&&!n.canvas&&n.renderType!==a.HEADLESS)if(n.renderType===a.AUTO&&(n.renderType=r.webGL?a.WEBGL:a.CANVAS),n.renderType===a.WEBGL){if(!r.webGL)throw new Error("Cannot create WebGL context, aborting.")}else if(n.renderType===a.CANVAS){if(!r.canvas)throw new Error("Cannot create Canvas context, aborting.")}else throw new Error("Unknown value for renderer type: "+n.renderType);n.antialias||g.disableSmoothing();var h=e.scale.baseSize,i=h.width,l=h.height;if(n.canvas?(e.canvas=n.canvas,e.canvas.width=i,e.canvas.height=l):e.canvas=g.create(e,i,l,n.renderType),n.canvasStyle&&(e.canvas.style=n.canvasStyle),n.antialias||o.setCrisp(e.canvas),n.renderType!==a.HEADLESS){var f,u;f=t(68627),u=t(74797),n.renderType===a.WEBGL?e.renderer=new u(e):(e.renderer=new f(e),e.context=e.renderer.gameContext)}};v.exports=s},96391:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8054),g=function(a){var r=a.config;if(!r.hideBanner){var s="WebGL";r.renderType===o.CANVAS?s="Canvas":r.renderType===o.HEADLESS&&(s="Headless");var e=r.audio,n=a.device.audio,h;if(n.webAudio&&!e.disableWebAudio?h="Web Audio":e.noAudio||!n.webAudio&&!n.audioData?h="No Audio":h="HTML5 Audio",a.device.browser.ie)window.console&&console.log("Phaser v"+o.VERSION+" / https://phaser.io");else{var i="",l=[i];if(Array.isArray(r.bannerBackgroundColor)){var f;r.bannerBackgroundColor.forEach(function(d){i=i.concat("%c "),l.push("background: "+d),f=d}),l[l.length-1]="color: "+r.bannerTextColor+"; background: "+f}else i=i.concat("%c "),l.push("color: "+r.bannerTextColor+"; background: "+r.bannerBackgroundColor);l.push("background: transparent"),r.gameTitle&&(i=i.concat(r.gameTitle),r.gameVersion&&(i=i.concat(" v"+r.gameVersion)),r.hidePhaser||(i=i.concat(" / ")));var u="";r.hidePhaser||(i=i.concat("Phaser v"+o.VERSION+u+" ("+s+" | "+h+")")),i=i.concat(" %c "+r.gameURL),l[0]=i,console.log.apply(console,l)}}};v.exports=g},50127:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40366),g=t(60848),a=t(24047),r=t(27919),s=t(83419),e=t(69547),n=t(83719),h=t(86054),i=t(45893),l=t(96391),f=t(82264),u=t(57264),d=t(50792),p=t(8443),m=t(7003),T=t(37277),y=t(77332),S=t(76531),C=t(60903),R=t(69442),I=t(17130),L=t(65898),w=t(51085),O=t(14747),B=new s({initialize:function(b){this.config=new e(b),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new d,this.anims=new g(this),this.textures=new I(this),this.cache=new a(this),this.registry=new i(this,new d),this.input=new m(this,this.config),this.scene=new C(this,this.config.sceneConfig),this.device=f,this.scale=new S(this,this.config),this.sound=null,this.sound=O.create(this),this.loop=new L(this,this.config.fps),this.plugins=new y(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,this.isPaused=!1,u(this.boot.bind(this))},boot:function(){if(!T.hasCore("EventEmitter")){console.warn("Aborting. Core Plugins missing.");return}this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),h(this),n(this),l(this),o(this.canvas,this.config.parent),this.textures.once(R.READY,this.texturesReady,this),this.events.emit(p.BOOT)},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),w(this);var V=this.events;V.on(p.HIDDEN,this.onHidden,this),V.on(p.VISIBLE,this.onVisible,this),V.on(p.BLUR,this.onBlur,this),V.on(p.FOCUS,this.onFocus,this)},step:function(V,b){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(p.PRE_STEP,V,b),X.emit(p.STEP,V,b),this.scene.update(V,b),X.emit(p.POST_STEP,V,b);var K=this.renderer;K.preRender(),X.emit(p.PRE_RENDER,K,V,b),this.scene.render(K),K.postRender(),X.emit(p.POST_RENDER,K,V,b)}},headlessStep:function(V,b){if(this.pendingDestroy)return this.runDestroy();if(!this.isPaused){var X=this.events;X.emit(p.PRE_STEP,V,b),X.emit(p.STEP,V,b),this.scene.update(V,b),X.emit(p.POST_STEP,V,b),this.scene.isProcessing=!1,X.emit(p.PRE_RENDER,null,V,b),X.emit(p.POST_RENDER,null,V,b)}},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},pause:function(){var V=this.isPaused;this.isPaused=!0,V||this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},resume:function(){var V=this.isPaused;this.isPaused=!1,V&&this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(V,b){b===void 0&&(b=!1),this.pendingDestroy=!0,this.removeCanvas=V,this.noReturn=b},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(r.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});v.exports=B},65898:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(35154),a=t(29747),r=t(43092),s=new o({initialize:function(n,h){this.game=n,this.raf=new r,this.started=!1,this.running=!1,this.minFps=g(h,"min",5),this.targetFps=g(h,"target",60),this.fpsLimit=g(h,"limit",0),this.hasFpsLimit=this.fpsLimit>0,this._limitRate=this.hasFpsLimit?1e3/this.fpsLimit:0,this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=a,this.forceSetTimeOut=g(h,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=g(h,"deltaHistory",10),this.panicMax=g(h,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=g(h,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var e=window.performance.now();this.time=e,this.lastTime=e,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=Math.min(this._target,this.deltaHistory[n]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(e){if(this.started)return this;this.started=!0,this.running=!0;for(var n=0;n<this.deltaSmoothingMax;n++)this.deltaHistory[n]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=e;var h=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(h,this.forceSetTimeOut,this._target)},smoothDelta:function(e){var n=this.deltaIndex,h=this.deltaHistory,i=this.deltaSmoothingMax;(this._coolDown>0||!this.inFocus)&&(this._coolDown--,e=Math.min(e,this._target)),e>this._min&&(e=h[n],e=Math.min(e,this._min)),h[n]=e,this.deltaIndex++,this.deltaIndex>=i&&(this.deltaIndex=0);for(var l=0,f=0;f<i;f++)l+=h[f];return l/=i,l},updateFPS:function(e){this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=e+1e3,this.framesThisSecond=0},stepLimitFPS:function(e){this.now=e;var n=Math.max(0,e-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta+=n,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.delta>=this._limitRate&&(this.callback(e,this.delta),this.delta=0),this.lastTime=e,this.frame++},step:function(e){this.now=e;var n=Math.max(0,e-this.lastTime);this.rawDelta=n,this.time+=this.rawDelta,this.smoothStep&&(n=this.smoothDelta(n)),this.delta=n,e>=this.nextFpsUpdate&&this.updateFPS(e),this.framesThisSecond++,this.callback(e,n),this.lastTime=e,this.frame++},tick:function(){var e=window.performance.now();this.hasFpsLimit?this.stepLimitFPS(e):this.step(e)},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(e){e===void 0&&(e=!1);var n=window.performance.now();if(!this.running){e&&(this.startTime+=-this.lastTime+(this.lastTime+n));var h=this.hasFpsLimit?this.stepLimitFPS.bind(this):this.step.bind(this);this.raf.start(h,this.forceSetTimeOut,this._target),this.running=!0,this.nextFpsUpdate=n+1e3,this.framesThisSecond=0,this.fpsLimitTriggered=!1,this.tick()}},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.raf.destroy(),this.raf=null,this.game=null,this.callback=null}});v.exports=s},51085:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8443),g=function(a){var r,s=a.events;if(document.hidden!==void 0)r="visibilitychange";else{var e=["webkit","moz","ms"];e.forEach(function(h){document[h+"Hidden"]!==void 0&&(document.hidden=function(){return document[h+"Hidden"]},r=h+"visibilitychange")})}var n=function(h){document.hidden||h.type==="pause"?s.emit(o.HIDDEN):s.emit(o.VISIBLE)};r&&document.addEventListener(r,n,!1),window.onblur=function(){s.emit(o.BLUR)},window.onfocus=function(){s.emit(o.FOCUS)},window.focus&&a.config.autoFocus&&window.focus()};v.exports=g},97217:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="blur"},47548:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="boot"},19814:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="contextlost"},68446:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="destroy"},41700:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="focus"},25432:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="hidden"},65942:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pause"},59211:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="postrender"},47789:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="poststep"},39066:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="prerender"},460:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="prestep"},16175:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="ready"},42331:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resume"},11966:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="step"},32969:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="systemready"},94830:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="visible"},8443:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BLUR:t(97217),BOOT:t(47548),CONTEXT_LOST:t(19814),DESTROY:t(68446),FOCUS:t(41700),HIDDEN:t(25432),PAUSE:t(65942),POST_RENDER:t(59211),POST_STEP:t(47789),PRE_RENDER:t(39066),PRE_STEP:t(460),READY:t(16175),RESUME:t(42331),STEP:t(11966),SYSTEM_READY:t(32969),VISIBLE:t(94830)}},42857:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Config:t(69547),CreateRenderer:t(86054),DebugHeader:t(96391),Events:t(8443),TimeStep:t(65898),VisibilityHandler:t(51085)}},99584:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(5290),g=t(27919),a=t(35154),r=function(s){var e=a(s,"data",[]),n=a(s,"canvas",null),h=a(s,"palette",o),i=a(s,"pixelWidth",1),l=a(s,"pixelHeight",i),f=a(s,"resizeCanvas",!0),u=a(s,"clearCanvas",!0),d=a(s,"preRender",null),p=a(s,"postRender",null),m=Math.floor(Math.abs(e[0].length*i)),T=Math.floor(Math.abs(e.length*l));n||(n=g.create2D(this,m,T),f=!1,u=!1),f&&(n.width=m,n.height=T);var y=n.getContext("2d",{willReadFrequently:!0});u&&y.clearRect(0,0,m,T),d&&d(n,y);for(var S=0;S<e.length;S++)for(var C=e[S],R=0;R<C.length;R++){var I=C[R];I!=="."&&I!==" "&&(y.fillStyle=h[I],y.fillRect(R*i,S*l,i,l))}return p&&p(n,y),n};v.exports=r},15822:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={GenerateTexture:t(99584),Palettes:t(57763)}},5290:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},23816:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},9866:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},77552:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},92259:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},57763:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ARNE16:t(5290),C64:t(23816),CGA:t(9866),JMP:t(77552),MSX:t(92259)}},46728:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(36316),a=t(80021),r=t(26099),s=new o({Extends:a,initialize:function(n,h,i,l){a.call(this,"CubicBezierCurve"),Array.isArray(n)&&(l=new r(n[6],n[7]),i=new r(n[4],n[5]),h=new r(n[2],n[3]),n=new r(n[0],n[1])),this.p0=n,this.p1=h,this.p2=i,this.p3=l},getStartPoint:function(e){return e===void 0&&(e=new r),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,n){n===void 0&&(n=new r);var h=this.p0,i=this.p1,l=this.p2,f=this.p3;return n.set(g(e,h.x,i.x,l.x,f.x),g(e,h.y,i.y,l.y,f.y))},draw:function(e,n){n===void 0&&(n=32);var h=this.getPoints(n);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var i=1;i<h.length;i++)e.lineTo(h[i].x,h[i].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});s.fromJSON=function(e){var n=e.points,h=new r(n[0],n[1]),i=new r(n[2],n[3]),l=new r(n[4],n[5]),f=new r(n[6],n[7]);return new s(h,i,l,f)},v.exports=s},80021:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(19217),a=t(87841),r=t(26099),s=new o({initialize:function(n){this.type=n,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new r,this._tmpVec2B=new r},draw:function(e,n){return n===void 0&&(n=32),e.strokePoints(this.getPoints(n))},getBounds:function(e,n){e||(e=new a),n===void 0&&(n=16);var h=this.getLength();n>h&&(n=h/2);var i=Math.max(1,Math.round(h/n));return g(this.getSpacedPoints(i),e)},getDistancePoints:function(e){var n=this.getLength(),h=Math.max(1,n/e);return this.getSpacedPoints(h)},getEndPoint:function(e){return e===void 0&&(e=new r),this.getPointAt(1,e)},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(e===void 0&&(e=this.arcLengthDivisions),this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var n=[],h,i=this.getPoint(0,this._tmpVec2A),l=0;n.push(0);for(var f=1;f<=e;f++)h=this.getPoint(f/e,this._tmpVec2B),l+=h.distance(i),n.push(l),i.copy(h);return this.cacheArcLengths=n,n},getPointAt:function(e,n){var h=this.getUtoTmapping(e);return this.getPoint(h,n)},getPoints:function(e,n,h){h===void 0&&(h=[]),e||(n?e=this.getLength()/n:e=this.defaultDivisions);for(var i=0;i<=e;i++)h.push(this.getPoint(i/e));return h},getRandomPoint:function(e){return e===void 0&&(e=new r),this.getPoint(Math.random(),e)},getSpacedPoints:function(e,n,h){h===void 0&&(h=[]),e||(n?e=this.getLength()/n:e=this.defaultDivisions);for(var i=0;i<=e;i++){var l=this.getUtoTmapping(i/e,null,e);h.push(this.getPoint(l))}return h},getStartPoint:function(e){return e===void 0&&(e=new r),this.getPointAt(0,e)},getTangent:function(e,n){n===void 0&&(n=new r);var h=1e-4,i=e-h,l=e+h;return i<0&&(i=0),l>1&&(l=1),this.getPoint(i,this._tmpVec2A),this.getPoint(l,n),n.subtract(this._tmpVec2A).normalize()},getTangentAt:function(e,n){var h=this.getUtoTmapping(e);return this.getTangent(h,n)},getTFromDistance:function(e,n){return e<=0?0:this.getUtoTmapping(0,e,n)},getUtoTmapping:function(e,n,h){var i=this.getLengths(h),l=0,f=i.length,u;n?u=Math.min(n,i[f-1]):u=e*i[f-1];for(var d=0,p=f-1,m;d<=p;)if(l=Math.floor(d+(p-d)/2),m=i[l]-u,m<0)d=l+1;else if(m>0)p=l-1;else{p=l;break}if(l=p,i[l]===u)return l/(f-1);var T=i[l],y=i[l+1],S=y-T,C=(u-T)/S;return(l+C)/(f-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});v.exports=s},73825:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(80021),a=t(39506),r=t(35154),s=t(43396),e=t(26099),n=new o({Extends:g,initialize:function(i,l,f,u,d,p,m,T){if(typeof i=="object"){var y=i;i=r(y,"x",0),l=r(y,"y",0),f=r(y,"xRadius",0),u=r(y,"yRadius",f),d=r(y,"startAngle",0),p=r(y,"endAngle",360),m=r(y,"clockwise",!1),T=r(y,"rotation",0)}else u===void 0&&(u=f),d===void 0&&(d=0),p===void 0&&(p=360),m===void 0&&(m=!1),T===void 0&&(T=0);g.call(this,"EllipseCurve"),this.p0=new e(i,l),this._xRadius=f,this._yRadius=u,this._startAngle=a(d),this._endAngle=a(p),this._clockwise=m,this._rotation=a(T)},getStartPoint:function(h){return h===void 0&&(h=new e),this.getPoint(0,h)},getResolution:function(h){return h*2},getPoint:function(h,i){i===void 0&&(i=new e);for(var l=Math.PI*2,f=this._endAngle-this._startAngle,u=Math.abs(f)<Number.EPSILON;f<0;)f+=l;for(;f>l;)f-=l;f<Number.EPSILON&&(u?f=0:f=l),this._clockwise&&!u&&(f===l?f=-l:f=f-l);var d=this._startAngle+h*f,p=this.p0.x+this._xRadius*Math.cos(d),m=this.p0.y+this._yRadius*Math.sin(d);if(this._rotation!==0){var T=Math.cos(this._rotation),y=Math.sin(this._rotation),S=p-this.p0.x,C=m-this.p0.y;p=S*T-C*y+this.p0.x,m=S*y+C*T+this.p0.y}return i.set(p,m)},setXRadius:function(h){return this.xRadius=h,this},setYRadius:function(h){return this.yRadius=h,this},setWidth:function(h){return this.xRadius=h/2,this},setHeight:function(h){return this.yRadius=h/2,this},setStartAngle:function(h){return this.startAngle=h,this},setEndAngle:function(h){return this.endAngle=h,this},setClockwise:function(h){return this.clockwise=h,this},setRotation:function(h){return this.rotation=h,this},x:{get:function(){return this.p0.x},set:function(h){this.p0.x=h}},y:{get:function(){return this.p0.y},set:function(h){this.p0.y=h}},xRadius:{get:function(){return this._xRadius},set:function(h){this._xRadius=h}},yRadius:{get:function(){return this._yRadius},set:function(h){this._yRadius=h}},startAngle:{get:function(){return s(this._startAngle)},set:function(h){this._startAngle=a(h)}},endAngle:{get:function(){return s(this._endAngle)},set:function(h){this._endAngle=a(h)}},clockwise:{get:function(){return this._clockwise},set:function(h){this._clockwise=h}},angle:{get:function(){return s(this._rotation)},set:function(h){this._rotation=a(h)}},rotation:{get:function(){return this._rotation},set:function(h){this._rotation=h}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:s(this._startAngle),endAngle:s(this._endAngle),clockwise:this._clockwise,rotation:s(this._rotation)}}});n.fromJSON=function(h){return new n(h)},v.exports=n},33951:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(80021),a=t(19217),r=t(87841),s=t(26099),e=new o({Extends:g,initialize:function(h,i){g.call(this,"LineCurve"),Array.isArray(h)&&(i=new s(h[2],h[3]),h=new s(h[0],h[1])),this.p0=h,this.p1=i,this.arcLengthDivisions=1},getBounds:function(n){return n===void 0&&(n=new r),a([this.p0,this.p1],n)},getStartPoint:function(n){return n===void 0&&(n=new s),n.copy(this.p0)},getResolution:function(n){return n===void 0&&(n=1),n},getPoint:function(n,h){return h===void 0&&(h=new s),n===1?h.copy(this.p1):(h.copy(this.p1).subtract(this.p0).scale(n).add(this.p0),h)},getPointAt:function(n,h){return this.getPoint(n,h)},getTangent:function(n,h){return h===void 0&&(h=new s),h.copy(this.p1).subtract(this.p0).normalize(),h},getUtoTmapping:function(n,h,i){var l;if(h){var f=this.getLengths(i),u=f[f.length-1],d=Math.min(h,u);l=d/u}else l=n;return l},draw:function(n){return n.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),n},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});e.fromJSON=function(n){var h=n.points,i=new s(h[0],h[1]),l=new s(h[2],h[3]);return new e(i,l)},v.exports=e},14744:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(80021),a=t(32112),r=t(26099),s=new o({Extends:g,initialize:function(n,h,i){g.call(this,"QuadraticBezierCurve"),Array.isArray(n)&&(i=new r(n[4],n[5]),h=new r(n[2],n[3]),n=new r(n[0],n[1])),this.p0=n,this.p1=h,this.p2=i},getStartPoint:function(e){return e===void 0&&(e=new r),e.copy(this.p0)},getResolution:function(e){return e},getPoint:function(e,n){n===void 0&&(n=new r);var h=this.p0,i=this.p1,l=this.p2;return n.set(a(e,h.x,i.x,l.x),a(e,h.y,i.y,l.y))},draw:function(e,n){n===void 0&&(n=32);var h=this.getPoints(n);e.beginPath(),e.moveTo(this.p0.x,this.p0.y);for(var i=1;i<h.length;i++)e.lineTo(h[i].x,h[i].y);return e.strokePath(),e},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});s.fromJSON=function(e){var n=e.points,h=new r(n[0],n[1]),i=new r(n[2],n[3]),l=new r(n[4],n[5]);return new s(h,i,l)},v.exports=s},42534:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87842),g=t(83419),a=t(80021),r=t(26099),s=new g({Extends:a,initialize:function(n){n===void 0&&(n=[]),a.call(this,"SplineCurve"),this.points=[],this.addPoints(n)},addPoints:function(e){for(var n=0;n<e.length;n++){var h=new r;typeof e[n]=="number"?(h.x=e[n],h.y=e[n+1],n++):Array.isArray(e[n])?(h.x=e[n][0],h.y=e[n][1]):(h.x=e[n].x,h.y=e[n].y),this.points.push(h)}return this},addPoint:function(e,n){var h=new r(e,n);return this.points.push(h),h},getStartPoint:function(e){return e===void 0&&(e=new r),e.copy(this.points[0])},getResolution:function(e){return e*this.points.length},getPoint:function(e,n){n===void 0&&(n=new r);var h=this.points,i=(h.length-1)*e,l=Math.floor(i),f=i-l,u=h[l===0?l:l-1],d=h[l],p=h[l>h.length-2?h.length-1:l+1],m=h[l>h.length-3?h.length-1:l+2];return n.set(o(f,u.x,d.x,p.x,m.x),o(f,u.y,d.y,p.y,m.y))},toJSON:function(){for(var e=[],n=0;n<this.points.length;n++)e.push(this.points[n].x),e.push(this.points[n].y);return{type:this.type,points:e}}});s.fromJSON=function(e){return new s(e.points)},v.exports=s},25410:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Path:t(46669),MoveTo:t(68618),CubicBezier:t(46728),Curve:t(80021),Ellipse:t(73825),Line:t(33951),QuadraticBezier:t(14744),Spline:t(42534)}},68618:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(s,e){this.active=!1,this.p0=new g(s,e)},getPoint:function(r,s){return s===void 0&&(s=new g),s.copy(this.p0)},getPointAt:function(r,s){return this.getPoint(r,s)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});v.exports=a},46669:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(46728),a=t(73825),r=t(39429),s=t(33951),e=t(68618),n=t(14744),h=t(87841),i=t(42534),l=t(26099),f=t(36383),u=new o({initialize:function(p,m){p===void 0&&(p=0),m===void 0&&(m=0),this.name="",this.defaultDivisions=12,this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new l,this._tmpVec2A=new l,this._tmpVec2B=new l,typeof p=="object"?this.fromJSON(p):this.startPoint.set(p,m)},add:function(d){return this.curves.push(d),this},circleTo:function(d,p,m){return p===void 0&&(p=!1),this.ellipseTo(d,d,0,360,p,m)},closePath:function(){var d=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return d.equals(p)||this.curves.push(new s(p,d)),this},cubicBezierTo:function(d,p,m,T,y,S){var C=this.getEndPoint(),R,I,L;return d instanceof l?(R=d,I=p,L=m):(R=new l(m,T),I=new l(y,S),L=new l(d,p)),this.add(new g(C,R,I,L))},quadraticBezierTo:function(d,p,m,T){var y=this.getEndPoint(),S,C;return d instanceof l?(S=d,C=p):(S=new l(m,T),C=new l(d,p)),this.add(new n(y,S,C))},draw:function(d,p){for(var m=0;m<this.curves.length;m++){var T=this.curves[m];T.active&&T.draw(d,p)}return d},ellipseTo:function(d,p,m,T,y,S){var C=new a(0,0,d,p,m,T,y,S),R=this.getEndPoint(this._tmpVec2A),I=C.getStartPoint(this._tmpVec2B);return R.subtract(I),C.x=R.x,C.y=R.y,this.add(C)},fromJSON:function(d){this.curves=[],this.cacheLengths=[],this.startPoint.set(d.x,d.y),this.autoClose=d.autoClose;for(var p=0;p<d.curves.length;p++){var m=d.curves[p];switch(m.type){case"LineCurve":this.add(s.fromJSON(m));break;case"EllipseCurve":this.add(a.fromJSON(m));break;case"SplineCurve":this.add(i.fromJSON(m));break;case"CubicBezierCurve":this.add(g.fromJSON(m));break;case"QuadraticBezierCurve":this.add(n.fromJSON(m));break}}return this},getBounds:function(d,p){d===void 0&&(d=new h),p===void 0&&(p=16),d.x=Number.MAX_VALUE,d.y=Number.MAX_VALUE;for(var m=new h,T=f.MIN_SAFE_INTEGER,y=f.MIN_SAFE_INTEGER,S=0;S<this.curves.length;S++){var C=this.curves[S];C.active&&(C.getBounds(m,p),d.x=Math.min(d.x,m.x),d.y=Math.min(d.y,m.y),T=Math.max(T,m.right),y=Math.max(y,m.bottom))}return d.right=T,d.bottom=y,d},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var d=[],p=0,m=0;m<this.curves.length;m++)p+=this.curves[m].getLength(),d.push(p);return this.cacheLengths=d,d},getCurveAt:function(d){for(var p=d*this.getLength(),m=this.getCurveLengths(),T=0;T<m.length;){if(m[T]>=p)return this.curves[T];T++}return null},getEndPoint:function(d){return d===void 0&&(d=new l),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,d):d.copy(this.startPoint),d},getLength:function(){var d=this.getCurveLengths();return d[d.length-1]},getPoint:function(d,p){p===void 0&&(p=new l);for(var m=d*this.getLength(),T=this.getCurveLengths(),y=0;y<T.length;){if(T[y]>=m){var S=T[y]-m,C=this.curves[y],R=C.getLength(),I=R===0?0:1-S/R;return C.getPointAt(I,p)}y++}return null},getPoints:function(d,p){!d&&!p&&(d=this.defaultDivisions);for(var m=[],T,y=0;y<this.curves.length;y++){var S=this.curves[y];if(S.active)for(var C=S.getResolution(d),R=S.getPoints(C,p),I=0;I<R.length;I++){var L=R[I];T&&T.equals(L)||(m.push(L),T=L)}}return this.autoClose&&m.length>1&&!m[m.length-1].equals(m[0])&&m.push(m[0]),m},getRandomPoint:function(d){return d===void 0&&(d=new l),this.getPoint(Math.random(),d)},getSpacedPoints:function(d){d===void 0&&(d=40);for(var p=[],m=0;m<=d;m++)p.push(this.getPoint(m/d));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(d){return d===void 0&&(d=new l),d.copy(this.startPoint)},getTangent:function(d,p){p===void 0&&(p=new l);for(var m=d*this.getLength(),T=this.getCurveLengths(),y=0;y<T.length;){if(T[y]>=m){var S=T[y]-m,C=this.curves[y],R=C.getLength(),I=R===0?0:1-S/R;return C.getTangentAt(I,p)}y++}return null},lineTo:function(d,p){d instanceof l?this._tmpVec2B.copy(d):typeof d=="object"?this._tmpVec2B.setFromObject(d):this._tmpVec2B.set(d,p);var m=this.getEndPoint(this._tmpVec2A);return this.add(new s([m.x,m.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(d){return d.unshift(this.getEndPoint()),this.add(new i(d))},moveTo:function(d,p){return d instanceof l?this.add(new e(d.x,d.y)):this.add(new e(d,p))},toJSON:function(){for(var d=[],p=0;p<this.curves.length;p++)d.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:d}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});r.register("path",function(d,p){return new u(d,p)}),v.exports=u},45893:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(24882),a=new o({initialize:function(s,e){this.parent=s,this.events=e,e||(this.events=s.events?s.events:s),this.list={},this.values={},this._frozen=!1,!s.hasOwnProperty("sys")&&this.events&&this.events.once(g.DESTROY,this.destroy,this)},get:function(r){var s=this.list;if(Array.isArray(r)){for(var e=[],n=0;n<r.length;n++)e.push(s[r[n]]);return e}else return s[r]},getAll:function(){var r={};for(var s in this.list)this.list.hasOwnProperty(s)&&(r[s]=this.list[s]);return r},query:function(r){var s={};for(var e in this.list)this.list.hasOwnProperty(e)&&e.match(r)&&(s[e]=this.list[e]);return s},set:function(r,s){if(this._frozen)return this;if(typeof r=="string")return this.setValue(r,s);for(var e in r)this.setValue(e,r[e]);return this},inc:function(r,s){if(this._frozen)return this;s===void 0&&(s=1);var e=this.get(r);return e===void 0&&(e=0),this.set(r,e+s),this},toggle:function(r){return this._frozen?this:(this.set(r,!this.get(r)),this)},setValue:function(r,s){if(this._frozen)return this;if(this.has(r))this.values[r]=s;else{var e=this,n=this.list,h=this.events,i=this.parent;Object.defineProperty(this.values,r,{enumerable:!0,configurable:!0,get:function(){return n[r]},set:function(l){if(!e._frozen){var f=n[r];n[r]=l,h.emit(g.CHANGE_DATA,i,r,l,f),h.emit(g.CHANGE_DATA_KEY+r,i,l,f)}}}),n[r]=s,h.emit(g.SET_DATA,i,r,s)}return this},each:function(r,s){for(var e=[this.parent,null,void 0],n=1;n<arguments.length;n++)e.push(arguments[n]);for(var h in this.list)e[1]=h,e[2]=this.list[h],r.apply(s,e);return this},merge:function(r,s){s===void 0&&(s=!0);for(var e in r)r.hasOwnProperty(e)&&(s||!s&&!this.has(e))&&this.setValue(e,r[e]);return this},remove:function(r){if(this._frozen)return this;if(Array.isArray(r))for(var s=0;s<r.length;s++)this.removeValue(r[s]);else return this.removeValue(r);return this},removeValue:function(r){if(this.has(r)){var s=this.list[r];delete this.list[r],delete this.values[r],this.events.emit(g.REMOVE_DATA,this.parent,r,s)}return this},pop:function(r){var s=void 0;return!this._frozen&&this.has(r)&&(s=this.list[r],delete this.list[r],delete this.values[r],this.events.emit(g.REMOVE_DATA,this.parent,r,s)),s},has:function(r){return this.list.hasOwnProperty(r)},setFreeze:function(r){return this._frozen=r,this},reset:function(){for(var r in this.list)delete this.list[r],delete this.values[r];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(g.CHANGE_DATA),this.events.off(g.SET_DATA),this.events.off(g.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(r){this._frozen=!!r}},count:{get:function(){var r=0;for(var s in this.list)this.list[s]!==void 0&&r++;return r}}});v.exports=a},63646:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45893),a=t(37277),r=t(44594),s=new o({Extends:g,initialize:function(n){g.call(this,n,n.sys.events),this.scene=n,this.systems=n.sys,n.sys.events.once(r.BOOT,this.boot,this),n.sys.events.on(r.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(r.DESTROY,this.destroy,this)},start:function(){this.events.once(r.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){g.prototype.destroy.call(this),this.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("DataManagerPlugin",s,"data"),v.exports=s},10700:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="changedata"},93608:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="changedata-"},60883:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="destroy"},69780:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="removedata"},22166:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="setdata"},24882:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CHANGE_DATA:t(10700),CHANGE_DATA_KEY:t(93608),DESTROY:t(60883),REMOVE_DATA:t(69780),SET_DATA:t(22166)}},44965:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={DataManager:t(45893),DataManagerPlugin:t(63646),Events:t(24882)}},7098:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84148),g={flac:!1,aac:!1,audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};function a(){if(typeof importScripts=="function")return g;g.audioData=!!window.Audio,g.webAudio=!!(window.AudioContext||window.webkitAudioContext);var r=document.createElement("audio"),s=!!r.canPlayType;try{if(s){var e=function(i,l){var f=r.canPlayType("audio/"+i).replace(/^no$/,"");return l?!!(f||r.canPlayType("audio/"+l).replace(/^no$/,"")):!!f};if(g.ogg=e('ogg; codecs="vorbis"'),g.opus=e('ogg; codecs="opus"',"opus"),g.mp3=e("mpeg"),g.wav=e("wav"),g.m4a=e("x-m4a"),g.aac=e("aac"),g.flac=e("flac","x-flac"),g.webm=e('webm; codecs="vorbis"'),r.canPlayType('audio/mp4; codecs="ec-3"')!==""){if(o.edge)g.dolby=!0;else if(o.safari&&o.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),h=parseInt(RegExp.$2,10);(n===10&&h>=11||n>10)&&(g.dolby=!0)}}}}catch{}return g}v.exports=a()},84148:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25892),g={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0,es2019:!1};function a(){var r=navigator.userAgent;return/Edg\/\d+/.test(r)?(g.edge=!0,g.es2019=!0):/OPR/.test(r)?(g.opera=!0,g.es2019=!0):/Chrome\/(\d+)/.test(r)&&!o.windowsPhone?(g.chrome=!0,g.chromeVersion=parseInt(RegExp.$1,10),g.es2019=g.chromeVersion>69):/Firefox\D+(\d+)/.test(r)?(g.firefox=!0,g.firefoxVersion=parseInt(RegExp.$1,10),g.es2019=g.firefoxVersion>10):/AppleWebKit\/(?!.*CriOS)/.test(r)&&o.iOS?(g.mobileSafari=!0,g.es2019=!0):/MSIE (\d+\.\d+);/.test(r)?(g.ie=!0,g.ieVersion=parseInt(RegExp.$1,10)):/Version\/(\d+\.\d+(\.\d+)?) Safari/.test(r)&&!o.windowsPhone?(g.safari=!0,g.safariVersion=parseInt(RegExp.$1,10),g.es2019=g.safariVersion>10):/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(r)&&(g.ie=!0,g.trident=!0,g.tridentVersion=parseInt(RegExp.$1,10),g.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(r)&&(g.silk=!0),g}v.exports=a()},89289:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g={supportInverseAlpha:!1,supportNewBlendModes:!1};function a(){var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",h=new Image;return h.onload=function(){var i=new Image;i.onload=function(){var l=o.create2D(i,6),f=l.getContext("2d",{willReadFrequently:!0});if(f.globalCompositeOperation="multiply",f.drawImage(h,0,0),f.drawImage(i,2,0),!f.getImageData(2,0,1,1))return!1;var u=f.getImageData(2,0,1,1).data;o.remove(i),g.supportNewBlendModes=u[0]===255&&u[1]===0&&u[2]===0},i.src=e+"/wCKxvRF"+n},h.src=e+"AP804Oa6"+n,!1}function r(){var e=o.create2D(this,2),n=e.getContext("2d",{willReadFrequently:!0});n.fillStyle="rgba(10, 20, 30, 0.5)",n.fillRect(0,0,1,1);var h=n.getImageData(0,0,1,1);if(h===null)return!1;n.putImageData(h,1,0);var i=n.getImageData(1,0,1,1),l=i.data[0]===h.data[0]&&i.data[1]===h.data[1]&&i.data[2]===h.data[2]&&i.data[3]===h.data[3];return o.remove(this),l}function s(){return typeof importScripts!="function"&&document!==void 0&&(g.supportNewBlendModes=a(),g.supportInverseAlpha=r()),g}v.exports=s()},89357:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25892),g=t(84148),a=t(27919),r={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,stableSort:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};function s(){var n=new ArrayBuffer(4),h=new Uint8Array(n),i=new Uint32Array(n);return h[0]=161,h[1]=178,h[2]=195,h[3]=212,i[0]===3569595041?!0:i[0]===2712847316?!1:null}function e(){if(typeof importScripts=="function")return r;r.canvas=!!window.CanvasRenderingContext2D;try{r.localStorage=!!localStorage.getItem}catch{r.localStorage=!1}r.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,r.fileSystem=!!window.requestFileSystem;var n=!1,h=function(){if(window.WebGLRenderingContext)try{var i=a.createWebGL(this),l=i.getContext("webgl")||i.getContext("experimental-webgl"),f=a.create2D(this),u=f.getContext("2d",{willReadFrequently:!0}),d=u.createImageData(1,1);return n=d.data instanceof Uint8ClampedArray,a.remove(i),a.remove(f),!!l}catch{return!1}return!1};return r.webGL=h(),r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,g.firefox&&g.firefoxVersion<21&&(r.getUserMedia=!1),!o.iOS&&(g.ie||g.firefox||g.chrome)&&(r.canvasBitBltShift=!0),(g.safari||g.mobileSafari)&&(r.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(r.littleEndian=s()),r.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&r.littleEndian!==null&&n,r}v.exports=e()},91639:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={available:!1,cancel:"",keyboard:!1,request:""};function t(){if(typeof importScripts=="function")return E;var o,g="Fullscreen",a="FullScreen",r=["request"+g,"request"+a,"webkitRequest"+g,"webkitRequest"+a,"msRequest"+g,"msRequest"+a,"mozRequest"+a,"mozRequest"+g];for(o=0;o<r.length;o++)if(document.documentElement[r[o]]){E.available=!0,E.request=r[o];break}var s=["cancel"+a,"exit"+g,"webkitCancel"+a,"webkitExit"+g,"msCancel"+a,"msExit"+g,"mozCancel"+a,"mozExit"+g];if(E.available){for(o=0;o<s.length;o++)if(document[s[o]]){E.cancel=s[o];break}}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(E.keyboard=!0),Object.defineProperty(E,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),E}v.exports=t()},31784:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84148),g={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};function a(){return typeof importScripts=="function"||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(g.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(g.mspointer=!0),navigator.getGamepads&&(g.gamepads=!0),"onwheel"in window||o.ie&&"WheelEvent"in window?g.wheelEvent="wheel":"onmousewheel"in window?g.wheelEvent="mousewheel":o.firefox&&"MouseScrollEvent"in window&&(g.wheelEvent="DOMMouseScroll")),g}v.exports=a()},25892:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};function t(){if(typeof importScripts=="function")return E;var o=navigator.userAgent;/Windows/.test(o)?E.windows=!0:/Mac OS/.test(o)&&!/like Mac OS/.test(o)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(E.iOS=!0,E.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),E.iOSVersion=parseInt(RegExp.$1,10)):E.macOS=!0:/Android/.test(o)?E.android=!0:/Linux/.test(o)?E.linux=!0:/iP[ao]d|iPhone/i.test(o)?(E.iOS=!0,navigator.appVersion.match(/OS (\d+)/),E.iOSVersion=parseInt(RegExp.$1,10),E.iPhone=o.toLowerCase().indexOf("iphone")!==-1,E.iPad=o.toLowerCase().indexOf("ipad")!==-1):/Kindle/.test(o)||/\bKF[A-Z][A-Z]+/.test(o)||/Silk.*Mobile Safari/.test(o)?E.kindle=!0:/CrOS/.test(o)&&(E.chromeOS=!0),(/Windows Phone/i.test(o)||/IEMobile/i.test(o))&&(E.android=!1,E.iOS=!1,E.macOS=!1,E.windows=!0,E.windowsPhone=!0);var g=/Silk/.test(o);return(E.windows||E.macOS||E.linux&&!g||E.chromeOS)&&(E.desktop=!0),(E.windowsPhone||/Windows NT/i.test(o)&&/Touch/i.test(o))&&(E.desktop=!1),navigator.standalone&&(E.webApp=!0),typeof importScripts!="function"&&(window.cordova!==void 0&&(E.cordova=!0),window.ejecta!==void 0&&(E.ejecta=!0)),typeof process<"u"&&process.versions&&process.versions.node&&(E.node=!0),E.node&&typeof process.versions=="object"&&(E.nodeWebkit=!!process.versions["node-webkit"],E.electron=!!process.versions.electron),/Crosswalk/.test(o)&&(E.crosswalk=!0),E.pixelRatio=window.devicePixelRatio||1,E}v.exports=t()},43267:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g={h264:!1,hls:!1,mp4:!1,m4v:!1,ogg:!1,vp9:!1,webm:!1,hasRequestVideoFrame:!1};function a(){if(typeof importScripts=="function")return g;var r=document.createElement("video"),s=!!r.canPlayType,e=/^no$/;try{s&&(r.canPlayType('video/ogg; codecs="theora"').replace(e,"")&&(g.ogg=!0),r.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(e,"")&&(g.h264=!0,g.mp4=!0),r.canPlayType("video/x-m4v").replace(e,"")&&(g.m4v=!0),r.canPlayType('video/webm; codecs="vp8, vorbis"').replace(e,"")&&(g.webm=!0),r.canPlayType('video/webm; codecs="vp9"').replace(e,"")&&(g.vp9=!0),r.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(e,"")&&(g.hls=!0))}catch{}return r.parentNode&&r.parentNode.removeChild(r),g.getVideoURL=function(n){Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++){var i=o(n[h],"url",n[h]);if(i.indexOf("blob:")===0)return{url:i,type:""};var l;if(i.indexOf("data:")===0?l=i.split(",")[0].match(/\/(.*?);/):l=i.match(/\.([a-zA-Z0-9]+)($|\?)/),l=o(n[h],"type",l?l[1]:"").toLowerCase(),g[l])return{url:i,type:l}}return null},g}v.exports=a()},82264:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={os:t(25892),browser:t(84148),features:t(89357),input:t(31784),audio:t(7098),video:t(43267),fullscreen:t(91639),canvasFeatures:t(89289)}},89422:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new Float32Array(20),a=new o({initialize:function(){this._matrix=new Float32Array(20),this.alpha=1,this._dirty=!0,this._data=new Float32Array(20),this.reset()},set:function(r){return this._matrix.set(r),this._dirty=!0,this},reset:function(){var r=this._matrix;return r.fill(0),r[0]=1,r[6]=1,r[12]=1,r[18]=1,this.alpha=1,this._dirty=!0,this},getData:function(){var r=this._data;return this._dirty&&(r.set(this._matrix),r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,this._dirty=!1),r},brightness:function(r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var e=r;return this.multiply([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],s)},saturate:function(r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var e=r*2/3+1,n=(e-1)*-.5;return this.multiply([e,n,n,0,0,n,e,n,0,0,n,n,e,0,0,0,0,0,1,0],s)},desaturate:function(r){return r===void 0&&(r=!1),this.saturate(-1,r)},hue:function(r,s){r===void 0&&(r=0),s===void 0&&(s=!1),r=r/180*Math.PI;var e=Math.cos(r),n=Math.sin(r),h=.213,i=.715,l=.072;return this.multiply([h+e*(1-h)+n*-h,i+e*-i+n*-i,l+e*-l+n*(1-l),0,0,h+e*-h+n*.143,i+e*(1-i)+n*.14,l+e*-l+n*-.283,0,0,h+e*-h+n*-(1-h),i+e*-i+n*i,l+e*(1-l)+n*l,0,0,0,0,0,1,0],s)},grayscale:function(r,s){return r===void 0&&(r=1),s===void 0&&(s=!1),this.saturate(-r,s)},blackWhite:function(r){return r===void 0&&(r=!1),this.multiply(a.BLACK_WHITE,r)},contrast:function(r,s){r===void 0&&(r=0),s===void 0&&(s=!1);var e=r+1,n=-.5*(e-1);return this.multiply([e,0,0,0,n,0,e,0,0,n,0,0,e,0,n,0,0,0,1,0],s)},negative:function(r){return r===void 0&&(r=!1),this.multiply(a.NEGATIVE,r)},desaturateLuminance:function(r){return r===void 0&&(r=!1),this.multiply(a.DESATURATE_LUMINANCE,r)},sepia:function(r){return r===void 0&&(r=!1),this.multiply(a.SEPIA,r)},night:function(r,s){return r===void 0&&(r=.1),s===void 0&&(s=!1),this.multiply([r*-2,-r,0,0,0,-r,0,r,0,0,0,r,r*2,0,0,0,0,0,1,0],s)},lsd:function(r){return r===void 0&&(r=!1),this.multiply(a.LSD,r)},brown:function(r){return r===void 0&&(r=!1),this.multiply(a.BROWN,r)},vintagePinhole:function(r){return r===void 0&&(r=!1),this.multiply(a.VINTAGE,r)},kodachrome:function(r){return r===void 0&&(r=!1),this.multiply(a.KODACHROME,r)},technicolor:function(r){return r===void 0&&(r=!1),this.multiply(a.TECHNICOLOR,r)},polaroid:function(r){return r===void 0&&(r=!1),this.multiply(a.POLAROID,r)},shiftToBGR:function(r){return r===void 0&&(r=!1),this.multiply(a.SHIFT_BGR,r)},multiply:function(r,s){s===void 0&&(s=!1),s||this.reset();var e=this._matrix,n=g;return n.set(e),e.set([n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19]]),this._dirty=!0,this}});a.BLACK_WHITE=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],a.NEGATIVE=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],a.DESATURATE_LUMINANCE=[.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],a.SEPIA=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],a.LSD=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],a.BROWN=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],a.VINTAGE=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],a.KODACHROME=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],a.TECHNICOLOR=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],a.POLAROID=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],a.SHIFT_BGR=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],v.exports=a},51767:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(29747),a=new o({initialize:function(s,e,n){this._rgb=[0,0,0],this.onChangeCallback=g,this.dirty=!1,this.set(s,e,n)},set:function(r,s,e){return r===void 0&&(r=0),s===void 0&&(s=0),e===void 0&&(e=0),this._rgb=[r,s,e],this.onChange(),this},equals:function(r,s,e){var n=this._rgb;return n[0]===r&&n[1]===s&&n[2]===e},onChange:function(){this.dirty=!0;var r=this._rgb;this.onChangeCallback.call(this,r[0],r[1],r[2])},r:{get:function(){return this._rgb[0]},set:function(r){this._rgb[0]=r,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(r){this._rgb[1]=r,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(r){this._rgb[2]=r,this.onChange()}},destroy:function(){this.onChangeCallback=null}});v.exports=a},60461:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12};v.exports=E},54312:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(35893),a=t(86327),r=t(88417),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)+h),a(e,o(n)+i),e};v.exports=s},46768:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(86327),r=t(385),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)-h),a(e,o(n)+i),e};v.exports=s},35827:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(54380),a=t(86327),r=t(40136),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)+h),a(e,o(n)+i),e};v.exports=s},46871:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66786),g=t(35893),a=t(7702),r=function(s,e,n,h){return n===void 0&&(n=0),h===void 0&&(h=0),o(s,g(e)+n,a(e)+h),s};v.exports=r},5198:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(26541),a=t(20786),r=t(385),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)-h),a(e,o(n)+i),e};v.exports=s},11879:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=[];g[o.BOTTOM_CENTER]=t(54312),g[o.BOTTOM_LEFT]=t(46768),g[o.BOTTOM_RIGHT]=t(35827),g[o.CENTER]=t(46871),g[o.LEFT_CENTER]=t(5198),g[o.RIGHT_CENTER]=t(80503),g[o.TOP_CENTER]=t(89698),g[o.TOP_LEFT]=t(922),g[o.TOP_RIGHT]=t(21373),g[o.LEFT_BOTTOM]=g[o.BOTTOM_LEFT],g[o.LEFT_TOP]=g[o.TOP_LEFT],g[o.RIGHT_BOTTOM]=g[o.BOTTOM_RIGHT],g[o.RIGHT_TOP]=g[o.TOP_RIGHT];var a=function(r,s,e,n,h){return g[e](r,s,n,h)};v.exports=a},80503:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(54380),a=t(20786),r=t(40136),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)+h),a(e,o(n)+i),e};v.exports=s},89698:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35893),g=t(17717),a=t(88417),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(n)+h),r(e,g(n)-i),e};v.exports=s},922:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26541),g=t(17717),a=t(385),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(n)-h),r(e,g(n)-i),e};v.exports=s},21373:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54380),g=t(17717),a=t(40136),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(n)+h),r(e,g(n)-i),e};v.exports=s},91660:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BottomCenter:t(54312),BottomLeft:t(46768),BottomRight:t(35827),Center:t(46871),LeftCenter:t(5198),QuickSet:t(11879),RightCenter:t(80503),TopCenter:t(89698),TopLeft:t(922),TopRight:t(21373)}},71926:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=t(79291),a={In:t(91660),To:t(16694)};a=g(!1,a,o),v.exports=a},21578:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(35893),a=t(88417),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,g(n)+h),r(e,o(n)+i),e};v.exports=s},10210:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(385),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,g(n)-h),r(e,o(n)+i),e};v.exports=s},82341:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(54380),a=t(40136),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,g(n)+h),r(e,o(n)+i),e};v.exports=s},87958:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(86327),r=t(40136),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)-h),a(e,o(n)+i),e};v.exports=s},40080:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(26541),a=t(20786),r=t(40136),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)-h),a(e,o(n)+i),e};v.exports=s},88466:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26541),g=t(17717),a=t(40136),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(n)-h),r(e,g(n)-i),e};v.exports=s},38829:(v,E,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=[];g[o.BOTTOM_CENTER]=t(21578),g[o.BOTTOM_LEFT]=t(10210),g[o.BOTTOM_RIGHT]=t(82341),g[o.LEFT_BOTTOM]=t(87958),g[o.LEFT_CENTER]=t(40080),g[o.LEFT_TOP]=t(88466),g[o.RIGHT_BOTTOM]=t(19211),g[o.RIGHT_CENTER]=t(34609),g[o.RIGHT_TOP]=t(48741),g[o.TOP_CENTER]=t(49440),g[o.TOP_LEFT]=t(81288),g[o.TOP_RIGHT]=t(61323);var a=function(r,s,e,n,h){return g[e](r,s,n,h)};v.exports=a},19211:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(54380),a=t(86327),r=t(385),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)+h),a(e,o(n)+i),e};v.exports=s},34609:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7702),g=t(54380),a=t(20786),r=t(385),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,g(n)+h),a(e,o(n)+i),e};v.exports=s},48741:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54380),g=t(17717),a=t(385),r=t(66737),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),a(e,o(n)+h),r(e,g(n)-i),e};v.exports=s},49440:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35893),g=t(17717),a=t(86327),r=t(88417),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,o(n)+h),a(e,g(n)-i),e};v.exports=s},81288:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26541),g=t(17717),a=t(86327),r=t(385),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,o(n)-h),a(e,g(n)-i),e};v.exports=s},61323:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54380),g=t(17717),a=t(86327),r=t(40136),s=function(e,n,h,i){return h===void 0&&(h=0),i===void 0&&(i=0),r(e,o(n)+h),a(e,g(n)-i),e};v.exports=s},16694:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BottomCenter:t(21578),BottomLeft:t(10210),BottomRight:t(82341),LeftBottom:t(87958),LeftCenter:t(40080),LeftTop:t(88466),QuickSet:t(38829),RightBottom:t(19211),RightCenter:t(34609),RightTop:t(48741),TopCenter:t(49440),TopLeft:t(81288),TopRight:t(61323)}},66786:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(88417),g=t(20786),a=function(r,s,e){return o(r,s),g(r,e)};v.exports=a},62235:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.y+t.height-t.height*t.originY};v.exports=E},72873:(v,E,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62235),g=t(26541),a=t(54380),r=t(17717),s=t(87841),e=function(n,h){h===void 0&&(h=new s);var i=g(n),l=r(n);return h.x=i,h.y=l,h.width=a(n)-i,h.height=o(n)-l,h};v.exports=e},35893:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x-t.width*t.originX+t.width*.5};v.exports=E},7702:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.y-t.height*t.originY+t.height*.5};v.exports=E},26541:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x-t.width*t.originX};v.exports=E},87431:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.width*t.originX};v.exports=E},46928:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.height*t.originY};v.exports=E},54380:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x+t.width-t.width*t.originX};v.exports=E},17717:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.y-t.height*t.originY};v.exports=E},86327:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.y=o-t.height+t.height*t.originY,t};v.exports=E},88417:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.width*t.originX;return t.x=o+g-t.width*.5,t};v.exports=E},20786:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.height*t.originY;return t.y=o+g-t.height*.5,t};v.exports=E},385:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x=o+t.width*t.originX,t};v.exports=E},40136:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x=o-t.width+t.width*t.originX,t};v.exports=E},66737:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.y=o+t.height*t.originY,t};v.exports=E},58724:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CenterOn:t(66786),GetBottom:t(62235),GetBounds:t(72873),GetCenterX:t(35893),GetCenterY:t(7702),GetLeft:t(26541),GetOffsetX:t(87431),GetOffsetY:t(46928),GetRight:t(54380),GetTop:t(17717),SetBottom:t(86327),SetCenterX:t(88417),SetCenterY:t(20786),SetLeft:t(385),SetRight:t(40136),SetTop:t(66737)}},20623:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCrisp:function(t){var o=["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"];return o.forEach(function(g){t.style["image-rendering"]=g}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}};v.exports=E},27919:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8054),g=t(68703),a=[],r=!1,s=function(){var e=function(m,T,y,S,C){T===void 0&&(T=1),y===void 0&&(y=1),S===void 0&&(S=o.CANVAS),C===void 0&&(C=!1);var R,I=i(S);return I===null?(I={parent:m,canvas:document.createElement("canvas"),type:S},S===o.CANVAS&&a.push(I),R=I.canvas):(I.parent=m,R=I.canvas),C&&(I.parent=R),R.width=T,R.height=y,r&&S===o.CANVAS&&g.disable(R.getContext("2d",{willReadFrequently:!1})),R},n=function(m,T,y){return e(m,T,y,o.CANVAS)},h=function(m,T,y){return e(m,T,y,o.WEBGL)},i=function(m){if(m===void 0&&(m=o.CANVAS),m===o.WEBGL)return null;for(var T=0;T<a.length;T++){var y=a[T];if(!y.parent&&y.type===m)return y}return null},l=function(m){var T=m instanceof HTMLCanvasElement;a.forEach(function(y){(T&&y.canvas===m||!T&&y.parent===m)&&(y.parent=null,y.canvas.width=1,y.canvas.height=1)})},f=function(){var m=0;return a.forEach(function(T){T.parent&&m++}),m},u=function(){return a.length-f()},d=function(){r=!0},p=function(){r=!1};return{create2D:n,create:e,createWebGL:h,disableSmoothing:d,enableSmoothing:p,first:i,free:u,pool:a,remove:l,total:f}};v.exports=s()},68703:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="",t=function(){var o=function(s){for(var e=["i","webkitI","msI","mozI","oI"],n=0;n<e.length;n++){var h=e[n]+"mageSmoothingEnabled";if(h in s)return h}return null},g=function(s){return E===""&&(E=o(s)),E&&(s[E]=!0),s},a=function(s){return E===""&&(E=o(s)),E&&(s[E]=!1),s},r=function(s){return E!==null?s[E]:null};return{disable:a,enable:g,getPrefix:o,isEnabled:r}};v.exports=t()},65208:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o="none"),t.style.msTouchAction=o,t.style["ms-touch-action"]=o,t.style["touch-action"]=o,t};v.exports=E},91610:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o="none");var g=["-webkit-","-khtml-","-moz-","-ms-",""];return g.forEach(function(a){t.style[a+"user-select"]=o}),t.style["-webkit-touch-callout"]=o,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t};v.exports=E},26253:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CanvasInterpolation:t(20623),CanvasPool:t(27919),Smoothing:t(68703),TouchAction:t(65208),UserSelect:t(91610)}},40987:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37589),a=t(1e3),r=t(7537),s=t(87837),e=new o({initialize:function(h,i,l,f){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(h,i,l,f)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(n,h,i,l,f){return l===void 0&&(l=255),f===void 0&&(f=!0),this._locked=!0,this.red=n,this.green=h,this.blue=i,this.alpha=l,this._locked=!1,this.update(f)},setGLTo:function(n,h,i,l){return l===void 0&&(l=1),this._locked=!0,this.redGL=n,this.greenGL=h,this.blueGL=i,this.alphaGL=l,this._locked=!1,this.update(!0)},setFromRGB:function(n){return this._locked=!0,this.red=n.r,this.green=n.g,this.blue=n.b,n.hasOwnProperty("a")&&(this.alpha=n.a),this._locked=!1,this.update(!0)},setFromHSV:function(n,h,i){return r(n,h,i,this)},update:function(n){if(n===void 0&&(n=!1),this._locked)return this;var h=this.r,i=this.g,l=this.b,f=this.a;return this._color=g(h,i,l),this._color32=a(h,i,l,f),this._rgba="rgba("+h+","+i+","+l+","+f/255+")",n&&s(h,i,l,this),this},updateHSV:function(){var n=this.r,h=this.g,i=this.b;return s(n,h,i,this),this},clone:function(){return new e(this.r,this.g,this.b,this.a)},gray:function(n){return this.setTo(n,n,n)},random:function(n,h){n===void 0&&(n=0),h===void 0&&(h=255);var i=Math.floor(n+Math.random()*(h-n)),l=Math.floor(n+Math.random()*(h-n)),f=Math.floor(n+Math.random()*(h-n));return this.setTo(i,l,f)},randomGray:function(n,h){n===void 0&&(n=0),h===void 0&&(h=255);var i=Math.floor(n+Math.random()*(h-n));return this.setTo(i,i,i)},saturate:function(n){return this.s+=n/100,this},desaturate:function(n){return this.s-=n/100,this},lighten:function(n){return this.v+=n/100,this},darken:function(n){return this.v-=n/100,this},brighten:function(n){var h=this.r,i=this.g,l=this.b;return h=Math.max(0,Math.min(255,h-Math.round(255*-(n/100)))),i=Math.max(0,Math.min(255,i-Math.round(255*-(n/100)))),l=Math.max(0,Math.min(255,l-Math.round(255*-(n/100)))),this.setTo(h,i,l)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(n){this.gl[0]=Math.min(Math.abs(n),1),this.r=Math.floor(this.gl[0]*255),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(n){this.gl[1]=Math.min(Math.abs(n),1),this.g=Math.floor(this.gl[1]*255),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(n){this.gl[2]=Math.min(Math.abs(n),1),this.b=Math.floor(this.gl[2]*255),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(n){this.gl[3]=Math.min(Math.abs(n),1),this.a=Math.floor(this.gl[3]*255),this.update()}},red:{get:function(){return this.r},set:function(n){n=Math.floor(Math.abs(n)),this.r=Math.min(n,255),this.gl[0]=n/255,this.update(!0)}},green:{get:function(){return this.g},set:function(n){n=Math.floor(Math.abs(n)),this.g=Math.min(n,255),this.gl[1]=n/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(n){n=Math.floor(Math.abs(n)),this.b=Math.min(n,255),this.gl[2]=n/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(n){n=Math.floor(Math.abs(n)),this.a=Math.min(n,255),this.gl[3]=n/255,this.update()}},h:{get:function(){return this._h},set:function(n){this._h=n,r(n,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(n){this._s=n,r(this._h,n,this._v,this)}},v:{get:function(){return this._v},set:function(n){this._v=n,r(this._h,this._s,n,this)}}});v.exports=e},92728:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37589),g=function(a){a===void 0&&(a=1024);var r=[],s=255,e,n=255,h=0,i=0;for(e=0;e<=s;e++)r.push({r:n,g:e,b:i,color:o(n,e,i)});for(h=255,e=s;e>=0;e--)r.push({r:e,g:h,b:i,color:o(e,h,i)});for(n=0,e=0;e<=s;e++,h--)r.push({r:n,g:h,b:e,color:o(n,h,e)});for(h=0,i=255,e=0;e<=s;e++,i--,n++)r.push({r:n,g:h,b:i,color:o(n,h,i)});if(a===1024)return r;var l=[],f=0,u=1024/a;for(e=0;e<a;e++)l.push(r[Math.floor(f)]),f+=u;return l};v.exports=g},91588:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o={r:t>>16&255,g:t>>8&255,b:t&255,a:255};return t>16777215&&(o.a=t>>>24),o};v.exports=E},62957:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=t.toString(16);return o.length===1?"0"+o:o};v.exports=E},37589:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t<<16|o<<8|g};v.exports=E},1e3:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return a<<24|t<<16|o<<8|g};v.exports=E},62183:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=t(89528),a=function(r,s,e){var n=e,h=e,i=e;if(s!==0){var l=e<.5?e*(1+s):e+s-e*s,f=2*e-l;n=g(f,l,r+1/3),h=g(f,l,r),i=g(f,l,r-1/3)}var u=new o;return u.setGLTo(n,h,i,1)};v.exports=a},27939:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7537),g=function(a,r){a===void 0&&(a=1),r===void 0&&(r=1);for(var s=[],e=0;e<=359;e++)s.push(o(e/359,a,r));return s};v.exports=g},7537:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37589);function g(r,s,e,n){var h=(r+s*6)%6,i=Math.min(h,4-h,1);return Math.round(255*(n-n*e*Math.max(0,i)))}var a=function(r,s,e,n){s===void 0&&(s=1),e===void 0&&(e=1);var h=g(5,r,s,e),i=g(3,r,s,e),l=g(1,r,s,e);return n?n.setTo?n.setTo(h,i,l,n.alpha,!0):(n.r=h,n.g=i,n.b=l,n.color=o(h,i,l),n):{r:h,g:i,b:l,color:o(h,i,l)}};v.exports=a},70238:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=function(a){var r=new o;a=a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(i,l,f,u){return l+l+f+f+u+u});var s=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);if(s){var e=parseInt(s[1],16),n=parseInt(s[2],16),h=parseInt(s[3],16);r.setTo(e,n,h)}return r};v.exports=g},89528:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return g<0&&(g+=1),g>1&&(g-=1),g<.16666666666666666?t+(o-t)*6*g:g<.5?o:g<.6666666666666666?t+(o-t)*(.6666666666666666-g)*6:t};v.exports=E},30100:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=t(90664),a=function(r){var s=g(r);return new o(s.r,s.g,s.b,s.a)};v.exports=a},90664:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:t&255}:{a:255,r:t>>16&255,g:t>>8&255,b:t&255}};v.exports=E},13699:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28915),g=function(s,e,n,h,i,l,f,u){f===void 0&&(f=100),u===void 0&&(u=0);var d=u/f;return{r:o(s,h,d),g:o(e,i,d),b:o(n,l,d)}},a=function(s,e,n,h){return n===void 0&&(n=100),h===void 0&&(h=0),g(s.r,s.g,s.b,e.r,e.g,e.b,n,h)},r=function(s,e,n,h,i,l){return i===void 0&&(i=100),l===void 0&&(l=0),g(s.r,s.g,s.b,e,n,h,i,l)};v.exports={RGBWithRGB:g,ColorWithRGB:r,ColorWithColor:a}},68957:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=function(a){return new o(a.r,a.g,a.b,a.a)};v.exports=g},87388:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987),g=function(a){var r=new o,s=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a.toLowerCase());if(s){var e=parseInt(s[1],10),n=parseInt(s[2],10),h=parseInt(s[3],10),i=s[4]!==void 0?parseFloat(s[4]):1;r.setTo(e,n,h,i*255)}return r};v.exports=g},87837:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){a===void 0&&(a={h:0,s:0,v:0}),t/=255,o/=255,g/=255;var r=Math.min(t,o,g),s=Math.max(t,o,g),e=s-r,n=0,h=s===0?0:e/s,i=s;return s!==r&&(s===t?n=(o-g)/e+(o<g?6:0):s===o?n=(g-t)/e+2:s===g&&(n=(t-o)/e+4),n/=6),a.hasOwnProperty("_h")?(a._h=n,a._s=h,a._v=i):(a.h=n,a.s=h,a.v=i),a};v.exports=E},75723:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62957),g=function(a,r,s,e,n){return e===void 0&&(e=255),n===void 0&&(n="#"),n==="#"?"#"+((1<<24)+(a<<16)+(r<<8)+s).toString(16).slice(1,7):"0x"+o(e)+o(a)+o(r)+o(s)};v.exports=g},85386:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(40987),a=function(r,s){return r===void 0&&(r=0),s===void 0&&(s=255),new g(o(r,s),o(r,s),o(r,s))};v.exports=a},80333:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70238),g=t(30100),a=t(68957),r=t(87388),s=function(e){var n=typeof e;switch(n){case"string":return e.substr(0,3).toLowerCase()==="rgb"?r(e):o(e);case"number":return g(e);case"object":return a(e)}};v.exports=s},3956:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40987);o.ColorSpectrum=t(92728),o.ColorToRGBA=t(91588),o.ComponentToHex=t(62957),o.GetColor=t(37589),o.GetColor32=t(1e3),o.HexStringToColor=t(70238),o.HSLToColor=t(62183),o.HSVColorWheel=t(27939),o.HSVToRGB=t(7537),o.HueToComponent=t(89528),o.IntegerToColor=t(30100),o.IntegerToRGB=t(90664),o.Interpolate=t(13699),o.ObjectToColor=t(68957),o.RandomRGB=t(85386),o.RGBStringToColor=t(87388),o.RGBToHSV=t(87837),o.RGBToString=t(75723),o.ValueToColor=t(80333),v.exports=o},27460:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Align:t(71926),BaseShader:t(73894),Bounds:t(58724),Canvas:t(26253),Color:t(3956),ColorMatrix:t(89422),Masks:t(69781),RGB:t(51767)}},6858:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(39429),a=new o({initialize:function(s,e,n,h,i,l){e||(e=s.sys.make.image({x:n,y:h,key:i,frame:l,add:!1})),this.bitmapMask=e,this.invertAlpha=!1,this.isStencil=!1},setBitmap:function(r){this.bitmapMask=r},preRenderWebGL:function(r,s,e){r.pipelines.BITMAPMASK_PIPELINE.beginMask(this,s,e)},postRenderWebGL:function(r,s,e){r.pipelines.BITMAPMASK_PIPELINE.endMask(this,s,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.bitmapMask=null}});g.register("bitmapMask",function(r,s,e,n,h){return new a(this.scene,r,s,e,n,h)}),v.exports=a},80661:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s){this.geometryMask=s,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(a){return this.geometryMask=a,this},setInvertAlpha:function(a){return a===void 0&&(a=!0),this.invertAlpha=a,this},preRenderWebGL:function(a,r,s){var e=a.gl;a.flush(),a.maskStack.length===0&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),a.maskCount=0),a.currentCameraMask.mask!==this&&(a.currentMask.mask=this),a.maskStack.push({mask:this,camera:s}),this.applyStencil(a,s,!0),a.maskCount++},applyStencil:function(a,r,s){var e=a.gl,n=this.geometryMask,h=a.maskCount,i=255;e.colorMask(!1,!1,!1,!1),s?(e.stencilFunc(e.EQUAL,h,i),e.stencilOp(e.KEEP,e.KEEP,e.INCR),h++):(e.stencilFunc(e.EQUAL,h+1,i),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),this.level=h,n.renderWebGL(a,n,r),a.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),this.invertAlpha?e.stencilFunc(e.NOTEQUAL,h,i):e.stencilFunc(e.EQUAL,h,i)},postRenderWebGL:function(a){var r=a.gl;a.maskStack.pop(),a.maskCount--,a.flush();var s=a.currentMask;if(a.maskStack.length===0)s.mask=null,r.disable(r.STENCIL_TEST);else{var e=a.maskStack[a.maskStack.length-1];e.mask.applyStencil(a,e.camera,!1),a.currentCameraMask.mask!==e.mask?(s.mask=e.mask,s.camera=e.camera):s.mask=null}},preRenderCanvas:function(a,r,s){var e=this.geometryMask;a.currentContext.save(),e.renderCanvas(a,e,s,null,null,!0),a.currentContext.clip()},postRenderCanvas:function(a){a.currentContext.restore()},destroy:function(){this.geometryMask=null}});v.exports=g},69781:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BitmapMask:t(6858),GeometryMask:t(80661)}},73894:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n){(!s||s==="")&&(s=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join(`
`)),(!e||e==="")&&(e=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join(`
`)),n===void 0&&(n=null),this.key=r,this.fragmentSrc=s,this.vertexSrc=e,this.uniforms=n}});v.exports=g},40366:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g;if(o)typeof o=="string"?g=document.getElementById(o):typeof o=="object"&&o.nodeType===1&&(g=o);else if(t.parentElement||o===null)return t;return g||(g=document.body),g.appendChild(t),t};v.exports=E},83719:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40366),g=function(a){var r=a.config;if(!(!r.parent||!r.domCreateContainer)){var s=document.createElement("div");s.style.cssText=["display: block;","width: "+a.scale.width+"px;","height: "+a.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+r.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),a.domContainer=s,o(s,r.parent)}};v.exports=g},57264:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25892),g=function(a){if(document.readyState==="complete"||document.readyState==="interactive"){a();return}var r=function(){document.removeEventListener("deviceready",r,!0),document.removeEventListener("DOMContentLoaded",r,!0),window.removeEventListener("load",r,!0),a()};document.body?o.cordova?document.addEventListener("deviceready",r,!1):(document.addEventListener("DOMContentLoaded",r,!0),window.addEventListener("load",r,!0)):window.setTimeout(r,20)};v.exports=g},57811:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){if(!t)return window.innerHeight;var o=Math.abs(window.orientation),g={w:0,h:0},a=document.createElement("div");return a.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(a),g.w=o===90?a.offsetHeight:window.innerWidth,g.h=o===90?window.innerWidth:a.offsetHeight,document.documentElement.removeChild(a),a=null,Math.abs(window.orientation)!==90?g.h:g.w};v.exports=E},45818:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13560),g=function(a,r){var s=window.screen,e=s?s.orientation||s.mozOrientation||s.msOrientation:!1;if(e&&typeof e.type=="string")return e.type;if(typeof e=="string")return e;if(typeof window.orientation=="number")return window.orientation===0||window.orientation===180?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE;if(window.matchMedia){if(window.matchMedia("(orientation: portrait)").matches)return o.ORIENTATION.PORTRAIT;if(window.matchMedia("(orientation: landscape)").matches)return o.ORIENTATION.LANDSCAPE}else return r>a?o.ORIENTATION.PORTRAIT:o.ORIENTATION.LANDSCAPE};v.exports=g},74403:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o;return t!==""&&(typeof t=="string"?o=document.getElementById(t):t&&t.nodeType===1&&(o=t)),o||(o=document.body),o};v.exports=E},56836:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o="";try{if(window.DOMParser){var g=new DOMParser;o=g.parseFromString(t,"text/xml")}else o=new ActiveXObject("Microsoft.XMLDOM"),o.loadXML(t)}catch{o=null}return!o||!o.documentElement||o.getElementsByTagName("parsererror").length?null:o};v.exports=E},35846:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){t.parentNode&&t.parentNode.removeChild(t)};v.exports=E},43092:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(29747),a=new o({initialize:function(){this.isRunning=!1,this.callback=g,this.isSetTimeOut=!1,this.timeOutID=null,this.delay=0;var s=this;this.step=function e(n){s.callback(n),s.isRunning&&(s.timeOutID=window.requestAnimationFrame(e))},this.stepTimeout=function e(){s.isRunning&&(s.timeOutID=window.setTimeout(e,s.delay)),s.callback(window.performance.now())}},start:function(r,s,e){this.isRunning||(this.callback=r,this.isSetTimeOut=s,this.delay=e,this.isRunning=!0,this.timeOutID=s?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=g}});v.exports=a},84902:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={AddToDOM:t(40366),DOMContentLoaded:t(57264),GetInnerHeight:t(57811),GetScreenOrientation:t(45818),GetTarget:t(74403),ParseXML:t(56836),RemoveFromDOM:t(35846),RequestAnimationFrame:t(43092)};v.exports=o},47565:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(37277),r=new o({Extends:g,initialize:function(){g.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});a.register("EventEmitter",r,"events"),v.exports=r},93055:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={EventEmitter:t(47565)}},20122:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n){n===void 0&&(n=1),g.call(this,a.BARREL,e),this.amount=n}});v.exports=r},32251:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l,f,u){h===void 0&&(h=1),i===void 0&&(i=1),l===void 0&&(l=1),f===void 0&&(f=1),u===void 0&&(u=4),g.call(this,a.BLOOM,e),this.steps=u,this.offsetX=h,this.offsetY=i,this.blurStrength=l,this.strength=f,this.glcolor=[1,1,1],n!=null&&(this.color=n)},color:{get:function(){var s=this.glcolor;return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)},set:function(s){var e=this.glcolor;e[0]=(s>>16&255)/255,e[1]=(s>>8&255)/255,e[2]=(s&255)/255}}});v.exports=r},9047:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l,f,u){n===void 0&&(n=0),h===void 0&&(h=2),i===void 0&&(i=2),l===void 0&&(l=1),u===void 0&&(u=4),g.call(this,a.BLUR,e),this.quality=n,this.x=h,this.y=i,this.steps=u,this.strength=l,this.glcolor=[1,1,1],f!=null&&(this.color=f)},color:{get:function(){var s=this.glcolor;return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)},set:function(s){var e=this.glcolor;e[0]=(s>>16&255)/255,e[1]=(s>>8&255)/255,e[2]=(s&255)/255}}});v.exports=r},27885:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l,f,u,d){n===void 0&&(n=.5),h===void 0&&(h=1),i===void 0&&(i=.2),l===void 0&&(l=!1),f===void 0&&(f=1),u===void 0&&(u=1),d===void 0&&(d=1),g.call(this,a.BOKEH,e),this.radius=n,this.amount=h,this.contrast=i,this.isTiltShift=l,this.strength=d,this.blurX=f,this.blurY=u}});v.exports=r},12578:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l,f){n===void 0&&(n=8),l===void 0&&(l=1),f===void 0&&(f=.005),g.call(this,a.CIRCLE,e),this.scale=l,this.feather=f,this.thickness=n,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4],h!=null&&(this.color=h),i!=null&&(this.backgroundColor=i)},color:{get:function(){var s=this.glcolor;return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)},set:function(s){var e=this.glcolor;e[0]=(s>>16&255)/255,e[1]=(s>>8&255)/255,e[2]=(s&255)/255}},backgroundColor:{get:function(){var s=this.glcolor2;return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)},set:function(s){var e=this.glcolor2;e[0]=(s>>16&255)/255,e[1]=(s>>8&255)/255,e[2]=(s&255)/255}},backgroundAlpha:{get:function(){return this.glcolor2[3]},set:function(s){this.glcolor2[3]=s}}});v.exports=r},15802:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89422),a=t(14811),r=new o({Extends:g,initialize:function(e){g.call(this),this.type=a.COLOR_MATRIX,this.gameObject=e,this.active=!0},destroy:function(){this.gameObject=null,this._matrix=null,this._data=null}});v.exports=r},72898:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s){this.type=r,this.gameObject=s,this.active=!0},setActive:function(a){return this.active=a,this},destroy:function(){this.gameObject=null,this.active=!1}});v.exports=g},44553:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i){n===void 0&&(n="__WHITE"),h===void 0&&(h=.005),i===void 0&&(i=.005),g.call(this,a.DISPLACEMENT,e),this.x=h,this.y=i,this.glTexture,this.setTexture(n)},setTexture:function(s){var e=this.gameObject.scene.sys.textures.getFrame(s);return e&&(this.glTexture=e.glTexture),this}});v.exports=r},68531:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l){h===void 0&&(h=4),i===void 0&&(i=0),l===void 0&&(l=!1),g.call(this,a.GLOW,e),this.outerStrength=h,this.innerStrength=i,this.knockout=l,this.glcolor=[1,1,1,1],n!==void 0&&(this.color=n)},color:{get:function(){var s=this.glcolor;return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)},set:function(s){var e=this.glcolor;e[0]=(s>>16&255)/255,e[1]=(s>>8&255)/255,e[2]=(s&255)/255}}});v.exports=r},37102:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l,f,u,d,p){i===void 0&&(i=.2),l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=1),p===void 0&&(p=0),g.call(this,a.GRADIENT,e),this.alpha=i,this.size=p,this.fromX=l,this.fromY=f,this.toX=u,this.toY=d,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0],n!=null&&(this.color1=n),h!=null&&(this.color2=h)},color1:{get:function(){var s=this.glcolor1;return(s[0]<<16)+(s[1]<<8)+(s[2]|0)},set:function(s){var e=this.glcolor1;e[0]=s>>16&255,e[1]=s>>8&255,e[2]=s&255}},color2:{get:function(){var s=this.glcolor2;return(s[0]<<16)+(s[1]<<8)+(s[2]|0)},set:function(s){var e=this.glcolor2;e[0]=s>>16&255,e[1]=s>>8&255,e[2]=s&255}}});v.exports=r},86886:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n){n===void 0&&(n=1),g.call(this,a.PIXELATE,e),this.amount=n}});v.exports=r},92322:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l,f,u,d){n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=.1),l===void 0&&(l=1),u===void 0&&(u=6),d===void 0&&(d=1),g.call(this,a.SHADOW,e),this.x=n,this.y=h,this.decay=i,this.power=l,this.glcolor=[0,0,0,1],this.samples=u,this.intensity=d,f!==void 0&&(this.color=f)},color:{get:function(){var s=this.glcolor;return(s[0]*255<<16)+(s[1]*255<<8)+(s[2]*255|0)},set:function(s){var e=this.glcolor;e[0]=(s>>16&255)/255,e[1]=(s>>8&255)/255,e[2]=(s&255)/255}}});v.exports=r},39563:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l){n===void 0&&(n=.5),h===void 0&&(h=.5),i===void 0&&(i=3),l===void 0&&(l=!1),g.call(this,a.SHINE,e),this.speed=n,this.lineWidth=h,this.gradient=i,this.reveal=l}});v.exports=r},56448:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l){n===void 0&&(n=.5),h===void 0&&(h=.5),i===void 0&&(i=.5),l===void 0&&(l=.5),g.call(this,a.VIGNETTE,e),this.x=n,this.y=h,this.radius=i,this.strength=l}});v.exports=r},38433:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72898),a=t(14811),r=new o({Extends:g,initialize:function(e,n,h,i,l){n===void 0&&(n=.1),h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=!1),g.call(this,a.WIPE,e),this.progress=0,this.wipeWidth=n,this.direction=h,this.axis=i,this.reveal=l}});v.exports=r},14811:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={GLOW:4,SHADOW:5,PIXELATE:6,VIGNETTE:7,SHINE:8,BLUR:9,GRADIENT:12,BLOOM:13,COLOR_MATRIX:14,CIRCLE:15,BARREL:16,DISPLACEMENT:17,WIPE:18,BOKEH:19};v.exports=E},66064:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(14811),a={Barrel:t(20122),Controller:t(72898),Bloom:t(32251),Blur:t(9047),Bokeh:t(27885),Circle:t(12578),ColorMatrix:t(15802),Displacement:t(44553),Glow:t(68531),Gradient:t(37102),Pixelate:t(86886),Shadow:t(92322),Shine:t(39563),Vignette:t(56448),Wipe:t(38433)};a=o(!1,a,g),v.exports=a},25305:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(23568),a=function(r,s,e){s.x=g(e,"x",0),s.y=g(e,"y",0),s.depth=g(e,"depth",0),s.flipX=g(e,"flipX",!1),s.flipY=g(e,"flipY",!1);var n=g(e,"scale",null);typeof n=="number"?s.setScale(n):n!==null&&(s.scaleX=g(n,"x",1),s.scaleY=g(n,"y",1));var h=g(e,"scrollFactor",null);typeof h=="number"?s.setScrollFactor(h):h!==null&&(s.scrollFactorX=g(h,"x",1),s.scrollFactorY=g(h,"y",1)),s.rotation=g(e,"rotation",0);var i=g(e,"angle",null);i!==null&&(s.angle=i),s.alpha=g(e,"alpha",1);var l=g(e,"origin",null);if(typeof l=="number")s.setOrigin(l);else if(l!==null){var f=g(l,"x",.5),u=g(l,"y",.5);s.setOrigin(f,u)}s.blendMode=g(e,"blendMode",o.NORMAL),s.visible=g(e,"visible",!0);var d=g(e,"add",!0);return d&&r.sys.displayList.add(s),s.preUpdate&&r.sys.updateList.add(s),s};v.exports=a},13059:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23568),g=function(a,r){var s=o(r,"anims",null);if(s===null)return a;if(typeof s=="string")a.anims.play(s);else if(typeof s=="object"){var e=a.anims,n=o(s,"key",void 0);if(n){var h=o(s,"startFrame",void 0),i=o(s,"delay",0),l=o(s,"repeat",0),f=o(s,"repeatDelay",0),u=o(s,"yoyo",!1),d=o(s,"play",!1),p=o(s,"delayedPlay",0),m={key:n,delay:i,repeat:l,repeatDelay:f,yoyo:u,startFrame:h};d?e.play(m):p>0?e.playAfterDelay(m,p):e.load(m)}}return a};v.exports=g},8050:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(73162),a=t(37277),r=t(51708),s=t(44594),e=t(19186),n=new o({Extends:g,initialize:function(i){g.call(this,i),this.sortChildrenFlag=!1,this.scene=i,this.systems=i.sys,this.events=i.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.events.once(s.DESTROY,this.destroy,this)},addChildCallback:function(h){h.displayList&&h.displayList!==this&&h.removeFromDisplayList(),h.parentContainer&&h.parentContainer.remove(h),h.displayList||(this.queueDepthSort(),h.displayList=this,h.emit(r.ADDED_TO_SCENE,h,this.scene),this.events.emit(s.ADDED_TO_SCENE,h,this.scene))},removeChildCallback:function(h){this.queueDepthSort(),h.displayList=null,h.emit(r.REMOVED_FROM_SCENE,h,this.scene),this.events.emit(s.REMOVED_FROM_SCENE,h,this.scene)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(e(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(h,i){return h._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var h=this.list;h.length;)h[0].destroy(!0);this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});a.register("DisplayList",n,"displayList"),v.exports=n},95643:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(53774),a=t(45893),r=t(50792),s=t(51708),e=t(44594),n=new o({Extends:r,initialize:function(i,l){r.call(this),this.scene=i,this.displayList=null,this.type=l,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this),i.sys.queueDepthSort()},setActive:function(h){return this.active=h,this},setName:function(h){return this.name=h,this},setState:function(h){return this.state=h,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(h,i){return this.data||(this.data=new a(this)),this.data.set(h,i),this},incData:function(h,i){return this.data||(this.data=new a(this)),this.data.inc(h,i),this},toggleData:function(h){return this.data||(this.data=new a(this)),this.data.toggle(h),this},getData:function(h){return this.data||(this.data=new a(this)),this.data.get(h)},setInteractive:function(h,i,l){return this.scene.sys.input.enable(this,h,i,l),this},disableInteractive:function(){return this.scene.sys.input.disable(this),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return g(this)},willRender:function(h){var i=this.displayList&&this.displayList.active?this.displayList.willRender(h):!0;return!(!i||n.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&h.id)},getIndexList:function(){for(var h=this,i=this.parentContainer,l=[];i&&(l.unshift(i.getIndex(h)),h=i,i.parentContainer);)i=i.parentContainer;return this.displayList?l.unshift(this.displayList.getIndex(h)):l.unshift(this.scene.sys.displayList.getIndex(h)),l},addToDisplayList:function(h){return h===void 0&&(h=this.scene.sys.displayList),this.displayList&&this.displayList!==h&&this.removeFromDisplayList(),h.exists(this)||(this.displayList=h,h.add(this,!0),h.queueDepthSort(),this.emit(s.ADDED_TO_SCENE,this,this.scene),h.events.emit(e.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var h=this.displayList||this.scene.sys.displayList;return h&&h.exists(this)&&(h.remove(this,!0),h.queueDepthSort(),this.displayList=null,this.emit(s.REMOVED_FROM_SCENE,this,this.scene),h.events.emit(e.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(h){!this.scene||this.ignoreDestroy||(h===void 0&&(h=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(s.DESTROY,this,h),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.preFX&&(this.preFX.destroy(),this.preFX=void 0),this.postFX&&(this.postFX.destroy(),this.postFX=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});n.RENDER_MASK=15,v.exports=n},44603:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37277),a=t(44594),r=new o({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(s,e){r.prototype.hasOwnProperty(s)||(r.prototype[s]=e)},r.remove=function(s){r.prototype.hasOwnProperty(s)&&delete r.prototype[s]},g.register("GameObjectCreator",r,"make"),v.exports=r},39429:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37277),a=t(44594),r=new o({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.displayList,this.updateList,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(a.DESTROY,this.destroy,this)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},existing:function(s){return(s.renderCanvas||s.renderWebGL)&&this.displayList.add(s),s.preUpdate&&this.updateList.add(s),s},shutdown:function(){this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});r.register=function(s,e){r.prototype.hasOwnProperty(s)||(r.prototype[s]=e)},r.remove=function(s){r.prototype.hasOwnProperty(s)&&delete r.prototype[s]},g.register("GameObjectFactory",r,"add"),v.exports=r},91296:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61340),g=new o,a=new o,r=new o,s={camera:g,sprite:a,calc:r},e=function(n,h,i){var l=g,f=a,u=r;return f.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),l.copyFrom(h.matrix),i?(l.multiplyWithOffset(i,-h.scrollX*n.scrollFactorX,-h.scrollY*n.scrollFactorY),f.e=n.x,f.f=n.y):(f.e-=h.scrollX*n.scrollFactorX,f.f-=h.scrollY*n.scrollFactorY),l.multiply(f,u),s};v.exports=e},45027:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(25774),a=t(37277),r=t(44594),s=new o({Extends:g,initialize:function(n){g.call(this),this.checkQueue=!0,this.scene=n,this.systems=n.sys,n.sys.events.once(r.BOOT,this.boot,this),n.sys.events.on(r.START,this.start,this)},boot:function(){this.systems.events.once(r.DESTROY,this.destroy,this)},start:function(){var e=this.systems.events;e.on(r.PRE_UPDATE,this.update,this),e.on(r.UPDATE,this.sceneUpdate,this),e.once(r.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(e,n){for(var h=this._active,i=h.length,l=0;l<i;l++){var f=h[l];f.active&&f.preUpdate.call(f,e,n)}},shutdown:function(){for(var e=this._active.length;e--;)this._active[e].destroy(!0);for(e=this._pending.length;e--;)this._pending[e].destroy(!0);for(e=this._destroy.length;e--;)this._destroy[e].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var n=this.systems.events;n.off(r.PRE_UPDATE,this.update,this),n.off(r.UPDATE,this.sceneUpdate,this),n.off(r.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(r.START,this.start,this),this.scene=null,this.systems=null}});a.register("UpdateList",s,"updateList"),v.exports=s},3217:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r,s,e,n,h,i,l,f,u,d,p){var m=g.x-o.displayOriginX+r,T=g.y-o.displayOriginY+s,y=m+g.w,S=T+g.h,C=e.getXRound(m,T,n),R=e.getYRound(m,T,n),I=e.getXRound(m,S,n),L=e.getYRound(m,S,n),w=e.getXRound(y,S,n),O=e.getYRound(y,S,n),B=e.getXRound(y,T,n),V=e.getYRound(y,T,n);t.batchQuad(o,C,R,I,L,w,O,B,V,a.u0,a.v0,a.u1,a.v1,h,i,l,f,u,d,p)};v.exports=E},53048:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){if(g===void 0&&(g=!1),a===void 0)return a={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0},a;var r=t.text,s=r.length,e=t.maxWidth,n=t.wordWrapCharCode,h=Number.MAX_VALUE,i=Number.MAX_VALUE,l=0,f=0,u=t.fontData.chars,d=t.fontData.lineHeight,p=t.letterSpacing,m=t.lineSpacing,T=0,y=0,S=0,C=null,R=t._align,I=0,L=0,w=t.fontSize/t.fontData.size,O=w*t.scaleX,B=w*t.scaleY,V=null,b=0,X=[],K=Number.MAX_VALUE,Q=0,U=0,W=0,F,G=[],z=[],Y=null;if(e>0){for(F=0;F<s;F++){if(S=r.charCodeAt(F),S===10){Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*O,y:Y.y*B,w:Y.w*O,h:Y.h*B,cr:!0}),Y=null),T=0,y+=d+m,V=null;continue}if(C=u[S],!!C){if(V!==null)var $=C.kerning[b];S===n?Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*O,y:Y.y*B,w:Y.w*O,h:Y.h*B,cr:!1}),Y=null):(Y===null&&(Y={word:"",i:F,x:T,y,w:0,h:d,cr:!1}),Y.word=Y.word.concat(r[F]),Y.w+=C.xOffset+C.xAdvance+($!==void 0?$:0)),T+=C.xAdvance+p,V=C,b=S}}Y!==null&&G.push({word:Y.word,i:Y.i,x:Y.x*O,y:Y.y*B,w:Y.w*O,h:Y.h*B,cr:!1}),T=0,y=0,V=null,b=0;var j,Z=0,q=[];for(F=0;F<G.length;F++){var _=G[F],tt=_.x,nt=_.x+_.w;if(j){var at=tt-(j.x+j.w);Z=tt-(at+j.w),j=null}var st=tt-Z,lt=nt-Z;st>e||lt>e?(q.push(_.i-1),_.cr?(q.push(_.i+_.word.length),Z=0,j=null):j=_):_.cr&&(q.push(_.i+_.word.length),Z=0,j=null)}var vt=function(Bt,Xt,$t){return Bt.substr(0,Xt)+$t+Bt.substr(Xt+1)};for(F=q.length-1;F>=0;F--)r=vt(r,q[F],`
`);a.wrappedText=r,s=r.length,G=[],Y=null}var mt=0;for(F=0;F<s;F++){if(S=r.charCodeAt(F),S===10){Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*O,y:Y.y*B,w:Y.w*O,h:Y.h*B}),Y=null),T=0,y+=d+m,V=null,X[U]=W,W>Q&&(Q=W),W<K&&(K=W),U++,W=0;continue}if(C=u[S],!!C){if(I=T,L=y,V!==null){var pt=C.kerning[b];I+=pt!==void 0?pt:0}h>I&&(h=I),i>L&&(i=L);var ot=I+C.xAdvance,ct=L+d;l<ot&&(l=ot),f<ct&&(f=ct);var ft=C.xOffset+C.xAdvance+(pt!==void 0?pt:0);S===n?Y!==null&&(G.push({word:Y.word,i:Y.i,x:Y.x*O,y:Y.y*B,w:Y.w*O,h:Y.h*B}),Y=null):(Y===null&&(Y={word:"",i:mt,x:T,y,w:0,h:d}),Y.word=Y.word.concat(r[F]),Y.w+=ft),z.push({i:mt,idx:F,char:r[F],code:S,x:(C.xOffset+I)*w,y:(C.yOffset+y)*w,w:C.width*w,h:C.height*w,t:y*w,r:ot*w,b:d*w,line:U,glyph:C}),T+=C.xAdvance+p+(pt!==void 0?pt:0),V=C,b=S,W=ot*w,mt++}}if(Y!==null&&G.push({word:Y.word,i:Y.i,x:Y.x*O,y:Y.y*B,w:Y.w*O,h:Y.h*B}),X[U]=W,W>Q&&(Q=W),W<K&&(K=W),R>0)for(var Et=0;Et<z.length;Et++){var St=z[Et];if(R===1){var It=(Q-X[St.line])/2;St.x+=It,St.r+=It}else if(R===2){var Mt=Q-X[St.line];St.x+=Mt,St.r+=Mt}}var wt=a.local,Rt=a.global,zt=a.lines;return wt.x=h*w,wt.y=i*w,wt.width=l*w,wt.height=f*w,Rt.x=t.x-t._displayOriginX+h*O,Rt.y=t.y-t._displayOriginY+i*B,Rt.width=l*O,Rt.height=f*B,zt.shortest=K,zt.longest=Q,zt.lengths=X,o&&(wt.x=Math.ceil(wt.x),wt.y=Math.ceil(wt.y),wt.width=Math.ceil(wt.width),wt.height=Math.ceil(wt.height),Rt.x=Math.ceil(Rt.x),Rt.y=Math.ceil(Rt.y),Rt.width=Math.ceil(Rt.width),Rt.height=Math.ceil(Rt.height),zt.shortest=Math.ceil(K),zt.longest=Math.ceil(Q)),g&&(t._displayOriginX=t.originX*wt.width,t._displayOriginY=t.originY*wt.height,Rt.x=t.x-t._displayOriginX*t.scaleX,Rt.y=t.y-t._displayOriginY*t.scaleY,o&&(Rt.x=Math.ceil(Rt.x),Rt.y=Math.ceil(Rt.y))),a.words=G,a.characters=z,a.lines.height=d,a.scale=w,a.scaleX=t.scaleX,a.scaleY=t.scaleY,a};v.exports=E},61327:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(21859),g=function(a,r,s,e,n,h,i){var l=a.sys.textures.get(s),f=l.get(e),u=a.sys.cache.xml.get(n);if(f&&u){var d=o(u,f,h,i,l);return a.sys.cache.bitmapFont.add(r,{data:d,texture:s,frame:e,fromAtlas:!0}),!0}else return!1};v.exports=g},6925:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=function(a,r){var s=r.width,e=r.height,n=Math.floor(s/2),h=Math.floor(e/2),i=o(r,"chars","");if(i!==""){var l=o(r,"image",""),f=a.sys.textures.getFrame(l),u=f.cutX,d=f.cutY,p=f.source.width,m=f.source.height,T=o(r,"offset.x",0),y=o(r,"offset.y",0),S=o(r,"spacing.x",0),C=o(r,"spacing.y",0),R=o(r,"lineSpacing",0),I=o(r,"charsPerRow",null);I===null&&(I=p/s,I>i.length&&(I=i.length));for(var L=T,w=y,O={retroFont:!0,font:l,size:s,lineHeight:e+R,chars:{}},B=0,V=0;V<i.length;V++){var b=i.charCodeAt(V),X=(u+L)/p,K=(d+w)/m,Q=(u+L+s)/p,U=(d+w+e)/m;O.chars[b]={x:L,y:w,width:s,height:e,centerX:n,centerY:h,xOffset:0,yOffset:0,xAdvance:s,data:{},kerning:{},u0:X,v0:K,u1:Q,v1:U},B++,B===I?(B=0,L=T,w+=e+C):L+=s+S}var W={data:O,frame:null,texture:l};return W}};v.exports=g},21859:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(o,g){return parseInt(o.getAttribute(g),10)}var t=function(o,g,a,r,s){a===void 0&&(a=0),r===void 0&&(r=0);var e=g.cutX,n=g.cutY,h=g.source.width,i=g.source.height,l=g.sourceIndex,f={},u=o.getElementsByTagName("info")[0],d=o.getElementsByTagName("common")[0];f.font=u.getAttribute("face"),f.size=E(u,"size"),f.lineHeight=E(d,"lineHeight")+r,f.chars={};var p=o.getElementsByTagName("char"),m=g!==void 0&&g.trimmed;if(m)var T=g.height,y=g.width;for(var S=0;S<p.length;S++){var C=p[S],R=E(C,"id"),I=String.fromCharCode(R),L=E(C,"x"),w=E(C,"y"),O=E(C,"width"),B=E(C,"height");m&&(L<y&&(y=L),w<T&&(T=w)),m&&T!==0&&y!==0&&(L-=g.x,w-=g.y);var V=(e+L)/h,b=(n+w)/i,X=(e+L+O)/h,K=(n+w+B)/i;if(f.chars[R]={x:L,y:w,width:O,height:B,centerX:Math.floor(O/2),centerY:Math.floor(B/2),xOffset:E(C,"xoffset"),yOffset:E(C,"yoffset"),xAdvance:E(C,"xadvance")+a,data:{},kerning:{},u0:V,v0:b,u1:X,v1:K},s&&O!==0&&B!==0){var Q=s.add(I,l,L,w,O,B);Q&&Q.setUVs(O,B,V,b,X,K)}}var U=o.getElementsByTagName("kerning");for(S=0;S<U.length;S++){var W=U[S],F=E(W,"first"),G=E(W,"second"),z=E(W,"amount");f.chars[G].kerning[F]=z}return f};v.exports=t},196:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87662),g=t(79291),a={Parse:t(6925)};a=g(!1,a,o),v.exports=a},87662:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:` !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ`,TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:`ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789"(),-.' `,TEXT_SET7:`AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW")28FLRX-'39`,TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:`ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'"?!`,TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:`ABCDEFGHIJKLMNOPQRSTUVWXYZ.,"-+!?()':;0123456789`};v.exports=E},2638:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22186),g=t(83419),a=t(12310),r=new g({Extends:o,Mixins:[a],initialize:function(e,n,h,i,l,f,u){o.call(this,e,n,h,i,l,f,u),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(s,e){return this.cropWidth=s,this.cropHeight=e,this},setDisplayCallback:function(s){return this.displayCallback=s,this},setScrollX:function(s){return this.scrollX=s,this},setScrollY:function(s){return this.scrollY=s,this}});v.exports=r},86741:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20926),g=function(a,r,s,e){var n=r._text,h=n.length,i=a.currentContext;if(!(h===0||!o(a,i,r,s,e))){s.addToRenderList(r);var l=r.fromAtlas?r.frame:r.texture.frames.__BASE,f=r.displayCallback,u=r.callbackData,d=r.fontData.chars,p=r.fontData.lineHeight,m=r._letterSpacing,T=0,y=0,S=0,C=null,R=0,I=0,L=0,w=0,O=0,B=0,V=null,b=0,X=r.frame.source.image,K=l.cutX,Q=l.cutY,U=0,W=0,F=r._fontSize/r.fontData.size,G=r._align,z=0,Y=0;r.getTextBounds(!1);var $=r._bounds.lines;G===1?Y=($.longest-$.lengths[0])/2:G===2&&(Y=$.longest-$.lengths[0]),i.translate(-r.displayOriginX,-r.displayOriginY);var j=s.roundPixels;r.cropWidth>0&&r.cropHeight>0&&(i.beginPath(),i.rect(0,0,r.cropWidth,r.cropHeight),i.clip());for(var Z=0;Z<h;Z++){if(W=F,U=0,S=n.charCodeAt(Z),S===10){z++,G===1?Y=($.longest-$.lengths[z])/2:G===2&&(Y=$.longest-$.lengths[z]),T=0,y+=p,V=null;continue}if(C=d[S],!!C){if(R=K+C.x,I=Q+C.y,L=C.width,w=C.height,O=C.xOffset+T-r.scrollX,B=C.yOffset+y-r.scrollY,V!==null){var q=C.kerning[b];O+=q!==void 0?q:0}if(f){u.index=Z,u.charCode=S,u.x=O,u.y=B,u.scale=W,u.rotation=U,u.data=C.data;var _=f(u);O=_.x,B=_.y,W=_.scale,U=_.rotation}O*=W,B*=W,O+=Y,T+=C.xAdvance+m+(q!==void 0?q:0),V=C,b=S,!(L===0||w===0||S===32)&&(j&&(O=Math.round(O),B=Math.round(B)),i.save(),i.translate(O,B),i.rotate(U),i.scale(W,W),i.drawImage(X,R,I,L,w,0,0,L,w),i.restore())}}i.restore()}};v.exports=g},11164:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2638),g=t(25305),a=t(44603),r=t(23568);a.register("dynamicBitmapText",function(s,e){s===void 0&&(s={});var n=r(s,"font",""),h=r(s,"text",""),i=r(s,"size",!1),l=new o(this.scene,0,0,n,h,i);return e!==void 0&&(s.add=e),g(this.scene,l,s),l})},72566:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2638),g=t(39429);g.register("dynamicBitmapText",function(a,r,s,e,n){return this.displayList.add(new o(this.scene,a,r,s,e,n))})},12310:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(73482),a=t(86741),v.exports={renderWebGL:g,renderCanvas:a}},73482:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(61340),a=t(70554),r=new g,s=function(e,n,h,i){var l=n.text,f=l.length;if(f!==0){h.addToRenderList(n);var u=e.pipelines.set(n.pipeline,n),d=o(n,h,i);e.pipelines.preBatch(n);var p=d.sprite,m=d.calc,T=r,y=n.cropWidth>0||n.cropHeight>0;y&&(u.flush(),e.pushScissor(m.tx,m.ty,n.cropWidth*m.scaleX,n.cropHeight*m.scaleY));var S=n.frame,C=S.glTexture,R=n.tintFill,I=a.getTintAppendFloatAlpha(n.tintTopLeft,h.alpha*n._alphaTL),L=a.getTintAppendFloatAlpha(n.tintTopRight,h.alpha*n._alphaTR),w=a.getTintAppendFloatAlpha(n.tintBottomLeft,h.alpha*n._alphaBL),O=a.getTintAppendFloatAlpha(n.tintBottomRight,h.alpha*n._alphaBR),B=u.setGameObject(n),V=0,b=0,X=0,K=0,Q=n.letterSpacing,U,W=0,F=0,G,z=n.scrollX,Y=n.scrollY,$=n.fontData,j=$.chars,Z=$.lineHeight,q=n.fontSize/$.size,_=0,tt=n._align,nt=0,at=0,st=n.getTextBounds(!1);n.maxWidth>0&&(l=st.wrappedText,f=l.length);var lt=n._bounds.lines;tt===1?at=(lt.longest-lt.lengths[0])/2:tt===2&&(at=lt.longest-lt.lengths[0]);for(var vt=h.roundPixels,mt=n.displayCallback,pt=n.callbackData,ot=0;ot<f;ot++){if(X=l.charCodeAt(ot),X===10){nt++,tt===1?at=(lt.longest-lt.lengths[nt])/2:tt===2&&(at=lt.longest-lt.lengths[nt]),V=0,b+=Z,G=null;continue}if(U=j[X],!!U){W=U.width,F=U.height;var ct=U.xOffset+V-z,ft=U.yOffset+b-Y;if(G!==null){var Et=U.kerning[K];ct+=Et!==void 0?Et:0}if(V+=U.xAdvance+Q,G=U,K=X,!(W===0||F===0||X===32)){if(q=n.fontSize/n.fontData.size,_=0,mt){pt.color=0,pt.tint.topLeft=I,pt.tint.topRight=L,pt.tint.bottomLeft=w,pt.tint.bottomRight=O,pt.index=ot,pt.charCode=X,pt.x=ct,pt.y=ft,pt.scale=q,pt.rotation=_,pt.data=U.data;var St=mt(pt);ct=St.x,ft=St.y,q=St.scale,_=St.rotation,St.color?(I=St.color,L=St.color,w=St.color,O=St.color):(I=St.tint.topLeft,L=St.tint.topRight,w=St.tint.bottomLeft,O=St.tint.bottomRight),I=a.getTintAppendFloatAlpha(I,h.alpha*n._alphaTL),L=a.getTintAppendFloatAlpha(L,h.alpha*n._alphaTR),w=a.getTintAppendFloatAlpha(w,h.alpha*n._alphaBL),O=a.getTintAppendFloatAlpha(O,h.alpha*n._alphaBR)}ct*=q,ft*=q,ct-=n.displayOriginX,ft-=n.displayOriginY,ct+=at,T.applyITRS(ct,ft,_,q,q),m.multiply(T,p);var It=U.u0,Mt=U.v0,wt=U.u1,Rt=U.v1,zt=W,Bt=F,Xt=p.e,$t=p.f,ne=Bt*p.c+p.e,me=Bt*p.d+p.f,De=zt*p.a+Bt*p.c+p.e,Ne=zt*p.b+Bt*p.d+p.f,xe=zt*p.a+p.e,Pe=zt*p.b+p.f;vt&&(Xt=Math.round(Xt),$t=Math.round($t),ne=Math.round(ne),me=Math.round(me),De=Math.round(De),Ne=Math.round(Ne),xe=Math.round(xe),Pe=Math.round(Pe)),u.shouldFlush(6)&&(u.flush(),B=u.setGameObject(n)),u.batchQuad(n,Xt,$t,ne,me,De,Ne,xe,Pe,It,Mt,wt,Rt,I,L,w,O,R,C,B)}}}y&&(u.flush(),e.popScissor()),e.pipelines.postBatch(n)}};v.exports=s},22186:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45319),a=t(31401),r=t(95643),s=t(53048),e=t(61327),n=t(21859),h=t(87841),i=t(18658),l=new o({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Texture,a.Tint,a.Transform,a.Visible,i],initialize:function(u,d,p,m,T,y,S){T===void 0&&(T=""),S===void 0&&(S=0),r.call(this,u,"BitmapText"),this.font=m;var C=this.scene.sys.cache.bitmapFont.get(m);C||console.warn("Invalid BitmapText key: "+m),this.fontData=C.data,this._text="",this._fontSize=y||this.fontData.size,this._letterSpacing=0,this._lineSpacing=0,this._align=S,this._bounds=s(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=C.fromAtlas,this.setTexture(C.texture,C.frame),this.setPosition(d,p),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(),this.setText(T)},setLeftAlign:function(){return this._align=l.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=l.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=l.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(f){return this._fontSize=f,this._dirty=!0,this},setLetterSpacing:function(f){return f===void 0&&(f=0),this._letterSpacing=f,this._dirty=!0,this},setLineSpacing:function(f){return f===void 0&&(f=0),this.lineSpacing=f,this},setText:function(f){return!f&&f!==0&&(f=""),Array.isArray(f)&&(f=f.join(`
`)),f!==this.text&&(this._text=f.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(f,u,d,p){return f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=0),p===void 0&&(p=.5),this.dropShadowX=f,this.dropShadowY=u,this.dropShadowColor=d,this.dropShadowAlpha=p,this},setCharacterTint:function(f,u,d,p,m,T,y){f===void 0&&(f=0),u===void 0&&(u=1),d===void 0&&(d=!1),p===void 0&&(p=-1),m===void 0&&(m=p,T=p,y=p);var S=this.text.length;u===-1&&(u=S),f<0&&(f=S+f),f=g(f,0,S-1);for(var C=g(f+u,f,S),R=this.charColors,I=f;I<C;I++){var L=R[I];if(p===-1)R[I]=null;else{var w=d?1:0;L?(L.tintEffect=w,L.tintTL=p,L.tintTR=m,L.tintBL=T,L.tintBR=y):R[I]={tintEffect:w,tintTL:p,tintTR:m,tintBL:T,tintBR:y}}}return this},setWordTint:function(f,u,d,p,m,T,y){u===void 0&&(u=1);for(var S=this.getTextBounds(),C=S.words,R=typeof f=="number",I=0,L=0;L<C.length;L++){var w=C[L];if((R&&L===f||!R&&w.word===f)&&(this.setCharacterTint(w.i,w.word.length,d,p,m,T,y),I++,I===u))return this}return this},getTextBounds:function(f){var u=this._bounds;return(this._dirty||f||this.scaleX!==u.scaleX||this.scaleY!==u.scaleY)&&(s(this,f,!0,u),this._dirty=!1),u},getCharacterAt:function(f,u,d){for(var p=this.getLocalPoint(f,u,null,d),m=this.getTextBounds(),T=m.characters,y=new h,S=0;S<T.length;S++){var C=T[S];if(y.setTo(C.x,C.t,C.r-C.x,C.b),y.contains(p.x,p.y))return C}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(f,u,d){u===void 0&&(u=this._fontSize),d===void 0&&(d=this._align);var p=this.scene.sys.cache.bitmapFont.get(f);return p&&(this.font=f,this.fontData=p.data,this._fontSize=u,this._align=d,this.fromAtlas=p.fromAtlas===!0,this.setTexture(p.texture,p.frame),s(this,!1,!0,this._bounds)),this},setMaxWidth:function(f,u){return this._maxWidth=f,this._dirty=!0,u!==void 0&&(this.wordWrapCharCode=u),this},align:{set:function(f){this._align=f,this._dirty=!0},get:function(){return this._align}},text:{set:function(f){this.setText(f)},get:function(){return this._text}},fontSize:{set:function(f){this._fontSize=f,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(f){this._letterSpacing=f,this._dirty=!0},get:function(){return this._letterSpacing}},lineSpacing:{set:function(f){this._lineSpacing=f,this._dirty=!0},get:function(){return this._lineSpacing}},maxWidth:{set:function(f){this._maxWidth=f,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},displayWidth:{get:function(){return this.width}},displayHeight:{get:function(){return this.height}},toJSON:function(){var f=a.ToJSON(this),u={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,lineSpacing:this.lineSpacing,align:this.align};return f.data=u,f},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});l.ALIGN_LEFT=0,l.ALIGN_CENTER=1,l.ALIGN_RIGHT=2,l.ParseFromAtlas=e,l.ParseXMLBitmapFont=n,v.exports=l},37289:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20926),g=function(a,r,s,e){var n=r._text,h=n.length,i=a.currentContext;if(!(h===0||!o(a,i,r,s,e))){s.addToRenderList(r);var l=r.fromAtlas?r.frame:r.texture.frames.__BASE,f=r.fontData.chars,u=r.fontData.lineHeight,d=r._letterSpacing,p=r._lineSpacing,m=0,T=0,y=0,S=null,C=0,R=0,I=0,L=0,w=0,O=0,B=null,V=0,b=l.source.image,X=l.cutX,K=l.cutY,Q=r._fontSize/r.fontData.size,U=r._align,W=0,F=0,G=r.getTextBounds(!1);r.maxWidth>0&&(n=G.wrappedText,h=n.length);var z=r._bounds.lines;U===1?F=(z.longest-z.lengths[0])/2:U===2&&(F=z.longest-z.lengths[0]),i.translate(-r.displayOriginX,-r.displayOriginY);for(var Y=s.roundPixels,$=0;$<h;$++){if(y=n.charCodeAt($),y===10){W++,U===1?F=(z.longest-z.lengths[W])/2:U===2&&(F=z.longest-z.lengths[W]),m=0,T+=u+p,B=null;continue}if(S=f[y],!!S){if(C=X+S.x,R=K+S.y,I=S.width,L=S.height,w=S.xOffset+m,O=S.yOffset+T,B!==null){var j=S.kerning[V];w+=j!==void 0?j:0}w*=Q,O*=Q,w+=F,m+=S.xAdvance+d+(j!==void 0?j:0),B=S,V=y,!(I===0||L===0||y===32)&&(Y&&(w=Math.round(w),O=Math.round(O)),i.save(),i.translate(w,O),i.scale(Q,Q),i.drawImage(b,C,R,I,L,0,0,I,L),i.restore())}}i.restore()}};v.exports=g},57336:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22186),g=t(25305),a=t(44603),r=t(23568),s=t(35154);a.register("bitmapText",function(e,n){e===void 0&&(e={});var h=s(e,"font",""),i=r(e,"text",""),l=r(e,"size",!1),f=s(e,"align",0),u=new o(this.scene,0,0,h,i,l,f);return n!==void 0&&(e.add=n),g(this.scene,u,e),u})},34914:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22186),g=t(39429);g.register("bitmapText",function(a,r,s,e,n,h){return this.displayList.add(new o(this.scene,a,r,s,e,n,h))})},18658:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(33590),a=t(37289),v.exports={renderWebGL:g,renderCanvas:a}},33590:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(3217),g=t(91296),a=t(70554),r=function(s,e,n,h){var i=e._text,l=i.length;if(l!==0){n.addToRenderList(e);var f=s.pipelines.set(e.pipeline,e),u=g(e,n,h).calc;s.pipelines.preBatch(e);var d=n.roundPixels,p=n.alpha,m=e.charColors,T=e.tintFill,y=a.getTintAppendFloatAlpha,S=y(e.tintTopLeft,p*e._alphaTL),C=y(e.tintTopRight,p*e._alphaTR),R=y(e.tintBottomLeft,p*e._alphaBL),I=y(e.tintBottomRight,p*e._alphaBR),L=e.frame.glTexture,w=f.setGameObject(e),O=e.getTextBounds(!1),B,V,b,X=O.characters,K=e.dropShadowX,Q=e.dropShadowY,U=K!==0||Q!==0;if(U){var W=e.dropShadowColor,F=e.dropShadowAlpha,G=y(W,p*F*e._alphaTL),z=y(W,p*F*e._alphaTR),Y=y(W,p*F*e._alphaBL),$=y(W,p*F*e._alphaBR);for(B=0;B<X.length;B++)V=X[B],b=V.glyph,!(V.code===32||b.width===0||b.height===0)&&o(f,e,V,b,K,Q,u,d,G,z,Y,$,1,L,w)}for(B=0;B<X.length;B++)if(V=X[B],b=V.glyph,!(V.code===32||b.width===0||b.height===0))if(f.shouldFlush(6)&&(f.flush(),w=f.setGameObject(e)),m[V.i]){var j=m[V.i],Z=j.tintEffect,q=y(j.tintTL,p*e._alphaTL),_=y(j.tintTR,p*e._alphaTR),tt=y(j.tintBL,p*e._alphaBL),nt=y(j.tintBR,p*e._alphaBR);o(f,e,V,b,0,0,u,d,q,_,tt,nt,Z,L,w)}else o(f,e,V,b,0,0,u,d,S,C,R,I,T,L,w);s.pipelines.postBatch(e)}};v.exports=r},6107:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(48011),g=t(46590),a=t(83419),r=t(31401),s=t(4327),e=t(95643),n=t(73162),h=new a({Extends:e,Mixins:[r.Alpha,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Size,r.Texture,r.Transform,r.Visible,o],initialize:function(l,f,u,d,p){e.call(this,l,"Blitter"),this.setTexture(d,p),this.setPosition(f,u),this.initPipeline(),this.initPostPipeline(),this.children=new n,this.renderList=[],this.dirty=!1},create:function(i,l,f,u,d){u===void 0&&(u=!0),d===void 0&&(d=this.children.length),f===void 0?f=this.frame:f instanceof s||(f=this.texture.get(f));var p=new g(this,i,l,f,u);return this.children.addAt(p,d,!1),this.dirty=!0,p},createFromCallback:function(i,l,f,u){for(var d=this.createMultiple(l,f,u),p=0;p<d.length;p++){var m=d[p];i.call(this,m,p)}return d},createMultiple:function(i,l,f){l===void 0&&(l=this.frame.name),f===void 0&&(f=!0),Array.isArray(l)||(l=[l]);var u=[],d=this;return l.forEach(function(p){for(var m=0;m<i;m++)u.push(d.create(0,0,p,f))}),u},childCanRender:function(i){return i.visible&&i.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});v.exports=h},72396:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=o.getRenderList();if(r.length!==0){var s=t.currentContext,e=g.alpha*o.alpha;if(e!==0){g.addToRenderList(o),s.globalCompositeOperation=t.blendModes[o.blendMode],s.imageSmoothingEnabled=!o.frame.source.scaleMode;var n=o.x-g.scrollX*o.scrollFactorX,h=o.y-g.scrollY*o.scrollFactorY;s.save(),a&&a.copyToContext(s);for(var i=g.roundPixels,l=0;l<r.length;l++){var f=r[l],u=f.flipX||f.flipY,d=f.frame,p=d.canvasData,m=d.x,T=d.y,y=1,S=1,C=f.alpha*e;C!==0&&(s.globalAlpha=C,u?(f.flipX&&(y=-1,m-=p.width),f.flipY&&(S=-1,T-=p.height),p.width>0&&p.height>0&&(s.save(),s.translate(f.x+n,f.y+h),s.scale(y,S),s.drawImage(d.source.image,p.x,p.y,p.width,p.height,m,T,p.width,p.height),s.restore())):(i&&(m=Math.round(m),T=Math.round(T)),p.width>0&&p.height>0&&s.drawImage(d.source.image,p.x,p.y,p.width,p.height,m+f.x+n,T+f.y+h,p.width,p.height)))}s.restore()}}};v.exports=E},9403:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6107),g=t(25305),a=t(44603),r=t(23568);a.register("blitter",function(s,e){s===void 0&&(s={});var n=r(s,"key",null),h=r(s,"frame",null),i=new o(this.scene,0,0,n,h);return e!==void 0&&(s.add=e),g(this.scene,i,s),i})},12709:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6107),g=t(39429);g.register("blitter",function(a,r,s,e){return this.displayList.add(new o(this.scene,a,r,s,e))})},48011:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(99485),a=t(72396),v.exports={renderWebGL:g,renderCanvas:a}},99485:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61340),g=t(70554),a=new o,r=function(s,e,n,h){var i=e.getRenderList(),l=n.alpha*e.alpha;if(!(i.length===0||l===0)){n.addToRenderList(e);var f=s.pipelines.set(this.pipeline,e),u=n.scrollX*e.scrollFactorX,d=n.scrollY*e.scrollFactorY,p=a.copyFrom(n.matrix);h&&(p.multiplyWithOffset(h,-u,-d),u=0,d=0);var m=e.x-u,T=e.y-d,y=-1,S=!1;s.pipelines.preBatch(e);for(var C=0;C<i.length;C++){var R=i[C],I=R.frame,L=R.alpha*l;if(L!==0){var w=I.width,O=I.height,B=m+R.x+I.x,V=T+R.y+I.y;R.flipX&&(w*=-1,B+=I.width),R.flipY&&(O*=-1,V+=I.height);var b=p.setQuad(B,V,B+w,V+O),X=g.getTintAppendFloatAlpha(R.tint,L);if(I.sourceIndex!==y){var K=f.setGameObject(e,I);y=I.sourceIndex}f.batchQuad(e,b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],I.u0,I.v0,I.u1,I.v1,X,X,X,X,S,I.glTexture,K)&&(y=-1)}}s.pipelines.postBatch(e)}};v.exports=r},46590:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(4327),a=new o({initialize:function(s,e,n,h,i){this.parent=s,this.x=e,this.y=n,this.frame=h,this.data={},this.tint=16777215,this._visible=i,this._alpha=1,this.flipX=!1,this.flipY=!1,this.hasTransformComponent=!0},setFrame:function(r){return r===void 0?this.frame=this.parent.frame:r instanceof g&&r.texture===this.parent.texture?this.frame=r:this.frame=this.parent.texture.get(r),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(r,s,e){return this.x=r,this.y=s,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,e&&this.setFrame(e),this},setPosition:function(r,s){return this.x=r,this.y=s,this},setFlipX:function(r){return this.flipX=r,this},setFlipY:function(r){return this.flipY=r,this},setFlip:function(r,s){return this.flipX=r,this.flipY=s,this},setVisible:function(r){return this.visible=r,this},setAlpha:function(r){return this.alpha=r,this},setTint:function(r){return this.tint=r,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(r){this.parent.dirty|=this._visible!==r,this._visible=r}},alpha:{get:function(){return this._alpha},set:function(r){this.parent.dirty|=this._alpha>0!=r>0,this._alpha=r}}});v.exports=a},16005:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=2,a={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r,s,e,n){return r===void 0&&(r=1),s===void 0?this.alpha=r:(this._alphaTL=o(r,0,1),this._alphaTR=o(s,0,1),this._alphaBL=o(e,0,1),this._alphaBR=o(n,0,1)),this},alpha:{get:function(){return this._alpha},set:function(r){var s=o(r,0,1);this._alpha=s,this._alphaTL=s,this._alphaTR=s,this._alphaBL=s,this._alphaBR=s,s===0?this.renderFlags&=~g:this.renderFlags|=g}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(r){var s=o(r,0,1);this._alphaTL=s,s!==0&&(this.renderFlags|=g)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(r){var s=o(r,0,1);this._alphaTR=s,s!==0&&(this.renderFlags|=g)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(r){var s=o(r,0,1);this._alphaBL=s,s!==0&&(this.renderFlags|=g)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(r){var s=o(r,0,1);this._alphaBR=s,s!==0&&(this.renderFlags|=g)}}};v.exports=a},88509:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=2,a={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(r){return r===void 0&&(r=1),this.alpha=r,this},alpha:{get:function(){return this._alpha},set:function(r){var s=o(r,0,1);this._alpha=s,s===0?this.renderFlags&=~g:this.renderFlags|=g}}};v.exports=a},90065:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g={_blendMode:o.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(a){typeof a=="string"&&(a=o[a]),a|=0,a>=-1&&(this._blendMode=a)}},setBlendMode:function(a){return this.blendMode=a,this}};v.exports=g},94215:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,o){return this.width=t,this.height=o,this},setDisplaySize:function(t,o){return this.displayWidth=t,this.displayHeight=o,this}};v.exports=E},61683:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={texture:null,frame:null,isCropped:!1,setCrop:function(t,o,g,a){if(t===void 0)this.isCropped=!1;else if(this.frame){if(typeof t=="number")this.frame.setCropUVs(this._crop,t,o,g,a,this.flipX,this.flipY);else{var r=t;this.frame.setCropUVs(this._crop,r.x,r.y,r.width,r.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};v.exports=E},89272:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return t===void 0&&(t=0),this.depth=t,this}};v.exports=E},47059:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(66064),a=t(19133),r=new o({initialize:function(e,n){this.gameObject=e,this.isPost=n,this.enabled=!1,this.list=[],this.padding=0},setPadding:function(s){return s===void 0&&(s=0),this.padding=s,this.gameObject},onFXCopy:function(){},onFX:function(){},enable:function(s){if(!this.isPost){var e=this.gameObject.scene.sys.renderer;e&&e.pipelines?(this.gameObject.pipeline=e.pipelines.FX_PIPELINE,s!==void 0&&(this.padding=s),this.enabled=!0):this.enabled=!1}},clear:function(){if(this.isPost)this.gameObject.resetPostPipeline(!0);else{for(var s=this.list,e=0;e<s.length;e++)s[e].destroy();this.list=[]}return this.enabled=!1,this.gameObject},remove:function(s){var e;if(this.isPost){var n=this.gameObject.getPostPipeline(String(s.type));for(Array.isArray(n)||(n=[n]),e=0;e<n.length;e++){var h=n[e];if(h.controller===s){this.gameObject.removePostPipeline(h),s.destroy();break}}}else{var i=this.list;for(e=0;e<i.length;e++)i[e]===s&&(a(i,e),s.destroy())}return this.gameObject},disable:function(s){return s===void 0&&(s=!1),this.isPost||this.gameObject.resetPipeline(),this.enabled=!1,s&&this.clear(),this.gameObject},add:function(s,e){if(this.isPost){var n=String(s.type);this.gameObject.setPostPipeline(n,e);var h=this.gameObject.getPostPipeline(n);if(h)return Array.isArray(h)&&(h=h.pop()),h.controller=s,s}else return this.enabled||this.enable(),this.list.push(s),s},addGlow:function(s,e,n,h,i,l){return this.add(new g.Glow(this.gameObject,s,e,n,h),{quality:i,distance:l})},addShadow:function(s,e,n,h,i,l,f){return this.add(new g.Shadow(this.gameObject,s,e,n,h,i,l,f))},addPixelate:function(s){return this.add(new g.Pixelate(this.gameObject,s))},addVignette:function(s,e,n,h){return this.add(new g.Vignette(this.gameObject,s,e,n,h))},addShine:function(s,e,n,h){return this.add(new g.Shine(this.gameObject,s,e,n,h))},addBlur:function(s,e,n,h,i,l){return this.add(new g.Blur(this.gameObject,s,e,n,h,i,l))},addGradient:function(s,e,n,h,i,l,f,u){return this.add(new g.Gradient(this.gameObject,s,e,n,h,i,l,f,u))},addBloom:function(s,e,n,h,i,l){return this.add(new g.Bloom(this.gameObject,s,e,n,h,i,l))},addColorMatrix:function(){return this.add(new g.ColorMatrix(this.gameObject))},addCircle:function(s,e,n,h,i){return this.add(new g.Circle(this.gameObject,s,e,n,h,i))},addBarrel:function(s){return this.add(new g.Barrel(this.gameObject,s))},addDisplacement:function(s,e,n){return this.add(new g.Displacement(this.gameObject,s,e,n))},addWipe:function(s,e,n){return this.add(new g.Wipe(this.gameObject,s,e,n))},addReveal:function(s,e,n){return this.add(new g.Wipe(this.gameObject,s,e,n,!0))},addBokeh:function(s,e,n){return this.add(new g.Bokeh(this.gameObject,s,e,n))},addTiltShift:function(s,e,n,h,i,l){return this.add(new g.Bokeh(this.gameObject,s,e,n,!0,h,i,l))},destroy:function(){this.clear(),this.gameObject=null}});v.exports=r},54434:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,o){return this.flipX=t,this.flipY=o,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}};v.exports=E},8004:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(11520),a=t(26099),r={prepareBoundsOutput:function(s,e){if(e===void 0&&(e=!1),this.rotation!==0&&g(s,this.x,this.y,this.rotation),e&&this.parentContainer){var n=this.parentContainer.getBoundsTransformMatrix();n.transformPoint(s.x,s.y,s)}return s},getCenter:function(s,e){return s===void 0&&(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,s.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(s,e)},getTopLeft:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX,s.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(s,e)},getTopCenter:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,s.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(s,e)},getTopRight:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth,s.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(s,e)},getLeftCenter:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX,s.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(s,e)},getRightCenter:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth,s.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(s,e)},getBottomLeft:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX,s.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(s,e)},getBottomCenter:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,s.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(s,e)},getBottomRight:function(s,e){return s||(s=new a),s.x=this.x-this.displayWidth*this.originX+this.displayWidth,s.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(s,e)},getBounds:function(s){s===void 0&&(s=new o);var e,n,h,i,l,f,u,d;if(this.parentContainer){var p=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(s),p.transformPoint(s.x,s.y,s),e=s.x,n=s.y,this.getTopRight(s),p.transformPoint(s.x,s.y,s),h=s.x,i=s.y,this.getBottomLeft(s),p.transformPoint(s.x,s.y,s),l=s.x,f=s.y,this.getBottomRight(s),p.transformPoint(s.x,s.y,s),u=s.x,d=s.y}else this.getTopLeft(s),e=s.x,n=s.y,this.getTopRight(s),h=s.x,i=s.y,this.getBottomLeft(s),l=s.x,f=s.y,this.getBottomRight(s),u=s.x,d=s.y;return s.x=Math.min(e,h,l,u),s.y=Math.min(n,i,f,d),s.width=Math.max(e,h,l,u)-s.x,s.height=Math.max(n,i,f,d)-s.y,s}};v.exports=r},8573:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6858),g=t(80661),a={mask:null,setMask:function(r){return this.mask=r,this},clearMask:function(r){return r===void 0&&(r=!1),r&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(r,s,e,n,h){return r===void 0&&(this.texture||this.shader||this.geom)&&(r=this),new o(this.scene,r,s,e,n,h)},createGeometryMask:function(r){return r===void 0&&(this.type==="Graphics"||this.geom)&&(r=this),new g(this.scene,r)}};v.exports=a},27387:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,o){return t===void 0&&(t=.5),o===void 0&&(o=t),this.originX=t,this.originY=o,this.updateDisplayOrigin()},setOriginFromFrame:function(){return!this.frame||!this.frame.customPivot?this.setOrigin():(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin())},setDisplayOrigin:function(t,o){return t===void 0&&(t=0),o===void 0&&(o=t),this.displayOriginX=t,this.displayOriginY=o,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};v.exports=E},37640:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39506),g=t(57355),a=t(35154),r=t(86353),s=t(26099),e={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:r.PLAYING_FORWARD,setPath:function(n,h){h===void 0&&(h=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=n,h&&this.startFollow(h),this},setRotateToPath:function(n,h){return h===void 0&&(h=0),this.rotateToPath=n,this.pathRotationOffset=h,this},isFollowing:function(){var n=this.pathTween;return n&&n.isPlaying()},startFollow:function(n,h){n===void 0&&(n={}),h===void 0&&(h=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),typeof n=="number"&&(n={duration:n}),n.from=a(n,"from",0),n.to=a(n,"to",1);var l=g(n,"positionOnPath",!1);this.rotateToPath=g(n,"rotateToPath",!1),this.pathRotationOffset=a(n,"rotationOffset",0);var f=a(n,"startAt",h);if(f&&(n.onStart=function(d){var p=d.data[0];p.progress=f,p.elapsed=p.duration*f;var m=p.ease(p.progress);p.current=p.start+(p.end-p.start)*m,p.setTargetValue()}),this.pathOffset||(this.pathOffset=new s(this.x,this.y)),this.pathVector||(this.pathVector=new s),this.pathDelta||(this.pathDelta=new s),this.pathDelta.reset(),n.persist=!0,this.pathTween=this.scene.sys.tweens.addCounter(n),this.path.getStartPoint(this.pathOffset),l&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=r.PLAYING_FORWARD,this.rotateToPath){var u=this.path.getPoint(.1);this.rotation=Math.atan2(u.y-this.y,u.x-this.x)+o(this.pathRotationOffset)}return this.pathConfig=n,this},pauseFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.pause(),this},resumeFollow:function(){var n=this.pathTween;return n&&n.isPaused()&&n.resume(),this},stopFollow:function(){var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this},pathUpdate:function(){var n=this.pathTween;if(n&&n.data){var h=n.data[0],i=this.pathDelta,l=this.pathVector;if(i.copy(l).negate(),h.state===r.COMPLETE){this.path.getPoint(h.end,l),i.add(l),l.add(this.pathOffset),this.setPosition(l.x,l.y);return}else if(h.state!==r.PLAYING_FORWARD&&h.state!==r.PLAYING_BACKWARD)return;this.path.getPoint(n.getValue(),l),i.add(l),l.add(this.pathOffset);var f=this.x,u=this.y;this.setPosition(l.x,l.y);var d=this.x-f,p=this.y-u;if(d===0&&p===0)return;if(h.state!==this._prevDirection){this._prevDirection=h.state;return}this.rotateToPath&&(this.rotation=Math.atan2(p,d)+o(this.pathRotationOffset))}}};v.exports=e},72699:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62644),g={defaultPipeline:null,pipeline:null,pipelineData:null,initPipeline:function(a){this.pipelineData={};var r=this.scene.sys.renderer;if(!r)return!1;var s=r.pipelines;if(s){a===void 0&&(a=s.default);var e=s.get(a);if(e)return this.defaultPipeline=e,this.pipeline=e,!0}return!1},setPipeline:function(a,r,s){var e=this.scene.sys.renderer;if(!e)return this;var n=e.pipelines;if(n){var h=n.get(a);h&&(this.pipeline=h),r&&(this.pipelineData=s?o(r):r)}return this},setPipelineData:function(a,r){var s=this.pipelineData;return r===void 0?delete s[a]:s[a]=r,this},resetPipeline:function(a){return a===void 0&&(a=!1),this.pipeline=this.defaultPipeline,a&&(this.pipelineData={}),this.pipeline!==null},getPipelineName:function(){return this.pipeline.name}};v.exports=g},17581:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62644),g=t(47059),a=t(19133),r={hasPostPipeline:!1,postPipelines:null,postPipelineData:null,preFX:null,postFX:null,initPostPipeline:function(s){this.postPipelines=[],this.postPipelineData={},this.postFX=new g(this,!0),s&&(this.preFX=new g(this,!1))},setPostPipeline:function(s,e,n){var h=this.scene.sys.renderer;if(!h)return this;var i=h.pipelines;if(i){Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++){var f=i.getPostPipeline(s[l],this,e);f&&this.postPipelines.push(f)}e&&(this.postPipelineData=n?o(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPostPipelineData:function(s,e){var n=this.postPipelineData;return e===void 0?delete n[s]:n[s]=e,this},getPostPipeline:function(s){for(var e=typeof s=="string",n=this.postPipelines,h=[],i=0;i<n.length;i++){var l=n[i];(e&&l.name===s||!e&&l instanceof s)&&h.push(l)}return h.length===1?h[0]:h},resetPostPipeline:function(s){s===void 0&&(s=!1);for(var e=this.postPipelines,n=0;n<e.length;n++)e[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,s&&(this.postPipelineData={})},removePostPipeline:function(s){for(var e=typeof s=="string",n=this.postPipelines,h=n.length-1;h>=0;h--){var i=n[h];(e&&i.name===s||!e&&i===s)&&(i.destroy(),a(n,h))}return this.hasPostPipeline=this.postPipelines.length>0,this},clearFX:function(){return this.preFX&&this.preFX.clear(),this.postFX&&this.postFX.clear(),this}};v.exports=r},80227:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,o){return o===void 0&&(o=t),this.scrollFactorX=t,this.scrollFactorY=o,this}};v.exports=E},16736:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){t||(t=this.frame),this.width=t.realWidth,this.height=t.realHeight;var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=this.width,o.hitArea.height=this.height),this},setSize:function(t,o){return this.width=t,this.height=o,this},setDisplaySize:function(t,o){return this.displayWidth=t,this.displayHeight=o,this}};v.exports=E},37726:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4327),g=8,a={texture:null,frame:null,isCropped:!1,setTexture:function(r,s,e,n){return this.texture=this.scene.sys.textures.get(r),this.setFrame(s,e,n)},setFrame:function(r,s,e){return s===void 0&&(s=!0),e===void 0&&(e=!0),r instanceof o?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&s&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};v.exports=a},79812:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4327),g=8,a={texture:null,frame:null,isCropped:!1,setCrop:function(r,s,e,n){if(r===void 0)this.isCropped=!1;else if(this.frame){if(typeof r=="number")this.frame.setCropUVs(this._crop,r,s,e,n,this.flipX,this.flipY);else{var h=r;this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(r,s){return this.texture=this.scene.sys.textures.get(r),this.setFrame(s)},setFrame:function(r,s,e){return s===void 0&&(s=!0),e===void 0&&(e=!0),r instanceof o?(this.texture=this.scene.sys.textures.get(r.texture.key),this.frame=r):this.frame=this.texture.get(r),!this.frame.cutWidth||!this.frame.cutHeight?this.renderFlags&=~g:this.renderFlags|=g,this._sizeComponent&&s&&this.setSizeToFrame(),this._originComponent&&e&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};v.exports=a},27472:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,o,g,a){return t===void 0&&(t=16777215),o===void 0&&(o=t,g=t,a=t),this.tintTopLeft=t,this.tintTopRight=o,this.tintBottomLeft=g,this.tintBottomRight=a,this.tintFill=!1,this},setTintFill:function(t,o,g,a){return this.setTint(t,o,g,a),this.tintFill=!0,this},tint:{get:function(){return this.tintTopLeft},set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};v.exports=E},53774:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(o.textureKey=t.texture.key,o.frameKey=t.frame.name),o};v.exports=E},16901:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(61340),a=t(85955),r=t(86554),s=t(30954),e=t(26099),n=4,h={hasTransformComponent:!0,_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(i){this._scaleX=i,this._scaleY=i,i===0?this.renderFlags&=~n:this.renderFlags|=n}},scaleX:{get:function(){return this._scaleX},set:function(i){this._scaleX=i,i===0?this.renderFlags&=~n:this._scaleY!==0&&(this.renderFlags|=n)}},scaleY:{get:function(){return this._scaleY},set:function(i){this._scaleY=i,i===0?this.renderFlags&=~n:this._scaleX!==0&&(this.renderFlags|=n)}},angle:{get:function(){return s(this._rotation*o.RAD_TO_DEG)},set:function(i){this.rotation=s(i)*o.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(i){this._rotation=r(i)}},setPosition:function(i,l,f,u){return i===void 0&&(i=0),l===void 0&&(l=i),f===void 0&&(f=0),u===void 0&&(u=0),this.x=i,this.y=l,this.z=f,this.w=u,this},copyPosition:function(i){return i.x!==void 0&&(this.x=i.x),i.y!==void 0&&(this.y=i.y),i.z!==void 0&&(this.z=i.z),i.w!==void 0&&(this.w=i.w),this},setRandomPosition:function(i,l,f,u){return i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=this.scene.sys.scale.width),u===void 0&&(u=this.scene.sys.scale.height),this.x=i+Math.random()*f,this.y=l+Math.random()*u,this},setRotation:function(i){return i===void 0&&(i=0),this.rotation=i,this},setAngle:function(i){return i===void 0&&(i=0),this.angle=i,this},setScale:function(i,l){return i===void 0&&(i=1),l===void 0&&(l=i),this.scaleX=i,this.scaleY=l,this},setX:function(i){return i===void 0&&(i=0),this.x=i,this},setY:function(i){return i===void 0&&(i=0),this.y=i,this},setZ:function(i){return i===void 0&&(i=0),this.z=i,this},setW:function(i){return i===void 0&&(i=0),this.w=i,this},getLocalTransformMatrix:function(i){return i===void 0&&(i=new g),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(i,l){i===void 0&&(i=new g);var f=this.parentContainer;if(!f)return this.getLocalTransformMatrix(i);for(l||(l=new g),i.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);f;)l.applyITRS(f.x,f.y,f._rotation,f._scaleX,f._scaleY),l.multiply(i,i),f=f.parentContainer;return i},getLocalPoint:function(i,l,f,u){f||(f=new e),u||(u=this.scene.sys.cameras.main);var d=u.scrollX,p=u.scrollY,m=i+d*this.scrollFactorX-d,T=l+p*this.scrollFactorY-p;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(m,T,f):a(m,T,this.x,this.y,this.rotation,this.scaleX,this.scaleY,f),this._originComponent&&(f.x+=this._displayOriginX,f.y+=this._displayOriginY),f},getParentRotation:function(){for(var i=0,l=this.parentContainer;l;)i+=l.rotation,l=l.parentContainer;return i}};v.exports=h},61340:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(36383),a=t(26099),r=new o({initialize:function(e,n,h,i,l,f){e===void 0&&(e=1),n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=1),l===void 0&&(l=0),f===void 0&&(f=0),this.matrix=new Float32Array([e,n,h,i,l,f,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0},this.quad=new Float32Array(8)},a:{get:function(){return this.matrix[0]},set:function(s){this.matrix[0]=s}},b:{get:function(){return this.matrix[1]},set:function(s){this.matrix[1]=s}},c:{get:function(){return this.matrix[2]},set:function(s){this.matrix[2]=s}},d:{get:function(){return this.matrix[3]},set:function(s){this.matrix[3]=s}},e:{get:function(){return this.matrix[4]},set:function(s){this.matrix[4]=s}},f:{get:function(){return this.matrix[5]},set:function(s){this.matrix[5]=s}},tx:{get:function(){return this.matrix[4]},set:function(s){this.matrix[4]=s}},ty:{get:function(){return this.matrix[5]},set:function(s){this.matrix[5]=s}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var s=this.matrix,e=s[0],n=s[1],h=s[2],i=s[3];return e||n?n>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):h||i?g.TAU-(i>0?Math.acos(-h/this.scaleY):-Math.acos(h/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var s=this.matrix;return s[0]=1,s[1]=0,s[2]=0,s[3]=1,s[4]=0,s[5]=0,this},translate:function(s,e){var n=this.matrix;return n[4]=n[0]*s+n[2]*e+n[4],n[5]=n[1]*s+n[3]*e+n[5],this},scale:function(s,e){var n=this.matrix;return n[0]*=s,n[1]*=s,n[2]*=e,n[3]*=e,this},rotate:function(s){var e=Math.sin(s),n=Math.cos(s),h=this.matrix,i=h[0],l=h[1],f=h[2],u=h[3];return h[0]=i*n+f*e,h[1]=l*n+u*e,h[2]=i*-e+f*n,h[3]=l*-e+u*n,this},multiply:function(s,e){var n=this.matrix,h=s.matrix,i=n[0],l=n[1],f=n[2],u=n[3],d=n[4],p=n[5],m=h[0],T=h[1],y=h[2],S=h[3],C=h[4],R=h[5],I=e===void 0?n:e.matrix;return I[0]=m*i+T*f,I[1]=m*l+T*u,I[2]=y*i+S*f,I[3]=y*l+S*u,I[4]=C*i+R*f+d,I[5]=C*l+R*u+p,I},multiplyWithOffset:function(s,e,n){var h=this.matrix,i=s.matrix,l=h[0],f=h[1],u=h[2],d=h[3],p=h[4],m=h[5],T=e*l+n*u+p,y=e*f+n*d+m,S=i[0],C=i[1],R=i[2],I=i[3],L=i[4],w=i[5];return h[0]=S*l+C*u,h[1]=S*f+C*d,h[2]=R*l+I*u,h[3]=R*f+I*d,h[4]=L*l+w*u+T,h[5]=L*f+w*d+y,this},transform:function(s,e,n,h,i,l){var f=this.matrix,u=f[0],d=f[1],p=f[2],m=f[3],T=f[4],y=f[5];return f[0]=s*u+e*p,f[1]=s*d+e*m,f[2]=n*u+h*p,f[3]=n*d+h*m,f[4]=i*u+l*p+T,f[5]=i*d+l*m+y,this},transformPoint:function(s,e,n){n===void 0&&(n={x:0,y:0});var h=this.matrix,i=h[0],l=h[1],f=h[2],u=h[3],d=h[4],p=h[5];return n.x=s*i+e*f+d,n.y=s*l+e*u+p,n},invert:function(){var s=this.matrix,e=s[0],n=s[1],h=s[2],i=s[3],l=s[4],f=s[5],u=e*i-n*h;return s[0]=i/u,s[1]=-n/u,s[2]=-h/u,s[3]=e/u,s[4]=(h*f-i*l)/u,s[5]=-(e*f-n*l)/u,this},copyFrom:function(s){var e=this.matrix;return e[0]=s.a,e[1]=s.b,e[2]=s.c,e[3]=s.d,e[4]=s.e,e[5]=s.f,this},copyFromArray:function(s){var e=this.matrix;return e[0]=s[0],e[1]=s[1],e[2]=s[2],e[3]=s[3],e[4]=s[4],e[5]=s[5],this},copyToContext:function(s){var e=this.matrix;return s.transform(e[0],e[1],e[2],e[3],e[4],e[5]),s},setToContext:function(s){return s.setTransform(this),s},copyToArray:function(s){var e=this.matrix;return s===void 0?s=[e[0],e[1],e[2],e[3],e[4],e[5]]:(s[0]=e[0],s[1]=e[1],s[2]=e[2],s[3]=e[3],s[4]=e[4],s[5]=e[5]),s},setTransform:function(s,e,n,h,i,l){var f=this.matrix;return f[0]=s,f[1]=e,f[2]=n,f[3]=h,f[4]=i,f[5]=l,this},decomposeMatrix:function(){var s=this.decomposedMatrix,e=this.matrix,n=e[0],h=e[1],i=e[2],l=e[3],f=n*l-h*i;if(s.translateX=e[4],s.translateY=e[5],n||h){var u=Math.sqrt(n*n+h*h);s.rotation=h>0?Math.acos(n/u):-Math.acos(n/u),s.scaleX=u,s.scaleY=f/u}else if(i||l){var d=Math.sqrt(i*i+l*l);s.rotation=Math.PI*.5-(l>0?Math.acos(-i/d):-Math.acos(i/d)),s.scaleX=f/d,s.scaleY=d}else s.rotation=0,s.scaleX=0,s.scaleY=0;return s},applyITRS:function(s,e,n,h,i){var l=this.matrix,f=Math.sin(n),u=Math.cos(n);return l[4]=s,l[5]=e,l[0]=u*h,l[1]=f*h,l[2]=-f*i,l[3]=u*i,this},applyInverse:function(s,e,n){n===void 0&&(n=new a);var h=this.matrix,i=h[0],l=h[1],f=h[2],u=h[3],d=h[4],p=h[5],m=1/(i*u+f*-l);return n.x=u*m*s+-f*m*e+(p*f-d*u)*m,n.y=i*m*e+-l*m*s+(-p*i+d*l)*m,n},setQuad:function(s,e,n,h,i,l){i===void 0&&(i=!1),l===void 0&&(l=this.quad);var f=this.matrix,u=f[0],d=f[1],p=f[2],m=f[3],T=f[4],y=f[5];return i?(l[0]=Math.round(s*u+e*p+T),l[1]=Math.round(s*d+e*m+y),l[2]=Math.round(s*u+h*p+T),l[3]=Math.round(s*d+h*m+y),l[4]=Math.round(n*u+h*p+T),l[5]=Math.round(n*d+h*m+y),l[6]=Math.round(n*u+e*p+T),l[7]=Math.round(n*d+e*m+y)):(l[0]=s*u+e*p+T,l[1]=s*d+e*m+y,l[2]=s*u+h*p+T,l[3]=s*d+h*m+y,l[4]=n*u+h*p+T,l[5]=n*d+h*m+y,l[6]=n*u+e*p+T,l[7]=n*d+e*m+y),l},getX:function(s,e){return s*this.a+e*this.c+this.e},getY:function(s,e){return s*this.b+e*this.d+this.f},getXRound:function(s,e,n){var h=this.getX(s,e);return n&&(h=Math.round(h)),h},getYRound:function(s,e,n){var h=this.getY(s,e);return n&&(h=Math.round(h)),h},getCSSMatrix:function(){var s=this.matrix;return"matrix("+s[0]+","+s[1]+","+s[2]+","+s[3]+","+s[4]+","+s[5]+")"},destroy:function(){this.matrix=null,this.quad=null,this.decomposedMatrix=null}});v.exports=r},59715:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=1,t={_visible:!0,visible:{get:function(){return this._visible},set:function(o){o?(this._visible=!0,this.renderFlags|=E):(this._visible=!1,this.renderFlags&=~E)}},setVisible:function(o){return this.visible=o,this}};v.exports=t},31401:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Alpha:t(16005),AlphaSingle:t(88509),BlendMode:t(90065),ComputedSize:t(94215),Crop:t(61683),Depth:t(89272),Flip:t(54434),FX:t(47059),GetBounds:t(8004),Mask:t(8573),Origin:t(27387),PathFollower:t(37640),Pipeline:t(72699),PostPipeline:t(17581),ScrollFactor:t(80227),Size:t(16736),Texture:t(37726),TextureCrop:t(79812),Tint:t(27472),ToJSON:t(53774),Transform:t(16901),TransformMatrix:t(61340),Visible:t(59715)}},31559:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37105),g=t(10312),a=t(83419),r=t(31401),s=t(51708),e=t(95643),n=t(87841),h=t(29959),i=t(36899),l=t(26099),f=new a({Extends:e,Mixins:[r.AlphaSingle,r.BlendMode,r.ComputedSize,r.Depth,r.Mask,r.PostPipeline,r.Transform,r.Visible,h],initialize:function(d,p,m,T){e.call(this,d,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new r.TransformMatrix,this.tempTransformMatrix=new r.TransformMatrix,this._sortKey="",this._sysEvents=d.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPostPipeline(),this.setPosition(p,m),this.setBlendMode(g.SKIP_CHECK),T&&this.add(T)},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this.width*.5}},displayOriginY:{get:function(){return this.height*.5}},setExclusive:function(u){return u===void 0&&(u=!0),this.exclusive=u,this},getBounds:function(u){if(u===void 0&&(u=new n),u.setTo(this.x,this.y,0,0),this.parentContainer){var d=this.parentContainer.getBoundsTransformMatrix(),p=d.transformPoint(this.x,this.y);u.setTo(p.x,p.y,0,0)}if(this.list.length>0){var m=this.list,T=new n,y=!1;u.setEmpty();for(var S=0;S<m.length;S++){var C=m[S];C.getBounds&&(C.getBounds(T),y?i(T,u,u):(u.setTo(T.x,T.y,T.width,T.height),y=!0))}}return u},addHandler:function(u){u.once(s.DESTROY,this.onChildDestroyed,this),this.exclusive&&(u.parentContainer&&u.parentContainer.remove(u),u.parentContainer=this,u.removeFromDisplayList(),u.addedToScene())},removeHandler:function(u){u.off(s.DESTROY,this.remove,this),this.exclusive&&(u.parentContainer=null,u.removedFromScene(),u.addToDisplayList())},pointToContainer:function(u,d){d===void 0&&(d=new l),this.parentContainer?this.parentContainer.pointToContainer(u,d):(d.x=u.x,d.y=u.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(u.x,u.y,d),d},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(u){return o.Add(this.list,u,this.maxSize,this.addHandler,this),this},addAt:function(u,d){return o.AddAt(this.list,u,d,this.maxSize,this.addHandler,this),this},getAt:function(u){return this.list[u]},getIndex:function(u){return this.list.indexOf(u)},sort:function(u,d){return u?(d===void 0&&(d=function(p,m){return p[u]-m[u]}),o.StableSort(this.list,d),this):this},getByName:function(u){return o.GetFirst(this.list,"name",u)},getRandom:function(u,d){return o.GetRandom(this.list,u,d)},getFirst:function(u,d,p,m){return o.GetFirst(this.list,u,d,p,m)},getAll:function(u,d,p,m){return o.GetAll(this.list,u,d,p,m)},count:function(u,d,p,m){return o.CountAllMatching(this.list,u,d,p,m)},swap:function(u,d){return o.Swap(this.list,u,d),this},moveTo:function(u,d){return o.MoveTo(this.list,u,d),this},moveAbove:function(u,d){return o.MoveAbove(this.list,u,d),this},moveBelow:function(u,d){return o.MoveBelow(this.list,u,d),this},remove:function(u,d){var p=o.Remove(this.list,u,this.removeHandler,this);if(d&&p){Array.isArray(p)||(p=[p]);for(var m=0;m<p.length;m++)p[m].destroy()}return this},removeAt:function(u,d){var p=o.RemoveAt(this.list,u,this.removeHandler,this);return d&&p&&p.destroy(),this},removeBetween:function(u,d,p){var m=o.RemoveBetween(this.list,u,d,this.removeHandler,this);if(p)for(var T=0;T<m.length;T++)m[T].destroy();return this},removeAll:function(u){var d=this.list;if(u){for(var p=0;p<d.length;p++)d[p]&&d[p].scene&&(d[p].off(s.DESTROY,this.onChildDestroyed,this),d[p].destroy());this.list=[]}else o.RemoveBetween(d,0,d.length,this.removeHandler,this);return this},bringToTop:function(u){return o.BringToTop(this.list,u),this},sendToBack:function(u){return o.SendToBack(this.list,u),this},moveUp:function(u){return o.MoveUp(this.list,u),this},moveDown:function(u){return o.MoveDown(this.list,u),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(u,d,p){var m=o.Replace(this.list,u,d);return m&&(this.addHandler(d),this.removeHandler(u),p&&u.destroy()),this},exists:function(u){return this.list.indexOf(u)>-1},setAll:function(u,d,p,m){return o.SetAll(this.list,u,d,p,m),this},each:function(u,d){var p=[null],m,T=this.list.slice(),y=T.length;for(m=2;m<arguments.length;m++)p.push(arguments[m]);for(m=0;m<y;m++)p[0]=T[m],u.apply(d,p);return this},iterate:function(u,d){var p=[null],m;for(m=2;m<arguments.length;m++)p.push(arguments[m]);for(m=0;m<this.list.length;m++)p[0]=this.list[m],u.apply(d,p);return this},setScrollFactor:function(u,d,p){return d===void 0&&(d=u),p===void 0&&(p=!1),this.scrollFactorX=u,this.scrollFactorY=d,p&&(o.SetAll(this.list,"scrollFactorX",u),o.SetAll(this.list,"scrollFactorY",d)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]},onChildDestroyed:function(u){o.Remove(this.list,u),this.exclusive&&(u.parentContainer=null,u.removedFromScene())}});v.exports=f},53584:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g.addToRenderList(o);var r=o.list;if(r.length!==0){var s=o.localTransform;a?(s.loadIdentity(),s.multiply(a),s.translate(o.x,o.y),s.rotate(o.rotation),s.scale(o.scaleX,o.scaleY)):s.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);var e=o.blendMode!==-1;e||t.setBlendMode(0);var n=o._alpha,h=o.scrollFactorX,i=o.scrollFactorY;o.mask&&o.mask.preRenderCanvas(t,null,g);for(var l=0;l<r.length;l++){var f=r[l];if(f.willRender(g)){var u=f.alpha,d=f.scrollFactorX,p=f.scrollFactorY;!e&&f.blendMode!==t.currentBlendMode&&t.setBlendMode(f.blendMode),f.setScrollFactor(d*h,p*i),f.setAlpha(u*n),f.renderCanvas(t,f,g,s),f.setAlpha(u),f.setScrollFactor(d,p)}}o.mask&&o.mask.postRenderCanvas(t)}};v.exports=E},77143:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(31559),a=t(44603),r=t(23568),s=t(95540);a.register("container",function(e,n){e===void 0&&(e={});var h=r(e,"x",0),i=r(e,"y",0),l=s(e,"children",null),f=new g(this.scene,h,i,l);return n!==void 0&&(e.add=n),o(this.scene,f,e),f})},24961:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(31559),g=t(39429);g.register("container",function(a,r,s){return this.displayList.add(new o(this.scene,a,r,s))})},29959:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(72249),a=t(53584),v.exports={renderWebGL:g,renderCanvas:a}},72249:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g.addToRenderList(o);var r=o.list,s=r.length;if(s!==0){var e=o.localTransform;a?(e.loadIdentity(),e.multiply(a),e.translate(o.x,o.y),e.rotate(o.rotation),e.scale(o.scaleX,o.scaleY)):e.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY),t.pipelines.preBatch(o);var n=o.blendMode!==-1;n||t.setBlendMode(0);for(var h=o.alpha,i=o.scrollFactorX,l=o.scrollFactorY,f=0;f<s;f++){var u=r[f];if(u.willRender(g)){var d,p,m,T;if(u.alphaTopLeft!==void 0)d=u.alphaTopLeft,p=u.alphaTopRight,m=u.alphaBottomLeft,T=u.alphaBottomRight;else{var y=u.alpha;d=y,p=y,m=y,T=y}var S=u.scrollFactorX,C=u.scrollFactorY;!n&&u.blendMode!==t.currentBlendMode&&t.setBlendMode(u.blendMode);var R=u.mask;R&&R.preRenderWebGL(t,u,g);var I=u.type;I!==t.currentType&&(t.newType=!0,t.currentType=I),t.nextTypeMatch=f<s-1?r[f+1].type===t.currentType:!1,u.setScrollFactor(S*i,C*l),u.setAlpha(d*h,p*h,m*h,T*h),u.renderWebGL(t,u,g,e,o),u.setAlpha(d,p,m,T),u.setScrollFactor(S,C),R&&R.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(o)}};v.exports=E},47407:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},3069:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(441),r=t(95643),s=t(41212),e=t(35846),n=t(44594),h=t(61369),i=new o({Extends:r,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Origin,g.ScrollFactor,g.Transform,g.Visible,a],initialize:function(f,u,d,p,m,T){r.call(this,f,"DOMElement"),this.parent=f.sys.game.domContainer,this.cache=f.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new h,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(u,d),typeof p=="string"?p[0]==="#"?this.setElement(p.substr(1),m,T):this.createElement(p,m,T):p&&this.setElement(p,m,T),f.sys.events.on(n.SLEEP,this.handleSceneEvent,this),f.sys.events.on(n.WAKE,this.handleSceneEvent,this),f.sys.events.on(n.PRE_RENDER,this.preRender,this)},handleSceneEvent:function(l){var f=this.node,u=f.style;f&&(u.display=l.settings.visible?"block":"none")},setSkew:function(l,f){return l===void 0&&(l=0),f===void 0&&(f=l),this.skewX=l,this.skewY=f,this},setPerspective:function(l){return this.parent.style.perspective=l+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(l){this.parent.style.perspective=l+"px"}},addListener:function(l){if(this.node){l=l.split(" ");for(var f=0;f<l.length;f++)this.node.addEventListener(l[f],this.handler,!1)}return this},removeListener:function(l){if(this.node){l=l.split(" ");for(var f=0;f<l.length;f++)this.node.removeEventListener(l[f],this.handler)}return this},dispatchNativeEvent:function(l){this.emit(l.type,l)},createElement:function(l,f,u){return this.setElement(document.createElement(l),f,u)},setElement:function(l,f,u){this.removeElement();var d;if(typeof l=="string"?(l[0]==="#"&&(l=l.substr(1)),d=document.getElementById(l)):typeof l=="object"&&l.nodeType===1&&(d=l),!d)return this;if(this.node=d,f&&s(f))for(var p in f)d.style[p]=f[p];else typeof f=="string"&&(d.style=f);return d.style.zIndex="0",d.style.display="inline",d.style.position="absolute",d.phaser=this,this.parent&&this.parent.appendChild(d),u&&(d.innerText=u),this.updateSize()},createFromCache:function(l,f){var u=this.cache.get(l);return u&&this.createFromHTML(u,f),this},createFromHTML:function(l,f){f===void 0&&(f="div"),this.removeElement();var u=document.createElement(f);return this.node=u,u.style.zIndex="0",u.style.display="inline",u.style.position="absolute",u.phaser=this,this.parent&&this.parent.appendChild(u),u.innerHTML=l,this.updateSize()},removeElement:function(){return this.node&&(e(this.node),this.node=null),this},updateSize:function(){var l=this.node,f=l.getBoundingClientRect();return this.width=l.clientWidth,this.height=l.clientHeight,this.displayWidth=f.width||0,this.displayHeight=f.height||0,this},getChildByProperty:function(l,f){if(this.node){for(var u=this.node.querySelectorAll("*"),d=0;d<u.length;d++)if(u[d][l]===f)return u[d]}return null},getChildByID:function(l){return this.getChildByProperty("id",l)},getChildByName:function(l){return this.getChildByProperty("name",l)},setClassName:function(l){return this.node&&(this.node.className=l,this.updateSize()),this},setText:function(l){return this.node&&(this.node.innerText=l,this.updateSize()),this},setHTML:function(l){return this.node&&(this.node.innerHTML=l,this.updateSize()),this},preRender:function(){var l=this.parentContainer,f=this.node;f&&l&&!l.willRender()&&(f.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(n.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(n.WAKE,this.handleSceneEvent,this),this.scene.sys.events.off(n.PRE_RENDER,this.preRender,this)}});v.exports=i},49381:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(47407),g=t(95643),a=t(61340),r=new a,s=new a,e=new a,n=function(h,i,l,f){if(i.node){var u=i.node.style,d=i.scene.sys.settings;if(!u||!d.visible||g.RENDER_MASK!==i.renderFlags||i.cameraFilter!==0&&i.cameraFilter&l.id||i.parentContainer&&!i.parentContainer.willRender()){u.display="none";return}var p=i.parentContainer,m=l.alpha*i.alpha;p&&(m*=p.alpha);var T=r,y=s,S=e,C=0,R=0,I="0%",L="0%";f?(C=i.width*i.scaleX*i.originX,R=i.height*i.scaleY*i.originY,y.applyITRS(i.x-C,i.y-R,i.rotation,i.scaleX,i.scaleY),T.copyFrom(l.matrix),T.multiplyWithOffset(f,-l.scrollX*i.scrollFactorX,-l.scrollY*i.scrollFactorY),y.e=i.x-C,y.f=i.y-R,T.multiply(y,S)):(C=i.width*i.originX,R=i.height*i.originY,y.applyITRS(i.x-C,i.y-R,i.rotation,i.scaleX,i.scaleY),T.copyFrom(l.matrix),I=100*i.originX+"%",L=100*i.originY+"%",y.e-=l.scrollX*i.scrollFactorX,y.f-=l.scrollY*i.scrollFactorY,T.multiply(y,S)),i.transformOnly||(u.display="block",u.opacity=m,u.zIndex=i._depth,u.pointerEvents=i.pointerEvents,u.mixBlendMode=o[i._blendMode]),u.transform=S.getCSSMatrix()+" skew("+i.skewX+"rad, "+i.skewY+"rad) rotate3d("+i.rotate3d.x+","+i.rotate3d.y+","+i.rotate3d.z+","+i.rotate3d.w+i.rotate3dAngle+")",u.transformOrigin=I+" "+L}};v.exports=n},2611:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(3069),g=t(39429);g.register("dom",function(a,r,s,e,n){var h=new o(this.scene,a,r,s,e,n);return this.displayList.add(h),h})},441:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(49381),a=t(49381),v.exports={renderWebGL:g,renderCanvas:a}},62980:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="addedtoscene"},41337:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="destroy"},44947:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="removedfromscene"},49358:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="complete"},35163:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="created"},97249:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="error"},19483:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="locked"},56059:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="loop"},26772:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="metadata"},64437:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="playing"},83411:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="play"},75780:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="seeked"},67799:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="seeking"},63500:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="stalled"},55541:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="stop"},53208:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="textureready"},4992:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="unlocked"},12:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="unsupported"},51708:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ADDED_TO_SCENE:t(62980),DESTROY:t(41337),REMOVED_FROM_SCENE:t(44947),VIDEO_COMPLETE:t(49358),VIDEO_CREATED:t(35163),VIDEO_ERROR:t(97249),VIDEO_LOCKED:t(19483),VIDEO_LOOP:t(56059),VIDEO_METADATA:t(26772),VIDEO_PLAY:t(83411),VIDEO_PLAYING:t(64437),VIDEO_SEEKED:t(75780),VIDEO_SEEKING:t(67799),VIDEO_STALLED:t(63500),VIDEO_STOP:t(55541),VIDEO_TEXTURE:t(53208),VIDEO_UNLOCKED:t(4992),VIDEO_UNSUPPORTED:t(12)}},42421:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),r=t(64993),s=new o({Extends:a,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.Origin,g.ScrollFactor,g.Size,g.Texture,g.Tint,g.Transform,g.Visible,r],initialize:function(n){a.call(this,n,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});v.exports=s},70217:()=>{},56315:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42421),g=t(39429);g.register("extern",function(){var a=new o(this.scene);return this.displayList.add(a),a})},64993:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(80287),a=t(70217),v.exports={renderWebGL:g,renderCanvas:a}},80287:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,r,s,e){a.pipelines.clear();var n=o(r,s,e).calc;r.render.call(r,a,s,n),a.pipelines.rebind()};v.exports=g},85592:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},43831:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71911),g=t(83419),a=t(85592),r=t(31401),s=t(8497),e=t(95643),n=t(95540),h=t(35154),i=t(36383),l=t(84503),f=new g({Extends:e,Mixins:[r.AlphaSingle,r.BlendMode,r.Depth,r.Mask,r.Pipeline,r.PostPipeline,r.Transform,r.Visible,r.ScrollFactor,l],initialize:function(d,p){var m=h(p,"x",0),T=h(p,"y",0);e.call(this,d,"Graphics"),this.setPosition(m,T),this.initPipeline(),this.initPostPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.lineStyle(1,0,0),this.fillStyle(0,0),this.setDefaultStyles(p)},setDefaultStyles:function(u){return h(u,"lineStyle",null)&&(this.defaultStrokeWidth=h(u,"lineStyle.width",1),this.defaultStrokeColor=h(u,"lineStyle.color",16777215),this.defaultStrokeAlpha=h(u,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),h(u,"fillStyle",null)&&(this.defaultFillColor=h(u,"fillStyle.color",16777215),this.defaultFillAlpha=h(u,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(u,d,p){return p===void 0&&(p=1),this.commandBuffer.push(a.LINE_STYLE,u,d,p),this._lineWidth=u,this},fillStyle:function(u,d){return d===void 0&&(d=1),this.commandBuffer.push(a.FILL_STYLE,u,d),this},fillGradientStyle:function(u,d,p,m,T,y,S,C){return T===void 0&&(T=1),y===void 0&&(y=T),S===void 0&&(S=T),C===void 0&&(C=T),this.commandBuffer.push(a.GRADIENT_FILL_STYLE,T,y,S,C,u,d,p,m),this},lineGradientStyle:function(u,d,p,m,T,y){return y===void 0&&(y=1),this.commandBuffer.push(a.GRADIENT_LINE_STYLE,u,y,d,p,m,T),this},beginPath:function(){return this.commandBuffer.push(a.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(a.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(a.FILL_PATH),this},fill:function(){return this.commandBuffer.push(a.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(a.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(a.STROKE_PATH),this},fillCircleShape:function(u){return this.fillCircle(u.x,u.y,u.radius)},strokeCircleShape:function(u){return this.strokeCircle(u.x,u.y,u.radius)},fillCircle:function(u,d,p){return this.beginPath(),this.arc(u,d,p,0,i.PI2),this.fillPath(),this},strokeCircle:function(u,d,p){return this.beginPath(),this.arc(u,d,p,0,i.PI2),this.strokePath(),this},fillRectShape:function(u){return this.fillRect(u.x,u.y,u.width,u.height)},strokeRectShape:function(u){return this.strokeRect(u.x,u.y,u.width,u.height)},fillRect:function(u,d,p,m){return this.commandBuffer.push(a.FILL_RECT,u,d,p,m),this},strokeRect:function(u,d,p,m){var T=this._lineWidth/2,y=u-T,S=u+T;return this.beginPath(),this.moveTo(u,d),this.lineTo(u,d+m),this.strokePath(),this.beginPath(),this.moveTo(u+p,d),this.lineTo(u+p,d+m),this.strokePath(),this.beginPath(),this.moveTo(y,d),this.lineTo(S+p,d),this.strokePath(),this.beginPath(),this.moveTo(y,d+m),this.lineTo(S+p,d+m),this.strokePath(),this},fillRoundedRect:function(u,d,p,m,T){T===void 0&&(T=20);var y=T,S=T,C=T,R=T;typeof T!="number"&&(y=n(T,"tl",20),S=n(T,"tr",20),C=n(T,"bl",20),R=n(T,"br",20));var I=y>=0,L=S>=0,w=C>=0,O=R>=0;return y=Math.abs(y),S=Math.abs(S),C=Math.abs(C),R=Math.abs(R),this.beginPath(),this.moveTo(u+y,d),this.lineTo(u+p-S,d),L?this.arc(u+p-S,d+S,S,-i.TAU,0):this.arc(u+p,d,S,Math.PI,i.TAU,!0),this.lineTo(u+p,d+m-R),O?this.arc(u+p-R,d+m-R,R,0,i.TAU):this.arc(u+p,d+m,R,-i.TAU,Math.PI,!0),this.lineTo(u+C,d+m),w?this.arc(u+C,d+m-C,C,i.TAU,Math.PI):this.arc(u,d+m,C,0,-i.TAU,!0),this.lineTo(u,d+y),I?this.arc(u+y,d+y,y,-Math.PI,-i.TAU):this.arc(u,d,y,i.TAU,0,!0),this.fillPath(),this},strokeRoundedRect:function(u,d,p,m,T){T===void 0&&(T=20);var y=T,S=T,C=T,R=T,I=Math.min(p,m)/2;typeof T!="number"&&(y=n(T,"tl",20),S=n(T,"tr",20),C=n(T,"bl",20),R=n(T,"br",20));var L=y>=0,w=S>=0,O=C>=0,B=R>=0;return y=Math.min(Math.abs(y),I),S=Math.min(Math.abs(S),I),C=Math.min(Math.abs(C),I),R=Math.min(Math.abs(R),I),this.beginPath(),this.moveTo(u+y,d),this.lineTo(u+p-S,d),this.moveTo(u+p-S,d),w?this.arc(u+p-S,d+S,S,-i.TAU,0):this.arc(u+p,d,S,Math.PI,i.TAU,!0),this.lineTo(u+p,d+m-R),this.moveTo(u+p,d+m-R),B?this.arc(u+p-R,d+m-R,R,0,i.TAU):this.arc(u+p,d+m,R,-i.TAU,Math.PI,!0),this.lineTo(u+C,d+m),this.moveTo(u+C,d+m),O?this.arc(u+C,d+m-C,C,i.TAU,Math.PI):this.arc(u,d+m,C,0,-i.TAU,!0),this.lineTo(u,d+y),this.moveTo(u,d+y),L?this.arc(u+y,d+y,y,-Math.PI,-i.TAU):this.arc(u,d,y,i.TAU,0,!0),this.strokePath(),this},fillPointShape:function(u,d){return this.fillPoint(u.x,u.y,d)},fillPoint:function(u,d,p){return!p||p<1?p=1:(u-=p/2,d-=p/2),this.commandBuffer.push(a.FILL_RECT,u,d,p,p),this},fillTriangleShape:function(u){return this.fillTriangle(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)},strokeTriangleShape:function(u){return this.strokeTriangle(u.x1,u.y1,u.x2,u.y2,u.x3,u.y3)},fillTriangle:function(u,d,p,m,T,y){return this.commandBuffer.push(a.FILL_TRIANGLE,u,d,p,m,T,y),this},strokeTriangle:function(u,d,p,m,T,y){return this.commandBuffer.push(a.STROKE_TRIANGLE,u,d,p,m,T,y),this},strokeLineShape:function(u){return this.lineBetween(u.x1,u.y1,u.x2,u.y2)},lineBetween:function(u,d,p,m){return this.beginPath(),this.moveTo(u,d),this.lineTo(p,m),this.strokePath(),this},lineTo:function(u,d){return this.commandBuffer.push(a.LINE_TO,u,d),this},moveTo:function(u,d){return this.commandBuffer.push(a.MOVE_TO,u,d),this},strokePoints:function(u,d,p,m){d===void 0&&(d=!1),p===void 0&&(p=!1),m===void 0&&(m=u.length),this.beginPath(),this.moveTo(u[0].x,u[0].y);for(var T=1;T<m;T++)this.lineTo(u[T].x,u[T].y);return d&&this.lineTo(u[0].x,u[0].y),p&&this.closePath(),this.strokePath(),this},fillPoints:function(u,d,p,m){d===void 0&&(d=!1),p===void 0&&(p=!1),m===void 0&&(m=u.length),this.beginPath(),this.moveTo(u[0].x,u[0].y);for(var T=1;T<m;T++)this.lineTo(u[T].x,u[T].y);return d&&this.lineTo(u[0].x,u[0].y),p&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(u,d){d===void 0&&(d=32);var p=u.getPoints(d);return this.strokePoints(p,!0)},strokeEllipse:function(u,d,p,m,T){T===void 0&&(T=32);var y=new s(u,d,p,m),S=y.getPoints(T);return this.strokePoints(S,!0)},fillEllipseShape:function(u,d){d===void 0&&(d=32);var p=u.getPoints(d);return this.fillPoints(p,!0)},fillEllipse:function(u,d,p,m,T){T===void 0&&(T=32);var y=new s(u,d,p,m),S=y.getPoints(T);return this.fillPoints(S,!0)},arc:function(u,d,p,m,T,y,S){return y===void 0&&(y=!1),S===void 0&&(S=0),this.commandBuffer.push(a.ARC,u,d,p,m,T,y,S),this},slice:function(u,d,p,m,T,y,S){return y===void 0&&(y=!1),S===void 0&&(S=0),this.commandBuffer.push(a.BEGIN_PATH),this.commandBuffer.push(a.MOVE_TO,u,d),this.commandBuffer.push(a.ARC,u,d,p,m,T,y,S),this.commandBuffer.push(a.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(a.SAVE),this},restore:function(){return this.commandBuffer.push(a.RESTORE),this},translateCanvas:function(u,d){return this.commandBuffer.push(a.TRANSLATE,u,d),this},scaleCanvas:function(u,d){return this.commandBuffer.push(a.SCALE,u,d),this},rotateCanvas:function(u){return this.commandBuffer.push(a.ROTATE,u),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(u,d,p){var m=this.scene.sys,T=m.game.renderer;d===void 0&&(d=m.scale.width),p===void 0&&(p=m.scale.height),f.TargetCamera.setScene(this.scene),f.TargetCamera.setViewport(0,0,d,p),f.TargetCamera.scrollX=this.x,f.TargetCamera.scrollY=this.y;var y,S,C={willReadFrequently:!0};if(typeof u=="string")if(m.textures.exists(u)){y=m.textures.get(u);var R=y.getSourceImage();R instanceof HTMLCanvasElement&&(S=R.getContext("2d",C))}else y=m.textures.createCanvas(u,d,p),S=y.getSourceImage().getContext("2d",C);else u instanceof HTMLCanvasElement&&(S=u.getContext("2d",C));return S&&(this.renderCanvas(T,this,f.TargetCamera,null,S,!1),y&&y.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});f.TargetCamera=new o,v.exports=f},32768:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85592),g=t(20926),a=function(r,s,e,n,h,i){var l=s.commandBuffer,f=l.length,u=h||r.currentContext;if(!(f===0||!g(r,u,s,e,n))){e.addToRenderList(s);var d=1,p=1,m=0,T=0,y=1,S=0,C=0,R=0;u.beginPath();for(var I=0;I<f;++I){var L=l[I];switch(L){case o.ARC:u.arc(l[I+1],l[I+2],l[I+3],l[I+4],l[I+5],l[I+6]),I+=7;break;case o.LINE_STYLE:y=l[I+1],m=l[I+2],d=l[I+3],S=(m&16711680)>>>16,C=(m&65280)>>>8,R=m&255,u.strokeStyle="rgba("+S+","+C+","+R+","+d+")",u.lineWidth=y,I+=3;break;case o.FILL_STYLE:T=l[I+1],p=l[I+2],S=(T&16711680)>>>16,C=(T&65280)>>>8,R=T&255,u.fillStyle="rgba("+S+","+C+","+R+","+p+")",I+=2;break;case o.BEGIN_PATH:u.beginPath();break;case o.CLOSE_PATH:u.closePath();break;case o.FILL_PATH:i||u.fill();break;case o.STROKE_PATH:i||u.stroke();break;case o.FILL_RECT:i?u.rect(l[I+1],l[I+2],l[I+3],l[I+4]):u.fillRect(l[I+1],l[I+2],l[I+3],l[I+4]),I+=4;break;case o.FILL_TRIANGLE:u.beginPath(),u.moveTo(l[I+1],l[I+2]),u.lineTo(l[I+3],l[I+4]),u.lineTo(l[I+5],l[I+6]),u.closePath(),i||u.fill(),I+=6;break;case o.STROKE_TRIANGLE:u.beginPath(),u.moveTo(l[I+1],l[I+2]),u.lineTo(l[I+3],l[I+4]),u.lineTo(l[I+5],l[I+6]),u.closePath(),i||u.stroke(),I+=6;break;case o.LINE_TO:u.lineTo(l[I+1],l[I+2]),I+=2;break;case o.MOVE_TO:u.moveTo(l[I+1],l[I+2]),I+=2;break;case o.LINE_FX_TO:u.lineTo(l[I+1],l[I+2]),I+=5;break;case o.MOVE_FX_TO:u.moveTo(l[I+1],l[I+2]),I+=5;break;case o.SAVE:u.save();break;case o.RESTORE:u.restore();break;case o.TRANSLATE:u.translate(l[I+1],l[I+2]),I+=2;break;case o.SCALE:u.scale(l[I+1],l[I+2]),I+=2;break;case o.ROTATE:u.rotate(l[I+1]),I+=1;break;case o.GRADIENT_FILL_STYLE:I+=5;break;case o.GRADIENT_LINE_STYLE:I+=6;break}}u.restore()}};v.exports=a},87079:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(43831);o.register("graphics",function(a,r){a===void 0&&(a={}),r!==void 0&&(a.add=r);var s=new g(this.scene,a);return a.add&&this.scene.sys.displayList.add(s),s})},1201:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43831),g=t(39429);g.register("graphics",function(a){return this.displayList.add(new o(this.scene,a))})},84503:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(77545),a=t(32768),a=t(32768),v.exports={renderWebGL:g,renderCanvas:a}},77545:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85592),g=t(91296),a=t(61340),r=t(70554),s=function(l,f,u){this.x=l,this.y=f,this.width=u},e=function(l,f,u){this.points=[],this.pointsLength=1,this.points[0]=new s(l,f,u)},n=[],h=new a,i=function(l,f,u,d){if(f.commandBuffer.length!==0){u.addToRenderList(f);var p=l.pipelines.set(f.pipeline,f);l.pipelines.preBatch(f);for(var m=g(f,u,d).calc,T=h.loadIdentity(),y=f.commandBuffer,S=u.alpha*f.alpha,C=1,R=p.fillTint,I=p.strokeTint,L=0,w=0,O=0,B=.01,V=Math.PI*2,b,X=[],K=0,Q=!0,U=null,W=r.getTintAppendFloatAlpha,F=0;F<y.length;F++)switch(b=y[F],b){case o.BEGIN_PATH:{X.length=0,U=null,Q=!0;break}case o.CLOSE_PATH:{Q=!1,U&&U.points.length&&U.points.push(U.points[0]);break}case o.FILL_PATH:{for(K=0;K<X.length;K++)p.batchFillPath(X[K].points,T,m);break}case o.STROKE_PATH:{for(K=0;K<X.length;K++)p.batchStrokePath(X[K].points,C,Q,T,m);break}case o.LINE_STYLE:{C=y[++F];var G=y[++F],z=y[++F]*S,Y=W(G,z);I.TL=Y,I.TR=Y,I.BL=Y,I.BR=Y;break}case o.FILL_STYLE:{var $=y[++F],j=y[++F]*S,Z=W($,j);R.TL=Z,R.TR=Z,R.BL=Z,R.BR=Z;break}case o.GRADIENT_FILL_STYLE:{var q=y[++F]*S,_=y[++F]*S,tt=y[++F]*S,nt=y[++F]*S;R.TL=W(y[++F],q),R.TR=W(y[++F],_),R.BL=W(y[++F],tt),R.BR=W(y[++F],nt);break}case o.GRADIENT_LINE_STYLE:{C=y[++F];var at=y[++F]*S;I.TL=W(y[++F],at),I.TR=W(y[++F],at),I.BL=W(y[++F],at),I.BR=W(y[++F],at);break}case o.ARC:{var st=0,lt=y[++F],vt=y[++F],mt=y[++F],pt=y[++F],ot=y[++F],ct=y[++F],ft=y[++F];for(ot-=pt,ct?ot<-V?ot=-V:ot>0&&(ot=-V+ot%V):ot>V?ot=V:ot<0&&(ot=V+ot%V),U===null&&(U=new e(lt+Math.cos(pt)*mt,vt+Math.sin(pt)*mt,C),X.push(U),st+=B);st<1+ft;)O=ot*st+pt,L=lt+Math.cos(O)*mt,w=vt+Math.sin(O)*mt,U.points.push(new s(L,w,C)),st+=B;O=ot+pt,L=lt+Math.cos(O)*mt,w=vt+Math.sin(O)*mt,U.points.push(new s(L,w,C));break}case o.FILL_RECT:{p.batchFillRect(y[++F],y[++F],y[++F],y[++F],T,m);break}case o.FILL_TRIANGLE:{p.batchFillTriangle(y[++F],y[++F],y[++F],y[++F],y[++F],y[++F],T,m);break}case o.STROKE_TRIANGLE:{p.batchStrokeTriangle(y[++F],y[++F],y[++F],y[++F],y[++F],y[++F],C,T,m);break}case o.LINE_TO:{U!==null?U.points.push(new s(y[++F],y[++F],C)):(U=new e(y[++F],y[++F],C),X.push(U));break}case o.MOVE_TO:{U=new e(y[++F],y[++F],C),X.push(U);break}case o.SAVE:{n.push(T.copyToArray());break}case o.RESTORE:{T.copyFromArray(n.pop());break}case o.TRANSLATE:{lt=y[++F],vt=y[++F],T.translate(lt,vt);break}case o.SCALE:{lt=y[++F],vt=y[++F],T.scale(lt,vt);break}case o.ROTATE:{T.rotate(y[++F]);break}}l.pipelines.postBatch(f)}};v.exports=i},26479:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61061),g=t(83419),a=t(51708),r=t(50792),s=t(46710),e=t(95540),n=t(35154),h=t(97022),i=t(41212),l=t(88492),f=t(35072),u=t(68287),d=new g({Extends:r,initialize:function(m,T,y){r.call(this),y?T&&!Array.isArray(T)&&(T=[T]):Array.isArray(T)?i(T[0])&&(y=T,T=null):i(T)&&(y=T,T=null),this.scene=m,this.children=new f,this.isParent=!0,this.type="Group",this.classType=e(y,"classType",u),this.name=e(y,"name",""),this.active=e(y,"active",!0),this.maxSize=e(y,"maxSize",-1),this.defaultKey=e(y,"defaultKey",null),this.defaultFrame=e(y,"defaultFrame",null),this.runChildUpdate=e(y,"runChildUpdate",!1),this.createCallback=e(y,"createCallback",null),this.removeCallback=e(y,"removeCallback",null),this.createMultipleCallback=e(y,"createMultipleCallback",null),this.internalCreateCallback=e(y,"internalCreateCallback",null),this.internalRemoveCallback=e(y,"internalRemoveCallback",null),T&&this.addMultiple(T),y&&this.createMultiple(y),this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(p,m,T,y,S,C){if(p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=this.defaultKey),y===void 0&&(y=this.defaultFrame),S===void 0&&(S=!0),C===void 0&&(C=!0),this.isFull())return null;var R=new this.classType(this.scene,p,m,T,y);return R.addToDisplayList(this.scene.sys.displayList),R.addToUpdateList(),R.visible=S,R.setActive(C),this.add(R),R},createMultiple:function(p){if(this.isFull())return[];Array.isArray(p)||(p=[p]);var m=[];if(p[0].key)for(var T=0;T<p.length;T++){var y=this.createFromConfig(p[T]);m=m.concat(y)}return m},createFromConfig:function(p){if(this.isFull())return[];this.classType=e(p,"classType",this.classType);var m=e(p,"key",void 0),T=e(p,"frame",null),y=e(p,"visible",!0),S=e(p,"active",!0),C=[];if(m===void 0)return C;Array.isArray(m)||(m=[m]),Array.isArray(T)||(T=[T]);var R=e(p,"repeat",0),I=e(p,"randomKey",!1),L=e(p,"randomFrame",!1),w=e(p,"yoyo",!1),O=e(p,"quantity",!1),B=e(p,"frameQuantity",1),V=e(p,"max",0),b=l(m,T,{max:V,qty:O||B,random:I,randomB:L,repeat:R,yoyo:w});p.createCallback&&(this.createCallback=p.createCallback),p.removeCallback&&(this.removeCallback=p.removeCallback),p.internalCreateCallback&&(this.internalCreateCallback=p.internalCreateCallback),p.internalRemoveCallback&&(this.internalRemoveCallback=p.internalRemoveCallback);for(var X=0;X<b.length;X++){var K=this.create(0,0,b[X].a,b[X].b,y,S);if(!K)break;C.push(K)}if(h(p,"setXY")){var Q=n(p,"setXY.x",0),U=n(p,"setXY.y",0),W=n(p,"setXY.stepX",0),F=n(p,"setXY.stepY",0);o.SetXY(C,Q,U,W,F)}if(h(p,"setRotation")){var G=n(p,"setRotation.value",0),z=n(p,"setRotation.step",0);o.SetRotation(C,G,z)}if(h(p,"setScale")){var Y=n(p,"setScale.x",1),$=n(p,"setScale.y",Y),j=n(p,"setScale.stepX",0),Z=n(p,"setScale.stepY",0);o.SetScale(C,Y,$,j,Z)}if(h(p,"setOrigin")){var q=n(p,"setOrigin.x",.5),_=n(p,"setOrigin.y",q),tt=n(p,"setOrigin.stepX",0),nt=n(p,"setOrigin.stepY",0);o.SetOrigin(C,q,_,tt,nt)}if(h(p,"setAlpha")){var at=n(p,"setAlpha.value",1),st=n(p,"setAlpha.step",0);o.SetAlpha(C,at,st)}if(h(p,"setDepth")){var lt=n(p,"setDepth.value",0),vt=n(p,"setDepth.step",0);o.SetDepth(C,lt,vt)}if(h(p,"setScrollFactor")){var mt=n(p,"setScrollFactor.x",1),pt=n(p,"setScrollFactor.y",mt),ot=n(p,"setScrollFactor.stepX",0),ct=n(p,"setScrollFactor.stepY",0);o.SetScrollFactor(C,mt,pt,ot,ct)}var ft=e(p,"hitArea",null),Et=e(p,"hitAreaCallback",null);ft&&o.SetHitArea(C,ft,Et);var St=e(p,"gridAlign",!1);return St&&o.GridAlign(C,St),this.createMultipleCallback&&this.createMultipleCallback.call(this,C),C},preUpdate:function(p,m){if(!(!this.runChildUpdate||this.children.size===0))for(var T=this.children.entries.slice(),y=0;y<T.length;y++){var S=T[y];S.active&&S.update(p,m)}},add:function(p,m){return m===void 0&&(m=!1),this.isFull()?this:(this.children.set(p),this.internalCreateCallback&&this.internalCreateCallback.call(this,p),this.createCallback&&this.createCallback.call(this,p),m&&(p.addToDisplayList(this.scene.sys.displayList),p.addToUpdateList()),p.on(a.DESTROY,this.remove,this),this)},addMultiple:function(p,m){if(m===void 0&&(m=!1),Array.isArray(p))for(var T=0;T<p.length;T++)this.add(p[T],m);return this},remove:function(p,m,T){return m===void 0&&(m=!1),T===void 0&&(T=!1),this.children.contains(p)?(this.children.delete(p),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,p),this.removeCallback&&this.removeCallback.call(this,p),p.off(a.DESTROY,this.remove,this),T?p.destroy():m&&(p.removeFromDisplayList(),p.removeFromUpdateList()),this):this},clear:function(p,m){p===void 0&&(p=!1),m===void 0&&(m=!1);for(var T=this.children,y=0;y<T.size;y++){var S=T.entries[y];S.off(a.DESTROY,this.remove,this),m?S.destroy():p&&(S.removeFromDisplayList(),S.removeFromUpdateList())}return this.children.clear(),this},contains:function(p){return this.children.contains(p)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(p,m,T,y){return s(this.children.entries,p,m,T,y)},getFirst:function(p,m,T,y,S,C,R){return this.getHandler(!0,1,p,m,T,y,S,C,R)},getFirstNth:function(p,m,T,y,S,C,R,I){return this.getHandler(!0,p,m,T,y,S,C,R,I)},getLast:function(p,m,T,y,S,C,R){return this.getHandler(!1,1,p,m,T,y,S,C,R)},getLastNth:function(p,m,T,y,S,C,R,I){return this.getHandler(!1,p,m,T,y,S,C,R,I)},getHandler:function(p,m,T,y,S,C,R,I,L){T===void 0&&(T=!1),y===void 0&&(y=!1);var w,O,B=0,V=this.children.entries;if(p)for(O=0;O<V.length;O++)if(w=V[O],w.active===T){if(B++,B===m)break}else w=null;else for(O=V.length-1;O>=0;O--)if(w=V[O],w.active===T){if(B++,B===m)break}else w=null;return w?(typeof S=="number"&&(w.x=S),typeof C=="number"&&(w.y=C),w):y?this.create(S,C,R,I,L):null},get:function(p,m,T,y,S){return this.getFirst(!1,!0,p,m,T,y,S)},getFirstAlive:function(p,m,T,y,S,C){return this.getFirst(!0,p,m,T,y,S,C)},getFirstDead:function(p,m,T,y,S,C){return this.getFirst(!1,p,m,T,y,S,C)},playAnimation:function(p,m){return o.PlayAnimation(this.children.entries,p,m),this},isFull:function(){return this.maxSize===-1?!1:this.children.size>=this.maxSize},countActive:function(p){p===void 0&&(p=!0);for(var m=0,T=0;T<this.children.size;T++)this.children.entries[T].active===p&&m++;return m},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var p=this.getTotalUsed(),m=this.maxSize===-1?999999999999:this.maxSize;return m-p},setActive:function(p){return this.active=p,this},setName:function(p){return this.name=p,this},propertyValueSet:function(p,m,T,y,S){return o.PropertyValueSet(this.children.entries,p,m,T,y,S),this},propertyValueInc:function(p,m,T,y,S){return o.PropertyValueInc(this.children.entries,p,m,T,y,S),this},setX:function(p,m){return o.SetX(this.children.entries,p,m),this},setY:function(p,m){return o.SetY(this.children.entries,p,m),this},setXY:function(p,m,T,y){return o.SetXY(this.children.entries,p,m,T,y),this},incX:function(p,m){return o.IncX(this.children.entries,p,m),this},incY:function(p,m){return o.IncY(this.children.entries,p,m),this},incXY:function(p,m,T,y){return o.IncXY(this.children.entries,p,m,T,y),this},shiftPosition:function(p,m,T){return o.ShiftPosition(this.children.entries,p,m,T),this},angle:function(p,m){return o.Angle(this.children.entries,p,m),this},rotate:function(p,m){return o.Rotate(this.children.entries,p,m),this},rotateAround:function(p,m){return o.RotateAround(this.children.entries,p,m),this},rotateAroundDistance:function(p,m,T){return o.RotateAroundDistance(this.children.entries,p,m,T),this},setAlpha:function(p,m){return o.SetAlpha(this.children.entries,p,m),this},setTint:function(p,m,T,y){return o.SetTint(this.children.entries,p,m,T,y),this},setOrigin:function(p,m,T,y){return o.SetOrigin(this.children.entries,p,m,T,y),this},scaleX:function(p,m){return o.ScaleX(this.children.entries,p,m),this},scaleY:function(p,m){return o.ScaleY(this.children.entries,p,m),this},scaleXY:function(p,m,T,y){return o.ScaleXY(this.children.entries,p,m,T,y),this},setDepth:function(p,m){return o.SetDepth(this.children.entries,p,m),this},setBlendMode:function(p){return o.SetBlendMode(this.children.entries,p),this},setHitArea:function(p,m){return o.SetHitArea(this.children.entries,p,m),this},shuffle:function(){return o.Shuffle(this.children.entries),this},kill:function(p){this.children.contains(p)&&p.setActive(!1)},killAndHide:function(p){this.children.contains(p)&&(p.setActive(!1),p.setVisible(!1))},setVisible:function(p,m,T){return o.SetVisible(this.children.entries,p,m,T),this},toggleVisible:function(){return o.ToggleVisible(this.children.entries),this},destroy:function(p,m){p===void 0&&(p=!1),m===void 0&&(m=!1),!(!this.scene||this.ignoreDestroy)&&(this.emit(a.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(m,p),this.scene=void 0,this.children=void 0)}});v.exports=d},94975:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(26479);o.register("group",function(a){return new g(this.scene,null,a)})},3385:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26479),g=t(39429);g.register("group",function(a,r){return this.updateList.add(new o(this.scene,a,r))})},88571:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),r=t(59819),s=new o({Extends:a,Mixins:[g.Alpha,g.BlendMode,g.Depth,g.Flip,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.TextureCrop,g.Tint,g.Transform,g.Visible,r],initialize:function(n,h,i,l,f){a.call(this,n,"Image"),this._crop=this.resetCropObject(),this.setTexture(l,f),this.setPosition(h,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)}});v.exports=s},40652:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g.addToRenderList(o),t.batchSprite(o,o.frame,g,a)};v.exports=E},82459:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(88571);g.register("image",function(s,e){s===void 0&&(s={});var n=a(s,"key",null),h=a(s,"frame",null),i=new r(this.scene,0,0,n,h);return e!==void 0&&(s.add=e),o(this.scene,i,s),i})},2117:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(88571),g=t(39429);g.register("image",function(a,r,s,e){return this.displayList.add(new o(this.scene,a,r,s,e))})},59819:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(99517),a=t(40652),v.exports={renderWebGL:g,renderCanvas:a}},99517:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g.addToRenderList(o),this.pipeline.batchSprite(o,g,a)};v.exports=E},77856:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Events:t(51708),DisplayList:t(8050),GameObjectCreator:t(44603),GameObjectFactory:t(39429),UpdateList:t(45027),Components:t(31401),GetCalcMatrix:t(91296),BuildGameObject:t(25305),BuildGameObjectAnimation:t(13059),GameObject:t(95643),BitmapText:t(22186),Blitter:t(6107),Bob:t(46590),Container:t(31559),DOMElement:t(3069),DynamicBitmapText:t(2638),Extern:t(42421),Graphics:t(43831),Group:t(26479),Image:t(88571),Layer:t(93595),Particles:t(18404),PathFollower:t(1159),RenderTexture:t(591),RetroFont:t(196),Rope:t(77757),Sprite:t(68287),Text:t(50171),GetTextSize:t(14220),MeasureText:t(79557),TextStyle:t(35762),TileSprite:t(20839),Zone:t(41481),Video:t(18471),Shape:t(17803),Arc:t(23629),Curve:t(89),Ellipse:t(19921),Grid:t(30479),IsoBox:t(61475),IsoTriangle:t(16933),Line:t(57847),Polygon:t(24949),Rectangle:t(74561),Star:t(55911),Triangle:t(36931),Factories:{Blitter:t(12709),Container:t(24961),DOMElement:t(2611),DynamicBitmapText:t(72566),Extern:t(56315),Graphics:t(1201),Group:t(3385),Image:t(2117),Layer:t(20005),Particles:t(676),PathFollower:t(90145),RenderTexture:t(60505),Rope:t(96819),Sprite:t(46409),StaticBitmapText:t(34914),Text:t(68005),TileSprite:t(91681),Zone:t(84175),Video:t(89025),Arc:t(42563),Curve:t(40511),Ellipse:t(1543),Grid:t(34137),IsoBox:t(3933),IsoTriangle:t(49803),Line:t(2481),Polygon:t(64827),Rectangle:t(87959),Star:t(93697),Triangle:t(45245)},Creators:{Blitter:t(9403),Container:t(77143),DynamicBitmapText:t(11164),Graphics:t(87079),Group:t(94975),Image:t(82459),Layer:t(25179),Particles:t(92730),RenderTexture:t(34495),Rope:t(26209),Sprite:t(15567),StaticBitmapText:t(57336),Text:t(71259),TileSprite:t(14167),Zone:t(95261),Video:t(11511)}};o.Shader=t(20071),o.Mesh=t(4703),o.NineSlice=t(28103),o.PointLight=t(80321),o.Plane=t(33663),o.Factories.Shader=t(74177),o.Factories.Mesh=t(9225),o.Factories.NineSlice=t(47521),o.Factories.PointLight=t(71255),o.Factories.Plane=t(30985),o.Creators.Shader=t(54935),o.Creators.Mesh=t(20527),o.Creators.NineSlice=t(28279),o.Creators.PointLight=t(39829),o.Creators.Plane=t(56015),o.Light=t(41432),o.LightsManager=t(61356),o.LightsPlugin=t(88992),v.exports=o},93595:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(83419),a=t(31401),r=t(53774),s=t(45893),e=t(50792),n=t(51708),h=t(73162),i=t(33963),l=t(44594),f=t(19186),u=new g({Extends:h,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Mask,a.PostPipeline,a.Visible,e,i],initialize:function(p,m){h.call(this,p),e.call(this),this.scene=p,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=p.sys,this.events=p.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPostPipeline(),this.clearAlpha(),this.setBlendMode(o.SKIP_CHECK),m&&this.add(m),p.sys.queueDepthSort()},setActive:function(d){return this.active=d,this},setName:function(d){return this.name=d,this},setState:function(d){return this.state=d,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(d,p){return this.data||(this.data=new s(this)),this.data.set(d,p),this},incData:function(d,p){return this.data||(this.data=new s(this)),this.data.inc(d,p),this},toggleData:function(d){return this.data||(this.data=new s(this)),this.data.toggle(d),this},getData:function(d){return this.data||(this.data=new s(this)),this.data.get(d)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return r(this)},willRender:function(d){return!(this.renderFlags!==15||this.list.length===0||this.cameraFilter!==0&&this.cameraFilter&d.id)},getIndexList:function(){for(var d=this,p=this.parentContainer,m=[];p&&(m.unshift(p.getIndex(d)),d=p,p.parentContainer);)p=p.parentContainer;return m.unshift(this.displayList.getIndex(d)),m},addChildCallback:function(d){var p=d.displayList;p&&p!==this&&d.removeFromDisplayList(),d.displayList||(this.queueDepthSort(),d.displayList=this,d.emit(n.ADDED_TO_SCENE,d,this.scene),this.events.emit(l.ADDED_TO_SCENE,d,this.scene))},removeChildCallback:function(d){this.queueDepthSort(),d.displayList=null,d.emit(n.REMOVED_FROM_SCENE,d,this.scene),this.events.emit(l.REMOVED_FROM_SCENE,d,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(f(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(d,p){return d._depth-p._depth},getChildren:function(){return this.list},addToDisplayList:function(d){return d===void 0&&(d=this.scene.sys.displayList),this.displayList&&this.displayList!==d&&this.removeFromDisplayList(),d.exists(this)||(this.displayList=d,d.add(this,!0),d.queueDepthSort(),this.emit(n.ADDED_TO_SCENE,this,this.scene),d.events.emit(l.ADDED_TO_SCENE,this,this.scene)),this},removeFromDisplayList:function(){var d=this.displayList||this.scene.sys.displayList;return d.exists(this)&&(d.remove(this,!0),d.queueDepthSort(),this.displayList=null,this.emit(n.REMOVED_FROM_SCENE,this,this.scene),d.events.emit(l.REMOVED_FROM_SCENE,this,this.scene)),this},destroy:function(d){if(!(!this.scene||this.ignoreDestroy)){this.emit(n.DESTROY,this);for(var p=this.list;p.length;)p[0].destroy(d);this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0,!1),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});v.exports=u},2956:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=o.list;if(a.length!==0){o.depthSort();var r=o.blendMode!==-1;r||t.setBlendMode(0);var s=o._alpha;o.mask&&o.mask.preRenderCanvas(t,null,g);for(var e=0;e<a.length;e++){var n=a[e];if(n.willRender(g)){var h=n.alpha;!r&&n.blendMode!==t.currentBlendMode&&t.setBlendMode(n.blendMode),n.setAlpha(h*s),n.renderCanvas(t,n,g),n.setAlpha(h)}}o.mask&&o.mask.postRenderCanvas(t)}};v.exports=E},25179:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(93595),a=t(44603),r=t(23568);a.register("layer",function(s,e){s===void 0&&(s={});var n=r(s,"children",null),h=new g(this.scene,n);return e!==void 0&&(s.add=e),o(this.scene,h,s),h})},20005:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(93595),g=t(39429);g.register("layer",function(a){return this.displayList.add(new o(this.scene,a))})},33963:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(15869),a=t(2956),v.exports={renderWebGL:g,renderCanvas:a}},15869:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=o.list,r=a.length;if(r!==0){o.depthSort(),t.pipelines.preBatch(o);var s=o.blendMode!==-1;s||t.setBlendMode(0);for(var e=o.alpha,n=0;n<r;n++){var h=a[n];if(h.willRender(g)){var i,l,f,u;if(h.alphaTopLeft!==void 0)i=h.alphaTopLeft,l=h.alphaTopRight,f=h.alphaBottomLeft,u=h.alphaBottomRight;else{var d=h.alpha;i=d,l=d,f=d,u=d}!s&&h.blendMode!==t.currentBlendMode&&t.setBlendMode(h.blendMode);var p=h.mask;p&&p.preRenderWebGL(t,h,g);var m=h.type;m!==t.currentType&&(t.newType=!0,t.currentType=m),t.nextTypeMatch=n<r-1?a[n+1].type===t.currentType:!1,h.setAlpha(i*e,l*e,f*e,u*e),h.renderWebGL(t,h,g),h.setAlpha(i,l,f,u),p&&p.postRenderWebGL(t,g),t.newType=!1}}t.pipelines.postBatch(o)}};v.exports=E},41432:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=t(83419),a=t(31401),r=t(51767),s=t(70554),e=new g({Extends:o,Mixins:[a.Origin,a.ScrollFactor,a.Visible],initialize:function(h,i,l,f,u,d,p){o.call(this,h,i,l),this.color=new r(f,u,d),this.intensity=p,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1),this.setOrigin(),this.setDisplayOrigin(l)},displayWidth:{get:function(){return this.diameter},set:function(n){this.diameter=n}},displayHeight:{get:function(){return this.diameter},set:function(n){this.diameter=n}},width:{get:function(){return this.diameter},set:function(n){this.diameter=n}},height:{get:function(){return this.diameter},set:function(n){this.diameter=n}},willRender:function(n){return!(e.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&n.id)},setColor:function(n){var h=s.getFloatsFromUintRGB(n);return this.color.set(h[0],h[1],h[2]),this},setIntensity:function(n){return this.intensity=n,this},setRadius:function(n){return this.radius=n,this}});e.RENDER_MASK=15,v.exports=e},61356:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81491),g=t(83419),a=t(20339),r=t(41432),s=t(80321),e=t(51767),n=t(19133),h=t(19186),i=t(70554),l=new g({initialize:function(){this.lights=[],this.ambientColor=new e(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(f,u,d,p,m,T){return this.systems.displayList.add(new s(this.scene,f,u,d,p,m,T))},enable:function(){return this.maxLights===-1&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(f){for(var u=this.lights,d=f.worldView,p=[],m=0;m<u.length;m++){var T=u[m];T.willRender(f)&&o(T,d)&&p.push({light:T,distance:a(T.x,T.y,d.centerX,d.centerY)})}return p.length>this.maxLights&&(h(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(f,u){return f.distance>=u.distance},setAmbientColor:function(f){var u=i.getFloatsFromUintRGB(f);return this.ambientColor.set(u[0],u[1],u[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(f,u,d,p,m){f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=128),p===void 0&&(p=16777215),m===void 0&&(m=1);var T=i.getFloatsFromUintRGB(p),y=new r(f,u,d,T[0],T[1],T[2],m);return this.lights.push(y),y},removeLight:function(f){var u=this.lights.indexOf(f);return u>=0&&n(this.lights,u),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});v.exports=l},88992:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(61356),a=t(37277),r=t(44594),s=new o({Extends:g,initialize:function(n){this.scene=n,this.systems=n.sys,n.sys.settings.isBooted||n.sys.events.once(r.BOOT,this.boot,this),g.call(this)},boot:function(){var e=this.systems.events;e.on(r.SHUTDOWN,this.shutdown,this),e.on(r.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});a.register("LightsPlugin",s,"lights"),v.exports=s},4703:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(39506),r=t(83997),s=t(95643),e=t(34684),n=t(92515),h=t(91296),i=t(37867),l=t(29807),f=t(43396),u=t(19186),d=t(25836),p=t(39318),m=new o({Extends:s,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Size,g.Texture,g.Transform,g.Visible,l],initialize:function(y,S,C,R,I,L,w,O,B,V,b,X){S===void 0&&(S=0),C===void 0&&(C=0),R===void 0&&(R="__WHITE"),s.call(this,y,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new d,this.modelScale=new d(1,1,1),this.modelRotation=new d,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new i,this.viewPosition=new d,this.viewMatrix=new i,this.projectionMatrix=new i,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1,this.fov,this.displayOriginX=0,this.displayOriginY=0;var K=y.sys.renderer;this.setPosition(S,C),this.setTexture(R,I),this.setSize(K.width,K.height),this.initPipeline(),this.initPostPipeline(),this.setPerspective(K.width,K.height),L&&this.addVertices(L,w,O,B,V,b,X)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(T){return this.viewPosition.addScale(d.LEFT,T),this.dirtyCache[10]=1,this},panY:function(T){return this.viewPosition.y+=d.DOWN.y*T,this.dirtyCache[10]=1,this},panZ:function(T){return this.viewPosition.z+=T,this.dirtyCache[10]=1,this},setPerspective:function(T,y,S,C,R){return S===void 0&&(S=45),C===void 0&&(C=.01),R===void 0&&(R=1e3),this.fov=S,this.projectionMatrix.perspective(a(S),T/y,C,R),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(T,y,S,C){return T===void 0&&(T=this.scene.sys.renderer.getAspectRatio()),y===void 0&&(y=1),S===void 0&&(S=-1e3),C===void 0&&(C=1e3),this.fov=0,this.projectionMatrix.ortho(-T,T,-y,y,S,C),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(T){T.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(T,y,S,C,R,I,L,w,O){var B=this.scene.sys.cache.obj.get(T),V;return B&&(V=e(B,this,y,S,C,R,I,L,w,O)),(!V||V.verts.length===0)&&console.warn("Mesh.addVerticesFromObj data empty:",T),this},sortByDepth:function(T,y){return T.depth-y.depth},depthSort:function(){return u(this.faces,this.sortByDepth),this},addVertex:function(T,y,S,C,R,I,L){var w=new p(T,y,S,C,R,I,L);return this.vertices.push(w),w},addFace:function(T,y,S){var C=new r(T,y,S);return this.faces.push(C),this.dirtyCache[9]=-1,C},addVertices:function(T,y,S,C,R,I,L){var w=n(T,y,S,C,R,I,L);return w?(this.faces=this.faces.concat(w.faces),this.vertices=this.vertices.concat(w.vertices)):console.warn("Mesh.addVertices data empty or invalid"),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(T){return this.faces[T]},hasFaceAt:function(T,y,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=h(this,S).calc,R=this.faces,I=0;I<R.length;I++){var L=R[I];if(L.contains(T,y,C))return!0}return!1},getFaceAt:function(T,y,S){S===void 0&&(S=this.scene.sys.cameras.main);for(var C=h(this,S).calc,R=this.faces,I=[],L=0;L<R.length;L++){var w=R[L];w.contains(T,y,C)&&I.push(w)}return u(I,this.sortByDepth)},setDebug:function(T,y){return this.debugGraphic=T,!T&&!y?this.debugCallback=null:y?this.debugCallback=y:this.debugCallback=this.renderDebug,this},isDirty:function(){var T=this.modelPosition,y=this.modelRotation,S=this.modelScale,C=this.dirtyCache,R=T.x,I=T.y,L=T.z,w=y.x,O=y.y,B=y.z,V=S.x,b=S.y,X=S.z,K=this.getFaceCount(),Q=C[0],U=C[1],W=C[2],F=C[3],G=C[4],z=C[5],Y=C[6],$=C[7],j=C[8],Z=C[9];return C[0]=R,C[1]=I,C[2]=L,C[3]=w,C[4]=O,C[5]=B,C[6]=V,C[7]=b,C[8]=X,C[9]=K,Q!==R||U!==I||W!==L||F!==w||G!==O||z!==B||Y!==V||$!==b||j!==X||Z!==K},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var T=this.dirtyCache;if(!(!this.ignoreDirtyCache&&!T[10]&&!this.isDirty())){var y=this.width,S=this.height,C=this.viewMatrix,R=this.viewPosition;T[10]&&(C.identity(),C.translate(R),C.invert(),T[10]=0);var I=this.transformMatrix;I.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var L=R.z,w=this.faces,O=0;O<w.length;O++)w[O].transformCoordinatesLocal(I,y,S,L);this.depthSort()}},renderDebug:function(T,y){for(var S=T.debugGraphic,C=0;C<y.length;C++){var R=y[C],I=R.vertex1.tx,L=R.vertex1.ty,w=R.vertex2.tx,O=R.vertex2.ty,B=R.vertex3.tx,V=R.vertex3.ty;S.strokeTriangle(I,L,w,O,B,V)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null},clearTint:function(){return this.setTint()},setInteractive:function(T){T===void 0&&(T={});var y=(function(S,C,R){for(var I=this.faces,L=0;L<I.length;L++){var w=I[L];if(w.contains(C,R))return!0}return!1}).bind(this);return this.scene.sys.input.enable(this,T,y),this},setTint:function(T){T===void 0&&(T=16777215);for(var y=this.vertices,S=0;S<y.length;S++)y[S].color=T;return this},uvScroll:function(T,y){for(var S=this.faces,C=0;C<S.length;C++)S[C].scrollUV(T,y);return this},uvScale:function(T,y){for(var S=this.faces,C=0;C<S.length;C++)S[C].scaleUV(T,y);return this},tint:{set:function(T){this.setTint(T)}},rotateX:{get:function(){return f(this.modelRotation.x)},set:function(T){this.modelRotation.x=a(T)}},rotateY:{get:function(){return f(this.modelRotation.y)},set:function(T){this.modelRotation.y=a(T)}},rotateZ:{get:function(){return f(this.modelRotation.z)},set:function(T){this.modelRotation.z=a(T)}}});v.exports=m},36488:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};v.exports=E},20527:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(35154),s=t(4703);g.register("mesh",function(e,n){e===void 0&&(e={});var h=a(e,"key",null),i=a(e,"frame",null),l=r(e,"vertices",[]),f=r(e,"uvs",[]),u=r(e,"indicies",[]),d=r(e,"containsZ",!1),p=r(e,"normals",[]),m=r(e,"colors",16777215),T=r(e,"alphas",1),y=new s(this.scene,0,0,h,i,l,f,u,d,p,m,T);return n!==void 0&&(e.add=n),o(this.scene,y,e),y})},9225:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4703),g=t(39429);g.register("mesh",function(a,r,s,e,n,h,i,l,f,u,d){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i,l,f,u,d))})},29807:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(48833),a=t(36488),v.exports={renderWebGL:g,renderCanvas:a}},48833:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,r,s,e){var n=r.faces,h=n.length;if(h!==0){s.addToRenderList(r);var i=a.pipelines.set(r.pipeline,r),l=o(r,s,e).calc;a.pipelines.preBatch(r);for(var f=i.setGameObject(r),u=i.vertexViewF32,d=i.vertexViewU32,p=i.vertexCount*i.currentShader.vertexComponentCount-1,m=r.tintFill,T=[],y=r.debugCallback,S=l.a,C=l.b,R=l.c,I=l.d,L=l.e,w=l.f,O=r.viewPosition.z,B=r.hideCCW,V=s.roundPixels,b=s.alpha*r.alpha,X=0,K=0;K<h;K++){var Q=n[K];Q.isInView(s,B,O,b,S,C,R,I,L,w,V)&&(i.shouldFlush(3)&&(i.flush(),f=i.setGameObject(r),p=0),p=Q.load(u,d,p,f,m),X++,i.vertexCount+=3,i.currentBatch.count=i.vertexCount-i.currentBatch.start,y&&T.push(Q))}r.totalFrame+=X,y&&y.call(r,r,T),a.pipelines.postBatch(r)}};v.exports=g},28103:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),r=t(78023),s=t(39318),e=new o({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,r],initialize:function(h,i,l,f,u,d,p,m,T,y,S){a.call(this,h,"NineSlice"),this._width,this._height,this._originX=.5,this._originY=.5,this._sizeComponent=!0,this.vertices=[],this.leftWidth,this.rightWidth,this.topHeight,this.bottomHeight,this.tint=16777215,this.tintFill=!1;var C=h.textures.getFrame(f,u);this.is3Slice=!y&&!S,C.scale9&&(this.is3Slice=C.is3Slice);for(var R=this.is3Slice?18:54,I=0;I<R;I++)this.vertices.push(new s);this.setPosition(i,l),this.setTexture(f,u),this.setSlices(d,p,m,T,y,S,!1),this.updateDisplayOrigin(),this.initPipeline(),this.initPostPipeline()},setSlices:function(n,h,i,l,f,u,d){i===void 0&&(i=10),l===void 0&&(l=10),f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=!1);var p=this.frame,m=!1;if(this.is3Slice&&d&&f!==0&&u!==0&&(m=!0),m)console.warn("Cannot change 9 slice to 3 slice");else{if(p.scale9&&!d){var T=p.data.scale9Borders,y=T.x,S=T.y;i=y,l=p.width-T.w-y,f=S,u=p.height-T.h-S,n===void 0&&(n=p.width),h===void 0&&(h=p.height)}else n===void 0&&(n=256),h===void 0&&(h=256);this._width=n,this._height=h,this.leftWidth=i,this.rightWidth=l,this.topHeight=f,this.bottomHeight=u,this.is3Slice&&(h=p.height,this._height=h,this.topHeight=h,this.bottomHeight=0),this.updateVertices(),this.updateUVs()}return this},updateUVs:function(){var n=this.leftWidth,h=this.rightWidth,i=this.topHeight,l=this.bottomHeight,f=this.frame.width,u=this.frame.height;this.updateQuadUVs(0,0,0,n/f,i/u),this.updateQuadUVs(6,n/f,0,1-h/f,i/u),this.updateQuadUVs(12,1-h/f,0,1,i/u),this.is3Slice||(this.updateQuadUVs(18,0,i/u,n/f,1-l/u),this.updateQuadUVs(24,n/f,i/u,1-h/f,1-l/u),this.updateQuadUVs(30,1-h/f,i/u,1,1-l/u),this.updateQuadUVs(36,0,1-l/u,n/f,1),this.updateQuadUVs(42,n/f,1-l/u,1-h/f,1),this.updateQuadUVs(48,1-h/f,1-l/u,1,1))},updateVertices:function(){var n=this.leftWidth,h=this.rightWidth,i=this.topHeight,l=this.bottomHeight,f=this.width,u=this.height;this.updateQuad(0,-.5,.5,-.5+n/f,.5-i/u),this.updateQuad(6,-.5+n/f,.5,.5-h/f,.5-i/u),this.updateQuad(12,.5-h/f,.5,.5,.5-i/u),this.is3Slice||(this.updateQuad(18,-.5,.5-i/u,-.5+n/f,-.5+l/u),this.updateQuad(24,-.5+n/f,.5-i/u,.5-h/f,-.5+l/u),this.updateQuad(30,.5-h/f,.5-i/u,.5,-.5+l/u),this.updateQuad(36,-.5,-.5+l/u,-.5+n/f,-.5),this.updateQuad(42,-.5+n/f,-.5+l/u,.5-h/f,-.5),this.updateQuad(48,.5-h/f,-.5+l/u,.5,-.5))},updateQuad:function(n,h,i,l,f){var u=this.width,d=this.height,p=this.originX,m=this.originY,T=this.vertices;T[n+0].resize(h,i,u,d,p,m),T[n+1].resize(h,f,u,d,p,m),T[n+2].resize(l,i,u,d,p,m),T[n+3].resize(h,f,u,d,p,m),T[n+4].resize(l,f,u,d,p,m),T[n+5].resize(l,i,u,d,p,m)},updateQuadUVs:function(n,h,i,l,f){var u=this.vertices,d=this.frame,p=d.u0,m=d.v0,T=d.u1,y=d.v1;if(p!==0||T!==1){var S=T-p;h=p+h*S,l=p+l*S}if(m!==0||y!==1){var C=y-m;i=m+i*C,f=m+f*C}u[n+0].setUVs(h,i),u[n+1].setUVs(h,f),u[n+2].setUVs(l,i),u[n+3].setUVs(h,f),u[n+4].setUVs(l,f),u[n+5].setUVs(l,i)},clearTint:function(){return this.setTint(16777215),this},setTint:function(n){return n===void 0&&(n=16777215),this.tint=n,this.tintFill=!1,this},setTintFill:function(n){return this.setTint(n),this.tintFill=!0,this},isTinted:{get:function(){return this.tint!==16777215}},width:{get:function(){return this._width},set:function(n){this._width=Math.max(n,this.leftWidth+this.rightWidth),this.updateVertices()}},height:{get:function(){return this._height},set:function(n){this.is3Slice||(this._height=Math.max(n,this.topHeight+this.bottomHeight),this.updateVertices())}},displayWidth:{get:function(){return this.scaleX*this.width},set:function(n){this.scaleX=n/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(n){this.scaleY=n/this.height}},setSize:function(n,h){this.width=n,this.height=h,this.updateDisplayOrigin();var i=this.input;return i&&!i.customHitArea&&(i.hitArea.width=this.width,i.hitArea.height=this.height),this},setDisplaySize:function(n,h){return this.displayWidth=n,this.displayHeight=h,this},originX:{get:function(){return this._originX},set:function(n){this._originX=n,this.updateVertices()}},originY:{get:function(){return this._originY},set:function(n){this._originY=n,this.updateVertices()}},setOrigin:function(n,h){return n===void 0&&(n=.5),h===void 0&&(h=n),this._originX=n,this._originY=h,this.updateVertices(),this.updateDisplayOrigin()},setSizeToFrame:function(){if(this.is3Slice){var n=this.frame.height;this._height=n,this.topHeight=n,this.bottomHeight=0}return this.updateUVs(),this},preDestroy:function(){this.vertices=[]}});v.exports=e},28279:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(35154),s=t(28103);g.register("nineslice",function(e,n){e===void 0&&(e={});var h=a(e,"key",null),i=a(e,"frame",null),l=r(e,"width",256),f=r(e,"height",256),u=r(e,"leftWidth",10),d=r(e,"rightWidth",10),p=r(e,"topHeight",0),m=r(e,"bottomHeight",0),T=new s(this.scene,0,0,h,i,l,f,u,d,p,m);return n!==void 0&&(e.add=n),o(this.scene,T,e),T})},47521:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28103),g=t(39429);g.register("nineslice",function(a,r,s,e,n,h,i,l,f,u){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i,l,f,u))})},78023:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(52230),v.exports={renderWebGL:g,renderCanvas:a}},52230:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(r,s,e,n){var h=s.vertices,i=h.length;if(i!==0){e.addToRenderList(s);var l=r.pipelines.set(s.pipeline,s),f=o(s,e,n,!1).calc;r.pipelines.preBatch(s);var u=l.setGameObject(s),d=l.vertexViewF32,p=l.vertexViewU32,m=l.vertexCount*l.currentShader.vertexComponentCount-1,T=e.roundPixels,y=s.tintFill,S=e.alpha*s.alpha,C=g.getTintAppendFloatAlpha(s.tint,S),R=l.vertexAvailable(),I=-1;R<i&&(I=R);for(var L=0;L<i;L++){var w=h[L];L===I&&(l.flush(),u=l.setGameObject(s),m=0),d[++m]=f.getXRound(w.vx,w.vy,T),d[++m]=f.getYRound(w.vx,w.vy,T),d[++m]=w.u,d[++m]=w.v,d[++m]=u,d[++m]=y,p[++m]=C,l.vertexCount++,l.currentBatch.count=l.vertexCount-l.currentBatch.start}r.pipelines.postBatch(s)}};v.exports=a},76472:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(44777),a=t(37589),r=t(6113),s=t(91389),e=t(90664),n=new o({Extends:g,initialize:function(i){g.call(this,i,null,!1),this.active=!1,this.easeName="Linear",this.r=[],this.g=[],this.b=[]},getMethod:function(){return this.propertyValue===null?0:9},setMethods:function(){var h=this.propertyValue,i=h,l=this.defaultEmit,f=this.defaultUpdate;if(this.method===9){this.start=h[0],this.ease=r("Linear"),this.interpolation=s("linear"),l=this.easedValueEmit,f=this.easeValueUpdate,i=h[0],this.active=!0;for(var u=0;u<h.length;u++){var d=e(h[u]);this.r.push(d.r),this.g.push(d.g),this.b.push(d.b)}}return this.onEmit=l,this.onUpdate=f,this.current=i,this},setEase:function(h){this.easeName=h,this.ease=r(h)},easedValueEmit:function(){return this.current=this.start,this.start},easeValueUpdate:function(h,i,l){var f=this.ease(l),u=this.interpolation(this.r,f),d=this.interpolation(this.g,f),p=this.interpolation(this.b,f),m=a(u,d,p);return this.current=m,m}});v.exports=n},44777:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(45319),a=t(83419),r=t(99472),s=t(6113),e=t(95540),n=t(91389),h=t(77720),i=t(15994),l=new a({initialize:function(u,d,p){p===void 0&&(p=!1),this.propertyKey=u,this.propertyValue=d,this.defaultValue=d,this.steps=0,this.counter=0,this.yoyo=!1,this.direction=0,this.start=0,this.current=0,this.end=0,this.ease=null,this.interpolation=null,this.emitOnly=p,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.active=!0,this.method=0,this._onEmit,this._onUpdate},loadConfig:function(f,u){f===void 0&&(f={}),u&&(this.propertyKey=u),this.propertyValue=e(f,this.propertyKey,this.defaultValue),this.method=this.getMethod(),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return JSON.stringify(this.propertyValue)},onChange:function(f){var u;switch(this.method){case 1:case 3:case 8:u=f;break;case 2:this.propertyValue.indexOf(f)>=0&&(u=f);break;case 4:var d=(this.end-this.start)/this.steps;u=h(f,d),this.counter=u;break;case 5:case 6:case 7:u=g(f,this.start,this.end);break;case 9:u=this.start[0];break}return this.current=u,this},getMethod:function(){var f=this.propertyValue;if(f===null)return 0;var u=typeof f;if(u==="number")return 1;if(Array.isArray(f))return 2;if(u==="function")return 3;if(u==="object"){if(this.hasBoth(f,"start","end"))return this.has(f,"steps")?4:5;if(this.hasBoth(f,"min","max"))return 6;if(this.has(f,"random"))return 7;if(this.hasEither(f,"onEmit","onUpdate"))return 8;if(this.hasEither(f,"values","interpolation"))return 9}return 0},setMethods:function(){var f=this.propertyValue,u=f,d=this.defaultEmit,p=this.defaultUpdate;switch(this.method){case 1:d=this.staticValueEmit;break;case 2:d=this.randomStaticValueEmit,u=f[0];break;case 3:this._onEmit=f,d=this.proxyEmit;break;case 4:this.start=f.start,this.end=f.end,this.steps=f.steps,this.counter=this.start,this.yoyo=this.has(f,"yoyo")?f.yoyo:!1,this.direction=0,d=this.steppedEmit,u=this.start;break;case 5:this.start=f.start,this.end=f.end;var m=this.has(f,"ease")?f.ease:"Linear";this.ease=s(m,f.easeParams),d=this.has(f,"random")&&f.random?this.randomRangedValueEmit:this.easedValueEmit,p=this.easeValueUpdate,u=this.start;break;case 6:this.start=f.min,this.end=f.max,d=this.has(f,"int")&&f.int?this.randomRangedIntEmit:this.randomRangedValueEmit,u=this.start;break;case 7:var T=f.random;Array.isArray(T)&&(this.start=T[0],this.end=T[1]),d=this.randomRangedIntEmit,u=this.start;break;case 8:this._onEmit=this.has(f,"onEmit")?f.onEmit:this.defaultEmit,this._onUpdate=this.has(f,"onUpdate")?f.onUpdate:this.defaultUpdate,d=this.proxyEmit,p=this.proxyUpdate;break;case 9:this.start=f.values;var y=this.has(f,"ease")?f.ease:"Linear";this.ease=s(y,f.easeParams),this.interpolation=n(f.interpolation),d=this.easedValueEmit,p=this.easeValueUpdate,u=this.start[0];break}return this.onEmit=d,this.onUpdate=p,this.current=u,this},has:function(f,u){return f.hasOwnProperty(u)},hasBoth:function(f,u,d){return f.hasOwnProperty(u)&&f.hasOwnProperty(d)},hasEither:function(f,u,d){return f.hasOwnProperty(u)||f.hasOwnProperty(d)},defaultEmit:function(f,u,d){return d},defaultUpdate:function(f,u,d,p){return p},proxyEmit:function(f,u,d){var p=this._onEmit(f,u,d);return this.current=p,p},proxyUpdate:function(f,u,d,p){var m=this._onUpdate(f,u,d,p);return this.current=m,m},staticValueEmit:function(){return this.current},staticValueUpdate:function(){return this.current},randomStaticValueEmit:function(){var f=Math.floor(Math.random()*this.propertyValue.length);return this.current=this.propertyValue[f],this.current},randomRangedValueEmit:function(f,u){var d=r(this.start,this.end);return f&&f.data[u]&&(f.data[u].min=d,f.data[u].max=this.end),this.current=d,d},randomRangedIntEmit:function(f,u){var d=o(this.start,this.end);return f&&f.data[u]&&(f.data[u].min=d,f.data[u].max=this.end),this.current=d,d},steppedEmit:function(){var f=this.counter,u=f,d=(this.end-this.start)/this.steps;if(this.yoyo){var p;this.direction===0?(u+=d,u>=this.end&&(p=u-this.end,u=this.end-p,this.direction=1)):(u-=d,u<=this.start&&(p=this.start-u,u=this.start+p,this.direction=0)),this.counter=u}else this.counter=i(u+d,this.start,this.end);return this.current=f,f},easedValueEmit:function(f,u){if(f&&f.data[u]){var d=f.data[u];d.min=this.start,d.max=this.end}return this.current=this.start,this.start},easeValueUpdate:function(f,u,d){var p=f.data[u],m,T=this.ease(d);return this.interpolation?m=this.interpolation(this.start,T):m=(p.max-p.min)*T+p.min,this.current=m,m},destroy:function(){this.propertyValue=null,this.defaultValue=null,this.ease=null,this.interpolation=null,this._onEmit=null,this._onUpdate=null}});v.exports=l},24502:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(20286),r=new o({Extends:a,initialize:function(e,n,h,i,l){if(typeof e=="object"){var f=e;e=g(f,"x",0),n=g(f,"y",0),h=g(f,"power",0),i=g(f,"epsilon",100),l=g(f,"gravity",50)}else e===void 0&&(e=0),n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=100),l===void 0&&(l=50);a.call(this,e,n,!0),this._gravity=l,this._power=h*l,this._epsilon=i*i},update:function(s,e){var n=this.x-s.x,h=this.y-s.y,i=n*n+h*h;if(i!==0){var l=Math.sqrt(i);i<this._epsilon&&(i=this._epsilon);var f=this._power*e/(i*l)*100;s.velocityX+=n*f,s.velocityY+=h*f}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(s){this._epsilon=s*s}},power:{get:function(){return this._power/this._gravity},set:function(s){this._power=s*this._gravity}},gravity:{get:function(){return this._gravity},set:function(s){var e=this.power;this._gravity=s,this.power=e}}});v.exports=r},56480:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(45319),a=t(83419),r=t(39506),s=t(87841),e=t(11520),n=t(26099),h=new a({initialize:function(l){this.emitter=l,this.texture=null,this.frame=null,this.x=0,this.y=0,this.worldPosition=new n,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.holdCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1},x:{min:0,max:0},y:{min:0,max:0},accelerationX:{min:0,max:0},accelerationY:{min:0,max:0},maxVelocityX:{min:0,max:0},maxVelocityY:{min:0,max:0},moveToX:{min:0,max:0},moveToY:{min:0,max:0},bounce:{min:0,max:0}},this.isCropped=!1,this.scene=l.scene,this.anims=new o(this),this.bounds=new s},emit:function(i,l,f,u,d,p){return this.emitter.emit(i,l,f,u,d,p)},isAlive:function(){return this.lifeCurrent>0},kill:function(){this.lifeCurrent=0},setPosition:function(i,l){i===void 0&&(i=0),l===void 0&&(l=0),this.x=i,this.y=l},fire:function(i,l){var f=this.emitter,u=f.ops,d=f.getAnim();if(d?this.anims.play(d):(this.frame=f.getFrame(),this.texture=this.frame.texture),!this.frame)throw new Error("Particle has no texture frame");if(f.getEmitZone(this),i===void 0?this.x+=u.x.onEmit(this,"x"):u.x.steps>0?this.x+=i+u.x.onEmit(this,"x"):this.x+=i,l===void 0?this.y+=u.y.onEmit(this,"y"):u.y.steps>0?this.y+=l+u.y.onEmit(this,"y"):this.y+=l,this.life=u.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0,this.delayCurrent=u.delay.onEmit(this,"delay"),this.holdCurrent=u.hold.onEmit(this,"hold"),this.scaleX=u.scaleX.onEmit(this,"scaleX"),this.scaleY=u.scaleY.active?u.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=u.rotate.onEmit(this,"rotate"),this.rotation=r(this.angle),f.worldMatrix.transformPoint(this.x,this.y,this.worldPosition),this.delayCurrent===0&&f.getDeathZone(this))return this.lifeCurrent=0,!1;var p=u.speedX.onEmit(this,"speedX"),m=u.speedY.active?u.speedY.onEmit(this,"speedY"):p;if(f.radial){var T=r(u.angle.onEmit(this,"angle"));this.velocityX=Math.cos(T)*Math.abs(p),this.velocityY=Math.sin(T)*Math.abs(m)}else if(f.moveTo){var y=u.moveToX.onEmit(this,"moveToX"),S=u.moveToY.onEmit(this,"moveToY"),C=this.life/1e3;this.velocityX=(y-this.x)/C,this.velocityY=(S-this.y)/C}else this.velocityX=p,this.velocityY=m;return f.acceleration&&(this.accelerationX=u.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=u.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=u.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=u.maxVelocityY.onEmit(this,"maxVelocityY"),this.bounce=u.bounce.onEmit(this,"bounce"),this.alpha=u.alpha.onEmit(this,"alpha"),u.color.active?this.tint=u.color.onEmit(this,"tint"):this.tint=u.tint.onEmit(this,"tint"),!0},update:function(i,l,f){if(this.lifeCurrent<=0)return this.holdCurrent>0?(this.holdCurrent-=i,this.holdCurrent<=0):!0;if(this.delayCurrent>0)return this.delayCurrent-=i,!1;this.anims.update(0,i);var u=this.emitter,d=u.ops,p=1-this.lifeCurrent/this.life;if(this.lifeT=p,this.x=d.x.onUpdate(this,"x",p,this.x),this.y=d.y.onUpdate(this,"y",p,this.y),u.moveTo){var m=d.moveToX.onUpdate(this,"moveToX",p,u.moveToX),T=d.moveToY.onUpdate(this,"moveToY",p,u.moveToY),y=this.lifeCurrent/1e3;this.velocityX=(m-this.x)/y,this.velocityY=(T-this.y)/y}return this.computeVelocity(u,i,l,f,p),this.scaleX=d.scaleX.onUpdate(this,"scaleX",p,this.scaleX),d.scaleY.active?this.scaleY=d.scaleY.onUpdate(this,"scaleY",p,this.scaleY):this.scaleY=this.scaleX,this.angle=d.rotate.onUpdate(this,"rotate",p,this.angle),this.rotation=r(this.angle),u.getDeathZone(this)?(this.lifeCurrent=0,!0):(this.alpha=g(d.alpha.onUpdate(this,"alpha",p,this.alpha),0,1),d.color.active?this.tint=d.color.onUpdate(this,"color",p,this.tint):this.tint=d.tint.onUpdate(this,"tint",p,this.tint),this.lifeCurrent-=i,this.lifeCurrent<=0&&this.holdCurrent<=0)},computeVelocity:function(i,l,f,u,d){var p=i.ops,m=this.velocityX,T=this.velocityY,y=p.accelerationX.onUpdate(this,"accelerationX",d,this.accelerationX),S=p.accelerationY.onUpdate(this,"accelerationY",d,this.accelerationY),C=p.maxVelocityX.onUpdate(this,"maxVelocityX",d,this.maxVelocityX),R=p.maxVelocityY.onUpdate(this,"maxVelocityY",d,this.maxVelocityY);this.bounce=p.bounce.onUpdate(this,"bounce",d,this.bounce),m+=i.gravityX*f+y*f,T+=i.gravityY*f+S*f,m=g(m,-C,C),T=g(T,-R,R),this.velocityX=m,this.velocityY=T,this.x+=m*f,this.y+=T*f,i.worldMatrix.transformPoint(this.x,this.y,this.worldPosition);for(var I=0;I<u.length;I++){var L=u[I];L.active&&L.update(this,l,f,d)}},setSizeToFrame:function(){},getBounds:function(i){i===void 0&&(i=this.emitter.getWorldTransformMatrix());var l=Math.abs(i.scaleX)*this.scaleX,f=Math.abs(i.scaleY)*this.scaleY,u=this.x,d=this.y,p=this.rotation,m=this.frame.width*l/2,T=this.frame.height*f/2,y=this.bounds,S=new n(u-m,d-T),C=new n(u+m,d-T),R=new n(u-m,d+T),I=new n(u+m,d+T);return p!==0&&(e(S,u,d,p),e(C,u,d,p),e(R,u,d,p),e(I,u,d,p)),i.transformPoint(S.x,S.y,S),i.transformPoint(C.x,C.y,C),i.transformPoint(R.x,R.y,R),i.transformPoint(I.x,I.y,I),y.x=Math.min(S.x,C.x,R.x,I.x),y.y=Math.min(S.y,C.y,R.y,I.y),y.width=Math.max(S.x,C.x,R.x,I.x)-y.x,y.height=Math.max(S.y,C.y,R.y,I.y)-y.y,y},destroy:function(){this.anims.destroy(),this.anims=null,this.emitter=null,this.texture=null,this.frame=null,this.scene=null}});v.exports=h},69601:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(20286),a=t(87841),r=new o({Extends:g,initialize:function(e,n,h,i,l,f,u,d){l===void 0&&(l=!0),f===void 0&&(f=!0),u===void 0&&(u=!0),d===void 0&&(d=!0),g.call(this,e,n,!0),this.bounds=new a(e,n,h,i),this.collideLeft=l,this.collideRight=f,this.collideTop=u,this.collideBottom=d},update:function(s){var e=this.bounds,n=-s.bounce,h=s.worldPosition;h.x<e.x&&this.collideLeft?(s.x+=e.x-h.x,s.velocityX*=n):h.x>e.right&&this.collideRight&&(s.x-=h.x-e.right,s.velocityX*=n),h.y<e.y&&this.collideTop?(s.y+=e.y-h.y,s.velocityY*=n):h.y>e.bottom&&this.collideBottom&&(s.y-=h.y-e.bottom,s.velocityY*=n)}});v.exports=r},31600:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(53774),r=t(43459),s=t(26388),e=t(19909),n=t(76472),h=t(44777),i=t(20696),l=t(95643),f=t(95540),u=t(26546),d=t(24502),p=t(1985),m=t(97022),T=t(86091),y=t(73162),S=t(20074),C=t(56480),R=t(68875),I=t(87841),L=t(59996),w=t(72905),O=t(90668),B=t(19186),V=t(61340),b=t(26099),X=t(15994),K=t(69601),Q=["active","advance","blendMode","colorEase","deathCallback","deathCallbackScope","duration","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxAliveParticles","maxParticles","name","emitting","particleBringToTop","particleClass","radial","sortCallback","sortOrderAsc","sortProperty","stopAfter","tintFill","timeScale","trackVisible","visible"],U=["accelerationX","accelerationY","alpha","angle","bounce","color","delay","hold","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],W=new o({Extends:l,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Texture,g.Transform,g.Visible,O],initialize:function(G,z,Y,$,j){l.call(this,G,"ParticleEmitter"),this.particleClass=C,this.ops={accelerationX:new h("accelerationX",0),accelerationY:new h("accelerationY",0),alpha:new h("alpha",1),angle:new h("angle",{min:0,max:360},!0),bounce:new h("bounce",0),color:new n("color"),delay:new h("delay",0,!0),hold:new h("hold",0,!0),lifespan:new h("lifespan",1e3,!0),maxVelocityX:new h("maxVelocityX",1e4),maxVelocityY:new h("maxVelocityY",1e4),moveToX:new h("moveToX",0),moveToY:new h("moveToY",0),quantity:new h("quantity",1,!0),rotate:new h("rotate",0),scaleX:new h("scaleX",1),scaleY:new h("scaleY",1),speedX:new h("speedX",0,!0),speedY:new h("speedY",0,!0),tint:new h("tint",16777215),x:new h("x",0),y:new h("y",0)},this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.moveTo=!1,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.maxAliveParticles=0,this.stopAfter=0,this.duration=0,this.frequency=0,this.emitting=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZones=[],this.deathZones=[],this.viewBounds=null,this.follow=null,this.followOffset=new b,this.trackVisible=!1,this.frames=[],this.randomFrame=!0,this.frameQuantity=1,this.anims=[],this.randomAnim=!0,this.animQuantity=1,this.dead=[],this.alive=[],this.counters=new Float32Array(10),this.skipping=!1,this.worldMatrix=new V,this.sortProperty="",this.sortOrderAsc=!0,this.sortCallback=this.depthSortCallback,this.processors=new y(this),this.tintFill=!1,this.initPipeline(),this.initPostPipeline(),this.setPosition(z,Y),this.setTexture($),j&&this.setConfig(j)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setConfig:function(F){if(!F)return this;var G=0,z="",Y=this.ops;for(G=0;G<U.length;G++)z=U[G],Y[z].loadConfig(F);for(G=0;G<Q.length;G++)z=Q[G],m(F,z)&&(this[z]=f(F,z));if(this.acceleration=this.accelerationX!==0||this.accelerationY!==0,this.moveTo=this.moveToX!==0&&this.moveToY!==0,m(F,"speed")&&(Y.speedX.loadConfig(F,"speed"),Y.speedY.active=!1),(p(F,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),m(F,"scale")&&(Y.scaleX.loadConfig(F,"scale"),Y.scaleY.active=!1),m(F,"callbackScope")){var $=f(F,"callbackScope",null);this.emitCallbackScope=$,this.deathCallbackScope=$}if(m(F,"emitZone")&&this.addEmitZone(F.emitZone),m(F,"deathZone")&&this.addDeathZone(F.deathZone),m(F,"bounds")){var j=this.addParticleBounds(F.bounds);j.collideLeft=f(F,"collideLeft",!0),j.collideRight=f(F,"collideRight",!0),j.collideTop=f(F,"collideTop",!0),j.collideBottom=f(F,"collideBottom",!0)}return m(F,"followOffset")&&this.followOffset.setFromObject(f(F,"followOffset",0)),m(F,"texture")&&this.setTexture(F.texture),m(F,"frame")?this.setEmitterFrame(F.frame):m(F,"anim")&&this.setAnim(F.anim),m(F,"reserve")&&this.reserve(F.reserve),m(F,"advance")&&this.fastForward(F.advance),this.resetCounters(this.frequency,this.emitting),this.emitting&&this.emit(i.START,this),this},toJSON:function(){var F=a(this),G=0,z="";for(G=0;G<Q.length;G++)z=Q[G],F[z]=this[z];var Y=this.ops;for(G=0;G<U.length;G++)z=U[G],Y[z]&&(F[z]=Y[z].toJSON());return Y.speedY.active||(delete F.speedX,F.speed=Y.speedX.toJSON()),this.scaleX===this.scaleY&&(delete F.scaleX,delete F.scaleY,F.scale=Y.scaleX.toJSON()),F},resetCounters:function(F,G){var z=this.counters;z.fill(0),z[0]=F,G&&(z[5]=1)},startFollow:function(F,G,z,Y){return G===void 0&&(G=0),z===void 0&&(z=0),Y===void 0&&(Y=!1),this.follow=F,this.followOffset.set(G,z),this.trackVisible=Y,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){var F=this.frames,G=F.length,z;return G===1?z=F[0]:this.randomFrame?z=u(F):(z=F[this.currentFrame],this.frameCounter++,this.frameCounter===this.frameQuantity&&(this.frameCounter=0,this.currentFrame++,this.currentFrame===G&&(this.currentFrame=0))),this.texture.get(z)},setEmitterFrame:function(F,G,z){G===void 0&&(G=!0),z===void 0&&(z=1),this.randomFrame=G,this.frameQuantity=z,this.currentFrame=0;var Y=typeof F;if(this.frames.length=0,Array.isArray(F))this.frames=this.frames.concat(F);else if(Y==="string"||Y==="number")this.frames.push(F);else if(Y==="object"){var $=F;F=f($,"frames",null),F&&(this.frames=this.frames.concat(F));var j=f($,"cycle",!1);this.randomFrame=!j,this.frameQuantity=f($,"quantity",z)}return this.frames.length===1&&(this.frameQuantity=1,this.randomFrame=!1),this},getAnim:function(){var F=this.anims,G=F.length;if(G===0)return null;if(G===1)return F[0];if(this.randomAnim)return u(F);var z=F[this.currentAnim];return this.animCounter++,this.animCounter>=this.animQuantity&&(this.animCounter=0,this.currentAnim=X(this.currentAnim+1,0,G)),z},setAnim:function(F,G,z){G===void 0&&(G=!0),z===void 0&&(z=1),this.randomAnim=G,this.animQuantity=z,this.currentAnim=0;var Y=typeof F;if(this.anims.length=0,Array.isArray(F))this.anims=this.anims.concat(F);else if(Y==="string")this.anims.push(F);else if(Y==="object"){var $=F;F=f($,"anims",null),F&&(this.anims=this.anims.concat(F));var j=f($,"cycle",!1);this.randomAnim=!j,this.animQuantity=f($,"quantity",z)}return this.anims.length===1&&(this.animQuantity=1,this.randomAnim=!1),this},setRadial:function(F){return F===void 0&&(F=!0),this.radial=F,this},addParticleBounds:function(F,G,z,Y,$,j,Z,q){if(typeof F=="object"){var _=F;F=_.x,G=_.y,z=m(_,"w")?_.w:_.width,Y=m(_,"h")?_.h:_.height}return this.addParticleProcessor(new K(F,G,z,Y,$,j,Z,q))},setParticleSpeed:function(F,G){return G===void 0&&(G=F),this.ops.speedX.onChange(F),F===G?this.ops.speedY.active=!1:this.ops.speedY.onChange(G),this.radial=!0,this},setParticleScale:function(F,G){return F===void 0&&(F=1),G===void 0&&(G=F),this.ops.scaleX.onChange(F),this.ops.scaleY.onChange(G),this},setParticleGravity:function(F,G){return this.gravityX=F,this.gravityY=G,this},setParticleAlpha:function(F){return this.ops.alpha.onChange(F),this},setParticleTint:function(F){return this.ops.tint.onChange(F),this},setEmitterAngle:function(F){return this.ops.angle.onChange(F),this},setParticleLifespan:function(F){return this.ops.lifespan.onChange(F),this},setQuantity:function(F){return this.quantity=F,this},setFrequency:function(F,G){return this.frequency=F,this.flowCounter=F>0?F:0,G&&(this.quantity=G),this},addDeathZone:function(F){Array.isArray(F)||(F=[F]);for(var G,z=[],Y=0;Y<F.length;Y++)if(G=F[Y],G instanceof s)z.push(G);else if(typeof G.contains=="function")G=new s(G,!0),z.push(G);else{var $=f(G,"type","onEnter"),j=f(G,"source",null);if(j&&typeof j.contains=="function"){var Z=$==="onEnter";G=new s(j,Z),z.push(G)}}return this.deathZones=this.deathZones.concat(z),z},removeDeathZone:function(F){return w(this.deathZones,F),this},clearDeathZones:function(){return this.deathZones.length=0,this},addEmitZone:function(F){Array.isArray(F)||(F=[F]);for(var G,z=[],Y=0;Y<F.length;Y++)if(G=F[Y],G instanceof R||G instanceof e)z.push(G);else{var $=f(G,"source",null);if($){var j=f(G,"type","random");if(j==="random"&&typeof $.getRandomPoint=="function")G=new R($),z.push(G);else if(j==="edge"&&typeof $.getPoints=="function"){var Z=f(G,"quantity",1),q=f(G,"stepRate",0),_=f(G,"yoyo",!1),tt=f(G,"seamless",!0),nt=f(G,"total",-1);G=new e($,Z,q,_,tt,nt),z.push(G)}}}return this.emitZones=this.emitZones.concat(z),z},removeEmitZone:function(F){return w(this.emitZones,F),this.zoneIndex=0,this},clearEmitZones:function(){return this.emitZones.length=0,this.zoneIndex=0,this},getEmitZone:function(F){var G=this.emitZones,z=G.length;if(z!==0){var Y=G[this.zoneIndex];Y.getPoint(F),Y.total>-1&&(this.zoneTotal++,this.zoneTotal===Y.total&&(this.zoneTotal=0,this.zoneIndex++,this.zoneIndex===z&&(this.zoneIndex=0)))}},getDeathZone:function(F){for(var G=this.deathZones,z=0;z<G.length;z++){var Y=G[z];if(Y.willKill(F))return this.emit(i.DEATH_ZONE,this,F,Y),!0}return!1},setEmitZone:function(F){var G;return isFinite(F)?G=F:G=this.emitZones.indexOf(F),G>=0&&(this.zoneIndex=G),this},addParticleProcessor:function(F){return this.processors.exists(F)||(F.emitter&&F.emitter.removeParticleProcessor(F),this.processors.add(F),F.emitter=this),F},removeParticleProcessor:function(F){return this.processors.exists(F)&&(this.processors.remove(F,!0),F.emitter=null),F},getProcessors:function(){return this.processors.getAll("active",!0)},createGravityWell:function(F){return this.addParticleProcessor(new d(F))},reserve:function(F){var G=this.dead;if(this.maxParticles>0){var z=this.getParticleCount();z+F>this.maxParticles&&(F=this.maxParticles-(z+F))}for(var Y=0;Y<F;Y++)G.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()>=this.maxParticles?!0:this.maxAliveParticles>0&&this.getAliveParticleCount()>=this.maxAliveParticles},onParticleEmit:function(F,G){return F===void 0?(this.emitCallback=null,this.emitCallbackScope=null):typeof F=="function"&&(this.emitCallback=F,G&&(this.emitCallbackScope=G)),this},onParticleDeath:function(F,G){return F===void 0?(this.deathCallback=null,this.deathCallbackScope=null):typeof F=="function"&&(this.deathCallback=F,G&&(this.deathCallbackScope=G)),this},killAll:function(){for(var F=this.dead,G=this.alive;G.length>0;)F.push(G.pop());return this},forEachAlive:function(F,G){for(var z=this.alive,Y=z.length,$=0;$<Y;$++)F.call(G,z[$],this);return this},forEachDead:function(F,G){for(var z=this.dead,Y=z.length,$=0;$<Y;$++)F.call(G,z[$],this);return this},start:function(F,G){return F===void 0&&(F=0),this.emitting||(F>0&&this.fastForward(F),this.emitting=!0,this.resetCounters(this.frequency,!0),G!==void 0&&(this.duration=Math.abs(G)),this.emit(i.START,this)),this},stop:function(F){return F===void 0&&(F=!1),this.emitting&&(this.emitting=!1,F&&this.killAll(),this.emit(i.STOP,this)),this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},setSortProperty:function(F,G){return F===void 0&&(F=""),G===void 0&&(G=this.true),this.sortProperty=F,this.sortOrderAsc=G,this.sortCallback=this.depthSortCallback,this},setSortCallback:function(F){return this.sortProperty!==""?F=this.depthSortCallback:F=null,this.sortCallback=F,this},depthSort:function(){return B(this.alive,this.sortCallback.bind(this)),this},depthSortCallback:function(F,G){var z=this.sortProperty;return this.sortOrderAsc?F[z]-G[z]:G[z]-F[z]},flow:function(F,G,z){return G===void 0&&(G=1),this.emitting=!1,this.frequency=F,this.quantity=G,z!==void 0&&(this.stopAfter=z),this.start()},explode:function(F,G,z){this.frequency=-1,this.resetCounters(-1,!0);var Y=this.emitParticle(F,G,z);return this.emit(i.EXPLODE,this,Y),Y},emitParticleAt:function(F,G,z){return this.emitParticle(z,F,G)},emitParticle:function(F,G,z){if(!this.atLimit()){F===void 0&&(F=this.ops.quantity.onEmit());for(var Y=this.dead,$=this.stopAfter,j=this.follow?this.follow.x+this.followOffset.x:G,Z=this.follow?this.follow.y+this.followOffset.y:z,q=0;q<F;q++){var _=Y.pop();if(_||(_=new this.particleClass(this)),_.fire(j,Z)?(this.particleBringToTop?this.alive.push(_):this.alive.unshift(_),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,_,this)):this.dead.push(_),$>0&&(this.stopCounter++,this.stopCounter>=$)||this.atLimit())break}return _}},fastForward:function(F,G){G===void 0&&(G=1e3/60);var z=0;for(this.skipping=!0;z<Math.abs(F);)this.preUpdate(0,G),z+=G;return this.skipping=!1,this},preUpdate:function(F,G){G*=this.timeScale;var z=G/1e3;this.trackVisible&&(this.visible=this.follow.visible),this.getWorldTransformMatrix(this.worldMatrix);var Y=this.getProcessors(),$=this.alive,j=this.dead,Z=0,q=[],_=$.length;for(Z=0;Z<_;Z++){var tt=$[Z];tt.update(G,z,Y)&&q.push({index:Z,particle:tt})}if(_=q.length,_>0){var nt=this.deathCallback,at=this.deathCallbackScope;for(Z=_-1;Z>=0;Z--){var st=q[Z];$.splice(st.index,1),j.push(st.particle),nt&&nt.call(at,st.particle),st.particle.setPosition()}}if(!this.emitting&&!this.skipping){this.completeFlag===1&&$.length===0&&(this.completeFlag=0,this.emit(i.COMPLETE,this));return}if(this.frequency===0)this.emitParticle();else if(this.frequency>0)for(this.flowCounter-=G;this.flowCounter<=0;)this.emitParticle(),this.flowCounter+=this.frequency;this.skipping||(this.duration>0&&(this.elapsed+=G,this.elapsed>=this.duration&&this.stop()),this.stopAfter>0&&this.stopCounter>=this.stopAfter&&this.stop())},overlap:function(F){for(var G=this.getWorldTransformMatrix(),z=this.alive,Y=z.length,$=[],j=0;j<Y;j++){var Z=z[j];L(F,Z.getBounds(G))&&$.push(Z)}return $},getBounds:function(F,G,z,Y){F===void 0&&(F=0),G===void 0&&(G=0),z===void 0&&(z=1e3/60),Y===void 0&&(Y=new I);var $=this.getWorldTransformMatrix(),j,Z,q=this.alive,_=!1;if(Y.setTo(0,0,0,0),G>0){var tt=0;for(this.skipping=!0;tt<Math.abs(G);){for(this.preUpdate(0,z),j=0;j<q.length;j++)Z=q[j].getBounds($),_?S(Y,Z):(_=!0,r(Z,Y));tt+=z}this.skipping=!1}else for(j=0;j<q.length;j++)Z=q[j].getBounds($),_?S(Y,Z):(_=!0,r(Z,Y));return F>0&&T(Y,F,F),Y},createEmitter:function(){throw new Error("createEmitter removed. See ParticleEmitter docs for info")},particleX:{get:function(){return this.ops.x.current},set:function(F){this.ops.x.onChange(F)}},particleY:{get:function(){return this.ops.y.current},set:function(F){this.ops.y.onChange(F)}},accelerationX:{get:function(){return this.ops.accelerationX.current},set:function(F){this.ops.accelerationX.onChange(F)}},accelerationY:{get:function(){return this.ops.accelerationY.current},set:function(F){this.ops.accelerationY.onChange(F)}},maxVelocityX:{get:function(){return this.ops.maxVelocityX.current},set:function(F){this.ops.maxVelocityX.onChange(F)}},maxVelocityY:{get:function(){return this.ops.maxVelocityY.current},set:function(F){this.ops.maxVelocityY.onChange(F)}},speed:{get:function(){return this.ops.speedX.current},set:function(F){this.ops.speedX.onChange(F),this.ops.speedY.onChange(F)}},speedX:{get:function(){return this.ops.speedX.current},set:function(F){this.ops.speedX.onChange(F)}},speedY:{get:function(){return this.ops.speedY.current},set:function(F){this.ops.speedY.onChange(F)}},moveToX:{get:function(){return this.ops.moveToX.current},set:function(F){this.ops.moveToX.onChange(F)}},moveToY:{get:function(){return this.ops.moveToY.current},set:function(F){this.ops.moveToY.onChange(F)}},bounce:{get:function(){return this.ops.bounce.current},set:function(F){this.ops.bounce.onChange(F)}},particleScaleX:{get:function(){return this.ops.scaleX.current},set:function(F){this.ops.scaleX.onChange(F)}},particleScaleY:{get:function(){return this.ops.scaleY.current},set:function(F){this.ops.scaleY.onChange(F)}},particleColor:{get:function(){return this.ops.color.current},set:function(F){this.ops.color.onChange(F)}},colorEase:{get:function(){return this.ops.color.easeName},set:function(F){this.ops.color.setEase(F)}},particleTint:{get:function(){return this.ops.tint.current},set:function(F){this.ops.tint.onChange(F)}},particleAlpha:{get:function(){return this.ops.alpha.current},set:function(F){this.ops.alpha.onChange(F)}},lifespan:{get:function(){return this.ops.lifespan.current},set:function(F){this.ops.lifespan.onChange(F)}},particleAngle:{get:function(){return this.ops.angle.current},set:function(F){this.ops.angle.onChange(F)}},particleRotate:{get:function(){return this.ops.rotate.current},set:function(F){this.ops.rotate.onChange(F)}},quantity:{get:function(){return this.ops.quantity.current},set:function(F){this.ops.quantity.onChange(F)}},delay:{get:function(){return this.ops.delay.current},set:function(F){this.ops.delay.onChange(F)}},hold:{get:function(){return this.ops.hold.current},set:function(F){this.ops.hold.onChange(F)}},flowCounter:{get:function(){return this.counters[0]},set:function(F){this.counters[0]=F}},frameCounter:{get:function(){return this.counters[1]},set:function(F){this.counters[1]=F}},animCounter:{get:function(){return this.counters[2]},set:function(F){this.counters[2]=F}},elapsed:{get:function(){return this.counters[3]},set:function(F){this.counters[3]=F}},stopCounter:{get:function(){return this.counters[4]},set:function(F){this.counters[4]=F}},completeFlag:{get:function(){return this.counters[5]},set:function(F){this.counters[5]=F}},zoneIndex:{get:function(){return this.counters[6]},set:function(F){this.counters[6]=F}},zoneTotal:{get:function(){return this.counters[7]},set:function(F){this.counters[7]=F}},currentFrame:{get:function(){return this.counters[8]},set:function(F){this.counters[8]=F}},currentAnim:{get:function(){return this.counters[9]},set:function(F){this.counters[9]=F}},preDestroy:function(){this.texture=null,this.frames=null,this.anims=null,this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.emitZones=null,this.deathZones=null,this.bounds=null,this.follow=null,this.counters=null;var F,G=this.ops;for(F=0;F<U.length;F++){var z=U[F];G[z].destroy()}for(F=0;F<this.alive.length;F++)this.alive[F].destroy();for(F=0;F<this.dead.length;F++)this.dead[F].destroy();this.ops=null,this.alive=[],this.dead=[],this.worldMatrix.destroy()}});v.exports=W},9871:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(59996),g=t(61340),a=new g,r=new g,s=new g,e=new g,n=function(h,i,l,f){var u=a,d=r,p=s,m=e;f?(m.loadIdentity(),m.multiply(f),m.translate(i.x,i.y),m.rotate(i.rotation),m.scale(i.scaleX,i.scaleY)):m.applyITRS(i.x,i.y,i.rotation,i.scaleX,i.scaleY);var T=h.currentContext,y=l.roundPixels,S=l.alpha,C=i.alpha,R=i.alive,I=R.length,L=i.viewBounds;if(!(!i.visible||I===0||L&&!o(L,l.worldView))){i.sortCallback&&i.depthSort(),l.addToRenderList(i);var w=i.scrollFactorX,O=i.scrollFactorY;T.save(),T.globalCompositeOperation=h.blendModes[i.blendMode];for(var B=0;B<I;B++){var V=R[B],b=V.alpha*C*S;if(!(b<=0||V.scaleX===0||V.scaleY===0)){p.applyITRS(V.x,V.y,V.rotation,V.scaleX,V.scaleY),u.copyFrom(l.matrix),u.multiplyWithOffset(m,-l.scrollX*w,-l.scrollY*O),p.e=V.x,p.f=V.y,u.multiply(p,d);var X=V.frame,K=X.canvasData;if(K.width>0&&K.height>0){var Q=-X.halfWidth,U=-X.halfHeight;T.globalAlpha=b,T.save(),d.setToContext(T),y&&(Q=Math.round(Q),U=Math.round(U)),T.imageSmoothingEnabled=!X.source.scaleMode,T.drawImage(X.source.image,K.x,K.y,K.width,K.height,Q,U,K.width,K.height),T.restore()}}}T.restore()}};v.exports=n},92730:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(95540),s=t(31600);g.register("particles",function(e,n){e===void 0&&(e={});var h=a(e,"key",null),i=r(e,"config",null),l=new s(this.scene,0,0,h);return n!==void 0&&(e.add=n),o(this.scene,l,e),i&&l.setConfig(i),l})},676:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(31600);o.register("particles",function(a,r,s,e){return a!==void 0&&typeof a=="string"&&console.warn("ParticleEmitterManager was removed in Phaser 3.60. See documentation for details"),this.displayList.add(new g(this.scene,a,r,s,e))})},90668:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(21188),a=t(9871),v.exports={renderWebGL:g,renderCanvas:a}},21188:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(59996),g=t(61340),a=t(70554),r=new g,s=new g,e=new g,n=new g,h=function(i,l,f,u){var d=i.pipelines.set(l.pipeline),p=r,m=s,T=e,y=n;u?(y.loadIdentity(),y.multiply(u),y.translate(l.x,l.y),y.rotate(l.rotation),y.scale(l.scaleX,l.scaleY)):y.applyITRS(l.x,l.y,l.rotation,l.scaleX,l.scaleY);var S=a.getTintAppendFloatAlpha,C=f.alpha,R=l.alpha;i.pipelines.preBatch(l);var I=l.alive,L=I.length,w=l.viewBounds;if(!(L===0||w&&!o(w,f.worldView))){l.sortCallback&&l.depthSort(),f.addToRenderList(l),p.copyFrom(f.matrix),p.multiplyWithOffset(y,-f.scrollX*l.scrollFactorX,-f.scrollY*l.scrollFactorY),i.setBlendMode(l.blendMode),l.mask&&(l.mask.preRenderWebGL(i,l,f),i.pipelines.set(l.pipeline));for(var O=l.tintFill,B,V,b=0;b<L;b++){var X=I[b],K=X.alpha*R*C;if(!(K<=0||X.scaleX===0||X.scaleY===0)){T.applyITRS(X.x,X.y,X.rotation,X.scaleX,X.scaleY),T.e=X.x,T.f=X.y,p.multiply(T,m);var Q=X.frame;Q.glTexture!==V&&(V=Q.glTexture,B=d.setGameObject(l,Q));var U=-Q.halfWidth,W=-Q.halfHeight,F=m.setQuad(U,W,U+Q.width,W+Q.height),G=S(X.tint,K);d.shouldFlush(6)&&(d.flush(),B=d.setGameObject(l,Q)),d.batchQuad(l,F[0],F[1],F[2],F[3],F[4],F[5],F[6],F[7],Q.u0,Q.v0,Q.u1,Q.v1,G,G,G,G,O,V,B)}}l.mask&&l.mask.postRenderWebGL(i,f),i.pipelines.postBatch(l)}};v.exports=h},20286:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e){r===void 0&&(r=0),s===void 0&&(s=0),e===void 0&&(e=!0),this.emitter,this.x=r,this.y=s,this.active=e},update:function(){},destroy:function(){this.emitter=null}});v.exports=g},9774:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="complete"},812:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="deathzone"},30522:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="explode"},96695:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="start"},18677:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="stop"},20696:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={COMPLETE:t(9774),DEATH_ZONE:t(812),EXPLODE:t(30522),START:t(96695),STOP:t(18677)}},18404:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={EmitterColorOp:t(76472),EmitterOp:t(44777),Events:t(20696),GravityWell:t(24502),Particle:t(56480),ParticleBounds:t(69601),ParticleEmitter:t(31600),ParticleProcessor:t(20286),Zones:t(21024)}},26388:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s){this.source=r,this.killOnEnter=s},willKill:function(a){var r=a.worldPosition,s=this.source.contains(r.x,r.y);return s&&this.killOnEnter||!s&&!this.killOnEnter}});v.exports=g},19909:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n,h,i){n===void 0&&(n=!1),h===void 0&&(h=!0),i===void 0&&(i=-1),this.source=r,this.points=[],this.quantity=s,this.stepRate=e,this.yoyo=n,this.counter=-1,this.seamless=h,this._length=0,this._direction=0,this.total=i,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var a=this.points[0],r=this.points[this.points.length-1];a.x===r.x&&a.y===r.y&&this.points.pop()}var s=this._length;return this._length=this.points.length,this._length<s&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(a){return this.source=a,this.updateSource()},getPoint:function(a){this._direction===0?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,this.counter===-1&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var r=this.points[this.counter];r&&(a.x=r.x,a.y=r.y)}});v.exports=g},68875:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(s){this.source=s,this._tempVec=new g,this.total=-1},getPoint:function(r){var s=this._tempVec;this.source.getRandomPoint(s),r.x=s.x,r.y=s.y}});v.exports=a},21024:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={DeathZone:t(26388),EdgeZone:t(19909),RandomZone:t(68875)}},1159:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(68287),r=new o({Extends:a,Mixins:[g.PathFollower],initialize:function(e,n,h,i,l,f){a.call(this,e,h,i,l,f),this.path=n},preUpdate:function(s,e){this.anims.update(s,e),this.pathUpdate(s)}});v.exports=r},90145:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(1159);o.register("follower",function(a,r,s,e,n){var h=new g(this.scene,a,r,s,e,n);return this.displayList.add(h),this.updateList.add(h),h})},33663:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(48803),r=t(90664),s=t(4703),e=t(45650),n=new g({Extends:s,initialize:function(i,l,f,u,d,p,m,T){u||(u="__DEFAULT"),s.call(this,i,l,f,u,d),this.type="Plane",this.anims=new o(this),this.gridWidth,this.gridHeight,this.isTiled,this._checkerboard=null,this.hideCCW=!1,this.setGridSize(p,m,T),this.setSizeToFrame(!1),this.setViewHeight()},originX:{get:function(){return .5}},originY:{get:function(){return .5}},setGridSize:function(h,i,l){h===void 0&&(h=8),i===void 0&&(i=8),l===void 0&&(l=!1);var f=!1;return l&&(f=!0),this.gridWidth=h,this.gridHeight=i,this.isTiled=l,this.clear(),a({mesh:this,widthSegments:h,heightSegments:i,isOrtho:!1,tile:l,flipY:f}),this},setSizeToFrame:function(h){h===void 0&&(h=!0);var i=this.frame;if(this.setPerspective(this.width/i.width,this.height/i.height),this._checkerboard&&this._checkerboard!==this.texture&&this.removeCheckerboard(),!h)return this;var l=this.gridWidth,f=this.gridHeight,u=this.vertices,d=i.u0,p=i.u1,m=i.v0,T=i.v1,y,S,C=0;if(this.isTiled)for(m=i.v1,T=i.v0,S=0;S<f;S++)for(y=0;y<l;y++)u[C++].setUVs(d,T),u[C++].setUVs(d,m),u[C++].setUVs(p,T),u[C++].setUVs(d,m),u[C++].setUVs(p,m),u[C++].setUVs(p,T);else{var R=l+1,I=f+1,L=p-d,w=T-m,O=[];for(S=0;S<I;S++)for(y=0;y<R;y++){var B=d+L*(y/l),V=m+w*(S/f);O.push(B,V)}for(S=0;S<f;S++)for(y=0;y<l;y++){var b=(y+R*S)*2,X=(y+R*(S+1))*2,K=(y+1+R*(S+1))*2,Q=(y+1+R*S)*2;u[C++].setUVs(O[b],O[b+1]),u[C++].setUVs(O[X],O[X+1]),u[C++].setUVs(O[Q],O[Q+1]),u[C++].setUVs(O[X],O[X+1]),u[C++].setUVs(O[K],O[K+1]),u[C++].setUVs(O[Q],O[Q+1])}}return this},setViewHeight:function(h){h===void 0&&(h=this.frame.height);var i=this.fov*(Math.PI/180);this.viewPosition.z=this.height/h/Math.tan(i/2),this.dirtyCache[10]=1},createCheckerboard:function(h,i,l,f,u){h===void 0&&(h=16777215),i===void 0&&(i=255),l===void 0&&(l=255),f===void 0&&(f=255),u===void 0&&(u=128);for(var d=r(h),p=r(i),m=[],T=0;T<16;T++)for(var y=0;y<16;y++)T<8&&y<8||T>7&&y>7?m.push(d.r,d.g,d.b,l):m.push(p.r,p.g,p.b,f);var S=this.scene.sys.textures.addUint8Array(e(),new Uint8Array(m),16,16);return this.removeCheckerboard(),this.setTexture(S),this.setSizeToFrame(),this.setViewHeight(u),this},removeCheckerboard:function(){this._checkerboard&&(this._checkerboard.destroy(),this._checkerboard=null)},play:function(h,i){return this.anims.play(h,i)},playReverse:function(h,i){return this.anims.playReverse(h,i)},playAfterDelay:function(h,i){return this.anims.playAfterDelay(h,i)},playAfterRepeat:function(h,i){return this.anims.playAfterRepeat(h,i)},stop:function(){return this.anims.stop()},stopAfterDelay:function(h){return this.anims.stopAfterDelay(h)},stopAfterRepeat:function(h){return this.anims.stopAfterRepeat(h)},stopOnFrame:function(h){return this.anims.stopOnFrame(h)},preUpdate:function(h,i){s.prototype.preUpdate.call(this,h,i),this.anims.update(h,i)},preDestroy:function(){this.clear(),this.removeCheckerboard(),this.anims.destroy(),this.anims=void 0,this.debugCallback=null,this.debugGraphic=null}});v.exports=n},56015:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(13059),a=t(44603),r=t(23568),s=t(35154),e=t(33663);a.register("plane",function(n,h){n===void 0&&(n={});var i=r(n,"key",null),l=r(n,"frame",null),f=s(n,"width",8),u=s(n,"height",8),d=s(n,"tile",!1),p=new e(this.scene,0,0,i,l,f,u,d);h!==void 0&&(n.add=h);var m=s(n,"checkerboard",null);if(m){var T=s(m,"color1",16777215),y=s(m,"color2",255),S=s(m,"alpha1",255),C=s(m,"alpha2",255),R=s(m,"height",128);p.createCheckerboard(T,y,S,C,R)}return o(this.scene,p,n),g(p,n),p})},30985:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33663),g=t(39429);g.register("plane",function(a,r,s,e,n,h,i){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i))})},80321:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),r=t(30100),s=t(36060),e=t(67277),n=new o({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.Mask,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible,e],initialize:function(i,l,f,u,d,p,m){u===void 0&&(u=16777215),d===void 0&&(d=128),p===void 0&&(p=1),m===void 0&&(m=.1),a.call(this,i,"PointLight"),this.initPipeline(s.POINTLIGHT_PIPELINE),this.initPostPipeline(),this.setPosition(l,f),this.color=r(u),this.intensity=p,this.attenuation=m,this.width=d*2,this.height=d*2,this._radius=d},radius:{get:function(){return this._radius},set:function(h){this._radius=h,this.width=h*2,this.height=h*2}},originX:{get:function(){return .5}},originY:{get:function(){return .5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});v.exports=n},39829:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(80321);g.register("pointlight",function(s,e){s===void 0&&(s={});var n=a(s,"color",16777215),h=a(s,"radius",128),i=a(s,"intensity",1),l=a(s,"attenuation",.1),f=new r(this.scene,0,0,n,h,i,l);return e!==void 0&&(s.add=e),o(this.scene,f,s),f})},71255:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(80321);o.register("pointlight",function(a,r,s,e,n,h){return this.displayList.add(new g(this.scene,a,r,s,e,n,h))})},67277:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(57787),v.exports={renderWebGL:g,renderCanvas:a}},57787:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,r,s,e){s.addToRenderList(r);var n=a.pipelines.set(r.pipeline),h=o(r,s,e).calc,i=r.width,l=r.height,f=-r._radius,u=-r._radius,d=f+i,p=u+l,m=h.getX(0,0),T=h.getY(0,0),y=h.getX(f,u),S=h.getY(f,u),C=h.getX(f,p),R=h.getY(f,p),I=h.getX(d,p),L=h.getY(d,p),w=h.getX(d,u),O=h.getY(d,u);a.pipelines.preBatch(r),n.batchPointLight(r,s,y,S,C,R,I,L,w,O,m,T),a.pipelines.postBatch(r)};v.exports=g},591:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(81320),a=t(88571),r=new o({Extends:a,initialize:function(e,n,h,i,l){n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=32),l===void 0&&(l=32);var f=new g(e.sys.textures,"",i,l);a.call(this,e,n,h,f),this.type="RenderTexture",this.camera=this.texture.camera,this._saved=!1},setSize:function(s,e){this.width=s,this.height=e,this.texture.setSize(s,e),this.updateDisplayOrigin();var n=this.input;return n&&!n.customHitArea&&(n.hitArea.width=s,n.hitArea.height=e),this},resize:function(s,e){return this.setSize(s,e),this},saveTexture:function(s){var e=this.texture;return e.key=s,e.manager.addDynamicTexture(e)&&(this._saved=!0),e},fill:function(s,e,n,h,i,l){return this.texture.fill(s,e,n,h,i,l),this},clear:function(){return this.texture.clear(),this},stamp:function(s,e,n,h,i){return this.texture.stamp(s,e,n,h,i),this},erase:function(s,e,n){return this.texture.erase(s,e,n),this},draw:function(s,e,n,h,i){return this.texture.draw(s,e,n,h,i),this},drawFrame:function(s,e,n,h,i,l){return this.texture.drawFrame(s,e,n,h,i,l),this},repeat:function(s,e,n,h,i,l,f,u,d){return this.texture.repeat(s,e,n,h,i,l,f,u,d),this},beginDraw:function(){return this.texture.beginDraw(),this},batchDraw:function(s,e,n,h,i){return this.texture.batchDraw(s,e,n,h,i),this},batchDrawFrame:function(s,e,n,h,i,l){return this.texture.batchDrawFrame(s,e,n,h,i,l),this},endDraw:function(s){return this.texture.endDraw(s),this},snapshotArea:function(s,e,n,h,i,l,f){return this.texture.snapshotArea(s,e,n,h,i,l,f),this},snapshot:function(s,e,n){return this.snapshotArea(0,0,this.width,this.height,s,e,n)},snapshotPixel:function(s,e,n){return this.snapshotArea(s,e,1,1,n,"pixel")},preDestroy:function(){this.camera=null,this._saved||this.texture.destroy()}});v.exports=r},34495:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(591);g.register("renderTexture",function(s,e){s===void 0&&(s={});var n=a(s,"x",0),h=a(s,"y",0),i=a(s,"width",32),l=a(s,"height",32),f=new r(this.scene,n,h,i,l);return e!==void 0&&(s.add=e),o(this.scene,f,s),f})},60505:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(591);o.register("renderTexture",function(a,r,s,e){return this.displayList.add(new g(this.scene,a,r,s,e))})},77757:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(31401),r=t(95643),s=t(36060),e=t(38745),n=t(26099),h=new g({Extends:r,Mixins:[a.AlphaSingle,a.BlendMode,a.Depth,a.Flip,a.Mask,a.Pipeline,a.PostPipeline,a.Size,a.Texture,a.Transform,a.Visible,a.ScrollFactor,e],initialize:function(l,f,u,d,p,m,T,y,S){d===void 0&&(d="__DEFAULT"),m===void 0&&(m=2),T===void 0&&(T=!0),r.call(this,l,"Rope"),this.anims=new o(this),this.points=m,this.vertices,this.uv,this.colors,this.alphas,this.tintFill=d==="__DEFAULT",this.dirty=!1,this.horizontal=T,this._flipX=!1,this._flipY=!1,this._perp=new n,this.debugCallback=null,this.debugGraphic=null,this.setTexture(d,p),this.setPosition(f,u),this.setSizeToFrame(),this.initPipeline(s.ROPE_PIPELINE),this.initPostPipeline(),Array.isArray(m)&&this.resizeArrays(m.length),this.setPoints(m,y,S),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(i,l){var f=this.anims.currentFrame;this.anims.update(i,l),this.anims.currentFrame!==f&&(this.updateUVs(),this.updateVertices())},play:function(i,l,f){return this.anims.play(i,l,f),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(i,l,f){return i===void 0&&(i=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(i,l,f))},setVertical:function(i,l,f){return i===void 0&&(i=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(i,l,f)):this},setTintFill:function(i){return i===void 0&&(i=!1),this.tintFill=i,this},setAlphas:function(i,l){var f=this.points.length;if(f<1)return this;var u=this.alphas;i===void 0?i=[1]:!Array.isArray(i)&&l===void 0&&(i=[i]);var d,p=0;if(l!==void 0)for(d=0;d<f;d++)p=d*2,u[p]=i,u[p+1]=l;else if(i.length===f)for(d=0;d<f;d++)p=d*2,u[p]=i[d],u[p+1]=i[d];else{var m=i[0];for(d=0;d<f;d++)p=d*2,i.length>p&&(m=i[p]),u[p]=m,i.length>p+1&&(m=i[p+1]),u[p+1]=m}return this},setColors:function(i){var l=this.points.length;if(l<1)return this;var f=this.colors;i===void 0?i=[16777215]:Array.isArray(i)||(i=[i]);var u,d=0;if(i.length===l)for(u=0;u<l;u++)d=u*2,f[d]=i[u],f[d+1]=i[u];else{var p=i[0];for(u=0;u<l;u++)d=u*2,i.length>d&&(p=i[d]),f[d]=p,i.length>d+1&&(p=i[d+1]),f[d+1]=p}return this},setPoints:function(i,l,f){if(i===void 0&&(i=2),typeof i=="number"){var u=i;u<2&&(u=2),i=[];var d,p,m;if(this.horizontal)for(m=-this.frame.halfWidth,p=this.frame.width/(u-1),d=0;d<u;d++)i.push({x:m+d*p,y:0});else for(m=-this.frame.halfHeight,p=this.frame.height/(u-1),d=0;d<u;d++)i.push({x:0,y:m+d*p})}var T=i.length,y=this.points.length;return T<1?(console.warn("Rope: Not enough points given"),this):(T===1&&(i.unshift({x:0,y:0}),T++),y!==T&&this.resizeArrays(T),this.dirty=!0,this.points=i,this.updateUVs(),l!=null&&this.setColors(l),f!=null&&this.setAlphas(f),this)},updateUVs:function(){for(var i=this.uv,l=this.points.length,f=this.frame.u0,u=this.frame.v0,d=this.frame.u1,p=this.frame.v1,m=(d-f)/(l-1),T=(p-u)/(l-1),y=0;y<l;y++){var S=y*4,C,R,I,L;this.horizontal?(this._flipX?(C=d-y*m,I=d-y*m):(C=f+y*m,I=f+y*m),this._flipY?(R=p,L=u):(R=u,L=p)):(this._flipX?(C=f,I=d):(C=d,I=f),this._flipY?(R=p-y*T,L=p-y*T):(R=u+y*T,L=u+y*T)),i[S+0]=C,i[S+1]=R,i[S+2]=I,i[S+3]=L}return this},resizeArrays:function(i){var l=this.colors,f=this.alphas;this.vertices=new Float32Array(i*4),this.uv=new Float32Array(i*4),l=new Uint32Array(i*2),f=new Float32Array(i*2);for(var u=0;u<i*2;u++)l[u]=16777215,f[u]=1;return this.colors=l,this.alphas=f,this.dirty=!0,this},updateVertices:function(){var i=this._perp,l=this.points,f=this.vertices,u=l.length;if(this.dirty=!1,!(u<1)){for(var d,p=l[0],m=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,T=0;T<u;T++){var y=l[T],S=T*4;T<u-1?d=l[T+1]:d=y,i.x=d.y-p.y,i.y=-(d.x-p.x);var C=i.length();i.x/=C,i.y/=C,i.x*=m,i.y*=m,f[S]=y.x+i.x,f[S+1]=y.y+i.y,f[S+2]=y.x-i.x,f[S+3]=y.y-i.y,p=y}return this}},setDebug:function(i,l){return this.debugGraphic=i,!i&&!l?this.debugCallback=null:l?this.debugCallback=l:this.debugCallback=this.renderDebugVerts,this},renderDebugVerts:function(i,l,f){var u=i.debugGraphic,d=f[0],p=f[1],m=f[2],T=f[3];u.lineBetween(d,p,m,T);for(var y=4;y<l;y+=4){var S=f[y+0],C=f[y+1],R=f[y+2],I=f[y+3];u.lineBetween(d,p,S,C),u.lineBetween(m,T,R,I),u.lineBetween(m,T,S,C),u.lineBetween(S,C,R,I),d=S,p=C,m=R,T=I}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(i){return this._flipX=i,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(i){return this._flipY=i,this.updateUVs()}}});v.exports=h},95262:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};v.exports=E},26209:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(35154),s=t(77757);g.register("rope",function(e,n){e===void 0&&(e={});var h=a(e,"key",null),i=a(e,"frame",null),l=a(e,"horizontal",!0),f=r(e,"points",void 0),u=r(e,"colors",void 0),d=r(e,"alphas",void 0),p=new s(this.scene,0,0,h,i,f,l,u,d);return n!==void 0&&(e.add=n),o(this.scene,p,e),p})},96819:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(77757),g=t(39429);g.register("rope",function(a,r,s,e,n,h,i,l){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i,l))})},38745:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(20439),a=t(95262),v.exports={renderWebGL:g,renderCanvas:a}},20439:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(r,s,e,n){e.addToRenderList(s);var h=r.pipelines.set(s.pipeline,s),i=o(s,e,n).calc,l=s.vertices,f=s.uv,u=s.colors,d=s.alphas,p=s.alpha,m=g.getTintAppendFloatAlpha,T=e.roundPixels,y=l.length,S=Math.floor(y*.5);h.flush(),r.pipelines.preBatch(s);var C=h.setGameObject(s),R=h.vertexViewF32,I=h.vertexViewU32,L=h.vertexCount*h.currentShader.vertexComponentCount-1,w=0,O=s.tintFill;s.dirty&&s.updateVertices();for(var B=s.debugCallback,V=[],b=0;b<y;b+=2){var X=l[b+0],K=l[b+1],Q=X*i.a+K*i.c+i.e,U=X*i.b+K*i.d+i.f;T&&(Q=Math.round(Q),U=Math.round(U)),R[++L]=Q,R[++L]=U,R[++L]=f[b+0],R[++L]=f[b+1],R[++L]=C,R[++L]=O,I[++L]=m(u[w],e.alpha*(d[w]*p)),w++,B&&(V[b+0]=Q,V[b+1]=U)}B&&B.call(s,s,y,V),h.vertexCount+=S,h.currentBatch.count=h.vertexCount-h.currentBatch.start,r.pipelines.postBatch(s)};v.exports=a},20071:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),r=t(95540),s=t(79291),e=t(61622),n=t(25479),h=t(61340),i=t(95428),l=t(92503),f=new o({Extends:a,Mixins:[g.ComputedSize,g.Depth,g.GetBounds,g.Mask,g.Origin,g.ScrollFactor,g.Transform,g.Visible,n],initialize:function(d,p,m,T,y,S,C,R){m===void 0&&(m=0),T===void 0&&(T=0),y===void 0&&(y=128),S===void 0&&(S=128),a.call(this,d,"Shader"),this.blendMode=-1,this.shader;var I=d.sys.renderer;this.renderer=I,this.gl=I.gl,this.vertexData=new ArrayBuffer(6*(Float32Array.BYTES_PER_ELEMENT*2)),this.vertexBuffer=I.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this._deferSetShader=null,this._deferProjOrtho=null,this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=I.width,this._rendererHeight=I.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(m,T),this.setSize(y,S),this.setOrigin(.5,.5),this.setShader(p,C,R),this.renderer.on(l.RESTORE_WEBGL,this.onContextRestored,this)},willRender:function(u){return this.renderToTexture?!0:!(a.RENDER_MASK!==this.renderFlags||this.cameraFilter!==0&&this.cameraFilter&u.id)},setRenderToTexture:function(u,d){if(!this.renderToTexture){var p=this.width,m=this.height,T=this.renderer;this.glTexture=T.createTextureFromSource(null,p,m,0),this.framebuffer=T.createFramebuffer(p,m,this.glTexture,!1),this._rendererWidth=p,this._rendererHeight=m,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),u&&(this.texture=this.scene.sys.textures.addGLTexture(u,this.glTexture))}return this.shader&&(T.pipelines.clear(),this.load(),this.flush(),T.pipelines.rebind()),this},setShader:function(u,d,p){if(this.renderer.contextLost)return this._deferSetShader={key:u,textures:d,textureData:p},this;if(d===void 0&&(d=[]),typeof u=="string"){var m=this.scene.sys.cache.shader;if(!m.has(u))return console.warn("Shader missing: "+u),this;this.shader=m.get(u)}else this.shader=u;var T=this.gl,y=this.renderer;this.program&&y.deleteProgram(this.program);var S=y.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);T.uniformMatrix4fv(T.getUniformLocation(S.webGLProgram,"uViewMatrix"),!1,this.viewMatrix),T.uniformMatrix4fv(T.getUniformLocation(S.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),T.uniform2f(T.getUniformLocation(S.webGLProgram,"uResolution"),this.width,this.height),this.program=S;var C=new Date,R={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[C.getFullYear(),C.getMonth(),C.getDate(),C.getHours()*60*60+C.getMinutes()*60+C.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=s(!0,{},this.shader.uniforms,R):this.uniforms=R;for(var I=0;I<4;I++)d[I]&&this.setSampler2D("iChannel"+I,d[I],I,p);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(u){return this.pointer=u,this},projOrtho:function(u,d,p,m){if(this.renderer.contextLost){this._deferProjOrtho={left:u,right:d,bottom:p,top:m};return}var T=-1e3,y=1e3,S=1/(u-d),C=1/(p-m),R=1/(T-y),I=this.projectionMatrix;I[0]=-2*S,I[5]=-2*C,I[10]=2*R,I[12]=(u+d)*S,I[13]=(m+p)*C,I[14]=(y+T)*R;var L=this.program,w=this.gl,O=this.renderer;O.setProgram(L),w.uniformMatrix4fv(w.getUniformLocation(L.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=d,this._rendererHeight=p},initUniforms:function(){var u=this.renderer.glFuncMap,d=this.program;this._textureCount=0;for(var p in this.uniforms){var m=this.uniforms[p],T=m.type,y=u[T];m.uniformLocation=this.renderer.createUniformLocation(d,p),T!=="sampler2D"&&(m.glMatrix=y.matrix,m.glValueLength=y.length,m.glFunc=y.func)}},setSampler2DBuffer:function(u,d,p,m,T,y){T===void 0&&(T=0),y===void 0&&(y={});var S=this.uniforms[u];return S.value=d,y.width=p,y.height=m,S.textureData=y,this._textureCount=T,this.initSampler2D(S),this},setSampler2D:function(u,d,p,m){p===void 0&&(p=0);var T=this.scene.sys.textures;if(T.exists(d)){var y=T.getFrame(d);if(y.glTexture&&y.glTexture.isRenderTexture)return this.setSampler2DBuffer(u,y.glTexture,y.width,y.height,p,m);var S=this.uniforms[u],C=y.source;S.textureKey=d,S.source=C.image,S.value=y.glTexture,C.isGLTexture&&(m||(m={}),m.width=C.width,m.height=C.height),m&&(S.textureData=m),this._textureCount=p,this.initSampler2D(S)}return this},setUniform:function(u,d){return e(this.uniforms,u,d),this},getUniform:function(u){return r(this.uniforms,u,null)},setChannel0:function(u,d){return this.setSampler2D("iChannel0",u,0,d)},setChannel1:function(u,d){return this.setSampler2D("iChannel1",u,1,d)},setChannel2:function(u,d){return this.setSampler2D("iChannel2",u,2,d)},setChannel3:function(u,d){return this.setSampler2D("iChannel3",u,3,d)},initSampler2D:function(u){if(u.value){var d=u.textureData;if(d&&!u.value.isRenderTexture){var p=this.gl,m=u.value,T=p[r(d,"magFilter","linear").toUpperCase()],y=p[r(d,"minFilter","linear").toUpperCase()],S=p[r(d,"wrapS","repeat").toUpperCase()],C=p[r(d,"wrapT","repeat").toUpperCase()],R=p[r(d,"format","rgba").toUpperCase()],I=r(d,"flipY",!1),L=r(d,"width",m.width),w=r(d,"height",m.height),O=r(d,"source",m.pixels);d.repeat&&(S=p.REPEAT,C=p.REPEAT),d.width&&(O=null),m.update(O,L,w,I,S,C,y,T,R)}this.renderer.setProgram(this.program),this._textureCount++}},syncUniforms:function(){var u=this.gl,d=this.uniforms,p,m,T,y,S,C=0;for(var R in d)p=d[R],T=p.glFunc,m=p.glValueLength,y=p.uniformLocation,S=p.value,S!==null&&(m===1?p.glMatrix?T.call(u,y.webGLUniformLocation,p.transpose,S):T.call(u,y.webGLUniformLocation,S):m===2?T.call(u,y.webGLUniformLocation,S.x,S.y):m===3?T.call(u,y.webGLUniformLocation,S.x,S.y,S.z):m===4?T.call(u,y.webGLUniformLocation,S.x,S.y,S.z,S.w):p.type==="sampler2D"&&(u.activeTexture(u.TEXTURE0+C),u.bindTexture(u.TEXTURE_2D,S.webGLTexture),u.uniform1i(y.webGLUniformLocation,C),C++))},load:function(u){var d=this.gl,p=this.width,m=this.height,T=this.renderer,y=this.program,S=this.viewMatrix;if(!this.renderToTexture){var C=-this._displayOriginX,R=-this._displayOriginY;S[0]=u[0],S[1]=u[1],S[4]=u[2],S[5]=u[3],S[8]=u[4],S[9]=u[5],S[12]=S[0]*C+S[4]*R,S[13]=S[1]*C+S[5]*R}d.useProgram(y.webGLProgram),d.uniformMatrix4fv(d.getUniformLocation(y.webGLProgram,"uViewMatrix"),!1,S),d.uniformMatrix4fv(d.getUniformLocation(y.webGLProgram,"uProjectionMatrix"),!1,this.projectionMatrix),d.uniform2f(d.getUniformLocation(y.webGLProgram,"uResolution"),this.width,this.height);var I=this.uniforms,L=I.resolution;L.value.x=p,L.value.y=m,I.time.value=T.game.loop.getDuration();var w=this.pointer;if(w){var O=I.mouse,B=w.x/p,V=1-w.y/m;O.value.x=B.toFixed(2),O.value.y=V.toFixed(2)}this.syncUniforms()},flush:function(){var u=this.width,d=this.height,p=this.program,m=this.gl,T=this.vertexBuffer,y=this.renderer,S=Float32Array.BYTES_PER_ELEMENT*2;this.renderToTexture&&(y.setFramebuffer(this.framebuffer),m.clearColor(0,0,0,0),m.clear(m.COLOR_BUFFER_BIT)),m.bindBuffer(m.ARRAY_BUFFER,T.webGLBuffer);var C=m.getAttribLocation(p.webGLProgram,"inPosition");C!==-1&&(m.enableVertexAttribArray(C),m.vertexAttribPointer(C,2,m.FLOAT,!1,S,0));var R=this.vertexViewF32;R[3]=d,R[4]=u,R[5]=d,R[8]=u,R[9]=d,R[10]=u;var I=6;m.bufferSubData(m.ARRAY_BUFFER,0,this.bytes.subarray(0,I*S)),m.drawArrays(m.TRIANGLES,0,I),this.renderToTexture&&y.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},onContextRestored:function(){if(this._deferSetShader!==null){var u=this._deferSetShader.key,d=this._deferSetShader.textures,p=this._deferSetShader.textureData;this._deferSetShader=null,this.setShader(u,d,p)}if(this._deferProjOrtho!==null){var m=this._deferProjOrtho.left,T=this._deferProjOrtho.right,y=this._deferProjOrtho.bottom,S=this._deferProjOrtho.top;this._deferProjOrtho=null,this.projOrtho(m,T,y,S)}},preDestroy:function(){var u=this.renderer;u.off(l.RESTORE_WEBGL,this.onContextRestored,this),u.deleteProgram(this.program),u.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(u.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null),i(this.uniforms,function(d){u.deleteUniformLocation(d.uniformLocation),d.uniformLocation=null})}});v.exports=f},80464:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};v.exports=E},54935:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(20071);g.register("shader",function(s,e){s===void 0&&(s={});var n=a(s,"key",null),h=a(s,"x",0),i=a(s,"y",0),l=a(s,"width",128),f=a(s,"height",128),u=new r(this.scene,n,h,i,l,f);return e!==void 0&&(s.add=e),o(this.scene,u,s),u})},74177:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20071),g=t(39429);g.register("shader",function(a,r,s,e,n,h,i){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i))})},25479:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(19257),a=t(80464),v.exports={renderWebGL:g,renderCanvas:a}},19257:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,r,s,e){if(r.shader){if(s.addToRenderList(r),a.pipelines.clear(),r.renderToTexture)r.load(),r.flush();else{var n=o(r,s,e).calc;(a.width!==r._rendererWidth||a.height!==r._rendererHeight)&&r.projOrtho(0,a.width,a.height,0),r.load(n.matrix),r.flush()}a.pipelines.rebind()}};v.exports=g},10441:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,r,s,e,n,h){for(var i=o.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*e),l=s.pathData,f=s.pathIndexes,u=0;u<f.length;u+=3){var d=f[u]*2,p=f[u+1]*2,m=f[u+2]*2,T=l[d+0]-n,y=l[d+1]-h,S=l[p+0]-n,C=l[p+1]-h,R=l[m+0]-n,I=l[m+1]-h,L=r.getX(T,y),w=r.getY(T,y),O=r.getX(S,C),B=r.getY(S,C),V=r.getX(R,I),b=r.getY(R,I);a.batchTri(s,L,w,O,B,V,b,0,0,1,1,i,i,i,2)}};v.exports=g},65960:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=g||o.fillColor,s=a||o.fillAlpha,e=(r&16711680)>>>16,n=(r&65280)>>>8,h=r&255;t.fillStyle="rgba("+e+","+n+","+h+","+s+")"};v.exports=E},75177:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=g||o.strokeColor,s=a||o.strokeAlpha,e=(r&16711680)>>>16,n=(r&65280)>>>8,h=r&255;t.strokeStyle="rgba("+e+","+n+","+h+","+s+")",t.lineWidth=o.lineWidth};v.exports=E},17803:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(95643),r=t(23031),s=new o({Extends:a,Mixins:[g.AlphaSingle,g.BlendMode,g.Depth,g.GetBounds,g.Mask,g.Origin,g.Pipeline,g.PostPipeline,g.ScrollFactor,g.Transform,g.Visible],initialize:function(n,h,i){h===void 0&&(h="Shape"),a.call(this,n,h),this.geom=i,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new r,this.width=0,this.height=0,this.initPipeline(),this.initPostPipeline()},setFillStyle:function(e,n){return n===void 0&&(n=1),e===void 0?this.isFilled=!1:(this.fillColor=e,this.fillAlpha=n,this.isFilled=!0),this},setStrokeStyle:function(e,n,h){return h===void 0&&(h=1),e===void 0?this.isStroked=!1:(this.lineWidth=e,this.strokeColor=n,this.strokeAlpha=h,this.isStroked=!0),this},setClosePath:function(e){return this.closePath=e,this},setSize:function(e,n){return this.width=e,this.height=n,this},setDisplaySize:function(e,n){return this.displayWidth=e,this.displayHeight=n,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(e){this.scaleX=e/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(e){this.scaleY=e/this.height}}});v.exports=s},34682:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,r,s,e,n){var h=a.strokeTint,i=o.getTintAppendFloatAlpha(r.strokeColor,r.strokeAlpha*s);h.TL=i,h.TR=i,h.BL=i,h.BR=i;var l=r.pathData,f=l.length-1,u=r.lineWidth,d=u/2,p=l[0]-e,m=l[1]-n;r.closePath||(f-=2);for(var T=2;T<f;T+=2){var y=l[T]-e,S=l[T+1]-n;a.batchLine(p,m,y,S,d,d,u,T-2,r.closePath?T===f-1:!1),p=y,m=S}};v.exports=g},23629:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13609),g=t(83419),a=t(39506),r=t(94811),s=t(96503),e=t(36383),n=t(17803),h=new g({Extends:n,Mixins:[o],initialize:function(l,f,u,d,p,m,T,y,S){f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=128),p===void 0&&(p=0),m===void 0&&(m=360),T===void 0&&(T=!1),n.call(this,l,"Arc",new s(0,0,d)),this._startAngle=p,this._endAngle=m,this._anticlockwise=T,this._iterations=.01,this.setPosition(f,u);var C=this.geom.radius*2;this.setSize(C,C),y!==void 0&&this.setFillStyle(y,S),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(i){this._iterations=i,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(i){this.geom.radius=i;var l=i*2;this.setSize(l,l),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(i){this._startAngle=i,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(i){this._endAngle=i,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(i){this._anticlockwise=i,this.updateData()}},setRadius:function(i){return this.radius=i,this},setIterations:function(i){return i===void 0&&(i=.01),this.iterations=i,this},setStartAngle:function(i,l){return this._startAngle=i,l!==void 0&&(this._anticlockwise=l),this.updateData()},setEndAngle:function(i,l){return this._endAngle=i,l!==void 0&&(this._anticlockwise=l),this.updateData()},updateData:function(){var i=this._iterations,l=i,f=this.geom.radius,u=a(this._startAngle),d=a(this._endAngle),p=this._anticlockwise,m=f,T=f;d-=u,p?d<-e.PI2?d=-e.PI2:d>0&&(d=-e.PI2+d%e.PI2):d>e.PI2?d=e.PI2:d<0&&(d=e.PI2+d%e.PI2);for(var y=[m+Math.cos(u)*f,T+Math.sin(u)*f],S;l<1;)S=d*l+u,y.push(m+Math.cos(S)*f,T+Math.sin(S)*f),l+=i;return S=d+u,y.push(m+Math.cos(S)*f,T+Math.sin(S)*f),y.push(m+Math.cos(u)*f,T+Math.sin(u)*f),this.pathIndexes=r(y),this.pathData=y,this}});v.exports=h},42542:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39506),g=t(65960),a=t(75177),r=t(20926),s=function(e,n,h,i){h.addToRenderList(n);var l=e.currentContext;if(r(e,l,n,h,i)){var f=n.radius;l.beginPath(),l.arc(f-n.originX*(f*2),f-n.originY*(f*2),f,o(n._startAngle),o(n._endAngle),n.anticlockwise),n.closePath&&l.closePath(),n.isFilled&&(g(l,n),l.fill()),n.isStroked&&(a(l,n),l.stroke()),l.restore()}};v.exports=s},42563:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23629),g=t(39429);g.register("arc",function(a,r,s,e,n,h,i,l){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i,l))}),g.register("circle",function(a,r,s,e,n){return this.displayList.add(new o(this.scene,a,r,s,0,360,!1,e,n))})},13609:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(41447),a=t(42542),v.exports={renderWebGL:g,renderCanvas:a}},41447:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(10441),a=t(34682),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=o(e,n,h),f=i.calcMatrix.copyFrom(l.calc),u=e._displayOriginX,d=e._displayOriginY,p=n.alpha*e.alpha;s.pipelines.preBatch(e),e.isFilled&&g(i,f,e,p,u,d),e.isStroked&&a(i,e,p,u,d),s.pipelines.postBatch(e)};v.exports=r},89:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(33141),a=t(94811),r=t(87841),s=t(17803),e=new o({Extends:s,Mixins:[g],initialize:function(h,i,l,f,u,d){i===void 0&&(i=0),l===void 0&&(l=0),s.call(this,h,"Curve",f),this._smoothness=32,this._curveBounds=new r,this.closePath=!1,this.setPosition(i,l),u!==void 0&&this.setFillStyle(u,d),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){var n=this._curveBounds,h=this._smoothness;this.geom.getBounds(n,h),this.setSize(n.width,n.height),this.updateDisplayOrigin();for(var i=[],l=this.geom.getPoints(h),f=0;f<l.length;f++)i.push(l[f].x,l[f].y);return i.push(l[0].x,l[0].y),this.pathIndexes=a(i),this.pathData=i,this}});v.exports=e},3170:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=e._displayOriginX+e._curveBounds.x,f=e._displayOriginY+e._curveBounds.y,u=e.pathData,d=u.length-1,p=u[0]-l,m=u[1]-f;i.beginPath(),i.moveTo(p,m),e.closePath||(d-=2);for(var T=2;T<d;T+=2){var y=u[T]-l,S=u[T+1]-f;i.lineTo(y,S)}e.closePath&&i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};v.exports=r},40511:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(89);o.register("curve",function(a,r,s,e,n){return this.displayList.add(new g(this.scene,a,r,s,e,n))})},33141:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(53987),a=t(3170),v.exports={renderWebGL:g,renderCanvas:a}},53987:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=g(e,n,h),f=i.calcMatrix.copyFrom(l.calc),u=e._displayOriginX+e._curveBounds.x,d=e._displayOriginY+e._curveBounds.y,p=n.alpha*e.alpha;s.pipelines.preBatch(e),e.isFilled&&o(i,f,e,p,u,d),e.isStroked&&a(i,e,p,u,d),s.pipelines.postBatch(e)};v.exports=r},19921:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(94811),a=t(54205),r=t(8497),s=t(17803),e=new o({Extends:s,Mixins:[a],initialize:function(h,i,l,f,u,d,p){i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=128),u===void 0&&(u=128),s.call(this,h,"Ellipse",new r(f/2,u/2,f,u)),this._smoothness=64,this.setPosition(i,l),this.width=f,this.height=u,d!==void 0&&this.setFillStyle(d,p),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(n){this._smoothness=n,this.updateData()}},setSize:function(n,h){return this.width=n,this.height=h,this.geom.setPosition(n/2,h/2),this.geom.setSize(n,h),this.updateData()},setSmoothness:function(n){return this._smoothness=n,this.updateData()},updateData:function(){for(var n=[],h=this.geom.getPoints(this._smoothness),i=0;i<h.length;i++)n.push(h[i].x,h[i].y);return n.push(h[0].x,h[0].y),this.pathIndexes=g(n),this.pathData=n,this}});v.exports=e},7930:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=e._displayOriginX,f=e._displayOriginY,u=e.pathData,d=u.length-1,p=u[0]-l,m=u[1]-f;i.beginPath(),i.moveTo(p,m),e.closePath||(d-=2);for(var T=2;T<d;T+=2){var y=u[T]-l,S=u[T+1]-f;i.lineTo(y,S)}i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};v.exports=r},1543:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19921),g=t(39429);g.register("ellipse",function(a,r,s,e,n,h){return this.displayList.add(new o(this.scene,a,r,s,e,n,h))})},54205:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(19467),a=t(7930),v.exports={renderWebGL:g,renderCanvas:a}},19467:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=g(e,n,h),f=i.calcMatrix.copyFrom(l.calc),u=e._displayOriginX,d=e._displayOriginY,p=n.alpha*e.alpha;s.pipelines.preBatch(e),e.isFilled&&o(i,f,e,p,u,d),e.isStroked&&a(i,e,p,u,d),s.pipelines.postBatch(e)};v.exports=r},30479:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(17803),a=t(26015),r=new o({Extends:g,Mixins:[a],initialize:function(e,n,h,i,l,f,u,d,p,m,T){n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=128),l===void 0&&(l=128),f===void 0&&(f=32),u===void 0&&(u=32),g.call(this,e,"Grid",null),this.cellWidth=f,this.cellHeight=u,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(n,h),this.setSize(i,l),this.setFillStyle(d,p),m!==void 0&&this.setOutlineStyle(m,T),this.updateDisplayOrigin()},setFillStyle:function(s,e){return e===void 0&&(e=1),s===void 0?this.showCells=!1:(this.fillColor=s,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(s,e){return e===void 0&&(e=1),s===void 0?this.showAltCells=!1:(this.altFillColor=s,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(s,e){return e===void 0&&(e=1),s===void 0?this.showOutline=!1:(this.outlineFillColor=s,this.outlineFillAlpha=e,this.showOutline=!0),this}});v.exports=r},49912:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=-e._displayOriginX,f=-e._displayOriginY,u=n.alpha*e.alpha,d=e.width,p=e.height,m=e.cellWidth,T=e.cellHeight,y=Math.ceil(d/m),S=Math.ceil(p/T),C=m,R=T,I=m-(y*m-d),L=T-(S*T-p),w=e.showCells,O=e.showAltCells,B=e.showOutline,V=0,b=0,X=0,K=0,Q=0;if(B&&(C--,R--,I===m&&I--,L===T&&L--),w&&e.fillAlpha>0)for(o(i,e),b=0;b<S;b++)for(O&&(X=b%2),V=0;V<y;V++){if(O&&X){X=0;continue}X++,K=V<y-1?C:I,Q=b<S-1?R:L,i.fillRect(l+V*m,f+b*T,K,Q)}if(O&&e.altFillAlpha>0)for(o(i,e,e.altFillColor,e.altFillAlpha*u),b=0;b<S;b++)for(O&&(X=b%2),V=0;V<y;V++){if(O&&!X){X=1;continue}X=0,K=V<y-1?C:I,Q=b<S-1?R:L,i.fillRect(l+V*m,f+b*T,K,Q)}if(B&&e.outlineFillAlpha>0){for(g(i,e,e.outlineFillColor,e.outlineFillAlpha*u),V=1;V<y;V++){var U=V*m;i.beginPath(),i.moveTo(U+l,f),i.lineTo(U+l,p+f),i.stroke()}for(b=1;b<S;b++){var W=b*T;i.beginPath(),i.moveTo(l,W+f),i.lineTo(l+d,W+f),i.stroke()}}i.restore()}};v.exports=r},34137:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(30479);o.register("grid",function(a,r,s,e,n,h,i,l,f,u){return this.displayList.add(new g(this.scene,a,r,s,e,n,h,i,l,f,u))})},26015:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(46161),a=t(49912),v.exports={renderWebGL:g,renderCanvas:a}},46161:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(r,s,e,n){e.addToRenderList(s);var h=r.pipelines.set(s.pipeline),i=o(s,e,n),l=h.calcMatrix.copyFrom(i.calc);l.translate(-s._displayOriginX,-s._displayOriginY);var f=e.alpha*s.alpha,u=s.width,d=s.height,p=s.cellWidth,m=s.cellHeight,T=Math.ceil(u/p),y=Math.ceil(d/m),S=p,C=m,R=p-(T*p-u),I=m-(y*m-d),L,w,O=s.showCells,B=s.showAltCells,V=s.showOutline,b=0,X=0,K=0,Q=0,U=0;if(V&&(S--,C--,R===p&&R--,I===m&&I--),r.pipelines.preBatch(s),O&&s.fillAlpha>0)for(L=h.fillTint,w=g.getTintAppendFloatAlpha(s.fillColor,s.fillAlpha*f),L.TL=w,L.TR=w,L.BL=w,L.BR=w,X=0;X<y;X++)for(B&&(K=X%2),b=0;b<T;b++){if(B&&K){K=0;continue}K++,Q=b<T-1?S:R,U=X<y-1?C:I,h.batchFillRect(b*p,X*m,Q,U)}if(B&&s.altFillAlpha>0)for(L=h.fillTint,w=g.getTintAppendFloatAlpha(s.altFillColor,s.altFillAlpha*f),L.TL=w,L.TR=w,L.BL=w,L.BR=w,X=0;X<y;X++)for(B&&(K=X%2),b=0;b<T;b++){if(B&&!K){K=1;continue}K=0,Q=b<T-1?S:R,U=X<y-1?C:I,h.batchFillRect(b*p,X*m,Q,U)}if(V&&s.outlineFillAlpha>0){var W=h.strokeTint,F=g.getTintAppendFloatAlpha(s.outlineFillColor,s.outlineFillAlpha*f);for(W.TL=F,W.TR=F,W.BL=F,W.BR=F,b=1;b<T;b++){var G=b*p;h.batchLine(G,0,G,d,1,1,1,0,!1)}for(X=1;X<y;X++){var z=X*m;h.batchLine(0,z,u,z,1,1,1,0,!1)}}r.pipelines.postBatch(s)};v.exports=a},61475:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99651),g=t(83419),a=t(17803),r=new g({Extends:a,Mixins:[o],initialize:function(e,n,h,i,l,f,u,d){n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=48),l===void 0&&(l=32),f===void 0&&(f=15658734),u===void 0&&(u=10066329),d===void 0&&(d=13421772),a.call(this,e,"IsoBox",null),this.projection=4,this.fillTop=f,this.fillLeft=u,this.fillRight=d,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(n,h),this.setSize(i,l),this.updateDisplayOrigin()},setProjection:function(s){return this.projection=s,this},setFaces:function(s,e,n){return s===void 0&&(s=!0),e===void 0&&(e=!0),n===void 0&&(n=!0),this.showTop=s,this.showLeft=e,this.showRight=n,this},setFillStyle:function(s,e,n){return this.fillTop=s,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});v.exports=r},11508:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(20926),a=function(r,s,e,n){e.addToRenderList(s);var h=r.currentContext;if(g(r,h,s,e,n)&&s.isFilled){var i=s.width,l=s.height,f=i/2,u=i/s.projection;s.showTop&&(o(h,s,s.fillTop),h.beginPath(),h.moveTo(-f,-l),h.lineTo(0,-u-l),h.lineTo(f,-l),h.lineTo(f,-1),h.lineTo(0,u-1),h.lineTo(-f,-1),h.lineTo(-f,-l),h.fill()),s.showLeft&&(o(h,s,s.fillLeft),h.beginPath(),h.moveTo(-f,0),h.lineTo(0,u),h.lineTo(0,u-l),h.lineTo(-f,-l),h.lineTo(-f,0),h.fill()),s.showRight&&(o(h,s,s.fillRight),h.beginPath(),h.moveTo(f,0),h.lineTo(0,u),h.lineTo(0,u-l),h.lineTo(f,-l),h.lineTo(f,0),h.fill()),h.restore()}};v.exports=a},3933:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(61475);o.register("isobox",function(a,r,s,e,n,h,i){return this.displayList.add(new g(this.scene,a,r,s,e,n,h,i))})},99651:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(68149),a=t(11508),v.exports={renderWebGL:g,renderCanvas:a}},68149:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(r,s,e,n){e.addToRenderList(s);var h=r.pipelines.set(s.pipeline),i=o(s,e,n),l=h.calcMatrix.copyFrom(i.calc),f=s.width,u=s.height,d=f/2,p=f/s.projection,m=e.alpha*s.alpha;if(s.isFilled){var T,y,S,C,R,I,L,w,O;r.pipelines.preBatch(s),s.showTop&&(T=g.getTintAppendFloatAlpha(s.fillTop,m),y=l.getX(-d,-u),S=l.getY(-d,-u),C=l.getX(0,-p-u),R=l.getY(0,-p-u),I=l.getX(d,-u),L=l.getY(d,-u),w=l.getX(0,p-u),O=l.getY(0,p-u),h.batchQuad(s,y,S,C,R,I,L,w,O,0,0,1,1,T,T,T,T,2)),s.showLeft&&(T=g.getTintAppendFloatAlpha(s.fillLeft,m),y=l.getX(-d,0),S=l.getY(-d,0),C=l.getX(0,p),R=l.getY(0,p),I=l.getX(0,p-u),L=l.getY(0,p-u),w=l.getX(-d,-u),O=l.getY(-d,-u),h.batchQuad(s,y,S,C,R,I,L,w,O,0,0,1,1,T,T,T,T,2)),s.showRight&&(T=g.getTintAppendFloatAlpha(s.fillRight,m),y=l.getX(d,0),S=l.getY(d,0),C=l.getX(0,p),R=l.getY(0,p),I=l.getX(0,p-u),L=l.getY(0,p-u),w=l.getX(d,-u),O=l.getY(d,-u),h.batchQuad(s,y,S,C,R,I,L,w,O,0,0,1,1,T,T,T,T,2)),r.pipelines.postBatch(s)}};v.exports=a},16933:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(60561),a=t(17803),r=new o({Extends:a,Mixins:[g],initialize:function(e,n,h,i,l,f,u,d,p){n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i=48),l===void 0&&(l=32),f===void 0&&(f=!1),u===void 0&&(u=15658734),d===void 0&&(d=10066329),p===void 0&&(p=13421772),a.call(this,e,"IsoTriangle",null),this.projection=4,this.fillTop=u,this.fillLeft=d,this.fillRight=p,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=f,this.isFilled=!0,this.setPosition(n,h),this.setSize(i,l),this.updateDisplayOrigin()},setProjection:function(s){return this.projection=s,this},setReversed:function(s){return this.isReversed=s,this},setFaces:function(s,e,n){return s===void 0&&(s=!0),e===void 0&&(e=!0),n===void 0&&(n=!0),this.showTop=s,this.showLeft=e,this.showRight=n,this},setFillStyle:function(s,e,n){return this.fillTop=s,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});v.exports=r},79590:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(20926),a=function(r,s,e,n){e.addToRenderList(s);var h=r.currentContext;if(g(r,h,s,e,n)&&s.isFilled){var i=s.width,l=s.height,f=i/2,u=i/s.projection,d=s.isReversed;s.showTop&&d&&(o(h,s,s.fillTop),h.beginPath(),h.moveTo(-f,-l),h.lineTo(0,-u-l),h.lineTo(f,-l),h.lineTo(0,u-l),h.fill()),s.showLeft&&(o(h,s,s.fillLeft),h.beginPath(),d?(h.moveTo(-f,-l),h.lineTo(0,u),h.lineTo(0,u-l)):(h.moveTo(-f,0),h.lineTo(0,u),h.lineTo(0,u-l)),h.fill()),s.showRight&&(o(h,s,s.fillRight),h.beginPath(),d?(h.moveTo(f,-l),h.lineTo(0,u),h.lineTo(0,u-l)):(h.moveTo(f,0),h.lineTo(0,u),h.lineTo(0,u-l)),h.fill()),h.restore()}};v.exports=a},49803:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(16933);o.register("isotriangle",function(a,r,s,e,n,h,i,l){return this.displayList.add(new g(this.scene,a,r,s,e,n,h,i,l))})},60561:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(51503),a=t(79590),v.exports={renderWebGL:g,renderCanvas:a}},51503:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(r,s,e,n){e.addToRenderList(s);var h=r.pipelines.set(s.pipeline),i=o(s,e,n),l=h.calcMatrix.copyFrom(i.calc),f=s.width,u=s.height,d=f/2,p=f/s.projection,m=s.isReversed,T=e.alpha*s.alpha;if(s.isFilled){r.pipelines.preBatch(s);var y,S,C,R,I,L,w;if(s.showTop&&m){y=g.getTintAppendFloatAlpha(s.fillTop,T),S=l.getX(-d,-u),C=l.getY(-d,-u),R=l.getX(0,-p-u),I=l.getY(0,-p-u),L=l.getX(d,-u),w=l.getY(d,-u);var O=l.getX(0,p-u),B=l.getY(0,p-u);h.batchQuad(s,S,C,R,I,L,w,O,B,0,0,1,1,y,y,y,y,2)}s.showLeft&&(y=g.getTintAppendFloatAlpha(s.fillLeft,T),m?(S=l.getX(-d,-u),C=l.getY(-d,-u),R=l.getX(0,p),I=l.getY(0,p),L=l.getX(0,p-u),w=l.getY(0,p-u)):(S=l.getX(-d,0),C=l.getY(-d,0),R=l.getX(0,p),I=l.getY(0,p),L=l.getX(0,p-u),w=l.getY(0,p-u)),h.batchTri(s,S,C,R,I,L,w,0,0,1,1,y,y,y,2)),s.showRight&&(y=g.getTintAppendFloatAlpha(s.fillRight,T),m?(S=l.getX(d,-u),C=l.getY(d,-u),R=l.getX(0,p),I=l.getY(0,p),L=l.getX(0,p-u),w=l.getY(0,p-u)):(S=l.getX(d,0),C=l.getY(d,0),R=l.getX(0,p),I=l.getY(0,p),L=l.getX(0,p-u),w=l.getY(0,p-u)),h.batchTri(s,S,C,R,I,L,w,0,0,1,1,y,y,y,2)),r.pipelines.postBatch(s)}};v.exports=a},57847:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(17803),a=t(23031),r=t(36823),s=new o({Extends:g,Mixins:[r],initialize:function(n,h,i,l,f,u,d,p,m){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=128),d===void 0&&(d=0),g.call(this,n,"Line",new a(l,f,u,d));var T=Math.max(1,this.geom.right-this.geom.left),y=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(h,i),this.setSize(T,y),p!==void 0&&this.setStrokeStyle(1,p,m),this.updateDisplayOrigin()},setLineWidth:function(e,n){return n===void 0&&(n=e),this._startWidth=e,this._endWidth=n,this.lineWidth=e,this},setTo:function(e,n,h,i){return this.geom.setTo(e,n,h,i),this}});v.exports=s},17440:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(75177),g=t(20926),a=function(r,s,e,n){e.addToRenderList(s);var h=r.currentContext;if(g(r,h,s,e,n)){var i=s._displayOriginX,l=s._displayOriginY;s.isStroked&&(o(h,s),h.beginPath(),h.moveTo(s.geom.x1-i,s.geom.y1-l),h.lineTo(s.geom.x2-i,s.geom.y2-l),h.stroke()),h.restore()}};v.exports=a},2481:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(57847);o.register("line",function(a,r,s,e,n,h,i,l){return this.displayList.add(new g(this.scene,a,r,s,e,n,h,i,l))})},36823:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(77385),a=t(17440),v.exports={renderWebGL:g,renderCanvas:a}},77385:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(70554),a=function(r,s,e,n){e.addToRenderList(s);var h=r.pipelines.set(s.pipeline),i=o(s,e,n);h.calcMatrix.copyFrom(i.calc);var l=s._displayOriginX,f=s._displayOriginY,u=e.alpha*s.alpha;if(r.pipelines.preBatch(s),s.isStroked){var d=h.strokeTint,p=g.getTintAppendFloatAlpha(s.strokeColor,s.strokeAlpha*u);d.TL=p,d.TR=p,d.BL=p,d.BR=p,h.batchLine(s.geom.x1-l,s.geom.y1-f,s.geom.x2-l,s.geom.y2-f,s._startWidth/2,s._endWidth/2,1,0,!1,i.sprite,i.camera)}r.pipelines.postBatch(s)};v.exports=a},24949:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(90273),g=t(83419),a=t(94811),r=t(13829),s=t(25717),e=t(17803),n=t(5469),h=new g({Extends:e,Mixins:[o],initialize:function(l,f,u,d,p,m){f===void 0&&(f=0),u===void 0&&(u=0),e.call(this,l,"Polygon",new s(d));var T=r(this.geom);this.setPosition(f,u),this.setSize(T.width,T.height),p!==void 0&&this.setFillStyle(p,m),this.updateDisplayOrigin(),this.updateData()},smooth:function(i){i===void 0&&(i=1);for(var l=0;l<i;l++)n(this.geom);return this.updateData()},setTo:function(i){this.geom.setTo(i);var l=r(this.geom);return this.setSize(l.width,l.height),this.updateDisplayOrigin(),this.updateData()},updateData:function(){for(var i=[],l=this.geom.points,f=0;f<l.length;f++)i.push(l[f].x,l[f].y);return i.push(l[0].x,l[0].y),this.pathIndexes=a(i),this.pathData=i,this}});v.exports=h},38710:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=e._displayOriginX,f=e._displayOriginY,u=e.pathData,d=u.length-1,p=u[0]-l,m=u[1]-f;i.beginPath(),i.moveTo(p,m),e.closePath||(d-=2);for(var T=2;T<d;T+=2){var y=u[T]-l,S=u[T+1]-f;i.lineTo(y,S)}e.closePath&&i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};v.exports=r},64827:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(24949);o.register("polygon",function(a,r,s,e,n){return this.displayList.add(new g(this.scene,a,r,s,e,n))})},90273:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(73695),a=t(38710),v.exports={renderWebGL:g,renderCanvas:a}},73695:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=g(e,n,h),f=i.calcMatrix.copyFrom(l.calc),u=e._displayOriginX,d=e._displayOriginY,p=n.alpha*e.alpha;s.pipelines.preBatch(e),e.isFilled&&o(i,f,e,p,u,d),e.isStroked&&a(i,e,p,u,d),s.pipelines.postBatch(e)};v.exports=r},74561:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(87841),a=t(17803),r=t(95597),s=new o({Extends:a,Mixins:[r],initialize:function(n,h,i,l,f,u,d){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=128),f===void 0&&(f=128),a.call(this,n,"Rectangle",new g(0,0,l,f)),this.setPosition(h,i),this.setSize(l,f),u!==void 0&&this.setFillStyle(u,d),this.updateDisplayOrigin(),this.updateData()},setSize:function(e,n){this.width=e,this.height=n,this.geom.setSize(e,n),this.updateData(),this.updateDisplayOrigin();var h=this.input;return h&&!h.customHitArea&&(h.hitArea.width=e,h.hitArea.height=n),this},updateData:function(){var e=[],n=this.geom,h=this._tempLine;return n.getLineA(h),e.push(h.x1,h.y1,h.x2,h.y2),n.getLineB(h),e.push(h.x2,h.y2),n.getLineC(h),e.push(h.x2,h.y2),n.getLineD(h),e.push(h.x2,h.y2),this.pathData=e,this}});v.exports=s},48682:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=e._displayOriginX,f=e._displayOriginY;e.isFilled&&(o(i,e),i.fillRect(-l,-f,e.width,e.height)),e.isStroked&&(g(i,e),i.beginPath(),i.rect(-l,-f,e.width,e.height),i.stroke()),i.restore()}};v.exports=r},87959:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(74561);o.register("rectangle",function(a,r,s,e,n,h){return this.displayList.add(new g(this.scene,a,r,s,e,n,h))})},95597:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(52059),a=t(48682),v.exports={renderWebGL:g,renderCanvas:a}},52059:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(34682),a=t(70554),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=o(e,n,h);i.calcMatrix.copyFrom(l.calc);var f=e._displayOriginX,u=e._displayOriginY,d=n.alpha*e.alpha;if(s.pipelines.preBatch(e),e.isFilled){var p=i.fillTint,m=a.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d);p.TL=m,p.TR=m,p.BL=m,p.BR=m,i.batchFillRect(-f,-u,e.width,e.height)}e.isStroked&&g(i,e,d,f,u),s.pipelines.postBatch(e)};v.exports=r},55911:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81991),g=t(83419),a=t(94811),r=t(17803),s=new g({Extends:r,Mixins:[o],initialize:function(n,h,i,l,f,u,d,p){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=5),f===void 0&&(f=32),u===void 0&&(u=64),r.call(this,n,"Star",null),this._points=l,this._innerRadius=f,this._outerRadius=u,this.setPosition(h,i),this.setSize(u*2,u*2),d!==void 0&&this.setFillStyle(d,p),this.updateDisplayOrigin(),this.updateData()},setPoints:function(e){return this._points=e,this.updateData()},setInnerRadius:function(e){return this._innerRadius=e,this.updateData()},setOuterRadius:function(e){return this._outerRadius=e,this.updateData()},points:{get:function(){return this._points},set:function(e){this._points=e,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this.updateData()}},updateData:function(){var e=[],n=this._points,h=this._innerRadius,i=this._outerRadius,l=Math.PI/2*3,f=Math.PI/n,u=i,d=i;e.push(u,d+-i);for(var p=0;p<n;p++)e.push(u+Math.cos(l)*i,d+Math.sin(l)*i),l+=f,e.push(u+Math.cos(l)*h,d+Math.sin(l)*h),l+=f;return e.push(u,d+-i),this.pathIndexes=a(e),this.pathData=e,this}});v.exports=s},64272:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=e._displayOriginX,f=e._displayOriginY,u=e.pathData,d=u.length-1,p=u[0]-l,m=u[1]-f;i.beginPath(),i.moveTo(p,m),e.closePath||(d-=2);for(var T=2;T<d;T+=2){var y=u[T]-l,S=u[T+1]-f;i.lineTo(y,S)}i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};v.exports=r},93697:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(55911),g=t(39429);g.register("star",function(a,r,s,e,n,h,i){return this.displayList.add(new o(this.scene,a,r,s,e,n,h,i))})},81991:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(57017),a=t(64272),v.exports={renderWebGL:g,renderCanvas:a}},57017:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10441),g=t(91296),a=t(34682),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=g(e,n,h),f=i.calcMatrix.copyFrom(l.calc),u=e._displayOriginX,d=e._displayOriginY,p=n.alpha*e.alpha;s.pipelines.preBatch(e),e.isFilled&&o(i,f,e,p,u,d),e.isStroked&&a(i,e,p,u,d),s.pipelines.postBatch(e)};v.exports=r},36931:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(17803),a=t(16483),r=t(96195),s=new o({Extends:g,Mixins:[r],initialize:function(n,h,i,l,f,u,d,p,m,T,y){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=128),u===void 0&&(u=64),d===void 0&&(d=0),p===void 0&&(p=128),m===void 0&&(m=128),g.call(this,n,"Triangle",new a(l,f,u,d,p,m));var S=this.geom.right-this.geom.left,C=this.geom.bottom-this.geom.top;this.setPosition(h,i),this.setSize(S,C),T!==void 0&&this.setFillStyle(T,y),this.updateDisplayOrigin(),this.updateData()},setTo:function(e,n,h,i,l,f){return this.geom.setTo(e,n,h,i,l,f),this.updateData()},updateData:function(){var e=[],n=this.geom,h=this._tempLine;return n.getLineA(h),e.push(h.x1,h.y1,h.x2,h.y2),n.getLineB(h),e.push(h.x2,h.y2),n.getLineC(h),e.push(h.x2,h.y2),this.pathData=e,this}});v.exports=s},85172:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(65960),g=t(75177),a=t(20926),r=function(s,e,n,h){n.addToRenderList(e);var i=s.currentContext;if(a(s,i,e,n,h)){var l=e._displayOriginX,f=e._displayOriginY,u=e.geom.x1-l,d=e.geom.y1-f,p=e.geom.x2-l,m=e.geom.y2-f,T=e.geom.x3-l,y=e.geom.y3-f;i.beginPath(),i.moveTo(u,d),i.lineTo(p,m),i.lineTo(T,y),i.closePath(),e.isFilled&&(o(i,e),i.fill()),e.isStroked&&(g(i,e),i.stroke()),i.restore()}};v.exports=r},45245:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(36931);o.register("triangle",function(a,r,s,e,n,h,i,l,f,u){return this.displayList.add(new g(this.scene,a,r,s,e,n,h,i,l,f,u))})},96195:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(83253),a=t(85172),v.exports={renderWebGL:g,renderCanvas:a}},83253:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=t(34682),a=t(70554),r=function(s,e,n,h){n.addToRenderList(e);var i=s.pipelines.set(e.pipeline),l=o(e,n,h);i.calcMatrix.copyFrom(l.calc);var f=e._displayOriginX,u=e._displayOriginY,d=n.alpha*e.alpha;if(s.pipelines.preBatch(e),e.isFilled){var p=i.fillTint,m=a.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*d);p.TL=m,p.TR=m,p.BL=m,p.BR=m;var T=e.geom.x1-f,y=e.geom.y1-u,S=e.geom.x2-f,C=e.geom.y2-u,R=e.geom.x3-f,I=e.geom.y3-u;i.batchFillTriangle(T,y,S,C,R,I,l.sprite,l.camera)}e.isStroked&&g(i,e,d,f,u),s.pipelines.postBatch(e)};v.exports=r},68287:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(31401),r=t(95643),s=t(92751),e=new g({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Size,a.TextureCrop,a.Tint,a.Transform,a.Visible,s],initialize:function(h,i,l,f,u){r.call(this,h,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(f,u),this.setPosition(i,l),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(n,h){this.anims.update(n,h)},play:function(n,h){return this.anims.play(n,h)},playReverse:function(n,h){return this.anims.playReverse(n,h)},playAfterDelay:function(n,h){return this.anims.playAfterDelay(n,h)},playAfterRepeat:function(n,h){return this.anims.playAfterRepeat(n,h)},chain:function(n){return this.anims.chain(n)},stop:function(){return this.anims.stop()},stopAfterDelay:function(n){return this.anims.stopAfterDelay(n)},stopAfterRepeat:function(n){return this.anims.stopAfterRepeat(n)},stopOnFrame:function(n){return this.anims.stopOnFrame(n)},toJSON:function(){return a.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});v.exports=e},76552:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g.addToRenderList(o),t.batchSprite(o,o.frame,g,a)};v.exports=E},15567:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(13059),a=t(44603),r=t(23568),s=t(68287);a.register("sprite",function(e,n){e===void 0&&(e={});var h=r(e,"key",null),i=r(e,"frame",null),l=new s(this.scene,0,0,h,i);return n!==void 0&&(e.add=n),o(this.scene,l,e),g(l,e),l})},46409:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(68287);o.register("sprite",function(a,r,s,e){return this.displayList.add(new g(this.scene,a,r,s,e))})},92751:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(9409),a=t(76552),v.exports={renderWebGL:g,renderCanvas:a}},9409:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g.addToRenderList(o),o.pipeline.batchSprite(o,g,a)};v.exports=E},14220:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=t.canvas,r=t.context,s=t.style,e=[],n=0,h=g.length;s.maxLines>0&&s.maxLines<g.length&&(h=s.maxLines),s.syncFont(a,r);for(var i=0;i<h;i++){var l=s.strokeThickness;l+=r.measureText(g[i]).width,g[i].length>1&&(l+=t.letterSpacing*(g[i].length-1)),s.wordWrap&&(l-=r.measureText(" ").width),e[i]=Math.ceil(l),n=Math.max(n,e[i])}var f=o.fontSize+s.strokeThickness,u=f*h,d=t.lineSpacing;return h>1&&(u+=d*(h-1)),{width:n,height:u,lines:h,lineWidths:e,lineSpacing:d,lineHeight:f}};v.exports=E},79557:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=function(a){var r=o.create(this),s=r.getContext("2d",{willReadFrequently:!0});a.syncFont(r,s);var e=s.measureText(a.testString);if("actualBoundingBoxAscent"in e){var n=e.actualBoundingBoxAscent,h=e.actualBoundingBoxDescent;return o.remove(r),{ascent:n,descent:h,fontSize:n+h}}var i=Math.ceil(e.width*a.baselineX),l=i,f=2*l;l=l*a.baselineY|0,r.width=i,r.height=f,s.fillStyle="#f00",s.fillRect(0,0,i,f),s.font=a._font,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(a.testString,0,l);var u={ascent:0,descent:0,fontSize:0},d=s.getImageData(0,0,i,f);if(!d)return u.ascent=l,u.descent=l+6,u.fontSize=u.ascent+u.descent,o.remove(r),u;var p=d.data,m=p.length,T=i*4,y,S,C=0,R=!1;for(y=0;y<l;y++){for(S=0;S<T;S+=4)if(p[C+S]!==255){R=!0;break}if(!R)C+=T;else break}for(u.ascent=l-y,C=m-T,R=!1,y=f;y>l;y--){for(S=0;S<T;S+=4)if(p[C+S]!==255){R=!0;break}if(!R)C-=T;else break}return u.descent=y-l,u.fontSize=u.ascent+u.descent,o.remove(r),u};v.exports=g},50171:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(40366),g=t(27919),a=t(83419),r=t(31401),s=t(95643),e=t(14220),n=t(35154),h=t(35846),i=t(61771),l=t(35762),f=t(45650),u=new a({Extends:s,Mixins:[r.Alpha,r.BlendMode,r.ComputedSize,r.Crop,r.Depth,r.Flip,r.GetBounds,r.Mask,r.Origin,r.Pipeline,r.PostPipeline,r.ScrollFactor,r.Tint,r.Transform,r.Visible,i],initialize:function(p,m,T,y,S){m===void 0&&(m=0),T===void 0&&(T=0),s.call(this,p,"Text"),this.renderer=p.sys.renderer,this.setPosition(m,T),this.setOrigin(0,0),this.initPipeline(),this.initPostPipeline(!0),this.canvas=g.create(this),this.context,this.style=new l(this,S),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.letterSpacing=0,this.style.resolution===0&&(this.style.resolution=1),this._crop=this.resetCropObject(),this._textureKey=f(),this.texture=p.sys.textures.addCanvas(this._textureKey,this.canvas),this.context=this.texture.context,this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(y),S&&S.padding&&this.setPadding(S.padding),S&&S.lineSpacing&&this.setLineSpacing(S.lineSpacing)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(d){var p=this.style;if(p.wordWrapCallback){var m=p.wordWrapCallback.call(p.wordWrapCallbackScope,d,this);return Array.isArray(m)&&(m=m.join(`
`)),m}else return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(d,this.context,this.style.wordWrapWidth):this.basicWordWrap(d,this.context,this.style.wordWrapWidth):d},advancedWordWrap:function(d,p,m){for(var T="",y=d.replace(/ +/gi," ").split(this.splitRegExp),S=y.length,C=0;C<S;C++){var R=y[C],I="";R=R.replace(/^ *|\s*$/gi,"");var L=p.measureText(R).width;if(L<m){T+=R+`
`;continue}for(var w=m,O=R.split(" "),B=0;B<O.length;B++){var V=O[B],b=V+" ",X=p.measureText(b).width;if(X>w){if(B===0){for(var K=b;K.length&&(K=K.slice(0,-1),X=p.measureText(K).width,!(X<=w)););if(!K.length)throw new Error("wordWrapWidth < a single character");var Q=V.substr(K.length);O[B]=Q,I+=K}var U=O[B].length?B:B+1,W=O.slice(U).join(" ").replace(/[ \n]*$/gi,"");y.splice(C+1,0,W),S=y.length;break}else I+=b,w-=X}T+=I.replace(/[ \n]*$/gi,"")+`
`}return T=T.replace(/[\s|\n]*$/gi,""),T},basicWordWrap:function(d,p,m){for(var T="",y=d.split(this.splitRegExp),S=y.length-1,C=p.measureText(" ").width,R=0;R<=S;R++){for(var I=m,L=y[R].split(" "),w=L.length-1,O=0;O<=w;O++){var B=L[O],V=p.measureText(B).width,b=V;O<w&&(b+=C),b>I&&O>0&&(T+=`
`,I=m),T+=B,O<w?(T+=" ",I-=b):I-=V}R<S&&(T+=`
`)}return T},getWrappedText:function(d){d===void 0&&(d=this._text),this.style.syncFont(this.canvas,this.context);var p=this.runWordWrap(d);return p.split(this.splitRegExp)},setText:function(d){return!d&&d!==0&&(d=""),Array.isArray(d)&&(d=d.join(`
`)),d!==this._text&&(this._text=d.toString(),this.updateText()),this},appendText:function(d,p){p===void 0&&(p=!0),!d&&d!==0&&(d=""),Array.isArray(d)&&(d=d.join(`
`)),d=d.toString();var m=this._text.concat(p?`
`+d:d);return m!==this._text&&(this._text=m,this.updateText()),this},setStyle:function(d){return this.style.setStyle(d)},setFont:function(d){return this.style.setFont(d)},setFontFamily:function(d){return this.style.setFontFamily(d)},setFontSize:function(d){return this.style.setFontSize(d)},setFontStyle:function(d){return this.style.setFontStyle(d)},setFixedSize:function(d,p){return this.style.setFixedSize(d,p)},setBackgroundColor:function(d){return this.style.setBackgroundColor(d)},setFill:function(d){return this.style.setFill(d)},setColor:function(d){return this.style.setColor(d)},setStroke:function(d,p){return this.style.setStroke(d,p)},setShadow:function(d,p,m,T,y,S){return this.style.setShadow(d,p,m,T,y,S)},setShadowOffset:function(d,p){return this.style.setShadowOffset(d,p)},setShadowColor:function(d){return this.style.setShadowColor(d)},setShadowBlur:function(d){return this.style.setShadowBlur(d)},setShadowStroke:function(d){return this.style.setShadowStroke(d)},setShadowFill:function(d){return this.style.setShadowFill(d)},setWordWrapWidth:function(d,p){return this.style.setWordWrapWidth(d,p)},setWordWrapCallback:function(d,p){return this.style.setWordWrapCallback(d,p)},setAlign:function(d){return this.style.setAlign(d)},setResolution:function(d){return this.style.setResolution(d)},setLineSpacing:function(d){return this.lineSpacing=d,this.updateText()},setLetterSpacing:function(d){return this.letterSpacing=d,this.updateText()},setPadding:function(d,p,m,T){if(typeof d=="object"){var y=d,S=n(y,"x",null);S!==null?(d=S,m=S):(d=n(y,"left",0),m=n(y,"right",d));var C=n(y,"y",null);C!==null?(p=C,T=C):(p=n(y,"top",0),T=n(y,"bottom",p))}else d===void 0&&(d=0),p===void 0&&(p=d),m===void 0&&(m=d),T===void 0&&(T=p);return this.padding.left=d,this.padding.top=p,this.padding.right=m,this.padding.bottom=T,this.updateText()},setMaxLines:function(d){return this.style.setMaxLines(d)},setRTL:function(d){d===void 0&&(d=!0);var p=this.style;return p.rtl===d?this:(p.rtl=d,d?(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",o(this.canvas,this.scene.sys.canvas)):(this.canvas.dir="ltr",this.context.direction="ltr"),p.align==="left"?p.align="right":p.align==="right"&&(p.align="left"),this)},updateText:function(){var d=this.canvas,p=this.context,m=this.style,T=m.resolution,y=m.metrics;m.syncFont(d,p);var S=this._text;(m.wordWrapWidth||m.wordWrapCallback)&&(S=this.runWordWrap(this._text));var C=S.split(this.splitRegExp),R=e(this,y,C),I=this.padding,L;m.fixedWidth===0?(this.width=R.width+I.left+I.right,L=R.width):(this.width=m.fixedWidth,L=this.width-I.left-I.right,L<R.width&&(L=R.width)),m.fixedHeight===0?this.height=R.height+I.top+I.bottom:this.height=m.fixedHeight;var w=this.width,O=this.height;this.updateDisplayOrigin(),w*=T,O*=T,w=Math.max(w,1),O=Math.max(O,1),d.width!==w||d.height!==O?(d.width=w,d.height=O,this.frame.setSize(w,O),m.syncFont(d,p),m.rtl&&(p.direction="rtl")):p.clearRect(0,0,w,O),p.save(),p.scale(T,T),m.backgroundColor&&(p.fillStyle=m.backgroundColor,p.fillRect(0,0,w,O)),m.syncStyle(d,p),p.translate(I.left,I.top);for(var B,V,b=0;b<R.lines;b++){if(B=m.strokeThickness/2,V=m.strokeThickness/2+b*R.lineHeight+y.ascent,b>0&&(V+=R.lineSpacing*b),m.rtl)B=w-B-I.left-I.right;else if(m.align==="right")B+=L-R.lineWidths[b];else if(m.align==="center")B+=(L-R.lineWidths[b])/2;else if(m.align==="justify"){var X=.85;if(R.lineWidths[b]/R.width>=X){var K=R.width-R.lineWidths[b],Q=p.measureText(" ").width,U=C[b].trim(),W=U.split(" ");K+=(C[b].length-U.length)*Q;for(var F=Math.floor(K/Q),G=0;F>0;)W[G]+=" ",G=(G+1)%(W.length-1||1),--F;C[b]=W.join(" ")}}if(this.autoRound&&(B=Math.round(B),V=Math.round(V)),m.strokeThickness&&(m.syncShadow(p,m.shadowStroke),p.strokeText(C[b],B,V)),m.color){m.syncShadow(p,m.shadowFill);var z=this.letterSpacing;if(z!==0)for(var Y=0,$=C[b].split(""),j=0;j<$.length;j++)p.fillText($[j],B+Y,V),Y+=p.measureText($[j]).width+z;else p.fillText(C[b],B,V)}}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(d,this.frame.source.glTexture,!0));var Z=this.input;return Z&&!Z.customHitArea&&(Z.hitArea.width=this.width,Z.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(d){this.setText(d)}},toJSON:function(){var d=r.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return d.data=p,d},preDestroy:function(){h(this.canvas),g.remove(this.canvas);var d=this.texture;d&&d.destroy()}});v.exports=u},79724:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o.width===0||o.height===0||(g.addToRenderList(o),t.batchSprite(o,o.frame,g,a))};v.exports=E},71259:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(50171);g.register("text",function(s,e){s===void 0&&(s={});var n=a(s,"text",""),h=a(s,"style",null),i=a(s,"padding",null);i!==null&&(h.padding=i);var l=new r(this.scene,0,0,n,h);return e!==void 0&&(s.add=e),o(this.scene,l,s),l.autoRound=a(s,"autoRound",!0),l.resolution=a(s,"resolution",1),l})},68005:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(50171),g=t(39429);g.register("text",function(a,r,s,e){return this.displayList.add(new o(this.scene,a,r,s,e))})},61771:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(34397),a=t(79724),v.exports={renderWebGL:g,renderCanvas:a}},35762:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23568),a=t(35154),r=t(79557),s={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|MÃ‰qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},e=new o({initialize:function(h,i){this.parent=h,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(i,!1,!0)},setStyle:function(n,h,i){h===void 0&&(h=!0),i===void 0&&(i=!1),n&&n.hasOwnProperty("fontSize")&&typeof n.fontSize=="number"&&(n.fontSize=n.fontSize.toString()+"px");for(var l in s){var f=i?s[l][1]:this[l];l==="wordWrapCallback"||l==="wordWrapCallbackScope"?this[l]=a(n,s[l][0],f):this[l]=g(n,s[l][0],f)}var u=a(n,"font",null);u!==null&&this.setFont(u,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var d=a(n,"fill",null);d!==null&&(this.color=d);var p=a(n,"metrics",!1);return p?this.metrics={ascent:a(p,"ascent",0),descent:a(p,"descent",0),fontSize:a(p,"fontSize",0)}:(h||!this.metrics)&&(this.metrics=r(this)),h?this.parent.updateText():this.parent},syncFont:function(n,h){h.font=this._font},syncStyle:function(n,h){h.textBaseline="alphabetic",h.fillStyle=this.color,h.strokeStyle=this.stroke,h.lineWidth=this.strokeThickness,h.lineCap="round",h.lineJoin="round"},syncShadow:function(n,h){h?(n.shadowOffsetX=this.shadowOffsetX,n.shadowOffsetY=this.shadowOffsetY,n.shadowColor=this.shadowColor,n.shadowBlur=this.shadowBlur):(n.shadowOffsetX=0,n.shadowOffsetY=0,n.shadowColor=0,n.shadowBlur=0)},update:function(n){return n&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=r(this)),this.parent.updateText()},setFont:function(n,h){h===void 0&&(h=!0);var i=n,l="",f="";if(typeof n!="string")i=a(n,"fontFamily","Courier"),l=a(n,"fontSize","16px"),f=a(n,"fontStyle","");else{var u=n.split(" "),d=0;f=u.length>2?u[d++]:"",l=u[d++]||"16px",i=u[d++]||"Courier"}return(i!==this.fontFamily||l!==this.fontSize||f!==this.fontStyle)&&(this.fontFamily=i,this.fontSize=l,this.fontStyle=f,h&&this.update(!0)),this.parent},setFontFamily:function(n){return this.fontFamily!==n&&(this.fontFamily=n,this.update(!0)),this.parent},setFontStyle:function(n){return this.fontStyle!==n&&(this.fontStyle=n,this.update(!0)),this.parent},setFontSize:function(n){return typeof n=="number"&&(n=n.toString()+"px"),this.fontSize!==n&&(this.fontSize=n,this.update(!0)),this.parent},setTestString:function(n){return this.testString=n,this.update(!0)},setFixedSize:function(n,h){return this.fixedWidth=n,this.fixedHeight=h,n&&(this.parent.width=n),h&&(this.parent.height=h),this.update(!1)},setBackgroundColor:function(n){return this.backgroundColor=n,this.update(!1)},setFill:function(n){return this.color=n,this.update(!1)},setColor:function(n){return this.color=n,this.update(!1)},setResolution:function(n){return this.resolution=n,this.update(!1)},setStroke:function(n,h){return h===void 0&&(h=this.strokeThickness),n===void 0&&this.strokeThickness!==0?(this.strokeThickness=0,this.update(!0)):(this.stroke!==n||this.strokeThickness!==h)&&(this.stroke=n,this.strokeThickness=h,this.update(!0)),this.parent},setShadow:function(n,h,i,l,f,u){return n===void 0&&(n=0),h===void 0&&(h=0),i===void 0&&(i="#000"),l===void 0&&(l=0),f===void 0&&(f=!1),u===void 0&&(u=!0),this.shadowOffsetX=n,this.shadowOffsetY=h,this.shadowColor=i,this.shadowBlur=l,this.shadowStroke=f,this.shadowFill=u,this.update(!1)},setShadowOffset:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this.shadowOffsetX=n,this.shadowOffsetY=h,this.update(!1)},setShadowColor:function(n){return n===void 0&&(n="#000"),this.shadowColor=n,this.update(!1)},setShadowBlur:function(n){return n===void 0&&(n=0),this.shadowBlur=n,this.update(!1)},setShadowStroke:function(n){return this.shadowStroke=n,this.update(!1)},setShadowFill:function(n){return this.shadowFill=n,this.update(!1)},setWordWrapWidth:function(n,h){return h===void 0&&(h=!1),this.wordWrapWidth=n,this.wordWrapUseAdvanced=h,this.update(!1)},setWordWrapCallback:function(n,h){return h===void 0&&(h=null),this.wordWrapCallback=n,this.wordWrapCallbackScope=h,this.update(!1)},setAlign:function(n){return n===void 0&&(n="left"),this.align=n,this.update(!1)},setMaxLines:function(n){return n===void 0&&(n=0),this.maxLines=n,this.update(!1)},getTextMetrics:function(){var n=this.metrics;return{ascent:n.ascent,descent:n.descent,fontSize:n.fontSize}},toJSON:function(){var n={};for(var h in s)n[h]=this[h];return n.metrics=this.getTextMetrics(),n},destroy:function(){this.parent=void 0}});v.exports=e},34397:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,r,s,e){if(!(r.width===0||r.height===0)){s.addToRenderList(r);var n=r.frame,h=n.width,i=n.height,l=o.getTintAppendFloatAlpha,f=a.pipelines.set(r.pipeline,r),u=f.setTexture2D(n.glTexture,r);f.batchTexture(r,n.glTexture,h,i,r.x,r.y,h/r.style.resolution,i/r.style.resolution,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.displayOriginX,r.displayOriginY,0,0,h,i,l(r.tintTopLeft,s.alpha*r._alphaTL),l(r.tintTopRight,s.alpha*r._alphaTR),l(r.tintBottomLeft,s.alpha*r._alphaBL),l(r.tintBottomRight,s.alpha*r._alphaBR),r.tintFill,0,0,s,e,!1,u)}};v.exports=g},20839:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(83419),a=t(31401),r=t(95643),s=t(98439),e=t(68703),n=t(56295),h=t(45650),i=t(26099),l=8,f=new g({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,n],initialize:function(d,p,m,T,y,S,C){var R=d.sys.renderer;r.call(this,d,"TileSprite");var I=d.sys.textures.get(S),L=I.get(C);L.source.compressionAlgorithm&&(console.warn("TileSprite cannot use compressed texture"),I=d.sys.textures.get("__MISSING"),L=I.get()),I.type==="DynamicTexture"&&(console.warn("TileSprite cannot use Dynamic Texture"),I=d.sys.textures.get("__MISSING"),L=I.get()),!T||!y?(T=L.width,y=L.height):(T=Math.floor(T),y=Math.floor(y)),this._tilePosition=new i,this._tileScale=new i(1,1),this.dirty=!1,this.renderer=R,this.canvas=o.create(this,T,y),this.context=this.canvas.getContext("2d",{willReadFrequently:!1}),this.displayTexture=I,this.displayFrame=L,this._crop=this.resetCropObject(),this._textureKey=h(),this.texture=d.sys.textures.addCanvas(this._textureKey,this.canvas),this.frame=this.texture.get(),this.potWidth=s(L.width),this.potHeight=s(L.height),this.fillCanvas=o.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d",{willReadFrequently:!1}),this.fillPattern=null,this.setPosition(p,m),this.setSize(T,y),this.setFrame(C),this.setOriginFromFrame(),this.initPipeline(),this.initPostPipeline(!0)},setTexture:function(u,d){return this.displayTexture=this.scene.sys.textures.get(u),this.setFrame(d)},setFrame:function(u){var d=this.displayTexture.get(u);return this.potWidth=s(d.width),this.potHeight=s(d.height),this.canvas.width=0,!d.cutWidth||!d.cutHeight?this.renderFlags&=~l:this.renderFlags|=l,this.displayFrame=d,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(u,d){return u!==void 0&&(this.tilePositionX=u),d!==void 0&&(this.tilePositionY=d),this},setTileScale:function(u,d){return u===void 0&&(u=this.tileScaleX),d===void 0&&(d=u),this.tileScaleX=u,this.tileScaleY=d,this},updateTileTexture:function(){if(!(!this.dirty||!this.renderer)){var u=this.displayFrame;if(u.source.isRenderTexture||u.source.isGLTexture){console.warn("TileSprites can only use Image or Canvas based textures"),this.dirty=!1;return}var d=this.fillContext,p=this.fillCanvas,m=this.potWidth,T=this.potHeight;(!this.renderer||!this.renderer.gl)&&(m=u.cutWidth,T=u.cutHeight),d.clearRect(0,0,m,T),p.width=m,p.height=T,d.drawImage(u.source.image,u.cutX,u.cutY,u.cutWidth,u.cutHeight,0,0,m,T),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(p,this.fillPattern):this.fillPattern=d.createPattern(p,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var u=this.canvas;if((u.width!==this.width||u.height!==this.height)&&(u.width=this.width,u.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl){this.dirty=!1;return}var d=this.context;this.scene.sys.game.config.antialias||e.disable(d);var p=this._tileScale.x,m=this._tileScale.y,T=this._tilePosition.x,y=this._tilePosition.y;d.clearRect(0,0,this.width,this.height),d.save(),d.scale(p,m),d.translate(-T,-y),d.fillStyle=this.fillPattern,d.fillRect(T,y,this.width/p,this.height/m),d.restore(),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),o.remove(this.canvas),o.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null;var u=this.texture;u&&u.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(u){this._tilePosition.x=u,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(u){this._tilePosition.y=u,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(u){this._tileScale.x=u,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(u){this._tileScale.y=u,this.dirty=!0}}});v.exports=f},46992:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o.updateCanvas(),g.addToRenderList(o),t.batchSprite(o,o.frame,g,a)};v.exports=E},14167:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(20839);g.register("tileSprite",function(s,e){s===void 0&&(s={});var n=a(s,"x",0),h=a(s,"y",0),i=a(s,"width",512),l=a(s,"height",512),f=a(s,"key",""),u=a(s,"frame",""),d=new r(this.scene,n,h,i,l,f,u);return e!==void 0&&(s.add=e),o(this.scene,d,s),d})},91681:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20839),g=t(39429);g.register("tileSprite",function(a,r,s,e,n,h){return this.displayList.add(new o(this.scene,a,r,s,e,n,h))})},56295:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(18553),a=t(46992),v.exports={renderWebGL:g,renderCanvas:a}},18553:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,r,s,e){r.updateCanvas();var n=r.width,h=r.height;if(!(n===0||h===0)){s.addToRenderList(r);var i=o.getTintAppendFloatAlpha,l=a.pipelines.set(r.pipeline,r),f=l.setTexture2D(r.fillPattern,r);l.batchTexture(r,r.fillPattern,r.displayFrame.width*r.tileScaleX,r.displayFrame.height*r.tileScaleY,r.x,r.y,n,h,r.scaleX,r.scaleY,r.rotation,r.flipX,r.flipY,r.scrollFactorX,r.scrollFactorY,r.originX*n,r.originY*h,0,0,n,h,i(r.tintTopLeft,s.alpha*r._alphaTL),i(r.tintTopRight,s.alpha*r._alphaTR),i(r.tintBottomLeft,s.alpha*r._alphaBL),i(r.tintBottomRight,s.alpha*r._alphaBR),r.tintFill,r.tilePositionX%r.displayFrame.width/r.displayFrame.width,r.tilePositionY%r.displayFrame.height/r.displayFrame.height,s,e,!1,f)}};v.exports=g},18471:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(31401),r=t(51708),s=t(8443),e=t(95643),n=t(36383),h=t(14463),i=t(45650),l=t(10247),f=new g({Extends:e,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.ScrollFactor,a.TextureCrop,a.Tint,a.Transform,a.Visible,l],initialize:function(d,p,m,T){e.call(this,d,"Video"),this.video,this.videoTexture,this.videoTextureSource,this.snapshotTexture,this.flipY=!1,this._key=i(),this.touchLocked=!1,this.playWhenUnlocked=!1,this.frameReady=!1,this.isStalled=!1,this.failedPlayAttempts=0,this.metadata,this.retry=0,this.retryInterval=500,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={ended:this.completeHandler.bind(this),legacy:this.legacyPlayHandler.bind(this),playing:this.playingHandler.bind(this),seeked:this.seekedHandler.bind(this),seeking:this.seekingHandler.bind(this),stalled:this.stalledHandler.bind(this),suspend:this.stalledHandler.bind(this),waiting:this.stalledHandler.bind(this)},this._loadCallbackHandler=this.loadErrorHandler.bind(this),this._metadataCallbackHandler=this.metadataHandler.bind(this),this._crop=this.resetCropObject(),this.markers={},this._markerIn=0,this._markerOut=0,this._playingMarker=!1,this._lastUpdate=0,this.cacheKey="",this.isSeeking=!1,this._playCalled=!1,this._rfvCallbackId=0;var y=d.sys.game;this._device=y.device.video,this.setPosition(p,m),this.setSize(256,256),this.initPipeline(),this.initPostPipeline(!0),y.events.on(s.PAUSE,this.globalPause,this),y.events.on(s.RESUME,this.globalResume,this);var S=d.sys.sound;S&&S.on(h.GLOBAL_MUTE,this.globalMute,this),T&&this.load(T)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},load:function(u){var d=this.scene.sys.cache.video.get(u);return d?(this.cacheKey=u,this.loadHandler(d.url,d.noAudio,d.crossOrigin)):console.warn("No video in cache for key: "+u),this},changeSource:function(u,d,p,m,T){d===void 0&&(d=!0),p===void 0&&(p=!1),this.cacheKey!==u&&(this.load(u),d&&this.play(p,m,T))},getVideoKey:function(){return this.cacheKey},loadURL:function(u,d,p){d===void 0&&(d=!1);var m=this._device.getVideoURL(u);return m?(this.cacheKey="",this.loadHandler(m.url,d,p)):console.warn("No supported video format found for "+u),this},loadMediaStream:function(u,d,p){return this.loadHandler(null,d,p,u)},loadHandler:function(u,d,p,m){d||(d=!1);var T=this.video;if(T?(this.removeLoadEventHandlers(),this.stop()):(T=document.createElement("video"),T.controls=!1,T.setAttribute("playsinline","playsinline"),T.setAttribute("preload","auto"),T.setAttribute("disablePictureInPicture","true")),d?(T.muted=!0,T.defaultMuted=!0,T.setAttribute("autoplay","autoplay")):(T.muted=!1,T.defaultMuted=!1,T.removeAttribute("autoplay")),p?T.setAttribute("crossorigin",p):T.removeAttribute("crossorigin"),m)if("srcObject"in T)try{T.srcObject=m}catch(S){if(S.name!=="TypeError")throw S;T.src=URL.createObjectURL(m)}else T.src=URL.createObjectURL(m);else T.src=u;this.retry=0,this.video=T,this._playCalled=!1,T.load(),this.addLoadEventHandlers();var y=this.scene.sys.textures.get(this._key);return this.setTexture(y),this},requestVideoFrame:function(u,d){var p=this.video;if(p){var m=d.width,T=d.height,y=this.videoTexture,S=this.videoTextureSource,C=!y||S.source!==p;C?(this._codePaused=p.paused,this._codeMuted=p.muted,y?(S.source=p,S.width=m,S.height=T,y.get().setSize(m,T)):(y=this.scene.sys.textures.create(this._key,p,m,T),y.add("__BASE",0,0,0,m,T),this.setTexture(y),this.videoTexture=y,this.videoTextureSource=y.source[0],this.videoTextureSource.setFlipY(this.flipY),this.emit(r.VIDEO_TEXTURE,this,y)),this.setSizeToFrame(),this.updateDisplayOrigin()):S.update(),this.isStalled=!1,this.metadata=d;var R=d.mediaTime;C&&(this._lastUpdate=R,this.emit(r.VIDEO_CREATED,this,m,T),this.frameReady||(this.frameReady=!0,this.emit(r.VIDEO_PLAY,this))),this._playingMarker?R>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.emit(r.VIDEO_LOOP,this)):(this.stop(!1),this.emit(r.VIDEO_COMPLETE,this))):R<this._lastUpdate&&this.emit(r.VIDEO_LOOP,this),this._lastUpdate=R,this._rfvCallbackId=this.video.requestVideoFrameCallback(this.requestVideoFrame.bind(this))}},play:function(u,d,p){d===void 0&&(d=-1),p===void 0&&(p=n.MAX_SAFE_INTEGER);var m=this.video;return!m||this.isPlaying()?(m||console.warn("Video not loaded"),this):(u===void 0&&(u=m.loop),m.loop=u,this._markerIn=d,this._markerOut=p,this._playingMarker=d>-1&&p>d&&p<n.MAX_SAFE_INTEGER,this._playCalled||(this._rfvCallbackId=m.requestVideoFrameCallback(this.requestVideoFrame.bind(this)),this._playCalled=!0,this.createPlayPromise()),this)},addLoadEventHandlers:function(){var u=this.video;u&&(u.addEventListener("error",this._loadCallbackHandler),u.addEventListener("abort",this._loadCallbackHandler),u.addEventListener("loadedmetadata",this._metadataCallbackHandler))},removeLoadEventHandlers:function(){var u=this.video;u&&(u.removeEventListener("error",this._loadCallbackHandler),u.removeEventListener("abort",this._loadCallbackHandler))},addEventHandlers:function(){var u=this.video;if(u){var d=this._callbacks;for(var p in d)u.addEventListener(p,d[p])}},removeEventHandlers:function(){var u=this.video;if(u){var d=this._callbacks;for(var p in d)u.removeEventListener(p,d[p])}},createPlayPromise:function(u){u===void 0&&(u=!0);var d=this.video,p=d.play();if(p!==void 0){var m=this.playSuccess.bind(this),T=this.playError.bind(this);if(!u){var y=this;T=function(){y.failedPlayAttempts++}}p.then(m).catch(T)}else d.addEventListener("playing",this._callbacks.legacy),u||this.failedPlayAttempts++},addMarker:function(u,d,p){return!isNaN(d)&&d>=0&&!isNaN(p)&&p>d&&(this.markers[u]=[d,p]),this},playMarker:function(u,d){var p=this.markers[u];return p&&this.play(d,p[0],p[1]),this},removeMarker:function(u){return delete this.markers[u],this},snapshot:function(u,d){return u===void 0&&(u=this.width),d===void 0&&(d=this.height),this.snapshotArea(0,0,this.width,this.height,u,d)},snapshotArea:function(u,d,p,m,T,y){u===void 0&&(u=0),d===void 0&&(d=0),p===void 0&&(p=this.width),m===void 0&&(m=this.height),T===void 0&&(T=p),y===void 0&&(y=m);var S=this.video,C=this.snapshotTexture;return C?(C.setSize(T,y),S&&C.context.drawImage(S,u,d,p,m,0,0,T,y)):(C=this.scene.sys.textures.createCanvas(i(),T,y),this.snapshotTexture=C,S&&C.context.drawImage(S,u,d,p,m,0,0,T,y)),C.update()},saveSnapshotTexture:function(u){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,u):this.snapshotTexture=this.scene.sys.textures.createCanvas(u,this.width,this.height),this.snapshotTexture},playSuccess:function(){if(this._playCalled){this.addEventHandlers(),this._codePaused=!1,this.touchLocked&&(this.touchLocked=!1,this.emit(r.VIDEO_UNLOCKED,this));var u=this.scene.sys.sound;u&&u.mute&&this.setMute(!0),this._markerIn>-1&&(this.video.currentTime=this._markerIn)}},playError:function(u){var d=u.name;d==="NotAllowedError"?(this.touchLocked=!0,this.playWhenUnlocked=!0,this.failedPlayAttempts=1,this.emit(r.VIDEO_LOCKED,this)):d==="NotSupportedError"?(this.stop(!1),this.emit(r.VIDEO_UNSUPPORTED,this,u)):(this.stop(!1),this.emit(r.VIDEO_ERROR,this,u))},legacyPlayHandler:function(){var u=this.video;u&&(this.playSuccess(),u.removeEventListener("playing",this._callbacks.legacy))},playingHandler:function(){this.isStalled=!1,this.emit(r.VIDEO_PLAYING,this)},loadErrorHandler:function(u){this.stop(!1),this.emit(r.VIDEO_ERROR,this,u)},metadataHandler:function(u){this.emit(r.VIDEO_METADATA,this,u)},setSizeToFrame:function(u){u||(u=this.frame),this.width=u.realWidth,this.height=u.realHeight,this.scaleX!==1&&(this.scaleX=this.displayWidth/this.width),this.scaleY!==1&&(this.scaleY=this.displayHeight/this.height);var d=this.input;return d&&!d.customHitArea&&(d.hitArea.width=this.width,d.hitArea.height=this.height),this},stalledHandler:function(u){this.isStalled=!0,this.emit(r.VIDEO_STALLED,this,u)},completeHandler:function(){this._playCalled=!1,this.emit(r.VIDEO_COMPLETE,this)},preUpdate:function(u,d){var p=this.video;!p||!this._playCalled||this.touchLocked&&this.playWhenUnlocked&&(this.retry+=d,this.retry>=this.retryInterval&&(this.createPlayPromise(!1),this.retry=0))},seekTo:function(u){var d=this.video;if(d){var p=d.duration;if(p!==1/0&&!isNaN(p)){var m=p*u;this.setCurrentTime(m)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(u){var d=this.video;if(d){if(typeof u=="string"){var p=u[0],m=parseFloat(u.substr(1));p==="+"?u=d.currentTime+m:p==="-"&&(u=d.currentTime-m)}d.currentTime=u}return this},seekingHandler:function(){this.isSeeking=!0,this.emit(r.VIDEO_SEEKING,this)},seekedHandler:function(){this.isSeeking=!1,this.emit(r.VIDEO_SEEKED,this)},getProgress:function(){var u=this.video;if(u){var d=u.duration;if(d!==1/0&&!isNaN(d))return u.currentTime/d}return-1},getDuration:function(){return this.video?this.video.duration:0},setMute:function(u){u===void 0&&(u=!0),this._codeMuted=u;var d=this.video;return d&&(d.muted=this._systemMuted?!0:u),this},isMuted:function(){return this._codeMuted},globalMute:function(u,d){this._systemMuted=d;var p=this.video;p&&(p.muted=this._codeMuted?!0:d)},globalPause:function(){this._systemPaused=!0,this.video&&!this.video.ended&&(this.removeEventHandlers(),this.video.pause())},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&!this.video.ended&&this.createPlayPromise()},setPaused:function(u){u===void 0&&(u=!0);var d=this.video;return this._codePaused=u,d&&!d.ended&&(u?d.paused||(this.removeEventHandlers(),d.pause()):u||(this._playCalled?d.paused&&!this._systemPaused&&this.createPlayPromise():this.play())),this},pause:function(){return this.setPaused(!0)},resume:function(){return this.setPaused(!1)},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(u){return u===void 0&&(u=1),this.video&&(this.video.volume=o(u,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(u){return this.video&&(this.video.playbackRate=u),this},getLoop:function(){return this.video?this.video.loop:!1},setLoop:function(u){return u===void 0&&(u=!0),this.video&&(this.video.loop=u),this},isPlaying:function(){return this.video?!(this.video.paused||this.video.ended):!1},isPaused:function(){return this.video&&this._playCalled&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(u,d){return d===void 0&&(d=!1),this.videoTexture&&(this.scene.sys.textures.renameTexture(this._key,u),this.videoTextureSource.setFlipY(d)),this._key=u,this.flipY=d,!!this.videoTexture},stop:function(u){u===void 0&&(u=!0);var d=this.video;return d&&(this.removeEventHandlers(),d.cancelVideoFrameCallback(this._rfvCallbackId),d.pause()),this.retry=0,this._playCalled=!1,u&&this.emit(r.VIDEO_STOP,this),this},removeVideoElement:function(){var u=this.video;if(u){for(u.parentNode&&u.parentNode.removeChild(u);u.hasChildNodes();)u.removeChild(u.firstChild);u.removeAttribute("autoplay"),u.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(!1),this.removeLoadEventHandlers(),this.removeVideoElement();var u=this.scene.sys.game.events;u.off(s.PAUSE,this.globalPause,this),u.off(s.RESUME,this.globalResume,this);var d=this.scene.sys.sound;d&&d.off(h.GLOBAL_MUTE,this.globalMute,this)}});v.exports=f},58352:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o.videoTexture&&(g.addToRenderList(o),t.batchSprite(o,o.frame,g,a))};v.exports=E},11511:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25305),g=t(44603),a=t(23568),r=t(18471);g.register("video",function(s,e){s===void 0&&(s={});var n=a(s,"key",null),h=new r(this.scene,0,0,n);return e!==void 0&&(s.add=e),o(this.scene,h,s),h})},89025:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(18471),g=t(39429);g.register("video",function(a,r,s){return this.displayList.add(new o(this.scene,a,r,s))})},10247:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(29849),a=t(58352),v.exports={renderWebGL:g,renderCanvas:a}},29849:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o.videoTexture&&(g.addToRenderList(o),o.pipeline.batchSprite(o,g,a))};v.exports=E},41481:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(96503),a=t(87902),r=t(83419),s=t(31401),e=t(95643),n=t(87841),h=t(37303),i=new r({Extends:e,Mixins:[s.Depth,s.GetBounds,s.Origin,s.Transform,s.ScrollFactor,s.Visible],initialize:function(f,u,d,p,m){p===void 0&&(p=1),m===void 0&&(m=p),e.call(this,f,"Zone"),this.setPosition(u,d),this.width=p,this.height=m,this.blendMode=o.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(l){this.scaleX=l/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(l){this.scaleY=l/this.height}},setSize:function(l,f,u){u===void 0&&(u=!0),this.width=l,this.height=f,this.updateDisplayOrigin();var d=this.input;return u&&d&&!d.customHitArea&&(d.hitArea.width=l,d.hitArea.height=f),this},setDisplaySize:function(l,f){return this.displayWidth=l,this.displayHeight=f,this},setCircleDropZone:function(l){return this.setDropZone(new g(0,0,l),a)},setRectangleDropZone:function(l,f){return this.setDropZone(new n(0,0,l,f),h)},setDropZone:function(l,f){return this.input||this.setInteractive(l,f,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(l,f,u){u.addToRenderList(f)},renderWebGL:function(l,f,u){u.addToRenderList(f)}});v.exports=i},95261:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(23568),a=t(41481);o.register("zone",function(r){var s=g(r,"x",0),e=g(r,"y",0),n=g(r,"width",1),h=g(r,"height",n);return new a(this.scene,s,e,n,h)})},84175:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41481),g=t(39429);g.register("zone",function(a,r,s,e){return this.displayList.add(new o(this.scene,a,r,s,e))})},95166:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0};v.exports=E},96503:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(87902),a=t(26241),r=t(79124),s=t(23777),e=t(28176),n=new o({initialize:function(i,l,f){i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=0),this.type=s.CIRCLE,this.x=i,this.y=l,this._radius=f,this._diameter=f*2},contains:function(h,i){return g(this,h,i)},getPoint:function(h,i){return a(this,h,i)},getPoints:function(h,i,l){return r(this,h,i,l)},getRandomPoint:function(h){return e(this,h)},setTo:function(h,i,l){return this.x=h,this.y=i,this._radius=l,this._diameter=l*2,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(h,i){return i===void 0&&(i=h),this.x=h,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(h){this._radius=h,this._diameter=h*2}},diameter:{get:function(){return this._diameter},set:function(h){this._diameter=h,this._radius=h*.5}},left:{get:function(){return this.x-this._radius},set:function(h){this.x=h+this._radius}},right:{get:function(){return this.x+this._radius},set:function(h){this.x=h-this._radius}},top:{get:function(){return this.y-this._radius},set:function(h){this.y=h+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(h){this.y=h-this._radius}}});v.exports=n},71562:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return 2*(Math.PI*t.radius)};v.exports=E},92110:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r,s){return s===void 0&&(s=new o),s.x=a.x+a.radius*Math.cos(r),s.y=a.y+a.radius*Math.sin(r),s};v.exports=g},42250:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=function(a){return new o(a.x,a.y,a.radius)};v.exports=g},87902:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(t.radius>0&&o>=t.left&&o<=t.right&&g>=t.top&&g<=t.bottom){var a=(t.x-o)*(t.x-o),r=(t.y-g)*(t.y-g);return a+r<=t.radius*t.radius}else return!1};v.exports=E},5698:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=function(a,r){return o(a,r.x,r.y)};v.exports=g},70588:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=function(a,r){return o(a,r.x,r.y)&&o(a,r.right,r.y)&&o(a,r.x,r.bottom)&&o(a,r.right,r.bottom)};v.exports=g},26394:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.setTo(t.x,t.y,t.radius)};v.exports=E},76278:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x===o.x&&t.y===o.y&&t.radius===o.radius};v.exports=E},2074:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,r){return r===void 0&&(r=new o),r.x=a.left,r.y=a.top,r.width=a.diameter,r.height=a.diameter,r};v.exports=g},26241:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(92110),g=t(62945),a=t(36383),r=t(2141),s=function(e,n,h){h===void 0&&(h=new r);var i=g(n,0,a.PI2);return o(e,i,h)};v.exports=s},79124:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71562),g=t(92110),a=t(62945),r=t(36383),s=function(e,n,h,i){i===void 0&&(i=[]),!n&&h>0&&(n=o(e)/h);for(var l=0;l<n;l++){var f=a(l/n,0,r.PI2);i.push(g(e,f))}return i};v.exports=s},50884:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.x+=o,t.y+=g,t};v.exports=E},39212:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x+=o.x,t.y+=o.y,t};v.exports=E},28176:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){r===void 0&&(r=new o);var s=2*Math.PI*Math.random(),e=Math.random()+Math.random(),n=e>1?2-e:e,h=n*Math.cos(s),i=n*Math.sin(s);return r.x=a.x+h*a.radius,r.y=a.y+i*a.radius,r};v.exports=g},88911:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503);o.Area=t(95166),o.Circumference=t(71562),o.CircumferencePoint=t(92110),o.Clone=t(42250),o.Contains=t(87902),o.ContainsPoint=t(5698),o.ContainsRect=t(70588),o.CopyFrom=t(26394),o.Equals=t(76278),o.GetBounds=t(2074),o.GetPoint=t(26241),o.GetPoints=t(79124),o.Offset=t(50884),o.OffsetPoint=t(39212),o.Random=t(28176),v.exports=o},23777:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6};v.exports=E},78874:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI};v.exports=E},92990:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=t.width/2,g=t.height/2,a=Math.pow(o-g,2)/Math.pow(o+g,2);return Math.PI*(o+g)*(1+3*a/(10+Math.sqrt(4-3*a)))};v.exports=E},79522:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r,s){s===void 0&&(s=new o);var e=a.width/2,n=a.height/2;return s.x=a.x+e*Math.cos(r),s.y=a.y+n*Math.sin(r),s};v.exports=g},58102:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8497),g=function(a){return new o(a.x,a.y,a.width,a.height)};v.exports=g},81154:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(t.width<=0||t.height<=0)return!1;var a=(o-t.x)/t.width,r=(g-t.y)/t.height;return a*=a,r*=r,a+r<.25};v.exports=E},46662:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81154),g=function(a,r){return o(a,r.x,r.y)};v.exports=g},1632:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81154),g=function(a,r){return o(a,r.x,r.y)&&o(a,r.right,r.y)&&o(a,r.x,r.bottom)&&o(a,r.right,r.bottom)};v.exports=g},65534:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.setTo(t.x,t.y,t.width,t.height)};v.exports=E},8497:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(81154),a=t(90549),r=t(48320),s=t(23777),e=t(24820),n=new o({initialize:function(i,l,f,u){i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=0),this.type=s.ELLIPSE,this.x=i,this.y=l,this.width=f,this.height=u},contains:function(h,i){return g(this,h,i)},getPoint:function(h,i){return a(this,h,i)},getPoints:function(h,i,l){return r(this,h,i,l)},getRandomPoint:function(h){return e(this,h)},setTo:function(h,i,l,f){return this.x=h,this.y=i,this.width=l,this.height=f,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(h,i){return i===void 0&&(i=h),this.x=h,this.y=i,this},setSize:function(h,i){return i===void 0&&(i=h),this.width=h,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(h){this.x=h+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(h){this.x=h-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(h){this.y=h+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(h){this.y=h-this.height/2}}});v.exports=n},36146:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x===o.x&&t.y===o.y&&t.width===o.width&&t.height===o.height};v.exports=E},23694:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,r){return r===void 0&&(r=new o),r.x=a.left,r.y=a.top,r.width=a.width,r.height=a.height,r};v.exports=g},90549:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79522),g=t(62945),a=t(36383),r=t(2141),s=function(e,n,h){h===void 0&&(h=new r);var i=g(n,0,a.PI2);return o(e,i,h)};v.exports=s},48320:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(92990),g=t(79522),a=t(62945),r=t(36383),s=function(e,n,h,i){i===void 0&&(i=[]),!n&&h>0&&(n=o(e)/h);for(var l=0;l<n;l++){var f=a(l/n,0,r.PI2);i.push(g(e,f))}return i};v.exports=s},73424:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.x+=o,t.y+=g,t};v.exports=E},44808:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x+=o.x,t.y+=o.y,t};v.exports=E},24820:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){r===void 0&&(r=new o);var s=Math.random()*Math.PI*2,e=Math.sqrt(Math.random());return r.x=a.x+e*Math.cos(s)*a.width/2,r.y=a.y+e*Math.sin(s)*a.height/2,r};v.exports=g},49203:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8497);o.Area=t(78874),o.Circumference=t(92990),o.CircumferencePoint=t(79522),o.Clone=t(58102),o.Contains=t(81154),o.ContainsPoint=t(46662),o.ContainsRect=t(1632),o.CopyFrom=t(65534),o.Equals=t(36146),o.GetBounds=t(23694),o.GetPoint=t(90549),o.GetPoints=t(48320),o.Offset=t(73424),o.OffsetPoint=t(44808),o.Random=t(24820),v.exports=o},55738:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23777),g=t(79291),a={Circle:t(88911),Ellipse:t(49203),Intersects:t(91865),Line:t(2529),Mesh:t(73090),Point:t(43711),Polygon:t(58423),Rectangle:t(93232),Triangle:t(84435)};a=g(!1,a,o),v.exports=a},2044:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20339),g=function(a,r){return o(a.x,a.y,r.x,r.y)<=a.radius+r.radius};v.exports=g},81491:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=o.width/2,a=o.height/2,r=Math.abs(t.x-o.x-g),s=Math.abs(t.y-o.y-a),e=g+t.radius,n=a+t.radius;if(r>e||s>n)return!1;if(r<=g||s<=a)return!0;var h=r-g,i=s-a,l=h*h,f=i*i,u=t.radius*t.radius;return l+f<=u};v.exports=E},63376:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(2044),a=function(r,s,e){if(e===void 0&&(e=[]),g(r,s)){var n=r.x,h=r.y,i=r.radius,l=s.x,f=s.y,u=s.radius,d,p,m,T,y;if(h===f)y=(u*u-i*i-l*l+n*n)/(2*(n-l)),d=1,p=-2*f,m=l*l+y*y-2*l*y+f*f-u*u,T=p*p-4*d*m,T===0?e.push(new o(y,-p/(2*d))):T>0&&(e.push(new o(y,(-p+Math.sqrt(T))/(2*d))),e.push(new o(y,(-p-Math.sqrt(T))/(2*d))));else{var S=(n-l)/(h-f),C=(u*u-i*i-l*l+n*n-f*f+h*h)/(2*(h-f));d=S*S+1,p=2*h*S-2*C*S-2*n,m=n*n+h*h+C*C-i*i-2*h*C,T=p*p-4*d*m,T===0?(y=-p/(2*d),e.push(new o(y,C-y*S))):T>0&&(y=(-p+Math.sqrt(T))/(2*d),e.push(new o(y,C-y*S)),y=(-p-Math.sqrt(T))/(2*d),e.push(new o(y,C-y*S)))}}return e};v.exports=a},97439:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4042),g=t(81491),a=function(r,s,e){if(e===void 0&&(e=[]),g(r,s)){var n=s.getLineA(),h=s.getLineB(),i=s.getLineC(),l=s.getLineD();o(n,r,e),o(h,r,e),o(i,r,e),o(l,r,e)}return e};v.exports=a},4042:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(80462),a=function(r,s,e){if(e===void 0&&(e=[]),g(r,s)){var n=r.x1,h=r.y1,i=r.x2,l=r.y2,f=s.x,u=s.y,d=s.radius,p=i-n,m=l-h,T=n-f,y=h-u,S=p*p+m*m,C=2*(p*T+m*y),R=T*T+y*y-d*d,I=C*C-4*S*R,L,w;if(I===0){var O=-C/(2*S);L=n+O*p,w=h+O*m,O>=0&&O<=1&&e.push(new o(L,w))}else if(I>0){var B=(-C-Math.sqrt(I))/(2*S);L=n+B*p,w=h+B*m,B>=0&&B<=1&&e.push(new o(L,w));var V=(-C+Math.sqrt(I))/(2*S);L=n+V*p,w=h+V*m,V>=0&&V<=1&&e.push(new o(L,w))}}return e};v.exports=a},36100:(v,E,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25836),g=function(a,r,s,e){s===void 0&&(s=!1);var n=a.x1,h=a.y1,i=a.x2,l=a.y2,f=r.x1,u=r.y1,d=r.x2,p=r.y2,m=i-n,T=l-h,y=d-f,S=p-u,C=m*S-T*y;if(C===0)return null;var R,I,L;if(s){if(R=(m*(u-h)+T*(n-f))/(y*T-S*m),I=(f+y*R-n)/m,I<0||R<0||R>1)return null;L=I}else{if(R=((f-n)*S-(u-h)*y)/C,I=((h-u)*m-(n-f)*T)/C,R<0||R>1||I<0||I>1)return null;L=R}return e===void 0&&(e=new o),e.set(n+m*L,h+T*L,L)};v.exports=g},3073:(v,E,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36100),g=t(23031),a=t(25836),r=new g,s=new a,e=function(n,h,i,l){i===void 0&&(i=!1),l===void 0&&(l=new a);var f=!1;l.set(),s.set();for(var u=h[h.length-1],d=0;d<h.length;d++){var p=h[d];r.setTo(u.x,u.y,p.x,p.y),u=p,o(n,r,i,s)&&(!f||s.z<l.z)&&(l.copy(s),f=!0)}return f?l:null};v.exports=e},56362:(v,E,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25836),g=t(61369),a=t(3073),r=new o,s=function(e,n,h,i){i===void 0&&(i=new g),Array.isArray(n)||(n=[n]);var l=!1;i.set(),r.set();for(var f=0;f<n.length;f++)a(e,n[f].points,h,r)&&(!l||r.z<i.z)&&(i.set(r.x,r.y,r.z,f),l=!0);return l?i:null};v.exports=s},60646:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(76112),a=t(92773),r=function(s,e,n){if(n===void 0&&(n=[]),a(s,e))for(var h=e.getLineA(),i=e.getLineB(),l=e.getLineC(),f=e.getLineD(),u=[new o,new o,new o,new o],d=[g(h,s,u[0]),g(i,s,u[1]),g(l,s,u[2]),g(f,s,u[3])],p=0;p<4;p++)d[p]&&n.push(u[p]);return n};v.exports=r},71147:(v,E,t)=>{/**
 * @author       Richard Davey
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61369),g=t(56362),a=t(23031),r=new a;function s(h,i,l,f,u){var d=Math.cos(h),p=Math.sin(h);r.setTo(i,l,i+d,l+p);var m=g(r,f,!0);m&&u.push(new o(m.x,m.y,h,m.w))}function e(h,i){return h.z-i.z}var n=function(h,i,l){Array.isArray(l)||(l=[l]);for(var f=[],u=[],d=0;d<l.length;d++)for(var p=l[d].points,m=0;m<p.length;m++){var T=Math.atan2(p[m].y-i,p[m].x-h);u.indexOf(T)===-1&&(s(T,h,i,l,f),s(T-1e-5,h,i,l,f),s(T+1e-5,h,i,l,f),u.push(T))}return f.sort(e)};v.exports=n},68389:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(59996),a=function(r,s,e){return e===void 0&&(e=new o),g(r,s)&&(e.x=Math.max(r.x,s.x),e.y=Math.max(r.y,s.y),e.width=Math.min(r.right,s.right)-e.x,e.height=Math.min(r.bottom,s.bottom)-e.y),e};v.exports=a},52784:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60646),g=t(59996),a=function(r,s,e){if(e===void 0&&(e=[]),g(r,s)){var n=r.getLineA(),h=r.getLineB(),i=r.getLineC(),l=r.getLineD();o(n,s,e),o(h,s,e),o(i,s,e),o(l,s,e)}return e};v.exports=a},26341:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89265),g=t(60646),a=function(r,s,e){if(e===void 0&&(e=[]),o(r,s)){var n=s.getLineA(),h=s.getLineB(),i=s.getLineC();g(n,r,e),g(h,r,e),g(i,r,e)}return e};v.exports=a},38720:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(4042),g=t(67636),a=function(r,s,e){if(e===void 0&&(e=[]),g(r,s)){var n=r.getLineA(),h=r.getLineB(),i=r.getLineC();o(n,s,e),o(h,s,e),o(i,s,e)}return e};v.exports=a},13882:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(2822),a=t(76112),r=function(s,e,n){if(n===void 0&&(n=[]),g(s,e))for(var h=s.getLineA(),i=s.getLineB(),l=s.getLineC(),f=[new o,new o,new o],u=[a(h,e,f[0]),a(i,e,f[1]),a(l,e,f[2])],d=0;d<3;d++)u[d]&&n.push(f[d]);return n};v.exports=r},75636:(v,E,t)=>{/**
 * @author       Florian Vazelle
 * @author       Geoffrey Glaive
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82944),g=t(13882),a=function(r,s,e){if(e===void 0&&(e=[]),o(r,s)){var n=s.getLineA(),h=s.getLineB(),i=s.getLineC();g(r,n,e),g(r,h,e),g(r,i,e)}return e};v.exports=a},80462:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=t(2141),a=new g,r=function(s,e,n){if(n===void 0&&(n=a),o(e,s.x1,s.y1))return n.x=s.x1,n.y=s.y1,!0;if(o(e,s.x2,s.y2))return n.x=s.x2,n.y=s.y2,!0;var h=s.x2-s.x1,i=s.y2-s.y1,l=e.x-s.x1,f=e.y-s.y1,u=h*h+i*i,d=h,p=i;if(u>0){var m=(l*h+f*i)/u;d*=m,p*=m}n.x=s.x1+d,n.y=s.y1+p;var T=d*d+p*p;return T<=u&&d*h+p*i>=0&&o(e,n.x,n.y)};v.exports=r},76112:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=t.x1,r=t.y1,s=t.x2,e=t.y2,n=o.x1,h=o.y1,i=o.x2,l=o.y2;if(a===s&&r===e||n===i&&h===l)return!1;var f=(l-h)*(s-a)-(i-n)*(e-r);if(f===0)return!1;var u=((i-n)*(r-h)-(l-h)*(a-n))/f,d=((s-a)*(r-h)-(e-r)*(a-n))/f;return u<0||u>1||d<0||d>1?!1:(g&&(g.x=a+u*(s-a),g.y=r+u*(e-r)),!0)};v.exports=E},92773:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.x1,a=t.y1,r=t.x2,s=t.y2,e=o.x,n=o.y,h=o.right,i=o.bottom,l=0;if(g>=e&&g<=h&&a>=n&&a<=i||r>=e&&r<=h&&s>=n&&s<=i)return!0;if(g<e&&r>=e){if(l=a+(s-a)*(e-g)/(r-g),l>n&&l<=i)return!0}else if(g>h&&r<=h&&(l=a+(s-a)*(h-g)/(r-g),l>=n&&l<=i))return!0;if(a<n&&s>=n){if(l=g+(r-g)*(n-a)/(s-a),l>=e&&l<=h)return!0}else if(a>i&&s<=i&&(l=g+(r-g)*(i-a)/(s-a),l>=e&&l<=h))return!0;return!1};v.exports=E},16204:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){g===void 0&&(g=1);var a=o.x1,r=o.y1,s=o.x2,e=o.y2,n=t.x,h=t.y,i=(s-a)*(s-a)+(e-r)*(e-r);if(i===0)return!1;var l=((n-a)*(s-a)+(h-r)*(e-r))/i;if(l<0)return Math.sqrt((a-n)*(a-n)+(r-h)*(r-h))<=g;if(l>=0&&l<=1){var f=((r-h)*(s-a)-(a-n)*(e-r))/i;return Math.abs(f)*Math.sqrt(i)<=g}else return Math.sqrt((s-n)*(s-n)+(e-h)*(e-h))<=g};v.exports=E},14199:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16204),g=function(a,r){if(!o(a,r))return!1;var s=Math.min(r.x1,r.x2),e=Math.max(r.x1,r.x2),n=Math.min(r.y1,r.y2),h=Math.max(r.y1,r.y2);return a.x>=s&&a.x<=e&&a.y>=n&&a.y<=h};v.exports=g},59996:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.width<=0||t.height<=0||o.width<=0||o.height<=0?!1:!(t.right<o.x||t.bottom<o.y||t.x>o.right||t.y>o.bottom)};v.exports=E},89265:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(76112),g=t(37303),a=t(48653),r=t(77493),s=function(e,n){if(n.left>e.right||n.right<e.left||n.top>e.bottom||n.bottom<e.top)return!1;var h=n.getLineA(),i=n.getLineB(),l=n.getLineC();if(g(e,h.x1,h.y1)||g(e,h.x2,h.y2)||g(e,i.x1,i.y1)||g(e,i.x2,i.y2)||g(e,l.x1,l.y1)||g(e,l.x2,l.y2))return!0;var f=e.getLineA(),u=e.getLineB(),d=e.getLineC(),p=e.getLineD();if(o(h,f)||o(h,u)||o(h,d)||o(h,p)||o(i,f)||o(i,u)||o(i,d)||o(i,p)||o(l,f)||o(l,u)||o(l,d)||o(l,p))return!0;var m=r(e),T=a(n,m,!0);return T.length>0};v.exports=s},84411:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r,s){return s===void 0&&(s=0),!(o>t.right+s||g<t.left-s||a>t.bottom+s||r<t.top-s)};v.exports=E},67636:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80462),g=t(10690),a=function(r,s){return r.left>s.right||r.right<s.left||r.top>s.bottom||r.bottom<s.top?!1:!!(g(r,s.x,s.y)||o(r.getLineA(),s)||o(r.getLineB(),s)||o(r.getLineC(),s))};v.exports=a},2822:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(76112),g=function(a,r){return!!(a.contains(r.x1,r.y1)||a.contains(r.x2,r.y2)||o(a.getLineA(),r)||o(a.getLineB(),r)||o(a.getLineC(),r))};v.exports=g},82944:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(48653),g=t(71694),a=t(76112),r=function(s,e){if(s.left>e.right||s.right<e.left||s.top>e.bottom||s.bottom<e.top)return!1;var n=s.getLineA(),h=s.getLineB(),i=s.getLineC(),l=e.getLineA(),f=e.getLineB(),u=e.getLineC();if(a(n,l)||a(n,f)||a(n,u)||a(h,l)||a(h,f)||a(h,u)||a(i,l)||a(i,f)||a(i,u))return!0;var d=g(s),p=o(e,d,!0);return p.length>0||(d=g(e),p=o(s,d,!0),p.length>0)};v.exports=r},91865:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CircleToCircle:t(2044),CircleToRectangle:t(81491),GetCircleToCircle:t(63376),GetCircleToRectangle:t(97439),GetLineToCircle:t(4042),GetLineToLine:t(36100),GetLineToPoints:t(3073),GetLineToPolygon:t(56362),GetLineToRectangle:t(60646),GetRaysFromPointToPolygon:t(71147),GetRectangleIntersection:t(68389),GetRectangleToRectangle:t(52784),GetRectangleToTriangle:t(26341),GetTriangleToCircle:t(38720),GetTriangleToLine:t(13882),GetTriangleToTriangle:t(75636),LineToCircle:t(80462),LineToLine:t(76112),LineToRectangle:t(92773),PointToLine:t(16204),PointToLineSegment:t(14199),RectangleToRectangle:t(59996),RectangleToTriangle:t(89265),RectangleToValues:t(84411),TriangleToCircle:t(67636),TriangleToLine:t(2822),TriangleToTriangle:t(82944)}},91938:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)};v.exports=E},84993:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){o===void 0&&(o=1),g===void 0&&(g=[]);var a=Math.round(t.x1),r=Math.round(t.y1),s=Math.round(t.x2),e=Math.round(t.y2),n=Math.abs(s-a),h=Math.abs(e-r),i=a<s?1:-1,l=r<e?1:-1,f=n-h;g.push({x:a,y:r});for(var u=1;!(a===s&&r===e);){var d=f<<1;d>-h&&(f-=h,a+=i),d<n&&(f+=n,r+=l),u%o===0&&g.push({x:a,y:r}),u++}return g};v.exports=E},36469:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=o-(t.x1+t.x2)/2,r=g-(t.y1+t.y2)/2;return t.x1+=a,t.y1+=r,t.x2+=a,t.y2+=r,t};v.exports=E},31116:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23031),g=function(a){return new o(a.x1,a.y1,a.x2,a.y2)};v.exports=g},59944:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.setTo(t.x1,t.y1,t.x2,t.y2)};v.exports=E},59220:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x1===o.x1&&t.y1===o.y1&&t.x2===o.x2&&t.y2===o.y2};v.exports=E},78177:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=function(a,r,s){s===void 0&&(s=r);var e=o(a),n=a.x2-a.x1,h=a.y2-a.y1;return r&&(a.x1=a.x1-n/e*r,a.y1=a.y1-h/e*r),s&&(a.x2=a.x2+n/e*s,a.y2=a.y2+h/e*s),a};v.exports=g},26708:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(52816),g=t(6113),a=t(2141),r=function(s,e,n,h,i){h===void 0&&(h=0),i===void 0&&(i=[]);var l=[],f=s.x1,u=s.y1,d=s.x2-f,p=s.y2-u,m=g(e,i),T,y,S=n-1;for(T=0;T<S;T++)y=m(T/S),l.push(new a(f+d*y,u+p*y));if(y=m(1),l.push(new a(f+d*y,u+p*y)),h>0){var C=l[0],R=[C];for(T=1;T<l.length-1;T++){var I=l[T];o(C,I)>=h&&(R.push(I),C=I)}var L=l[l.length-1];return o(C,L)<h&&R.pop(),R.push(L),R}else return l};v.exports=r},32125:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){return r===void 0&&(r=new o),r.x=(a.x1+a.x2)/2,r.y=(a.y1+a.y2)/2,r};v.exports=g},99569:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r,s){s===void 0&&(s=new o);var e=a.x1,n=a.y1,h=a.x2,i=a.y2,l=(h-e)*(h-e)+(i-n)*(i-n);if(l===0)return s;var f=((r.x-e)*(h-e)+(r.y-n)*(i-n))/l;return s.x=e+f*(h-e),s.y=n+f*(i-n),s};v.exports=g},34638:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(91938),a=t(2141),r=function(s,e){e===void 0&&(e=new a);var n=g(s)-o.TAU;return e.x=Math.cos(n),e.y=Math.sin(n),e};v.exports=r},13151:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r,s){return s===void 0&&(s=new o),s.x=a.x1+(a.x2-a.x1)*r,s.y=a.y1+(a.y2-a.y1)*r,s};v.exports=g},15258:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(2141),a=function(r,s,e,n){n===void 0&&(n=[]),!s&&e>0&&(s=o(r)/e);for(var h=r.x1,i=r.y1,l=r.x2,f=r.y2,u=0;u<s;u++){var d=u/s,p=h+(l-h)*d,m=i+(f-i)*d;n.push(new g(p,m))}return n};v.exports=a},26408:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Florian Mertens
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.x1,a=t.y1,r=t.x2,s=t.y2,e=(r-g)*(r-g)+(s-a)*(s-a);if(e===0)return!1;var n=((a-o.y)*(r-g)-(g-o.x)*(s-a))/e;return Math.abs(n)*Math.sqrt(e)};v.exports=E},98770:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.abs(t.y1-t.y2)};v.exports=E},35001:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))};v.exports=E},23031:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(13151),a=t(15258),r=t(23777),s=t(65822),e=t(26099),n=new o({initialize:function(i,l,f,u){i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=0),this.type=r.LINE,this.x1=i,this.y1=l,this.x2=f,this.y2=u},getPoint:function(h,i){return g(this,h,i)},getPoints:function(h,i,l){return a(this,h,i,l)},getRandomPoint:function(h){return s(this,h)},setTo:function(h,i,l,f){return h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=0),this.x1=h,this.y1=i,this.x2=l,this.y2=f,this},setFromObjects:function(h,i){return this.x1=h.x,this.y1=h.y,this.x2=i.x,this.y2=i.y,this},getPointA:function(h){return h===void 0&&(h=new e),h.set(this.x1,this.y1),h},getPointB:function(h){return h===void 0&&(h=new e),h.set(this.x2,this.y2),h},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(h){this.x1<=this.x2?this.x1=h:this.x2=h}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(h){this.x1>this.x2?this.x1=h:this.x2=h}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(h){this.y1<=this.y2?this.y1=h:this.y2=h}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(h){this.y1>this.y2?this.y1=h:this.y2=h}}});v.exports=n},64795:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(15994),a=t(91938),r=function(s){var e=a(s)-o.TAU;return g(e,-Math.PI,Math.PI)};v.exports=r},52616:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(91938),a=function(r){return Math.cos(g(r)-o.TAU)};v.exports=a},87231:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(91938),a=function(r){return Math.sin(g(r)-o.TAU)};v.exports=a},89662:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.x1+=o,t.y1+=g,t.x2+=o,t.y2+=g,t};v.exports=E},71165:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return-((t.x2-t.x1)/(t.y2-t.y1))};v.exports=E},65822:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){r===void 0&&(r=new o);var s=Math.random();return r.x=a.x1+s*(a.x2-a.x1),r.y=a.y1+s*(a.y2-a.y1),r};v.exports=g},69777:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91938),g=t(64795),a=function(r,s){return 2*g(s)-Math.PI-o(r)};v.exports=a},39706:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(64400),g=function(a,r){var s=(a.x1+a.x2)/2,e=(a.y1+a.y2)/2;return o(a,s,e,r)};v.exports=g},82585:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(64400),g=function(a,r,s){return o(a,r.x,r.y,s)};v.exports=g},64400:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=Math.cos(a),s=Math.sin(a),e=t.x1-o,n=t.y1-g;return t.x1=e*r-n*s+o,t.y1=e*s+n*r+g,e=t.x2-o,n=t.y2-g,t.x2=e*r-n*s+o,t.y2=e*s+n*r+g,t};v.exports=E},62377:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){return t.x1=o,t.y1=g,t.x2=o+Math.cos(a)*r,t.y2=g+Math.sin(a)*r,t};v.exports=E},71366:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t.y2-t.y1)/(t.x2-t.x1)};v.exports=E},10809:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.abs(t.x1-t.x2)};v.exports=E},2529:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23031);o.Angle=t(91938),o.BresenhamPoints=t(84993),o.CenterOn=t(36469),o.Clone=t(31116),o.CopyFrom=t(59944),o.Equals=t(59220),o.Extend=t(78177),o.GetEasedPoints=t(26708),o.GetMidPoint=t(32125),o.GetNearestPoint=t(99569),o.GetNormal=t(34638),o.GetPoint=t(13151),o.GetPoints=t(15258),o.GetShortestDistance=t(26408),o.Height=t(98770),o.Length=t(35001),o.NormalAngle=t(64795),o.NormalX=t(52616),o.NormalY=t(87231),o.Offset=t(89662),o.PerpSlope=t(71165),o.Random=t(65822),o.ReflectAngle=t(69777),o.Rotate=t(39706),o.RotateAroundPoint=t(82585),o.RotateAroundXY=t(64400),o.SetToAngle=t(62377),o.Slope=t(71366),o.Width=t(10809),v.exports=o},83997:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(87841),a=t(26099);function r(e,n,h,i){var l=e-h,f=n-i,u=l*l+f*f;return Math.sqrt(u)}var s=new o({initialize:function(n,h,i){this.vertex1=n,this.vertex2=h,this.vertex3=i,this.bounds=new g,this._inCenter=new a},getInCenter:function(e){e===void 0&&(e=!0);var n=this.vertex1,h=this.vertex2,i=this.vertex3,l,f,u,d,p,m;e?(l=n.x,f=n.y,u=h.x,d=h.y,p=i.x,m=i.y):(l=n.vx,f=n.vy,u=h.vx,d=h.vy,p=i.vx,m=i.vy);var T=r(p,m,u,d),y=r(l,f,p,m),S=r(u,d,l,f),C=T+y+S;return this._inCenter.set((l*T+u*y+p*S)/C,(f*T+d*y+m*S)/C)},contains:function(e,n,h){var i=this.vertex1,l=this.vertex2,f=this.vertex3,u=i.vx,d=i.vy,p=l.vx,m=l.vy,T=f.vx,y=f.vy;if(h){var S=h.a,C=h.b,R=h.c,I=h.d,L=h.e,w=h.f;u=i.vx*S+i.vy*R+L,d=i.vx*C+i.vy*I+w,p=l.vx*S+l.vy*R+L,m=l.vx*C+l.vy*I+w,T=f.vx*S+f.vy*R+L,y=f.vx*C+f.vy*I+w}var O=T-u,B=y-d,V=p-u,b=m-d,X=e-u,K=n-d,Q=O*O+B*B,U=O*V+B*b,W=O*X+B*K,F=V*V+b*b,G=V*X+b*K,z=Q*F-U*U,Y=z===0?0:1/z,$=(F*W-U*G)*Y,j=(Q*G-U*W)*Y;return $>=0&&j>=0&&$+j<1},isCounterClockwise:function(e){var n=this.vertex1,h=this.vertex2,i=this.vertex3,l=(h.vx-n.vx)*(i.vy-n.vy)-(h.vy-n.vy)*(i.vx-n.vx);return e<=0?l>=0:l<0},load:function(e,n,h,i,l){return h=this.vertex1.load(e,n,h,i,l),h=this.vertex2.load(e,n,h,i,l),h=this.vertex3.load(e,n,h,i,l),h},transformCoordinatesLocal:function(e,n,h,i){return this.vertex1.transformCoordinatesLocal(e,n,h,i),this.vertex2.transformCoordinatesLocal(e,n,h,i),this.vertex3.transformCoordinatesLocal(e,n,h,i),this},updateBounds:function(){var e=this.vertex1,n=this.vertex2,h=this.vertex3,i=this.bounds;return i.x=Math.min(e.vx,n.vx,h.vx),i.y=Math.min(e.vy,n.vy,h.vy),i.width=Math.max(e.vx,n.vx,h.vx)-i.x,i.height=Math.max(e.vy,n.vy,h.vy)-i.y,this},isInView:function(e,n,h,i,l,f,u,d,p,m,T){this.update(i,l,f,u,d,p,m,T);var y=this.vertex1,S=this.vertex2,C=this.vertex3;if(y.ta<=0&&S.ta<=0&&C.ta<=0||n&&!this.isCounterClockwise(h))return!1;var R=this.bounds;R.x=Math.min(y.tx,S.tx,C.tx),R.y=Math.min(y.ty,S.ty,C.ty),R.width=Math.max(y.tx,S.tx,C.tx)-R.x,R.height=Math.max(y.ty,S.ty,C.ty)-R.y;var I=e.x+e.width,L=e.y+e.height;return R.width<=0||R.height<=0||e.width<=0||e.height<=0?!1:!(R.right<e.x||R.bottom<e.y||R.x>I||R.y>L)},scrollUV:function(e,n){return this.vertex1.scrollUV(e,n),this.vertex2.scrollUV(e,n),this.vertex3.scrollUV(e,n),this},scaleUV:function(e,n){return this.vertex1.scaleUV(e,n),this.vertex2.scaleUV(e,n),this.vertex3.scaleUV(e,n),this},setColor:function(e){return this.vertex1.color=e,this.vertex2.color=e,this.vertex3.color=e,this},update:function(e,n,h,i,l,f,u,d){return this.vertex1.update(n,h,i,l,f,u,d,e),this.vertex2.update(n,h,i,l,f,u,d,e),this.vertex3.update(n,h,i,l,f,u,d,e),this},translate:function(e,n){n===void 0&&(n=0);var h=this.vertex1,i=this.vertex2,l=this.vertex3;return h.x+=e,h.y+=n,i.x+=e,i.y+=n,l.x+=e,l.y+=n,this},x:{get:function(){return this.getInCenter().x},set:function(e){var n=this.getInCenter();this.translate(e-n.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(e){var n=this.getInCenter();this.translate(0,e-n.y)}},alpha:{get:function(){var e=this.vertex1,n=this.vertex2,h=this.vertex3;return(e.alpha+n.alpha+h.alpha)/3},set:function(e){this.vertex1.alpha=e,this.vertex2.alpha=e,this.vertex3.alpha=e}},depth:{get:function(){var e=this.vertex1,n=this.vertex2,h=this.vertex3;return(e.vz+n.vz+h.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});v.exports=s},48803:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83997),g=t(95540),a=t(37867),r=t(25836),s=t(39318),e=new r,n=new r,h=new a,i=function(l){var f=g(l,"mesh"),u=g(l,"texture",null),d=g(l,"frame"),p=g(l,"width",1),m=g(l,"height",p),T=g(l,"widthSegments",1),y=g(l,"heightSegments",T),S=g(l,"x",0),C=g(l,"y",0),R=g(l,"z",0),I=g(l,"rotateX",0),L=g(l,"rotateY",0),w=g(l,"rotateZ",0),O=g(l,"zIsUp",!0),B=g(l,"isOrtho",f?f.dirtyCache[11]:!1),V=g(l,"colors",[16777215]),b=g(l,"alphas",[1]),X=g(l,"tile",!1),K=g(l,"flipY",!1),Q=g(l,"width",null),U={faces:[],verts:[]};e.set(S,C,R),n.set(I,L,w),h.fromRotationXYTranslation(n,e,O);var W;if(!u&&f)u=f.texture,d||(W=f.frame);else if(f&&typeof u=="string")u=f.scene.sys.textures.get(u);else if(!u)return U;W||(W=u.get(d)),!Q&&B&&u&&f&&(p=W.width/f.height,m=W.height/f.height);var F=p/2,G=m/2,z=Math.floor(T),Y=Math.floor(y),$=z+1,j=Y+1,Z=p/z,q=m/Y,_=[],tt=[],nt,at,st=0,lt=1,vt=0,mt=1;W&&(st=W.u0,lt=W.u1,K?(vt=W.v1,mt=W.v0):(vt=W.v0,mt=W.v1));var pt=lt-st,ot=mt-vt;for(at=0;at<j;at++){var ct=at*q-G;for(nt=0;nt<$;nt++){var ft=nt*Z-F;tt.push(ft,-ct);var Et=st+pt*(nt/z),St=vt+ot*(at/Y);_.push(Et,St)}}Array.isArray(V)||(V=[V]),Array.isArray(b)||(b=[b]);var It=0,Mt=0;for(at=0;at<Y;at++)for(nt=0;nt<z;nt++){var wt=(nt+$*at)*2,Rt=(nt+$*(at+1))*2,zt=(nt+1+$*(at+1))*2,Bt=(nt+1+$*at)*2,Xt=V[Mt],$t=b[It],ne=new s(tt[wt],tt[wt+1],0,_[wt],_[wt+1],Xt,$t).transformMat4(h),me=new s(tt[Rt],tt[Rt+1],0,_[Rt],_[Rt+1],Xt,$t).transformMat4(h),De=new s(tt[Bt],tt[Bt+1],0,_[Bt],_[Bt+1],Xt,$t).transformMat4(h),Ne=new s(tt[Rt],tt[Rt+1],0,_[Rt],_[Rt+1],Xt,$t).transformMat4(h),xe=new s(tt[zt],tt[zt+1],0,_[zt],_[zt+1],Xt,$t).transformMat4(h),Pe=new s(tt[Bt],tt[Bt+1],0,_[Bt],_[Bt+1],Xt,$t).transformMat4(h);X&&(ne.setUVs(st,mt),me.setUVs(st,vt),De.setUVs(lt,mt),Ne.setUVs(st,vt),xe.setUVs(lt,vt),Pe.setUVs(lt,mt)),Mt++,Mt===V.length&&(Mt=0),It++,It===b.length&&(It=0),U.verts.push(ne,me,De,Ne,xe,Pe),U.faces.push(new o(ne,me,De),new o(Ne,xe,Pe))}return f&&(f.faces=f.faces.concat(U.faces),f.vertices=f.vertices.concat(U.verts)),U};v.exports=i},34684:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83997),g=t(37867),a=t(25836),r=t(39318),s=new a,e=new a,n=new g,h=function(i,l,f,u,d,p,m,T,y,S){f===void 0&&(f=1),u===void 0&&(u=0),d===void 0&&(d=0),p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=0),y===void 0&&(y=0),S===void 0&&(S=!0);var C={faces:[],verts:[]},R=i.materials;s.set(u,d,p),e.set(m,T,y),n.fromRotationXYTranslation(e,s,S);for(var I=0;I<i.models.length;I++)for(var L=i.models[I],w=L.vertices,O=L.textureCoords,B=L.faces,V=0;V<B.length;V++){var b=B[V],X=b.vertices[0],K=b.vertices[1],Q=b.vertices[2],U=w[X.vertexIndex],W=w[K.vertexIndex],F=w[Q.vertexIndex],G=X.textureCoordsIndex,z=K.textureCoordsIndex,Y=Q.textureCoordsIndex,$=G===-1?{u:0,v:1}:O[G],j=z===-1?{u:0,v:0}:O[z],Z=Y===-1?{u:1,v:1}:O[Y],q=16777215;b.material!==""&&R[b.material]&&(q=R[b.material]);var _=new r(U.x*f,U.y*f,U.z*f,$.u,$.v,q).transformMat4(n),tt=new r(W.x*f,W.y*f,W.z*f,j.u,j.v,q).transformMat4(n),nt=new r(F.x*f,F.y*f,F.z*f,Z.u,Z.v,q).transformMat4(n);C.verts.push(_,tt,nt),C.faces.push(new o(_,tt,nt))}return l&&(l.faces=l.faces.concat(C.faces),l.vertices=l.vertices.concat(C.verts)),C};v.exports=h},92515:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83997),g=t(39318),a=function(r,s,e,n,h,i,l,f){if(n===void 0&&(n=!1),i===void 0&&(i=16777215),l===void 0&&(l=1),f===void 0&&(f=!1),r.length!==s.length&&!n){console.warn("GenerateVerts: vertices and uvs count not equal");return}var u={faces:[],vertices:[]},d,p,m,T,y,S,C,R,I,L,w,O=n?3:2,B=Array.isArray(i),V=Array.isArray(l);if(Array.isArray(e)&&e.length>0)for(d=0;d<e.length;d++){var b=e[d],X=e[d]*2,K=e[d]*O;p=r[K],m=r[K+1],T=n?r[K+2]:0,y=s[X],S=s[X+1],f&&(S=1-S),C=B?i[b]:i,R=V?l[b]:l,I=0,L=0,w=0,h&&(I=h[K],L=h[K+1],w=n?h[K+2]:0),u.vertices.push(new g(p,m,T,y,S,C,R,I,L,w))}else{var Q=0,U=0;for(d=0;d<r.length;d+=O)p=r[d],m=r[d+1],T=n?r[d+2]:0,y=s[Q],S=s[Q+1],C=B?i[U]:i,R=V?l[U]:l,I=0,L=0,w=0,h&&(I=h[d],L=h[d+1],w=n?h[d+2]:0),u.vertices.push(new g(p,m,T,y,S,C,R,I,L,w)),Q+=2,U++}for(d=0;d<u.vertices.length;d+=3){var W=u.vertices[d],F=u.vertices[d+1],G=u.vertices[d+2];u.faces.push(new o(W,F,G))}return u};v.exports=a},85048:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=!0,t="untitled",o="",g="";function a(p){var m=p.indexOf("#");return m>-1?p.substring(0,m):p}function r(p){return p.models.length===0&&p.models.push({faces:[],name:t,textureCoords:[],vertexNormals:[],vertices:[]}),o="",p.models[p.models.length-1]}function s(p,m){var T=p.length>=2?p[1]:t;m.models.push({faces:[],name:T,textureCoords:[],vertexNormals:[],vertices:[]}),o=""}function e(p){p.length===2&&(o=p[1])}function n(p,m){var T=p.length,y=T>=2?parseFloat(p[1]):0,S=T>=3?parseFloat(p[2]):0,C=T>=4?parseFloat(p[3]):0;r(m).vertices.push({x:y,y:S,z:C})}function h(p,m){var T=p.length,y=T>=2?parseFloat(p[1]):0,S=T>=3?parseFloat(p[2]):0,C=T>=4?parseFloat(p[3]):0;isNaN(y)&&(y=0),isNaN(S)&&(S=0),isNaN(C)&&(C=0),E&&(S=1-S),r(m).textureCoords.push({u:y,v:S,w:C})}function i(p,m){var T=p.length,y=T>=2?parseFloat(p[1]):0,S=T>=3?parseFloat(p[2]):0,C=T>=4?parseFloat(p[3]):0;r(m).vertexNormals.push({x:y,y:S,z:C})}function l(p,m){var T=p.length-1;if(!(T<3)){for(var y={group:o,material:g,vertices:[]},S=0;S<T;S++){var C=p[S+1],R=C.split("/"),I=R.length;if(!(I<1||I>3)){var L=0,w=0,O=0;L=parseInt(R[0],10),I>1&&R[1]!==""&&(w=parseInt(R[1],10)),I>2&&(O=parseInt(R[2],10)),L!==0&&(L<0&&(L=r(m).vertices.length+1+L),w-=1,L-=1,O-=1,y.vertices.push({textureCoordsIndex:w,vertexIndex:L,vertexNormalIndex:O}))}}r(m).faces.push(y)}}function f(p,m){p.length>=2&&m.materialLibraries.push(p[1])}function u(p){p.length>=2&&(g=p[1])}var d=function(p,m){m===void 0&&(m=!0),E=m;var T={materials:{},materialLibraries:[],models:[]};o="",g="";for(var y=p.split(`
`),S=0;S<y.length;S++){var C=a(y[S]),R=C.replace(/\s\s+/g," ").trim().split(" ");switch(R[0].toLowerCase()){case"o":s(R,T);break;case"g":e(R);break;case"v":n(R,T);break;case"vt":h(R,T);break;case"vn":i(R,T);break;case"f":l(R,T);break;case"mtllib":f(R,T);break;case"usemtl":u(R);break}}return T};v.exports=d},61485:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37589),g=function(a){for(var r={},s=a.split(`
`),e="",n=0;n<s.length;n++){var h=s[n].trim();if(!(h.indexOf("#")===0||h==="")){var i=h.replace(/\s\s+/g," ").trim().split(" ");switch(i[0].toLowerCase()){case"newmtl":{e=i[1];break}case"kd":{var l=Math.floor(i[1]*255),f=i.length>=2?Math.floor(i[2]*255):l,u=i.length>=3?Math.floor(i[3]*255):l;r[e]=o(l,f,u);break}}}}return r};v.exports=g},92570:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r,s;if(g===void 0&&a===void 0){var e=t.getInCenter();r=e.x,s=e.y}var n=Math.cos(o),h=Math.sin(o),i=t.vertex1,l=t.vertex2,f=t.vertex3,u=i.x-r,d=i.y-s;i.set(u*n-d*h+r,u*h+d*n+s),u=l.x-r,d=l.y-s,l.set(u*n-d*h+r,u*h+d*n+s),u=f.x-r,d=f.y-s,f.set(u*n-d*h+r,u*h+d*n+s)};v.exports=E},39318:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(70554),a=t(25836),r=new o({Extends:a,initialize:function(e,n,h,i,l,f,u,d,p,m){f===void 0&&(f=16777215),u===void 0&&(u=1),d===void 0&&(d=0),p===void 0&&(p=0),m===void 0&&(m=0),a.call(this,e,n,h),this.vx=0,this.vy=0,this.vz=0,this.nx=d,this.ny=p,this.nz=m,this.u=i,this.v=l,this.color=f,this.alpha=u,this.tx=0,this.ty=0,this.ta=0,this.tu=i,this.tv=l},setUVs:function(s,e){return this.u=s,this.v=e,this.tu=s,this.tv=e,this},scrollUV:function(s,e){return this.tu+=s,this.tv+=e,this},scaleUV:function(s,e){return this.tu=this.u*s,this.tv=this.v*e,this},transformCoordinatesLocal:function(s,e,n,h){var i=this.x,l=this.y,f=this.z,u=s.val,d=i*u[0]+l*u[4]+f*u[8]+u[12],p=i*u[1]+l*u[5]+f*u[9]+u[13],m=i*u[2]+l*u[6]+f*u[10]+u[14],T=i*u[3]+l*u[7]+f*u[11]+u[15];this.vx=d/T*e,this.vy=-(p/T)*n,h<=0?this.vz=m/T:this.vz=-(m/T)},resize:function(s,e,n,h,i,l){return this.x=s,this.y=e,this.vx=this.x*n,this.vy=-this.y*h,this.vz=0,i<.5?this.vx+=n*(.5-i):i>.5&&(this.vx-=n*(i-.5)),l<.5?this.vy+=h*(.5-l):l>.5&&(this.vy-=h*(l-.5)),this},update:function(s,e,n,h,i,l,f,u){var d=this.vx*s+this.vy*n+i,p=this.vx*e+this.vy*h+l;return f&&(d=Math.round(d),p=Math.round(p)),this.tx=d,this.ty=p,this.ta=this.alpha*u,this},load:function(s,e,n,h,i){return s[++n]=this.tx,s[++n]=this.ty,s[++n]=this.tu,s[++n]=this.tv,s[++n]=h,s[++n]=i,e[++n]=g.getTintAppendFloatAlpha(this.color,this.ta),n}});v.exports=r},73090:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Face:t(83997),GenerateGridVerts:t(48803),GenerateObjVerts:t(34684),GenerateVerts:t(92515),ParseObj:t(85048),ParseObjMaterial:t(61485),RotateFace:t(92570),Vertex:t(39318)};v.exports=o},96550:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))};v.exports=E},99706:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a){return new o(a.x,a.y)};v.exports=g},68010:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.setTo(t.x,t.y)};v.exports=E},27814:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x===o.x&&t.y===o.y};v.exports=E},73565:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))};v.exports=E},87555:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){if(r===void 0&&(r=new o),!Array.isArray(a))throw new Error("GetCentroid points argument must be an array");var s=a.length;if(s<1)throw new Error("GetCentroid points array must not be empty");if(s===1)r.x=a[0].x,r.y=a[0].y;else{for(var e=0;e<s;e++)r.x+=a[e].x,r.y+=a[e].y;r.x/=s,r.y/=s}return r};v.exports=g},28793:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)};v.exports=E},44405:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x*t.x+t.y*t.y};v.exports=E},20873:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,r){r===void 0&&(r=new o);for(var s=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,h=Number.POSITIVE_INFINITY,i=0;i<a.length;i++){var l=a[i];l.x>s&&(s=l.x),l.x<e&&(e=l.x),l.y>n&&(n=l.y),l.y<h&&(h=l.y)}return r.x=e,r.y=h,r.width=s-e,r.height=n-h,r};v.exports=g},26152:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r,s,e){return s===void 0&&(s=0),e===void 0&&(e=new o),e.x=a.x+(r.x-a.x)*s,e.y=a.y+(r.y-a.y)*s,e};v.exports=g},55767:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.setTo(t.y,t.x)};v.exports=E},79432:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){return r===void 0&&(r=new o),r.setTo(-a.x,-a.y)};v.exports=g},2141:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23777),a=new o({initialize:function(s,e){s===void 0&&(s=0),e===void 0&&(e=s),this.type=g.POINT,this.x=s,this.y=e},setTo:function(r,s){return r===void 0&&(r=0),s===void 0&&(s=r),this.x=r,this.y=s,this}});v.exports=a},72930:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(44405),a=function(r,s,e){e===void 0&&(e=new o);var n=r.x*s.x+r.y*s.y,h=n/g(s);return h!==0&&(e.x=h*s.x,e.y=h*s.y),e};v.exports=a},62880:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r,s){s===void 0&&(s=new o);var e=a.x*r.x+a.y*r.y;return e!==0&&(s.x=e*r.x,s.y=e*r.y),s};v.exports=g},15093:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28793),g=function(a,r){if(a.x!==0||a.y!==0){var s=o(a);a.x/=s,a.y/=s}return a.x*=r,a.y*=r,a};v.exports=g},43711:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141);o.Ceil=t(96550),o.Clone=t(99706),o.CopyFrom=t(68010),o.Equals=t(27814),o.Floor=t(73565),o.GetCentroid=t(87555),o.GetMagnitude=t(28793),o.GetMagnitudeSq=t(44405),o.GetRectangleFromPoints=t(20873),o.Interpolate=t(26152),o.Invert=t(55767),o.Negative=t(79432),o.Project=t(72930),o.ProjectUnit=t(62880),o.SetMagnitude=t(15093),v.exports=o},12306:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25717),g=function(a){return new o(a.points)};v.exports=g},63814:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){for(var a=!1,r=-1,s=t.points.length-1;++r<t.points.length;s=r){var e=t.points[r].x,n=t.points[r].y,h=t.points[s].x,i=t.points[s].y;(n<=g&&g<i||i<=g&&g<n)&&o<(h-e)*(g-n)/(i-n)+e&&(a=!a)}return a};v.exports=E},99338:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63814),g=function(a,r){return o(a,r.x,r.y)};v.exports=g},94811:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(U,W,F){F=F||2;var G=W&&W.length,z=G?W[0]*F:U.length,Y=t(U,0,z,F,!0),$=[];if(!Y||Y.next===Y.prev)return $;var j,Z,q,_,tt,nt,at;if(G&&(Y=n(U,W,Y,F)),U.length>80*F){j=q=U[0],Z=_=U[1];for(var st=F;st<z;st+=F)tt=U[st],nt=U[st+1],tt<j&&(j=tt),nt<Z&&(Z=nt),tt>q&&(q=tt),nt>_&&(_=nt);at=Math.max(q-j,_-Z),at=at!==0?32767/at:0}return g(Y,$,F,j,Z,at,0),$}function t(U,W,F,G,z){var Y,$;if(z===Q(U,W,F,G)>0)for(Y=W;Y<F;Y+=G)$=b(Y,U[Y],U[Y+1],$);else for(Y=F-G;Y>=W;Y-=G)$=b(Y,U[Y],U[Y+1],$);return $&&C($,$.next)&&(X($),$=$.next),$}function o(U,W){if(!U)return U;W||(W=U);var F=U,G;do if(G=!1,!F.steiner&&(C(F,F.next)||S(F.prev,F,F.next)===0)){if(X(F),F=W=F.prev,F===F.next)break;G=!0}else F=F.next;while(G||F!==W);return W}function g(U,W,F,G,z,Y,$){if(U){!$&&Y&&u(U,G,z,Y);for(var j=U,Z,q;U.prev!==U.next;){if(Z=U.prev,q=U.next,Y?r(U,G,z,Y):a(U)){W.push(Z.i/F|0),W.push(U.i/F|0),W.push(q.i/F|0),X(U),U=q.next,j=q.next;continue}if(U=q,U===j){$?$===1?(U=s(o(U),W,F),g(U,W,F,G,z,Y,2)):$===2&&e(U,W,F,G,z,Y):g(o(U),W,F,G,z,Y,1);break}}}}function a(U){var W=U.prev,F=U,G=U.next;if(S(W,F,G)>=0)return!1;for(var z=W.x,Y=F.x,$=G.x,j=W.y,Z=F.y,q=G.y,_=z<Y?z<$?z:$:Y<$?Y:$,tt=j<Z?j<q?j:q:Z<q?Z:q,nt=z>Y?z>$?z:$:Y>$?Y:$,at=j>Z?j>q?j:q:Z>q?Z:q,st=G.next;st!==W;){if(st.x>=_&&st.x<=nt&&st.y>=tt&&st.y<=at&&T(z,j,Y,Z,$,q,st.x,st.y)&&S(st.prev,st,st.next)>=0)return!1;st=st.next}return!0}function r(U,W,F,G){var z=U.prev,Y=U,$=U.next;if(S(z,Y,$)>=0)return!1;for(var j=z.x,Z=Y.x,q=$.x,_=z.y,tt=Y.y,nt=$.y,at=j<Z?j<q?j:q:Z<q?Z:q,st=_<tt?_<nt?_:nt:tt<nt?tt:nt,lt=j>Z?j>q?j:q:Z>q?Z:q,vt=_>tt?_>nt?_:nt:tt>nt?tt:nt,mt=p(at,st,W,F,G),pt=p(lt,vt,W,F,G),ot=U.prevZ,ct=U.nextZ;ot&&ot.z>=mt&&ct&&ct.z<=pt;){if(ot.x>=at&&ot.x<=lt&&ot.y>=st&&ot.y<=vt&&ot!==z&&ot!==$&&T(j,_,Z,tt,q,nt,ot.x,ot.y)&&S(ot.prev,ot,ot.next)>=0||(ot=ot.prevZ,ct.x>=at&&ct.x<=lt&&ct.y>=st&&ct.y<=vt&&ct!==z&&ct!==$&&T(j,_,Z,tt,q,nt,ct.x,ct.y)&&S(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;ot&&ot.z>=mt;){if(ot.x>=at&&ot.x<=lt&&ot.y>=st&&ot.y<=vt&&ot!==z&&ot!==$&&T(j,_,Z,tt,q,nt,ot.x,ot.y)&&S(ot.prev,ot,ot.next)>=0)return!1;ot=ot.prevZ}for(;ct&&ct.z<=pt;){if(ct.x>=at&&ct.x<=lt&&ct.y>=st&&ct.y<=vt&&ct!==z&&ct!==$&&T(j,_,Z,tt,q,nt,ct.x,ct.y)&&S(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function s(U,W,F){var G=U;do{var z=G.prev,Y=G.next.next;!C(z,Y)&&R(z,G,G.next,Y)&&O(z,Y)&&O(Y,z)&&(W.push(z.i/F|0),W.push(G.i/F|0),W.push(Y.i/F|0),X(G),X(G.next),G=U=Y),G=G.next}while(G!==U);return o(G)}function e(U,W,F,G,z,Y){var $=U;do{for(var j=$.next.next;j!==$.prev;){if($.i!==j.i&&y($,j)){var Z=V($,j);$=o($,$.next),Z=o(Z,Z.next),g($,W,F,G,z,Y,0),g(Z,W,F,G,z,Y,0);return}j=j.next}$=$.next}while($!==U)}function n(U,W,F,G){var z=[],Y,$,j,Z,q;for(Y=0,$=W.length;Y<$;Y++)j=W[Y]*G,Z=Y<$-1?W[Y+1]*G:U.length,q=t(U,j,Z,G,!1),q===q.next&&(q.steiner=!0),z.push(m(q));for(z.sort(h),Y=0;Y<z.length;Y++)F=i(z[Y],F);return F}function h(U,W){return U.x-W.x}function i(U,W){var F=l(U,W);if(!F)return W;var G=V(F,U);return o(G,G.next),o(F,F.next)}function l(U,W){var F=W,G=U.x,z=U.y,Y=-1/0,$;do{if(z<=F.y&&z>=F.next.y&&F.next.y!==F.y){var j=F.x+(z-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(j<=G&&j>Y&&(Y=j,$=F.x<F.next.x?F:F.next,j===G))return $}F=F.next}while(F!==W);if(!$)return null;var Z=$,q=$.x,_=$.y,tt=1/0,nt;F=$;do G>=F.x&&F.x>=q&&G!==F.x&&T(z<_?G:Y,z,q,_,z<_?Y:G,z,F.x,F.y)&&(nt=Math.abs(z-F.y)/(G-F.x),O(F,U)&&(nt<tt||nt===tt&&(F.x>$.x||F.x===$.x&&f($,F)))&&($=F,tt=nt)),F=F.next;while(F!==Z);return $}function f(U,W){return S(U.prev,U,W.prev)<0&&S(W.next,U,U.next)<0}function u(U,W,F,G){var z=U;do z.z===0&&(z.z=p(z.x,z.y,W,F,G)),z.prevZ=z.prev,z.nextZ=z.next,z=z.next;while(z!==U);z.prevZ.nextZ=null,z.prevZ=null,d(z)}function d(U){var W,F,G,z,Y,$,j,Z,q=1;do{for(F=U,U=null,Y=null,$=0;F;){for($++,G=F,j=0,W=0;W<q&&(j++,G=G.nextZ,!!G);W++);for(Z=q;j>0||Z>0&&G;)j!==0&&(Z===0||!G||F.z<=G.z)?(z=F,F=F.nextZ,j--):(z=G,G=G.nextZ,Z--),Y?Y.nextZ=z:U=z,z.prevZ=Y,Y=z;F=G}Y.nextZ=null,q*=2}while($>1);return U}function p(U,W,F,G,z){return U=(U-F)*z|0,W=(W-G)*z|0,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,W=(W|W<<8)&16711935,W=(W|W<<4)&252645135,W=(W|W<<2)&858993459,W=(W|W<<1)&1431655765,U|W<<1}function m(U){var W=U,F=U;do(W.x<F.x||W.x===F.x&&W.y<F.y)&&(F=W),W=W.next;while(W!==U);return F}function T(U,W,F,G,z,Y,$,j){return(z-$)*(W-j)>=(U-$)*(Y-j)&&(U-$)*(G-j)>=(F-$)*(W-j)&&(F-$)*(Y-j)>=(z-$)*(G-j)}function y(U,W){return U.next.i!==W.i&&U.prev.i!==W.i&&!w(U,W)&&(O(U,W)&&O(W,U)&&B(U,W)&&(S(U.prev,U,W.prev)||S(U,W.prev,W))||C(U,W)&&S(U.prev,U,U.next)>0&&S(W.prev,W,W.next)>0)}function S(U,W,F){return(W.y-U.y)*(F.x-W.x)-(W.x-U.x)*(F.y-W.y)}function C(U,W){return U.x===W.x&&U.y===W.y}function R(U,W,F,G){var z=L(S(U,W,F)),Y=L(S(U,W,G)),$=L(S(F,G,U)),j=L(S(F,G,W));return!!(z!==Y&&$!==j||z===0&&I(U,F,W)||Y===0&&I(U,G,W)||$===0&&I(F,U,G)||j===0&&I(F,W,G))}function I(U,W,F){return W.x<=Math.max(U.x,F.x)&&W.x>=Math.min(U.x,F.x)&&W.y<=Math.max(U.y,F.y)&&W.y>=Math.min(U.y,F.y)}function L(U){return U>0?1:U<0?-1:0}function w(U,W){var F=U;do{if(F.i!==U.i&&F.next.i!==U.i&&F.i!==W.i&&F.next.i!==W.i&&R(F,F.next,U,W))return!0;F=F.next}while(F!==U);return!1}function O(U,W){return S(U.prev,U,U.next)<0?S(U,W,U.next)>=0&&S(U,U.prev,W)>=0:S(U,W,U.prev)<0||S(U,U.next,W)<0}function B(U,W){var F=U,G=!1,z=(U.x+W.x)/2,Y=(U.y+W.y)/2;do F.y>Y!=F.next.y>Y&&F.next.y!==F.y&&z<(F.next.x-F.x)*(Y-F.y)/(F.next.y-F.y)+F.x&&(G=!G),F=F.next;while(F!==U);return G}function V(U,W){var F=new K(U.i,U.x,U.y),G=new K(W.i,W.x,W.y),z=U.next,Y=W.prev;return U.next=W,W.prev=U,F.next=z,z.prev=F,G.next=F,F.prev=G,Y.next=G,G.prev=Y,G}function b(U,W,F,G){var z=new K(U,W,F);return G?(z.next=G.next,z.prev=G,G.next.prev=z,G.next=z):(z.prev=z,z.next=z),z}function X(U){U.next.prev=U.prev,U.prev.next=U.next,U.prevZ&&(U.prevZ.nextZ=U.nextZ),U.nextZ&&(U.nextZ.prevZ=U.prevZ)}function K(U,W,F){this.i=U,this.x=W,this.y=F,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}E.deviation=function(U,W,F,G){var z=W&&W.length,Y=z?W[0]*F:U.length,$=Math.abs(Q(U,0,Y,F));if(z)for(var j=0,Z=W.length;j<Z;j++){var q=W[j]*F,_=j<Z-1?W[j+1]*F:U.length;$-=Math.abs(Q(U,q,_,F))}var tt=0;for(j=0;j<G.length;j+=3){var nt=G[j]*F,at=G[j+1]*F,st=G[j+2]*F;tt+=Math.abs((U[nt]-U[st])*(U[at+1]-U[nt+1])-(U[nt]-U[at])*(U[st+1]-U[nt+1]))}return $===0&&tt===0?0:Math.abs((tt-$)/$)};function Q(U,W,F,G){for(var z=0,Y=W,$=F-G;Y<F;Y+=G)z+=(U[$]-U[Y])*(U[Y+1]+U[$+1]),$=Y;return z}E.flatten=function(U){for(var W=U[0][0].length,F={vertices:[],holes:[],dimensions:W},G=0,z=0;z<U.length;z++){for(var Y=0;Y<U[z].length;Y++)for(var $=0;$<W;$++)F.vertices.push(U[z][Y][$]);z>0&&(G+=U[z-1].length,F.holes.push(G))}return F},v.exports=E},13829:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,r){r===void 0&&(r=new o);for(var s=1/0,e=1/0,n=-s,h=-e,i,l=0;l<a.points.length;l++)i=a.points[l],s=Math.min(s,i.x),e=Math.min(e,i.y),n=Math.max(n,i.x),h=Math.max(h,i.y);return r.x=s,r.y=e,r.width=n-s,r.height=h-e,r};v.exports=g},26173:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=[]);for(var g=0;g<t.points.length;g++)o.push(t.points[g].x),o.push(t.points[g].y);return o};v.exports=E},9564:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(23031),a=t(30052),r=function(s,e,n,h){h===void 0&&(h=[]);var i=s.points,l=a(s);!e&&n>0&&(e=l/n);for(var f=0;f<e;f++)for(var u=l*(f/e),d=0,p=0;p<i.length;p++){var m=i[p],T=i[(p+1)%i.length],y=new g(m.x,m.y,T.x,T.y),S=o(y);if(u<d||u>d+S){d+=S;continue}var C=y.getPoint((u-d)/S);h.push(C);break}return h};v.exports=r},30052:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(23031),a=function(r){for(var s=r.points,e=0,n=0;n<s.length;n++){var h=s[n],i=s[(n+1)%s.length],l=new g(h.x,h.y,i.x,i.y);e+=o(l)}return e};v.exports=a},25717:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(63814),a=t(9564),r=t(23777),s=new o({initialize:function(n){this.type=r.POLYGON,this.area=0,this.points=[],n&&this.setTo(n)},contains:function(e,n){return g(this,e,n)},setTo:function(e){if(this.area=0,this.points=[],typeof e=="string"&&(e=e.split(" ")),!Array.isArray(e))return this;for(var n,h=0;h<e.length;h++)n={x:0,y:0},typeof e[h]=="number"||typeof e[h]=="string"?(n.x=parseFloat(e[h]),n.y=parseFloat(e[h+1]),h++):Array.isArray(e[h])?(n.x=e[h][0],n.y=e[h][1]):(n.x=e[h].x,n.y=e[h].y),this.points.push(n);return this.calculateArea(),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var e=0,n,h,i=0;i<this.points.length-1;i++)n=this.points[i],h=this.points[i+1],e+=(h.x-n.x)*(n.y+h.y);return n=this.points[0],h=this.points[this.points.length-1],e+=(n.x-h.x)*(h.y+n.y),this.area=-e*.5,this.area},getPoints:function(e,n,h){return a(this,e,n,h)}});v.exports=s},8133:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.points.reverse(),t};v.exports=E},29524:v=>{function E(s,e){var n=s.x-e.x,h=s.y-e.y;return n*n+h*h}function t(s,e,n){var h=e.x,i=e.y,l=n.x-h,f=n.y-i;if(l!==0||f!==0){var u=((s.x-h)*l+(s.y-i)*f)/(l*l+f*f);u>1?(h=n.x,i=n.y):u>0&&(h+=l*u,i+=f*u)}return l=s.x-h,f=s.y-i,l*l+f*f}function o(s,e){for(var n=s[0],h=[n],i,l=1,f=s.length;l<f;l++)i=s[l],E(i,n)>e&&(h.push(i),n=i);return n!==i&&h.push(i),h}function g(s,e,n,h,i){for(var l=h,f,u=e+1;u<n;u++){var d=t(s[u],s[e],s[n]);d>l&&(f=u,l=d)}l>h&&(f-e>1&&g(s,e,f,h,i),i.push(s[f]),n-f>1&&g(s,f,n,h,i))}function a(s,e){var n=s.length-1,h=[s[0]];return g(s,0,n,e,h),h.push(s[n]),h}var r=function(s,e,n){e===void 0&&(e=1),n===void 0&&(n=!1);var h=s.points;if(h.length>2){var i=e*e;n||(h=o(h,i)),s.setTo(a(h,i))}return s};v.exports=r},5469:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Igor Ognichenko <ognichenko.igor@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(o,g){return o[0]=g[0],o[1]=g[1],o},t=function(o){var g,a=[],r=o.points;for(g=0;g<r.length;g++)a.push([r[g].x,r[g].y]);var s=[];for(a.length>0&&s.push(E([0,0],a[0])),g=0;g<a.length-1;g++){var e=a[g],n=a[g+1],h=e[0],i=e[1],l=n[0],f=n[1];s.push([.85*h+.15*l,.85*i+.15*f]),s.push([.15*h+.85*l,.15*i+.85*f])}return a.length>1&&s.push(E([0,0],a[a.length-1])),o.setTo(s)};v.exports=t},24709:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){for(var a=t.points,r=0;r<a.length;r++)a[r].x+=o,a[r].y+=g;return t};v.exports=E},58423:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25717);o.Clone=t(12306),o.Contains=t(63814),o.ContainsPoint=t(99338),o.Earcut=t(94811),o.GetAABB=t(13829),o.GetNumberArray=t(26173),o.GetPoints=t(9564),o.Perimeter=t(30052),o.Reverse=t(8133),o.Simplify=t(29524),o.Smooth=t(5469),o.Translate=t(24709),v.exports=o},62224:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.width*t.height};v.exports=E},98615:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t};v.exports=E},31688:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t};v.exports=E},67502:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.x=o-t.width/2,t.y=g-t.height/2,t};v.exports=E},65085:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a){return new o(a.x,a.y,a.width,a.height)};v.exports=g},37303:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.width<=0||t.height<=0?!1:t.x<=o&&t.x+t.width>=o&&t.y<=g&&t.y+t.height>=g};v.exports=E},96553:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37303),g=function(a,r){return o(a,r.x,r.y)};v.exports=g},70273:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.width*o.height>t.width*t.height?!1:o.x>t.x&&o.x<t.right&&o.right>t.x&&o.right<t.right&&o.y>t.y&&o.y<t.bottom&&o.bottom>t.y&&o.bottom<t.bottom};v.exports=E},43459:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.setTo(t.x,t.y,t.width,t.height)};v.exports=E},77493:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=[]),o.push({x:t.x,y:t.y}),o.push({x:t.right,y:t.y}),o.push({x:t.right,y:t.bottom}),o.push({x:t.x,y:t.bottom}),o};v.exports=E},9219:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x===o.x&&t.y===o.y&&t.width===o.width&&t.height===o.height};v.exports=E},53751:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8249),g=function(a,r){var s=o(a);return s<o(r)?a.setSize(r.height*s,r.height):a.setSize(r.width,r.width/s),a.setPosition(r.centerX-a.width/2,r.centerY-a.height/2)};v.exports=g},16088:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(8249),g=function(a,r){var s=o(a);return s>o(r)?a.setSize(r.height*s,r.height):a.setSize(r.width,r.width/s),a.setPosition(r.centerX-a.width/2,r.centerY-a.height/2)};v.exports=g},80774:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t};v.exports=E},83859:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t};v.exports=E},19217:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(36383),a=function(r,s){if(s===void 0&&(s=new o),r.length===0)return s;for(var e=Number.MAX_VALUE,n=Number.MAX_VALUE,h=g.MIN_SAFE_INTEGER,i=g.MIN_SAFE_INTEGER,l,f,u,d=0;d<r.length;d++)l=r[d],Array.isArray(l)?(f=l[0],u=l[1]):(f=l.x,u=l.y),e=Math.min(e,f),n=Math.min(n,u),h=Math.max(h,f),i=Math.max(i,u);return s.x=e,s.y=n,s.width=h-e,s.height=i-n,s};v.exports=a},9477:(v,E,t)=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,r,s,e,n){return n===void 0&&(n=new o),n.setTo(Math.min(a,s),Math.min(r,e),Math.abs(a-s),Math.abs(r-e))};v.exports=g},8249:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.height===0?NaN:t.width/t.height};v.exports=E},27165:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){return r===void 0&&(r=new o),r.x=a.centerX,r.y=a.centerY,r};v.exports=g},20812:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13019),g=t(2141),a=function(r,s,e){if(e===void 0&&(e=new g),s<=0||s>=1)return e.x=r.x,e.y=r.y,e;var n=o(r)*s;return s>.5?(n-=r.width+r.height,n<=r.width?(e.x=r.right-n,e.y=r.bottom):(e.x=r.x,e.y=r.bottom-(n-r.width))):n<=r.width?(e.x=r.x+n,e.y=r.y):(e.x=r.right,e.y=r.y+(n-r.width)),e};v.exports=a},34819:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20812),g=t(13019),a=function(r,s,e,n){n===void 0&&(n=[]),!s&&e>0&&(s=g(r)/e);for(var h=0;h<s;h++){var i=h/s;n.push(o(r,i))}return n};v.exports=a},51313:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){return r===void 0&&(r=new o),r.x=a.width,r.y=a.height,r};v.exports=g},86091:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(67502),g=function(a,r,s){var e=a.centerX,n=a.centerY;return a.setSize(a.width+r*2,a.height+s*2),o(a,e,n)};v.exports=g},53951:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(59996),a=function(r,s,e){return e===void 0&&(e=new o),g(r,s)?(e.x=Math.max(r.x,s.x),e.y=Math.max(r.y,s.y),e.width=Math.min(r.right,s.right)-e.x,e.height=Math.min(r.bottom,s.bottom)-e.y):e.setEmpty(),e};v.exports=a},14649:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13019),g=t(2141),a=function(r,s,e,n){if(n===void 0&&(n=[]),!s&&!e)return n;s?e=Math.round(o(r)/s):s=o(r)/e;for(var h=r.x,i=r.y,l=0,f=0;f<e;f++)switch(n.push(new g(h,i)),l){case 0:h+=s,h>=r.right&&(l=1,i+=h-r.right,h=r.right);break;case 1:i+=s,i>=r.bottom&&(l=2,h-=i-r.bottom,i=r.bottom);break;case 2:h-=s,h<=r.left&&(l=3,i-=r.left-h,h=r.left);break;case 3:i-=s,i<=r.top&&(l=0,i=r.top);break}return n};v.exports=a},33595:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){for(var g=t.x,a=t.right,r=t.y,s=t.bottom,e=0;e<o.length;e++)g=Math.min(g,o[e].x),a=Math.max(a,o[e].x),r=Math.min(r,o[e].y),s=Math.max(s,o[e].y);return t.x=g,t.y=r,t.width=a-g,t.height=s-r,t};v.exports=E},20074:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=Math.min(t.x,o.x),a=Math.max(t.right,o.right);t.x=g,t.width=a-g;var r=Math.min(t.y,o.y),s=Math.max(t.bottom,o.bottom);return t.y=r,t.height=s-r,t};v.exports=E},92171:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=Math.min(t.x,o),r=Math.max(t.right,o);t.x=a,t.width=r-a;var s=Math.min(t.y,g),e=Math.max(t.bottom,g);return t.y=s,t.height=e-s,t};v.exports=E},42981:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.x+=o,t.y+=g,t};v.exports=E},46907:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x+=o.x,t.y+=o.y,t};v.exports=E},60170:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x<o.right&&t.right>o.x&&t.y<o.bottom&&t.bottom>o.y};v.exports=E},13019:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return 2*(t.width+t.height)};v.exports=E},85133:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(39506),a=function(r,s,e){e===void 0&&(e=new o),s=g(s);var n=Math.sin(s),h=Math.cos(s),i=h>0?r.width/2:r.width/-2,l=n>0?r.height/2:r.height/-2;return Math.abs(i*n)<Math.abs(l*h)?l=i*n/h:i=l*h/n,e.x=i+r.centerX,e.y=l+r.centerY,e};v.exports=a},26597:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){return r===void 0&&(r=new o),r.x=a.x+Math.random()*a.width,r.y=a.y+Math.random()*a.height,r};v.exports=g},86470:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(70273),a=t(2141),r=function(s,e,n){if(n===void 0&&(n=new a),g(s,e))switch(o(0,3)){case 0:n.x=s.x+Math.random()*(e.right-s.x),n.y=s.y+Math.random()*(e.top-s.y);break;case 1:n.x=e.x+Math.random()*(s.right-e.x),n.y=e.bottom+Math.random()*(s.bottom-e.bottom);break;case 2:n.x=s.x+Math.random()*(e.x-s.x),n.y=e.y+Math.random()*(s.bottom-e.y);break;case 3:n.x=e.right+Math.random()*(s.right-e.right),n.y=s.y+Math.random()*(e.bottom-s.y);break}return n};v.exports=r},87841:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37303),a=t(20812),r=t(34819),s=t(23777),e=t(23031),n=t(26597),h=new o({initialize:function(l,f,u,d){l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=0),this.type=s.RECTANGLE,this.x=l,this.y=f,this.width=u,this.height=d},contains:function(i,l){return g(this,i,l)},getPoint:function(i,l){return a(this,i,l)},getPoints:function(i,l,f){return r(this,i,l,f)},getRandomPoint:function(i){return n(this,i)},setTo:function(i,l,f,u){return this.x=i,this.y=l,this.width=f,this.height=u,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(i,l){return l===void 0&&(l=i),this.x=i,this.y=l,this},setSize:function(i,l){return l===void 0&&(l=i),this.width=i,this.height=l,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(i){return i===void 0&&(i=new e),i.setTo(this.x,this.y,this.right,this.y),i},getLineB:function(i){return i===void 0&&(i=new e),i.setTo(this.right,this.y,this.right,this.bottom),i},getLineC:function(i){return i===void 0&&(i=new e),i.setTo(this.right,this.bottom,this.x,this.bottom),i},getLineD:function(i){return i===void 0&&(i=new e),i.setTo(this.x,this.bottom,this.x,this.y),i},left:{get:function(){return this.x},set:function(i){i>=this.right?this.width=0:this.width=this.right-i,this.x=i}},right:{get:function(){return this.x+this.width},set:function(i){i<=this.x?this.width=0:this.width=i-this.x}},top:{get:function(){return this.y},set:function(i){i>=this.bottom?this.height=0:this.height=this.bottom-i,this.y=i}},bottom:{get:function(){return this.y+this.height},set:function(i){i<=this.y?this.height=0:this.height=i-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});v.exports=h},94845:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.width===o.width&&t.height===o.height};v.exports=E},31730:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return g===void 0&&(g=o),t.width*=o,t.height*=g,t};v.exports=E},36899:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=function(a,r,s){s===void 0&&(s=new o);var e=Math.min(a.x,r.x),n=Math.min(a.y,r.y),h=Math.max(a.right,r.right)-e,i=Math.max(a.bottom,r.bottom)-n;return s.setTo(e,n,h,i)};v.exports=g},93232:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841);o.Area=t(62224),o.Ceil=t(98615),o.CeilAll=t(31688),o.CenterOn=t(67502),o.Clone=t(65085),o.Contains=t(37303),o.ContainsPoint=t(96553),o.ContainsRect=t(70273),o.CopyFrom=t(43459),o.Decompose=t(77493),o.Equals=t(9219),o.FitInside=t(53751),o.FitOutside=t(16088),o.Floor=t(80774),o.FloorAll=t(83859),o.FromPoints=t(19217),o.FromXY=t(9477),o.GetAspectRatio=t(8249),o.GetCenter=t(27165),o.GetPoint=t(20812),o.GetPoints=t(34819),o.GetSize=t(51313),o.Inflate=t(86091),o.Intersection=t(53951),o.MarchingAnts=t(14649),o.MergePoints=t(33595),o.MergeRect=t(20074),o.MergeXY=t(92171),o.Offset=t(42981),o.OffsetPoint=t(46907),o.Overlaps=t(60170),o.Perimeter=t(13019),o.PerimeterPoint=t(85133),o.Random=t(26597),o.RandomOutside=t(86470),o.SameDimensions=t(94845),o.Scale=t(31730),o.Union=t(36899),v.exports=o},41658:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=t.x1,g=t.y1,a=t.x2,r=t.y2,s=t.x3,e=t.y3;return Math.abs(((s-o)*(r-g)-(a-o)*(e-g))/2)};v.exports=E},39208:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483),g=function(a,r,s){var e=s*(Math.sqrt(3)/2),n=a,h=r,i=a+s/2,l=r+e,f=a-s/2,u=r+e;return new o(n,h,i,l,f,u)};v.exports=g},39545:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(94811),g=t(16483),a=function(r,s,e,n,h){s===void 0&&(s=null),e===void 0&&(e=1),n===void 0&&(n=1),h===void 0&&(h=[]);for(var i=o(r,s),l,f,u,d,p,m,T,y,S,C=0;C<i.length;C+=3)l=i[C],f=i[C+1],u=i[C+2],d=r[l*2]*e,p=r[l*2+1]*n,m=r[f*2]*e,T=r[f*2+1]*n,y=r[u*2]*e,S=r[u*2+1]*n,h.push(new g(d,p,m,T,y,S));return h};v.exports=a},90301:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483),g=function(a,r,s,e){e===void 0&&(e=s);var n=a,h=r,i=a,l=r-e,f=a+s,u=r;return new o(n,h,i,l,f,u)};v.exports=g},23707:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97523),g=t(13584),a=function(r,s,e,n){n===void 0&&(n=o);var h=n(r),i=s-h.x,l=e-h.y;return g(r,i,l)};v.exports=a},97523:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){return r===void 0&&(r=new o),r.x=(a.x1+a.x2+a.x3)/3,r.y=(a.y1+a.y2+a.y3)/3,r};v.exports=g},24951:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099);function g(r,s,e,n){return r*n-s*e}var a=function(r,s){s===void 0&&(s=new o);var e=r.x3,n=r.y3,h=r.x1-e,i=r.y1-n,l=r.x2-e,f=r.y2-n,u=2*g(h,i,l,f),d=g(i,h*h+i*i,f,l*l+f*f),p=g(h,h*h+i*i,l,l*l+f*f);return s.x=e-d/u,s.y=n+p/u,s};v.exports=a},85614:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=function(a,r){r===void 0&&(r=new o);var s=a.x1,e=a.y1,n=a.x2,h=a.y2,i=a.x3,l=a.y3,f=n-s,u=h-e,d=i-s,p=l-e,m=f*(s+n)+u*(e+h),T=d*(s+i)+p*(e+l),y=2*(f*(l-h)-u*(i-n)),S,C;if(Math.abs(y)<1e-6){var R=Math.min(s,n,i),I=Math.min(e,h,l);S=(Math.max(s,n,i)-R)*.5,C=(Math.max(e,h,l)-I)*.5,r.x=R+S,r.y=I+C,r.radius=Math.sqrt(S*S+C*C)}else r.x=(p*m-u*T)/y,r.y=(f*T-d*m)/y,S=r.x-s,C=r.y-e,r.radius=Math.sqrt(S*S+C*C);return r};v.exports=g},74422:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483),g=function(a){return new o(a.x1,a.y1,a.x2,a.y2,a.x3,a.y3)};v.exports=g},10690:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=t.x3-t.x1,r=t.y3-t.y1,s=t.x2-t.x1,e=t.y2-t.y1,n=o-t.x1,h=g-t.y1,i=a*a+r*r,l=a*s+r*e,f=a*n+r*h,u=s*s+e*e,d=s*n+e*h,p=i*u-l*l,m=p===0?0:1/p,T=(u*f-l*d)*m,y=(i*d-l*f)*m;return T>=0&&y>=0&&T+y<1};v.exports=E},48653:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g===void 0&&(g=!1),a===void 0&&(a=[]);for(var r=t.x3-t.x1,s=t.y3-t.y1,e=t.x2-t.x1,n=t.y2-t.y1,h=r*r+s*s,i=r*e+s*n,l=e*e+n*n,f=h*l-i*i,u=f===0?0:1/f,d,p,m,T,y,S,C=t.x1,R=t.y1,I=0;I<o.length&&(m=o[I].x-C,T=o[I].y-R,y=r*m+s*T,S=e*m+n*T,d=(l*y-i*S)*u,p=(h*S-i*y)*u,!(d>=0&&p>=0&&d+p<1&&(a.push({x:o[I].x,y:o[I].y}),g)));I++);return a};v.exports=E},96006:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10690),g=function(a,r){return o(a,r.x,r.y)};v.exports=g},71326:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)};v.exports=E},71694:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=[]),o.push({x:t.x1,y:t.y1}),o.push({x:t.x2,y:t.y2}),o.push({x:t.x3,y:t.y3}),o};v.exports=E},33522:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.x1===o.x1&&t.y1===o.y1&&t.x2===o.x2&&t.y2===o.y2&&t.x3===o.x3&&t.y3===o.y3};v.exports=E},20437:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=t(35001),a=function(r,s,e){e===void 0&&(e=new o);var n=r.getLineA(),h=r.getLineB(),i=r.getLineC();if(s<=0||s>=1)return e.x=n.x1,e.y=n.y1,e;var l=g(n),f=g(h),u=g(i),d=l+f+u,p=d*s,m=0;return p<l?(m=p/l,e.x=n.x1+(n.x2-n.x1)*m,e.y=n.y1+(n.y2-n.y1)*m):p>l+f?(p-=l+f,m=p/u,e.x=i.x1+(i.x2-i.x1)*m,e.y=i.y1+(i.y2-i.y1)*m):(p-=l,m=p/f,e.x=h.x1+(h.x2-h.x1)*m,e.y=h.y1+(h.y2-h.y1)*m),e};v.exports=a},80672:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=t(2141),a=function(r,s,e,n){n===void 0&&(n=[]);var h=r.getLineA(),i=r.getLineB(),l=r.getLineC(),f=o(h),u=o(i),d=o(l),p=f+u+d;!s&&e>0&&(s=p/e);for(var m=0;m<s;m++){var T=p*(m/s),y=0,S=new g;T<f?(y=T/f,S.x=h.x1+(h.x2-h.x1)*y,S.y=h.y1+(h.y2-h.y1)*y):T>f+u?(T-=f+u,y=T/d,S.x=l.x1+(l.x2-l.x1)*y,S.y=l.y1+(l.y2-l.y1)*y):(T-=f,y=T/u,S.x=i.x1+(i.x2-i.x1)*y,S.y=i.y1+(i.y2-i.y1)*y),n.push(S)}return n};v.exports=a},39757:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141);function g(r,s,e,n){var h=r-e,i=s-n,l=h*h+i*i;return Math.sqrt(l)}var a=function(r,s){s===void 0&&(s=new o);var e=r.x1,n=r.y1,h=r.x2,i=r.y2,l=r.x3,f=r.y3,u=g(l,f,h,i),d=g(e,n,l,f),p=g(h,i,e,n),m=u+d+p;return s.x=(e*u+h*d+l*p)/m,s.y=(n*u+i*d+f*p)/m,s};v.exports=a},13584:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t.x1+=o,t.y1+=g,t.x2+=o,t.y2+=g,t.x3+=o,t.y3+=g,t};v.exports=E},1376:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35001),g=function(a){var r=a.getLineA(),s=a.getLineB(),e=a.getLineC();return o(r)+o(s)+o(e)};v.exports=g},90260:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2141),g=function(a,r){r===void 0&&(r=new o);var s=a.x2-a.x1,e=a.y2-a.y1,n=a.x3-a.x1,h=a.y3-a.y1,i=Math.random(),l=Math.random();return i+l>=1&&(i=1-i,l=1-l),r.x=a.x1+(s*i+n*l),r.y=a.y1+(e*i+h*l),r};v.exports=g},52172:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99614),g=t(39757),a=function(r,s){var e=g(r);return o(r,e.x,e.y,s)};v.exports=a},49907:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99614),g=function(a,r,s){return o(a,r.x,r.y,s)};v.exports=g},99614:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=Math.cos(a),s=Math.sin(a),e=t.x1-o,n=t.y1-g;return t.x1=e*r-n*s+o,t.y1=e*s+n*r+g,e=t.x2-o,n=t.y2-g,t.x2=e*r-n*s+o,t.y2=e*s+n*r+g,e=t.x3-o,n=t.y3-g,t.x3=e*r-n*s+o,t.y3=e*s+n*r+g,t};v.exports=E},16483:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(10690),a=t(20437),r=t(80672),s=t(23777),e=t(23031),n=t(90260),h=new o({initialize:function(l,f,u,d,p,m){l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=0),p===void 0&&(p=0),m===void 0&&(m=0),this.type=s.TRIANGLE,this.x1=l,this.y1=f,this.x2=u,this.y2=d,this.x3=p,this.y3=m},contains:function(i,l){return g(this,i,l)},getPoint:function(i,l){return a(this,i,l)},getPoints:function(i,l,f){return r(this,i,l,f)},getRandomPoint:function(i){return n(this,i)},setTo:function(i,l,f,u,d,p){return i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=0),p===void 0&&(p=0),this.x1=i,this.y1=l,this.x2=f,this.y2=u,this.x3=d,this.y3=p,this},getLineA:function(i){return i===void 0&&(i=new e),i.setTo(this.x1,this.y1,this.x2,this.y2),i},getLineB:function(i){return i===void 0&&(i=new e),i.setTo(this.x2,this.y2,this.x3,this.y3),i},getLineC:function(i){return i===void 0&&(i=new e),i.setTo(this.x3,this.y3,this.x1,this.y1),i},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(i){var l=0;this.x1<=this.x2&&this.x1<=this.x3?l=this.x1-i:this.x2<=this.x1&&this.x2<=this.x3?l=this.x2-i:l=this.x3-i,this.x1-=l,this.x2-=l,this.x3-=l}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(i){var l=0;this.x1>=this.x2&&this.x1>=this.x3?l=this.x1-i:this.x2>=this.x1&&this.x2>=this.x3?l=this.x2-i:l=this.x3-i,this.x1-=l,this.x2-=l,this.x3-=l}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(i){var l=0;this.y1<=this.y2&&this.y1<=this.y3?l=this.y1-i:this.y2<=this.y1&&this.y2<=this.y3?l=this.y2-i:l=this.y3-i,this.y1-=l,this.y2-=l,this.y3-=l}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(i){var l=0;this.y1>=this.y2&&this.y1>=this.y3?l=this.y1-i:this.y2>=this.y1&&this.y2>=this.y3?l=this.y2-i:l=this.y3-i,this.y1-=l,this.y2-=l,this.y3-=l}}});v.exports=h},84435:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(16483);o.Area=t(41658),o.BuildEquilateral=t(39208),o.BuildFromPolygon=t(39545),o.BuildRight=t(90301),o.CenterOn=t(23707),o.Centroid=t(97523),o.CircumCenter=t(24951),o.CircumCircle=t(85614),o.Clone=t(74422),o.Contains=t(10690),o.ContainsArray=t(48653),o.ContainsPoint=t(96006),o.CopyFrom=t(71326),o.Decompose=t(71694),o.Equals=t(33522),o.GetPoint=t(20437),o.GetPoints=t(80672),o.InCenter=t(39757),o.Perimeter=t(1376),o.Offset=t(13584),o.Random=t(90260),o.Rotate=t(52172),o.RotateAroundPoint=t(49907),o.RotateAroundXY=t(99614),v.exports=o},74457:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return{gameObject:t,enabled:!0,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:o,hitAreaCallback:g,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}};v.exports=E},84409:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return function(g,a,r,s){var e=t.getPixelAlpha(a,r,s.texture.key,s.frame.name);return e&&e>=o}};v.exports=E},7003:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(93301),a=t(50792),r=t(8214),s=t(8443),e=t(78970),n=t(85098),h=t(42515),i=t(36210),l=t(61340),f=t(85955),u=new o({initialize:function(p,m){this.game=p,this.scaleManager,this.canvas,this.config=m,this.enabled=!0,this.events=new a,this.isOver=!0,this.defaultCursor="",this.keyboard=m.inputKeyboard?new e(this):null,this.mouse=m.inputMouse?new n(this):null,this.touch=m.inputTouch?new i(this):null,this.pointers=[],this.pointersTotal=m.inputActivePointers,m.inputTouch&&this.pointersTotal===1&&(this.pointersTotal=2);for(var T=0;T<=this.pointersTotal;T++){var y=new h(this,T);y.smoothFactor=m.inputSmoothFactor,this.pointers.push(y)}this.mousePointer=m.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new l,this._tempMatrix2=new l,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],p.events.once(s.BOOT,this.boot,this)},boot:function(){var d=this.game,p=d.events;this.canvas=d.canvas,this.scaleManager=d.scale,this.events.emit(r.MANAGER_BOOT),p.on(s.PRE_RENDER,this.preRender,this),p.once(s.DESTROY,this.destroy,this)},setCanvasOver:function(d){this.isOver=!0,this.events.emit(r.GAME_OVER,d)},setCanvasOut:function(d){this.isOver=!1,this.events.emit(r.GAME_OUT,d)},preRender:function(){var d=this.game.loop.now,p=this.game.loop.delta,m=this.game.scene.getScenes(!0,!0);this.time=d,this.events.emit(r.MANAGER_UPDATE);for(var T=0;T<m.length;T++){var y=m[T];if(y.sys.input&&y.sys.input.updatePoll(d,p)&&this.globalTopOnly)return}},setDefaultCursor:function(d){this.defaultCursor=d,this.canvas.style.cursor!==d&&(this.canvas.style.cursor=d)},setCursor:function(d){d.cursor&&(this.canvas.style.cursor=d.cursor)},resetCursor:function(d){d.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(d){d===void 0&&(d=1);var p=[];this.pointersTotal+d>10&&(d=10-this.pointersTotal);for(var m=0;m<d;m++){var T=this.pointers.length,y=new h(this,T);y.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(y),this.pointersTotal++,p.push(y)}return p},updateInputPlugins:function(d,p){var m=this.game.scene.getScenes(!1,!0);this._tempSkip=!1;for(var T=0;T<m.length;T++){var y=m[T];if(y.sys.input){var S=y.sys.input.update(d,p);if(S&&this.globalTopOnly||this._tempSkip)return}}},onTouchStart:function(d){for(var p=this.pointers,m=[],T=0;T<d.changedTouches.length;T++)for(var y=d.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=p[S];if(!C.active){C.touchstart(y,d),this.activePointer=C,m.push(C);break}}this.updateInputPlugins(g.TOUCH_START,m)},onTouchMove:function(d){for(var p=this.pointers,m=[],T=0;T<d.changedTouches.length;T++)for(var y=d.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=p[S];if(C.active&&C.identifier===y.identifier){var R=document.elementFromPoint(y.clientX,y.clientY),I=R===this.canvas;!this.isOver&&I?this.setCanvasOver(d):this.isOver&&!I&&this.setCanvasOut(d),this.isOver&&(C.touchmove(y,d),this.activePointer=C,m.push(C));break}}this.updateInputPlugins(g.TOUCH_MOVE,m)},onTouchEnd:function(d){for(var p=this.pointers,m=[],T=0;T<d.changedTouches.length;T++)for(var y=d.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=p[S];if(C.active&&C.identifier===y.identifier){C.touchend(y,d),m.push(C);break}}this.updateInputPlugins(g.TOUCH_END,m)},onTouchCancel:function(d){for(var p=this.pointers,m=[],T=0;T<d.changedTouches.length;T++)for(var y=d.changedTouches[T],S=1;S<this.pointersTotal;S++){var C=p[S];if(C.active&&C.identifier===y.identifier){C.touchcancel(y,d),m.push(C);break}}this.updateInputPlugins(g.TOUCH_CANCEL,m)},onMouseDown:function(d){var p=this.mousePointer;p.down(d),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(g.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(d){var p=this.mousePointer;p.move(d),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(g.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(d){var p=this.mousePointer;p.up(d),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(g.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(d){var p=this.mousePointer;p.wheel(d),this.activePointer=p,this.updateInputPlugins(g.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(d){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(r.POINTERLOCK_CHANGE,d,p)},inputCandidate:function(d,p){var m=d.input;if(!m||!m.enabled||!d.willRender(p))return!1;var T=!0,y=d.parentContainer;if(y)do{if(!y.willRender(p)){T=!1;break}y=y.parentContainer}while(y);return T},hitTest:function(d,p,m,T){T===void 0&&(T=this._tempHitTest);var y=this._tempPoint,S=m.scrollX,C=m.scrollY;T.length=0;var R=d.x,I=d.y;m.getWorldPoint(R,I,y),d.worldX=y.x,d.worldY=y.y;for(var L={x:0,y:0},w=this._tempMatrix,O=this._tempMatrix2,B=0;B<p.length;B++){var V=p[B];if(this.inputCandidate(V,m)){var b=y.x+S*V.scrollFactorX-S,X=y.y+C*V.scrollFactorY-C;V.parentContainer?(V.getWorldTransformMatrix(w,O),w.applyInverse(b,X,L)):f(b,X,V.x,V.y,V.rotation,V.scaleX,V.scaleY,L),this.pointWithinHitArea(V,L.x,L.y)&&T.push(V)}}return T},pointWithinHitArea:function(d,p,m){p+=d.displayOriginX,m+=d.displayOriginY;var T=d.input;return T&&T.hitAreaCallback(T.hitArea,p,m,d)?(T.localX=p,T.localY=m,!0):!1},pointWithinInteractiveObject:function(d,p,m){return d.hitArea?(p+=d.gameObject.displayOriginX,m+=d.gameObject.displayOriginY,d.localX=p,d.localY=m,d.hitAreaCallback(d.hitArea,p,m,d)):!1},transformPointer:function(d,p,m,T){var y=d.position,S=d.prevPosition;S.x=y.x,S.y=y.y;var C=this.scaleManager.transformX(p),R=this.scaleManager.transformY(m),I=d.smoothFactor;!T||I===0?(y.x=C,y.y=R):(y.x=C*I+S.x*(1-I),y.y=R*I+S.y*(1-I))},destroy:function(){this.events.removeAllListeners(),this.game.events.off(s.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var d=0;d<this.pointers.length;d++)this.pointers[d].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});v.exports=u},48205:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(96503),g=t(87902),a=t(83419),r=t(93301),s=t(74457),e=t(84409),n=t(20339),h=t(8497),i=t(81154),l=t(8214),f=t(50792),u=t(95540),d=t(23777),p=t(89639),m=t(41212),T=t(37277),y=t(87841),S=t(37303),C=t(44594),R=t(16483),I=t(10690),L=new a({Extends:f,initialize:function(O){f.call(this),this.scene=O,this.systems=O.sys,this.settings=O.sys.settings,this.manager=O.sys.game.input,this.pluginEvents=new f,this.enabled=!0,this.displayList,this.cameras,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var B={cancelled:!1};this._eventContainer={stopPropagation:function(){B.cancelled=!0}},this._eventData=B,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,O.sys.events.once(C.BOOT,this.boot,this),O.sys.events.on(C.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(C.DESTROY,this.destroy,this),this.pluginEvents.emit(l.BOOT)},start:function(){var w=this.systems.events;w.on(C.TRANSITION_START,this.transitionIn,this),w.on(C.TRANSITION_OUT,this.transitionOut,this),w.on(C.TRANSITION_COMPLETE,this.transitionComplete,this),w.on(C.PRE_UPDATE,this.preUpdate,this),w.once(C.SHUTDOWN,this.shutdown,this),this.manager.events.on(l.GAME_OUT,this.onGameOut,this),this.manager.events.on(l.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(l.START)},onGameOver:function(w){this.isActive()&&this.emit(l.GAME_OVER,w.timeStamp,w)},onGameOut:function(w){this.isActive()&&this.emit(l.GAME_OUT,w.timeStamp,w)},preUpdate:function(){this.pluginEvents.emit(l.PRE_UPDATE);var w=this._pendingRemoval,O=this._pendingInsertion,B=w.length,V=O.length;if(!(B===0&&V===0)){for(var b=this._list,X=0;X<B;X++){var K=w[X],Q=b.indexOf(K);Q>-1&&(b.splice(Q,1),this.clear(K,!0))}this._pendingRemoval.length=0,this._list=b.concat(O.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.canInput()},updatePoll:function(w,O){if(!this.isActive())return!1;if(this.pluginEvents.emit(l.UPDATE,w,O),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var B,V=this.manager,b=V.pointers,X=V.pointersTotal;for(B=0;B<X;B++)b[B].updateMotion();if(this._list.length===0)return!1;var K=this.pollRate;if(K===-1)return!1;if(K>0)if(this._pollTimer-=O,this._pollTimer<0)this._pollTimer=this.pollRate;else return!1;var Q=!1;for(B=0;B<X;B++){var U=0,W=b[B];this._tempZones=[],this._temp=this.hitTestPointer(W),this.sortGameObjects(this._temp,W),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),U+=this.processOverOutEvents(W),this.getDragState(W)===2&&this.processDragThresholdEvent(W,w),U>0&&(Q=!0)}return Q},update:function(w,O){if(!this.isActive())return!1;for(var B=O.length,V=!1,b=0;b<B;b++){var X=0,K=O[b];switch(this._tempZones=[],this._temp=this.hitTestPointer(K),this.sortGameObjects(this._temp,K),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),w){case r.MOUSE_DOWN:X+=this.processDragDownEvent(K),X+=this.processDownEvents(K),X+=this.processOverOutEvents(K);break;case r.MOUSE_UP:X+=this.processDragUpEvent(K),X+=this.processUpEvents(K),X+=this.processOverOutEvents(K);break;case r.TOUCH_START:X+=this.processDragDownEvent(K),X+=this.processDownEvents(K),X+=this.processOverEvents(K);break;case r.TOUCH_END:case r.TOUCH_CANCEL:X+=this.processDragUpEvent(K),X+=this.processUpEvents(K),X+=this.processOutEvents(K);break;case r.MOUSE_MOVE:case r.TOUCH_MOVE:X+=this.processDragMoveEvent(K),X+=this.processMoveEvents(K),X+=this.processOverOutEvents(K);break;case r.MOUSE_WHEEL:X+=this.processWheelEvent(K);break}X>0&&(V=!0)}return this._updatedThisFrame=!0,V},clear:function(w,O){O===void 0&&(O=!1),this.disable(w);var B=w.input;B&&(this.removeDebug(w),this.manager.resetCursor(B),B.gameObject=void 0,B.target=void 0,B.hitArea=void 0,B.hitAreaCallback=void 0,B.callbackContext=void 0,w.input=null),O||this.queueForRemoval(w);var V=this._draggable.indexOf(w);return V>-1&&this._draggable.splice(V,1),w},disable:function(w){var O=w.input;O&&(O.enabled=!1,O.dragState=0);for(var B=this._drag,V=this._over,b=this.manager,X=0,K;X<b.pointersTotal;X++)K=B[X].indexOf(w),K>-1&&B[X].splice(K,1),K=V[X].indexOf(w),K>-1&&V[X].splice(K,1);return this},enable:function(w,O,B,V){return V===void 0&&(V=!1),w.input?w.input.enabled=!0:this.setHitArea(w,O,B),w.input&&V&&!w.input.dropZone&&(w.input.dropZone=V),this},hitTestPointer:function(w){for(var O=this.cameras.getCamerasBelowPointer(w),B=0;B<O.length;B++){for(var V=O[B],b=this.manager.hitTest(w,this._list,V),X=0;X<b.length;X++){var K=b[X];K.input.dropZone&&this._tempZones.push(K)}if(b.length>0)return w.camera=V,b}return w.camera=O[0],[]},processDownEvents:function(w){var O=0,B=this._temp,V=this._eventData,b=this._eventContainer;V.cancelled=!1;for(var X=!1,K=0;K<B.length;K++){var Q=B[K];if(!(!Q.input||!Q.input.enabled)){if(O++,Q.emit(l.GAMEOBJECT_POINTER_DOWN,w,Q.input.localX,Q.input.localY,b),V.cancelled||!Q.input||!Q.input.enabled){X=!0;break}if(this.emit(l.GAMEOBJECT_DOWN,w,Q,b),V.cancelled||!Q.input){X=!0;break}}}return!X&&this.manager&&(w.downElement===this.manager.game.canvas?this.emit(l.POINTER_DOWN,w,B):this.emit(l.POINTER_DOWN_OUTSIDE,w)),O},getDragState:function(w){return this._dragState[w.id]},setDragState:function(w,O){this._dragState[w.id]=O},processDragThresholdEvent:function(w,O){var B=!1,V=this.dragTimeThreshold,b=this.dragDistanceThreshold;if((b>0&&n(w.x,w.y,w.downX,w.downY)>=b||V>0&&O>=w.downTime+V)&&(B=!0),B)return this.setDragState(w,3),this.processDragStartList(w)},processDragStartList:function(w){if(this.getDragState(w)!==3)return 0;for(var O=this._drag[w.id],B=0;B<O.length;B++){var V=O[B],b=V.input;b.dragState=2,b.dragStartX=V.x,b.dragStartY=V.y,b.dragStartXGlobal=w.worldX,b.dragStartYGlobal=w.worldY,b.dragX=b.dragStartXGlobal-b.dragStartX,b.dragY=b.dragStartYGlobal-b.dragStartY,V.emit(l.GAMEOBJECT_DRAG_START,w,b.dragX,b.dragY),this.emit(l.DRAG_START,w,V)}return this.setDragState(w,4),O.length},processDragDownEvent:function(w){var O=this._temp;if(this._draggable.length===0||O.length===0||!w.primaryDown||this.getDragState(w)!==0)return 0;this.setDragState(w,1);for(var B=[],V=0;V<O.length;V++){var b=O[V];b.input.draggable&&b.input.dragState===0&&B.push(b)}return B.length===0?(this.setDragState(w,0),0):(B.length>1&&(this.sortGameObjects(B,w),this.topOnly&&B.splice(1)),this._drag[w.id]=B,this.dragDistanceThreshold===0&&this.dragTimeThreshold===0?(this.setDragState(w,3),this.processDragStartList(w)):(this.setDragState(w,2),0))},processDragMoveEvent:function(w){if(this.getDragState(w)===2&&this.processDragThresholdEvent(w,this.manager.game.loop.now),this.getDragState(w)!==4)return 0;for(var O=this._tempZones,B=this._drag[w.id],V=0;V<B.length;V++){var b=B[V],X=b.input,K=X.target;if(K){var Q=O.indexOf(K);Q===0?(b.emit(l.GAMEOBJECT_DRAG_OVER,w,K),this.emit(l.DRAG_OVER,w,b,K)):Q>0?(b.emit(l.GAMEOBJECT_DRAG_LEAVE,w,K),this.emit(l.DRAG_LEAVE,w,b,K),X.target=O[0],K=X.target,b.emit(l.GAMEOBJECT_DRAG_ENTER,w,K),this.emit(l.DRAG_ENTER,w,b,K)):(b.emit(l.GAMEOBJECT_DRAG_LEAVE,w,K),this.emit(l.DRAG_LEAVE,w,b,K),O[0]?(X.target=O[0],K=X.target,b.emit(l.GAMEOBJECT_DRAG_ENTER,w,K),this.emit(l.DRAG_ENTER,w,b,K)):X.target=null)}else!K&&O[0]&&(X.target=O[0],K=X.target,b.emit(l.GAMEOBJECT_DRAG_ENTER,w,K),this.emit(l.DRAG_ENTER,w,b,K));var U,W;if(!b.parentContainer)U=w.worldX-X.dragX,W=w.worldY-X.dragY;else{var F=w.worldX-X.dragStartXGlobal,G=w.worldY-X.dragStartYGlobal,z=b.getParentRotation(),Y=F*Math.cos(z)+G*Math.sin(z),$=G*Math.cos(z)-F*Math.sin(z);Y*=1/b.parentContainer.scaleX,$*=1/b.parentContainer.scaleY,U=Y+X.dragStartX,W=$+X.dragStartY}b.emit(l.GAMEOBJECT_DRAG,w,U,W),this.emit(l.DRAG,w,b,U,W)}return B.length},processDragUpEvent:function(w){for(var O=this._drag[w.id],B=0;B<O.length;B++){var V=O[B],b=V.input;if(b&&b.dragState===2){b.dragState=0,b.dragX=b.localX-V.displayOriginX,b.dragY=b.localY-V.displayOriginY;var X=!1,K=b.target;K&&(V.emit(l.GAMEOBJECT_DROP,w,K),this.emit(l.DROP,w,V,K),b.target=null,X=!0),V.input&&V.input.enabled&&(V.emit(l.GAMEOBJECT_DRAG_END,w,b.dragX,b.dragY,X),this.emit(l.DRAG_END,w,V,X))}}return this.setDragState(w,0),O.splice(0),0},processMoveEvents:function(w){var O=0,B=this._temp,V=this._eventData,b=this._eventContainer;V.cancelled=!1;for(var X=!1,K=0;K<B.length;K++){var Q=B[K];if(!(!Q.input||!Q.input.enabled)){if(O++,Q.emit(l.GAMEOBJECT_POINTER_MOVE,w,Q.input.localX,Q.input.localY,b),V.cancelled||!Q.input||!Q.input.enabled){X=!0;break}if(this.emit(l.GAMEOBJECT_MOVE,w,Q,b),V.cancelled||!Q.input||!Q.input.enabled){X=!0;break}if(this.topOnly)break}}return X||this.emit(l.POINTER_MOVE,w,B),O},processWheelEvent:function(w){var O=0,B=this._temp,V=this._eventData,b=this._eventContainer;V.cancelled=!1;for(var X=!1,K=w.deltaX,Q=w.deltaY,U=w.deltaZ,W=0;W<B.length;W++){var F=B[W];if(!(!F.input||!F.input.enabled)){if(O++,F.emit(l.GAMEOBJECT_POINTER_WHEEL,w,K,Q,U,b),V.cancelled||!F.input||!F.input.enabled){X=!0;break}if(this.emit(l.GAMEOBJECT_WHEEL,w,F,K,Q,U,b),V.cancelled||!F.input||!F.input.enabled){X=!0;break}}}return X||this.emit(l.POINTER_WHEEL,w,B,K,Q,U),O},processOverEvents:function(w){var O=this._temp,B=0,V=O.length,b=[];if(V>0){var X=this.manager,K=this._eventData,Q=this._eventContainer;K.cancelled=!1;for(var U=!1,W=0;W<V;W++){var F=O[W];if(!(!F.input||!F.input.enabled)){if(b.push(F),X.setCursor(F.input),F.emit(l.GAMEOBJECT_POINTER_OVER,w,F.input.localX,F.input.localY,Q),B++,K.cancelled||!F.input||!F.input.enabled){U=!0;break}if(this.emit(l.GAMEOBJECT_OVER,w,F,Q),K.cancelled||!F.input||!F.input.enabled){U=!0;break}}}U||this.emit(l.POINTER_OVER,w,b)}return this._over[w.id]=b,B},processOutEvents:function(w){var O=this._over[w.id],B=0,V=O.length;if(V>0){var b=this.manager,X=this._eventData,K=this._eventContainer;X.cancelled=!1;var Q=!1;this.sortGameObjects(O,w);for(var U=0;U<V;U++){var W=O[U];if(W=O[U],!(!W.input||!W.input.enabled)){if(b.resetCursor(W.input),W.emit(l.GAMEOBJECT_POINTER_OUT,w,K),B++,X.cancelled||!W.input||!W.input.enabled){Q=!0;break}if(this.emit(l.GAMEOBJECT_OUT,w,W,K),X.cancelled||!W.input||!W.input.enabled){Q=!0;break}Q||this.emit(l.POINTER_OUT,w,O)}}this._over[w.id]=[]}return B},processOverOutEvents:function(w){var O=this._temp,B,V,b=[],X=[],K=[],Q=this._over[w.id],U=this._drag[w.id],W=this.manager;for(B=0;B<Q.length;B++)V=Q[B],O.indexOf(V)===-1&&U.indexOf(V)===-1?b.push(V):K.push(V);for(B=0;B<O.length;B++)V=O[B],Q.indexOf(V)===-1&&X.push(V);var F=b.length,G=0,z=this._eventData,Y=this._eventContainer;z.cancelled=!1;var $=!1;if(F>0){for(this.sortGameObjects(b,w),B=0;B<F;B++)if(V=b[B],!(!V.input||!V.input.enabled)){if(W.resetCursor(V.input),V.emit(l.GAMEOBJECT_POINTER_OUT,w,Y),G++,z.cancelled||!V.input||!V.input.enabled){$=!0;break}if(this.emit(l.GAMEOBJECT_OUT,w,V,Y),z.cancelled||!V.input||!V.input.enabled){$=!0;break}}$||this.emit(l.POINTER_OUT,w,b)}if(F=X.length,z.cancelled=!1,$=!1,F>0){for(this.sortGameObjects(X,w),B=0;B<F;B++)if(V=X[B],!(!V.input||!V.input.enabled)){if(W.setCursor(V.input),V.emit(l.GAMEOBJECT_POINTER_OVER,w,V.input.localX,V.input.localY,Y),G++,z.cancelled||!V.input||!V.input.enabled){$=!0;break}if(this.emit(l.GAMEOBJECT_OVER,w,V,Y),z.cancelled||!V.input||!V.input.enabled){$=!0;break}}$||this.emit(l.POINTER_OVER,w,X)}return Q=K.concat(X),this._over[w.id]=this.sortGameObjects(Q,w),G},processUpEvents:function(w){var O=this._temp,B=this._eventData,V=this._eventContainer;B.cancelled=!1;for(var b=!1,X=0;X<O.length;X++){var K=O[X];if(!(!K.input||!K.input.enabled)){if(K.emit(l.GAMEOBJECT_POINTER_UP,w,K.input.localX,K.input.localY,V),B.cancelled||!K.input||!K.input.enabled){b=!0;break}if(this.emit(l.GAMEOBJECT_UP,w,K,V),B.cancelled||!K.input||!K.input.enabled){b=!0;break}}}return!b&&this.manager&&(w.upElement===this.manager.game.canvas?this.emit(l.POINTER_UP,w,O):this.emit(l.POINTER_UP_OUTSIDE,w)),O.length},queueForInsertion:function(w){return this._pendingInsertion.indexOf(w)===-1&&this._list.indexOf(w)===-1&&this._pendingInsertion.push(w),this},queueForRemoval:function(w){return this._pendingRemoval.push(w),this},setDraggable:function(w,O){O===void 0&&(O=!0),Array.isArray(w)||(w=[w]);for(var B=0;B<w.length;B++){var V=w[B];V.input.draggable=O;var b=this._draggable.indexOf(V);O&&b===-1?this._draggable.push(V):!O&&b>-1&&this._draggable.splice(b,1)}return this},makePixelPerfect:function(w){w===void 0&&(w=1);var O=this.systems.textures;return e(O,w)},setHitArea:function(w,O,B){if(O===void 0)return this.setHitAreaFromTexture(w);Array.isArray(w)||(w=[w]);var V=!1,b=!1,X=!1,K=!1,Q=!1,U=!0;if(m(O)&&Object.keys(O).length){var W=O,F=w.some(function(j){return j.hasOwnProperty("faces")});if(!F){O=u(W,"hitArea",null),B=u(W,"hitAreaCallback",null),Q=u(W,"pixelPerfect",!1);var G=u(W,"alphaTolerance",1);Q&&(O={},B=this.makePixelPerfect(G))}V=u(W,"draggable",!1),b=u(W,"dropZone",!1),X=u(W,"cursor",!1),K=u(W,"useHandCursor",!1),(!O||!B)&&(this.setHitAreaFromTexture(w),U=!1)}else typeof O=="function"&&!B&&(B=O,O={});for(var z=0;z<w.length;z++){var Y=w[z];if(Q&&Y.type==="Container"){console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");continue}var $=Y.input?Y.input:s(Y,O,B);$.customHitArea=U,$.dropZone=b,$.cursor=K?"pointer":X,Y.input=$,V&&this.setDraggable(Y),this.queueForInsertion(Y)}return this},setHitAreaCircle:function(w,O,B,V,b){b===void 0&&(b=g);var X=new o(O,B,V);return this.setHitArea(w,X,b)},setHitAreaEllipse:function(w,O,B,V,b,X){X===void 0&&(X=i);var K=new h(O,B,V,b);return this.setHitArea(w,K,X)},setHitAreaFromTexture:function(w,O){O===void 0&&(O=S),Array.isArray(w)||(w=[w]);for(var B=0;B<w.length;B++){var V=w[B],b=V.frame,X=0,K=0;if(V.width?(X=V.width,K=V.height):b&&(X=b.realWidth,K=b.realHeight),V.type==="Container"&&(X===0||K===0)){console.warn("Container.setInteractive must specify a Shape or call setSize() first");continue}X!==0&&K!==0&&(V.input=s(V,new y(0,0,X,K),O),this.queueForInsertion(V))}return this},setHitAreaRectangle:function(w,O,B,V,b,X){X===void 0&&(X=S);var K=new y(O,B,V,b);return this.setHitArea(w,K,X)},setHitAreaTriangle:function(w,O,B,V,b,X,K,Q){Q===void 0&&(Q=I);var U=new R(O,B,V,b,X,K);return this.setHitArea(w,U,Q)},enableDebug:function(w,O){O===void 0&&(O=65280);var B=w.input;if(!B||!B.hitArea)return this;var V=B.hitArea,b=V.type,X=B.hitAreaDebug,K=this.systems.add,Q=this.systems.updateList;X&&(Q.remove(X),X.destroy(),X=null);var U=0,W=0;switch(b){case d.CIRCLE:X=K.arc(0,0,V.radius),U=V.x-V.radius,W=V.y-V.radius;break;case d.ELLIPSE:X=K.ellipse(0,0,V.width,V.height),U=V.x-V.width/2,W=V.y-V.height/2;break;case d.LINE:X=K.line(0,0,V.x1,V.y1,V.x2,V.y2);break;case d.POLYGON:X=K.polygon(0,0,V.points);break;case d.RECTANGLE:X=K.rectangle(0,0,V.width,V.height),U=V.x,W=V.y;break;case d.TRIANGLE:X=K.triangle(0,0,V.x1,V.y1,V.x2,V.y2,V.x3,V.y3);break}return X&&(X.isFilled=!1,X.strokeColor=O,X.preUpdate=function(){X.setVisible(w.visible),X.setStrokeStyle(1/w.scale,X.strokeColor),X.setDisplayOrigin(w.displayOriginX,w.displayOriginY);var F=w.x,G=w.y,z=w.rotation,Y=w.scaleX,$=w.scaleY;if(w.parentContainer){var j=w.getWorldTransformMatrix();F=j.tx,G=j.ty,z=j.rotation,Y=j.scaleX,$=j.scaleY}X.setRotation(z),X.setScale(Y,$),X.setPosition(F+U*Y,G+W*$),X.setScrollFactor(w.scrollFactorX,w.scrollFactorY),X.setDepth(w.depth)},Q.add(X),B.hitAreaDebug=X),this},removeDebug:function(w){var O=w.input;if(O&&O.hitAreaDebug){var B=O.hitAreaDebug;B.destroy(),O.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(w){return this.pollRate=w,this._pollTimer=0,this},setGlobalTopOnly:function(w){return this.manager.globalTopOnly=w,this},setTopOnly:function(w){return this.topOnly=w,this},sortGameObjects:function(w,O){if(w.length<2||!O.camera)return w;var B=O.camera.renderList;return w.sort(function(V,b){var X=Math.max(B.indexOf(V),0),K=Math.max(B.indexOf(b),0);return K-X})},sortDropZones:function(w){return w.length<2?w:(this.scene.sys.depthSort(),w.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(w,O){if(!w.parentContainer&&!O.parentContainer)return this.displayList.getIndex(O)-this.displayList.getIndex(w);if(w.parentContainer===O.parentContainer)return O.parentContainer.getIndex(O)-w.parentContainer.getIndex(w);if(w.parentContainer===O)return-1;if(O.parentContainer===w)return 1;for(var B=w.getIndexList(),V=O.getIndexList(),b=Math.min(B.length,V.length),X=0;X<b;X++){var K=B[X],Q=V[X];if(K!==Q)return Q-K}return V.length-B.length},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(w){return this.manager.addPointer(w)},setDefaultCursor:function(w){return this.manager.setDefaultCursor(w),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(l.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var w=0;w<10;w++)this._drag[w]=[],this._over[w]=[];this.removeAllListeners();var O=this.manager;O.canvas.style.cursor=O.defaultCursor;var B=this.systems.events;B.off(C.TRANSITION_START,this.transitionIn,this),B.off(C.TRANSITION_OUT,this.transitionOut,this),B.off(C.TRANSITION_COMPLETE,this.transitionComplete,this),B.off(C.PRE_UPDATE,this.preUpdate,this),O.events.off(l.GAME_OUT,this.onGameOut,this),O.events.off(l.GAME_OVER,this.onGameOver,this),B.off(C.SHUTDOWN,this.shutdown,this)},resetPointers:function(){for(var w=this.manager.pointers,O=0;O<w.length;O++)w[O].reset()},destroy:function(){this.shutdown(),this.pluginEvents.emit(l.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(C.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});T.register("InputPlugin",L,"input"),v.exports=L},89639:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g={},a={};a.register=function(r,s,e,n,h){g[r]={plugin:s,mapping:e,settingsKey:n,configKey:h}},a.getPlugin=function(r){return g[r]},a.install=function(r){var s=r.scene.sys,e=s.settings.input,n=s.game.config;for(var h in g){var i=g[h].plugin,l=g[h].mapping,f=g[h].settingsKey,u=g[h].configKey;o(e,f,n[u])&&(r[l]=new i(r))}},a.remove=function(r){g.hasOwnProperty(r)&&delete g[r]},v.exports=a},42515:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(31040),g=t(83419),a=t(20339),r=t(43855),s=t(47235),e=t(26099),n=t(25892),h=new g({initialize:function(l,f){this.manager=l,this.id=f,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new e,this.prevPosition=new e,this.midPoint=new e(-1,-1),this.velocity=new e,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=f===0,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(i){var l=i.getWorldPoint(this.x,this.y);return this.worldX=l.x,this.worldY=l.y,this},positionToCamera:function(i,l){return i.getWorldPoint(this.x,this.y,l)},updateMotion:function(){var i=this.position.x,l=this.position.y,f=this.midPoint.x,u=this.midPoint.y;if(!(i===f&&l===u)){var d=s(this.motionFactor,f,i),p=s(this.motionFactor,u,l);r(d,i,.1)&&(d=i),r(p,l,.1)&&(p=l),this.midPoint.set(d,p);var m=i-d,T=l-p;this.velocity.set(m,T),this.angle=o(d,p,i,l),this.distance=Math.sqrt(m*m+T*T)}},up:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),this.buttons===0&&(this.isDown=!1,this.upTime=i.timeStamp,this.wasTouch=!1)},down:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),i.button===0&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),n.macOS&&i.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=i.timeStamp),this.wasTouch=!1},move:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.locked&&(this.movementX=i.movementX||i.mozMovementX||i.webkitMovementX||0,this.movementY=i.movementY||i.mozMovementY||i.webkitMovementY||0),this.moveTime=i.timeStamp,this.wasTouch=!1},wheel:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.deltaX=i.deltaX,this.deltaY=i.deltaY,this.deltaZ=i.deltaZ,this.wasTouch=!1},touchstart:function(i,l){i.pointerId&&(this.pointerId=i.pointerId),this.identifier=i.identifier,this.target=i.target,this.active=!0,this.buttons=1,this.event=l,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=l.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(i,l){this.event=l,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.moveTime=l.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(i,l){this.buttons=0,this.event=l,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(i,l){this.buttons=0,this.event=l,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=l.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return this.buttons===0},leftButtonDown:function(){return!!(this.buttons&1)},rightButtonDown:function(){return!!(this.buttons&2)},middleButtonDown:function(){return!!(this.buttons&4)},backButtonDown:function(){return!!(this.buttons&8)},forwardButtonDown:function(){return!!(this.buttons&16)},leftButtonReleased:function(){return this.button===0&&!this.isDown},rightButtonReleased:function(){return this.button===2&&!this.isDown},middleButtonReleased:function(){return this.button===1&&!this.isDown},backButtonReleased:function(){return this.button===3&&!this.isDown},forwardButtonReleased:function(){return this.button===4&&!this.isDown},getDistance:function(){return this.isDown?a(this.downX,this.downY,this.x,this.y):a(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(i,l){i===void 0&&(i=10),l===void 0&&(l=[]);for(var f=this.prevPosition.x,u=this.prevPosition.y,d=this.position.x,p=this.position.y,m=0;m<i;m++){var T=1/i*m;l[m]={x:s(T,f,d),y:s(T,u,p)}}return l},reset:function(){this.event=null,this.downElement=null,this.upElement=null,this.button=0,this.buttons=0,this.position.set(0,0),this.prevPosition.set(0,0),this.midPoint.set(-1,-1),this.velocity.set(0,0),this.angle=0,this.distance=0,this.worldX=0,this.worldY=0,this.downX=0,this.downY=0,this.upX=0,this.upY=0,this.moveTime=0,this.upTime=0,this.downTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.deltaX=0,this.deltaY=0,this.deltaZ=0,this.active=this.id===0},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},time:{get:function(){return this.event?this.event.timeStamp:0}}});v.exports=h},93301:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8};v.exports=E},7179:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="boot"},85375:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="destroy"},39843:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragend"},23388:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragenter"},16133:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="drag"},27829:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragleave"},53904:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragover"},56058:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragstart"},2642:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="drop"},88171:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameobjectdown"},36147:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragend"},71692:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragenter"},96149:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="drag"},81285:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragleave"},74048:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragover"},21322:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragstart"},49378:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="drop"},86754:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameobjectmove"},86433:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameobjectout"},60709:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameobjectover"},24081:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerdown"},11172:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointermove"},18907:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerout"},95579:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerover"},35368:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerup"},26972:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="wheel"},47078:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameobjectup"},73802:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameobjectwheel"},56718:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameout"},25936:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="gameover"},27503:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="boot"},50852:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="process"},96438:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="update"},59152:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerlockchange"},47777:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerdown"},27957:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerdownoutside"},19444:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointermove"},54251:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerout"},18667:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerover"},27192:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerup"},24652:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pointerupoutside"},45132:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="wheel"},44512:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="preupdate"},15757:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="shutdown"},41637:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="start"},93802:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="update"},8214:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BOOT:t(7179),DESTROY:t(85375),DRAG_END:t(39843),DRAG_ENTER:t(23388),DRAG:t(16133),DRAG_LEAVE:t(27829),DRAG_OVER:t(53904),DRAG_START:t(56058),DROP:t(2642),GAME_OUT:t(56718),GAME_OVER:t(25936),GAMEOBJECT_DOWN:t(88171),GAMEOBJECT_DRAG_END:t(36147),GAMEOBJECT_DRAG_ENTER:t(71692),GAMEOBJECT_DRAG:t(96149),GAMEOBJECT_DRAG_LEAVE:t(81285),GAMEOBJECT_DRAG_OVER:t(74048),GAMEOBJECT_DRAG_START:t(21322),GAMEOBJECT_DROP:t(49378),GAMEOBJECT_MOVE:t(86754),GAMEOBJECT_OUT:t(86433),GAMEOBJECT_OVER:t(60709),GAMEOBJECT_POINTER_DOWN:t(24081),GAMEOBJECT_POINTER_MOVE:t(11172),GAMEOBJECT_POINTER_OUT:t(18907),GAMEOBJECT_POINTER_OVER:t(95579),GAMEOBJECT_POINTER_UP:t(35368),GAMEOBJECT_POINTER_WHEEL:t(26972),GAMEOBJECT_UP:t(47078),GAMEOBJECT_WHEEL:t(73802),MANAGER_BOOT:t(27503),MANAGER_PROCESS:t(50852),MANAGER_UPDATE:t(96438),POINTER_DOWN:t(47777),POINTER_DOWN_OUTSIDE:t(27957),POINTER_MOVE:t(19444),POINTER_OUT:t(54251),POINTER_OVER:t(18667),POINTER_UP:t(27192),POINTER_UP_OUTSIDE:t(24652),POINTER_WHEEL:t(45132),POINTERLOCK_CHANGE:t(59152),PRE_UPDATE:t(44512),SHUTDOWN:t(15757),START:t(41637),UPDATE:t(93802)}},97421:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s){this.pad=r,this.events=r.events,this.index=s,this.value=0,this.threshold=.1},update:function(a){this.value=a},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});v.exports=g},28884:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92734),a=new o({initialize:function(s,e){this.pad=s,this.events=s.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(r){this.value=r;var s=this.pad,e=this.index;r>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(g.BUTTON_DOWN,s,this,r),this.pad.emit(g.GAMEPAD_BUTTON_DOWN,e,r,this)):this.pressed&&(this.pressed=!1,this.events.emit(g.BUTTON_UP,s,this,r),this.pad.emit(g.GAMEPAD_BUTTON_UP,e,r,this))},destroy:function(){this.pad=null,this.events=null}});v.exports=a},99125:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97421),g=t(28884),a=t(83419),r=t(50792),s=t(26099),e=new a({Extends:r,initialize:function(h,i){r.call(this),this.manager=h,this.pad=i,this.id=i.id,this.index=i.index;for(var l=[],f=0;f<i.buttons.length;f++)l.push(new g(this,f));this.buttons=l;var u=[];for(f=0;f<i.axes.length;f++)u.push(new o(this,f));this.axes=u,this.vibration=i.vibrationActuator;var d={value:0,pressed:!1};this._LCLeft=l[14]?l[14]:d,this._LCRight=l[15]?l[15]:d,this._LCTop=l[12]?l[12]:d,this._LCBottom=l[13]?l[13]:d,this._RCLeft=l[2]?l[2]:d,this._RCRight=l[1]?l[1]:d,this._RCTop=l[3]?l[3]:d,this._RCBottom=l[0]?l[0]:d,this._FBLeftTop=l[4]?l[4]:d,this._FBLeftBottom=l[6]?l[6]:d,this._FBRightTop=l[5]?l[5]:d,this._FBRightBottom=l[7]?l[7]:d;var p={value:0};this._HAxisLeft=u[0]?u[0]:p,this._VAxisLeft=u[1]?u[1]:p,this._HAxisRight=u[2]?u[2]:p,this._VAxisRight=u[3]?u[3]:p,this.leftStick=new s,this.rightStick=new s,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(n){return this.axes[n].getValue()},setAxisThreshold:function(n){for(var h=0;h<this.axes.length;h++)this.axes[h].threshold=n},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(n){return this.buttons[n].value},isButtonDown:function(n){return this.buttons[n].pressed},update:function(n){if(!(n.timestamp<this._created)){var h,i=this.buttons,l=n.buttons,f=i.length;for(h=0;h<f;h++)i[h].update(l[h].value);var u=this.axes,d=n.axes;for(f=u.length,h=0;h<f;h++)u[h].update(d[h]);f>=2&&(this.leftStick.set(u[0].getValue(),u[1].getValue()),f>=4&&this.rightStick.set(u[2].getValue(),u[3].getValue()))}},destroy:function(){this.removeAllListeners(),this.manager=null,this.pad=null;var n;for(n=0;n<this.buttons.length;n++)this.buttons[n].destroy();for(n=0;n<this.axes.length;n++)this.axes[n].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});v.exports=e},56654:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(92734),r=t(99125),s=t(35154),e=t(89639),n=t(8214),h=new o({Extends:g,initialize:function(l){g.call(this),this.scene=l.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=l,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,l.pluginEvents.once(n.BOOT,this.boot,this),l.pluginEvents.on(n.START,this.start,this)},boot:function(){var i=this.scene.sys.game,l=this.settings.input,f=i.config;this.enabled=s(l,"gamepad",f.inputGamepad)&&i.device.input.gamepads,this.target=s(l,"gamepad.target",f.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(n.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(n.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var i=this,l=this.target,f=function(u){u.defaultPrevented||!i.isActive()||(i.refreshPads(),i.queue.push(u))};this.onGamepadHandler=f,l.addEventListener("gamepadconnected",f,!1),l.addEventListener("gamepaddisconnected",f,!1),this.sceneInputPlugin.pluginEvents.on(n.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(n.UPDATE,this.update);for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].removeAllListeners()},disconnectAll:function(){for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].pad.connected=!1},refreshPads:function(){var i=navigator.getGamepads();if(!i)this.disconnectAll();else for(var l=this.gamepads,f=0;f<i.length;f++){var u=i[f];if(u){var d=u.id,p=u.index,m=l[p];if(m)m.id!==d?(m.destroy(),l[p]=new r(this,u)):m.update(u);else{var T=new r(this,u);l[p]=T,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=T):this._pad3=T:this._pad2=T:this._pad1=T}}}},getAll:function(){for(var i=[],l=this.gamepads,f=0;f<l.length;f++)l[f]&&i.push(l[f]);return i},getPad:function(i){for(var l=this.gamepads,f=0;f<l.length;f++)if(l[f]&&l[f].index===i)return l[f]},update:function(){if(this.enabled){this.refreshPads();var i=this.queue.length;if(i!==0)for(var l=this.queue.splice(0,i),f=0;f<i;f++){var u=l[f],d=this.getPad(u.gamepad.index);u.type==="gamepadconnected"?this.emit(a.CONNECTED,d,u):u.type==="gamepaddisconnected"&&this.emit(a.DISCONNECTED,d,u)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var i=0;i<this.gamepads.length;i++)this.gamepads[i]&&this.gamepads[i].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});e.register("GamepadPlugin",h,"gamepad","gamepad","inputGamepad"),v.exports=h},89651:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},65294:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},90089:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},64894:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={DUALSHOCK_4:t(65294),SNES_USB:t(89651),XBOX_360:t(90089)}},46008:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="down"},7629:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="up"},42206:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="connected"},86544:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="disconnected"},94784:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="down"},14325:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="up"},92734:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BUTTON_DOWN:t(46008),BUTTON_UP:t(7629),CONNECTED:t(42206),DISCONNECTED:t(86544),GAMEPAD_BUTTON_DOWN:t(94784),GAMEPAD_BUTTON_UP:t(14325)}},48646:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Axis:t(97421),Button:t(28884),Events:t(92734),Gamepad:t(99125),GamepadPlugin:t(56654),Configs:t(64894)}},14350:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(93301),g=t(79291),a={CreatePixelPerfectHandler:t(84409),CreateInteractiveObject:t(74457),Events:t(8214),Gamepad:t(48646),InputManager:t(7003),InputPlugin:t(48205),InputPluginCache:t(89639),Keyboard:t(51442),Mouse:t(87078),Pointer:t(42515),Touch:t(95618)};a=g(!1,a,o),v.exports=a},78970:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(72905),g=t(83419),a=t(8443),r=t(8214),s=t(46032),e=t(29747),n=new g({initialize:function(i){this.manager=i,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=e,this.onKeyUp=e,i.events.once(r.MANAGER_BOOT,this.boot,this)},boot:function(){var h=this.manager.config;this.enabled=h.inputKeyboard,this.target=h.inputKeyboardEventTarget,this.addCapture(h.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(a.POST_STEP,this.postUpdate,this)},startListeners:function(){var h=this;this.onKeyDown=function(l){if(!(l.defaultPrevented||!h.enabled||!h.manager)){h.queue.push(l),h.manager.events.emit(r.MANAGER_PROCESS);var f=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;h.preventDefault&&!f&&h.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}},this.onKeyUp=function(l){if(!(l.defaultPrevented||!h.enabled||!h.manager)){h.queue.push(l),h.manager.events.emit(r.MANAGER_PROCESS);var f=l.altKey||l.ctrlKey||l.shiftKey||l.metaKey;h.preventDefault&&!f&&h.captures.indexOf(l.keyCode)>-1&&l.preventDefault()}};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var h=this.target;h.removeEventListener("keydown",this.onKeyDown,!1),h.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(h){typeof h=="string"&&(h=h.split(",")),Array.isArray(h)||(h=[h]);for(var i=this.captures,l=0;l<h.length;l++){var f=h[l];typeof f=="string"&&(f=s[f.trim().toUpperCase()]),i.indexOf(f)===-1&&i.push(f)}this.preventDefault=i.length>0},removeCapture:function(h){typeof h=="string"&&(h=h.split(",")),Array.isArray(h)||(h=[h]);for(var i=this.captures,l=0;l<h.length;l++){var f=h[l];typeof f=="string"&&(f=s[f.toUpperCase()]),o(i,f)}this.preventDefault=i.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(a.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});v.exports=n},28846:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(95922),r=t(8443),s=t(35154),e=t(8214),n=t(89639),h=t(30472),i=t(46032),l=t(87960),f=t(74600),u=t(44594),d=t(56583),p=new o({Extends:g,initialize:function(T){g.call(this),this.game=T.systems.game,this.scene=T.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=T,this.manager=T.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,T.pluginEvents.once(e.BOOT,this.boot,this),T.pluginEvents.on(e.START,this.start,this)},boot:function(){var m=this.settings.input;this.enabled=s(m,"keyboard",!0);var T=s(m,"keyboard.capture",null);T&&this.addCaptures(T),this.sceneInputPlugin.pluginEvents.once(e.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(e.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(e.SHUTDOWN,this.shutdown,this),this.game.events.on(r.BLUR,this.resetKeys,this),this.scene.sys.events.on(u.PAUSE,this.resetKeys,this),this.scene.sys.events.on(u.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.canInput()},addCapture:function(m){return this.manager.addCapture(m),this},removeCapture:function(m){return this.manager.removeCapture(m),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:i.UP,down:i.DOWN,left:i.LEFT,right:i.RIGHT,space:i.SPACE,shift:i.SHIFT})},addKeys:function(m,T,y){T===void 0&&(T=!0),y===void 0&&(y=!1);var S={};if(typeof m=="string"){m=m.split(",");for(var C=0;C<m.length;C++){var R=m[C].trim();R&&(S[R]=this.addKey(R,T,y))}}else for(var I in m)S[I]=this.addKey(m[I],T,y);return S},addKey:function(m,T,y){T===void 0&&(T=!0),y===void 0&&(y=!1);var S=this.keys;if(m instanceof h){var C=S.indexOf(m);return C>-1?S[C]=m:S[m.keyCode]=m,T&&this.addCapture(m.keyCode),m.setEmitOnRepeat(y),m}return typeof m=="string"&&(m=i[m.toUpperCase()]),S[m]||(S[m]=new h(this,m),T&&this.addCapture(m),S[m].setEmitOnRepeat(y)),S[m]},removeKey:function(m,T,y){T===void 0&&(T=!1),y===void 0&&(y=!1);var S=this.keys,C;if(m instanceof h){var R=S.indexOf(m);R>-1&&(C=this.keys[R],this.keys[R]=void 0)}else typeof m=="string"&&(m=i[m.toUpperCase()]);return S[m]&&(C=S[m],S[m]=void 0),C&&(C.plugin=null,y&&this.removeCapture(C.keyCode),T&&C.destroy()),this},removeAllKeys:function(m,T){m===void 0&&(m=!1),T===void 0&&(T=!1);for(var y=this.keys,S=0;S<y.length;S++){var C=y[S];C&&(y[S]=void 0,T&&this.removeCapture(C.keyCode),m&&C.destroy())}return this},createCombo:function(m,T){return new l(this,m,T)},checkDown:function(m,T){if(T===void 0&&(T=0),this.enabled&&m.isDown){var y=d(this.time-m.timeDown,T);if(y>m._tick)return m._tick=y,!0}return!1},update:function(){var m=this.manager.queue,T=m.length;if(!(!this.isActive()||T===0))for(var y=this.keys,S=0;S<T;S++){var C=m[S],R=C.keyCode,I=y[R],L=!1;C.cancelled===void 0&&(C.cancelled=0,C.stopImmediatePropagation=function(){C.cancelled=1},C.stopPropagation=function(){C.cancelled=-1}),C.cancelled!==-1&&(R===this.prevCode&&C.timeStamp===this.prevTime&&C.type===this.prevType||(this.prevCode=R,this.prevTime=C.timeStamp,this.prevType=C.type,C.type==="keydown"?(I&&(L=I.isDown,I.onDown(C)),!C.cancelled&&(!I||!L)&&(f[R]&&this.emit(a.KEY_DOWN+f[R],C),C.cancelled||this.emit(a.ANY_KEY_DOWN,C))):(I&&I.onUp(C),C.cancelled||(f[R]&&this.emit(a.KEY_UP+f[R],C),C.cancelled||this.emit(a.ANY_KEY_UP,C))),C.cancelled===1&&(C.cancelled=0)))}},resetKeys:function(){for(var m=this.keys,T=0;T<m.length;T++)m[T]&&m[T].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(e.MANAGER_PROCESS,this.update,this),this.game.events.off(r.BLUR,this.resetKeys),this.scene.sys.events.off(u.PAUSE,this.resetKeys,this),this.scene.sys.events.off(u.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var m=this.keys,T=0;T<m.length;T++)m[T]&&m[T].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});n.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),v.exports=p},66970:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o.timeLastMatched=t.timeStamp,o.index++,o.index===o.size?!0:(o.current=o.keyCodes[o.index],!1)};v.exports=E},87960:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95922),a=t(95540),r=t(68769),s=t(92803),e=new o({initialize:function(h,i,l){if(l===void 0&&(l={}),i.length<2)return!1;this.manager=h,this.enabled=!0,this.keyCodes=[];for(var f=0;f<i.length;f++){var u=i[f];typeof u=="string"?this.keyCodes.push(u.toUpperCase().charCodeAt(0)):typeof u=="number"?this.keyCodes.push(u):u.hasOwnProperty("keyCode")&&this.keyCodes.push(u.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=a(l,"resetOnWrongKey",!0),this.maxKeyDelay=a(l,"maxKeyDelay",0),this.resetOnMatch=a(l,"resetOnMatch",!1),this.deleteOnMatch=a(l,"deleteOnMatch",!1);var d=this,p=function(m){if(!(d.matched||!d.enabled)){var T=r(m,d);T&&(d.manager.emit(g.COMBO_MATCH,d,m),d.resetOnMatch?s(d):d.deleteOnMatch&&d.destroy())}};this.onKeyDown=p,this.manager.on(g.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(g.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});v.exports=e},68769:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66970),g=function(a,r){if(r.matched)return!0;var s=!1,e=!1;if(a.keyCode===r.current)if(r.index>0&&r.maxKeyDelay>0){var n=r.timeLastMatched+r.maxKeyDelay;a.timeStamp<=n&&(e=!0,s=o(a,r))}else e=!0,s=o(a,r);return!e&&r.resetOnWrongKey&&(r.index=0,r.current=r.keyCodes[0]),s&&(r.timeLastMatched=a.timeStamp,r.matched=!0,r.timeMatched=a.timeStamp),s};v.exports=g},92803:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t};v.exports=E},92612:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="keydown"},23345:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="keyup"},21957:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="keycombomatch"},44743:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="down"},3771:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="keydown-"},46358:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="keyup-"},75674:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="up"},95922:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ANY_KEY_DOWN:t(92612),ANY_KEY_UP:t(23345),COMBO_MATCH:t(21957),DOWN:t(44743),KEY_DOWN:t(3771),KEY_UP:t(46358),UP:t(75674)}},51442:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Events:t(95922),KeyboardManager:t(78970),KeyboardPlugin:t(28846),Key:t(30472),KeyCodes:t(46032),KeyCombo:t(87960),AdvanceKeyCombo:t(66970),ProcessKeyCombo:t(68769),ResetKeyCombo:t(92803),JustDown:t(90229),JustUp:t(38796),DownDuration:t(37015),UpDuration:t(41170)}},37015:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=50);var g=t.plugin.game.loop.time-t.timeDown;return t.isDown&&g<o};v.exports=E},90229:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t._justDown?(t._justDown=!1,!0):!1};v.exports=E},38796:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t._justUp?(t._justUp=!1,!0):!1};v.exports=E},30472:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(95922),r=new o({Extends:g,initialize:function(e,n){g.call(this),this.plugin=e,this.keyCode=n,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(s){return this.emitOnRepeat=s,this},onDown:function(s){this.originalEvent=s,this.enabled&&(this.altKey=s.altKey,this.ctrlKey=s.ctrlKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.location=s.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(a.DOWN,this,s):(this.isDown=!0,this.isUp=!1,this.timeDown=s.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(a.DOWN,this,s)))},onUp:function(s){this.originalEvent=s,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=s.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(a.UP,this,s))},reset:function(){return this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});v.exports=r},46032:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175};v.exports=E},74600:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(46032),g={};for(var a in o)g[o[a]]=a;v.exports=g},41170:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=50);var g=t.plugin.game.loop.time-t.timeUp;return t.isUp&&g<o};v.exports=E},85098:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89357),a=t(8214),r=t(29747),s=new o({initialize:function(n){this.manager=n,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=r,this.onMouseDown=r,this.onMouseUp=r,this.onMouseDownWindow=r,this.onMouseUpWindow=r,this.onMouseOver=r,this.onMouseOut=r,this.onMouseWheel=r,this.pointerLockChange=r,this.isTop=!0,n.events.once(a.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputMouse,this.target=e.inputMouseEventTarget,this.passive=e.inputMousePassive,this.preventDefaultDown=e.inputMousePreventDefaultDown,this.preventDefaultUp=e.inputMousePreventDefaultUp,this.preventDefaultMove=e.inputMousePreventDefaultMove,this.preventDefaultWheel=e.inputMousePreventDefaultWheel,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},requestPointerLock:function(){if(g.pointerLock){var e=this.target;e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock,e.requestPointerLock()}},releasePointerLock:function(){g.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var e=this.target;if(e){var n=this,h=this.manager,i=h.canvas,l=window&&window.focus&&h.game.config.autoFocus;this.onMouseMove=function(u){!u.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onMouseMove(u),n.preventDefaultMove&&u.preventDefault())},this.onMouseDown=function(u){l&&window.focus(),!u.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onMouseDown(u),n.preventDefaultDown&&u.target===i&&u.preventDefault())},this.onMouseDownWindow=function(u){u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents||!u.defaultPrevented&&n.enabled&&h&&h.enabled&&u.target!==i&&h.onMouseDown(u)},this.onMouseUp=function(u){!u.defaultPrevented&&n.enabled&&h&&h.enabled&&(h.onMouseUp(u),n.preventDefaultUp&&u.target===i&&u.preventDefault())},this.onMouseUpWindow=function(u){u.sourceCapabilities&&u.sourceCapabilities.firesTouchEvents||!u.defaultPrevented&&n.enabled&&h&&h.enabled&&u.target!==i&&h.onMouseUp(u)},this.onMouseOver=function(u){!u.defaultPrevented&&n.enabled&&h&&h.enabled&&h.setCanvasOver(u)},this.onMouseOut=function(u){!u.defaultPrevented&&n.enabled&&h&&h.enabled&&h.setCanvasOut(u)},this.onMouseWheel=function(u){!u.defaultPrevented&&n.enabled&&h&&h.enabled&&h.onMouseWheel(u),n.preventDefaultWheel&&u.target===i&&u.preventDefault()};var f={passive:!0};if(e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),e.addEventListener("mouseover",this.onMouseOver,f),e.addEventListener("mouseout",this.onMouseOut,f),this.preventDefaultWheel?e.addEventListener("wheel",this.onMouseWheel,{passive:!1}):e.addEventListener("wheel",this.onMouseWheel,f),window&&h.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,f),window.top.addEventListener("mouseup",this.onMouseUpWindow,f)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,f),window.addEventListener("mouseup",this.onMouseUpWindow,f),this.isTop=!1}g.pointerLock&&(this.pointerLockChange=function(u){var d=n.target;n.locked=document.pointerLockElement===d||document.mozPointerLockElement===d||document.webkitPointerLockElement===d,h.onPointerLockChange(u)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var e=this.target;e.removeEventListener("mousemove",this.onMouseMove),e.removeEventListener("mousedown",this.onMouseDown),e.removeEventListener("mouseup",this.onMouseUp),e.removeEventListener("mouseover",this.onMouseOver),e.removeEventListener("mouseout",this.onMouseOut),window&&(e=this.isTop?window.top:window,e.removeEventListener("mousedown",this.onMouseDownWindow),e.removeEventListener("mouseup",this.onMouseUpWindow)),g.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});v.exports=s},87078:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={MouseManager:t(85098)}},36210:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(8214),a=t(29747),r=new o({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=a,this.onTouchStartWindow=a,this.onTouchMove=a,this.onTouchEnd=a,this.onTouchEndWindow=a,this.onTouchCancel=a,this.onTouchCancelWindow=a,this.isTop=!0,e.events.once(g.MANAGER_BOOT,this.boot,this)},boot:function(){var s=this.manager.config;this.enabled=s.inputTouch,this.target=s.inputTouchEventTarget,this.capture=s.inputTouchCapture,this.target?typeof this.target=="string"&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,s.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return this.target.addEventListener("contextmenu",function(s){return s.preventDefault(),!1}),this},startListeners:function(){var s=this.target;if(s){var e=this,n=this.manager,h=n.canvas,i=window&&window.focus&&n.game.config.autoFocus;this.onTouchMove=function(d){!d.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchMove(d),e.capture&&d.cancelable&&d.preventDefault())},this.onTouchStart=function(d){i&&window.focus(),!d.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchStart(d),e.capture&&d.cancelable&&d.target===h&&d.preventDefault())},this.onTouchStartWindow=function(d){!d.defaultPrevented&&e.enabled&&n&&n.enabled&&d.target!==h&&n.onTouchStart(d)},this.onTouchEnd=function(d){!d.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchEnd(d),e.capture&&d.cancelable&&d.target===h&&d.preventDefault())},this.onTouchEndWindow=function(d){!d.defaultPrevented&&e.enabled&&n&&n.enabled&&d.target!==h&&n.onTouchEnd(d)},this.onTouchCancel=function(d){!d.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onTouchCancel(d),e.capture&&d.preventDefault())},this.onTouchCancelWindow=function(d){!d.defaultPrevented&&e.enabled&&n&&n.enabled&&n.onTouchCancel(d)};var l=this.capture,f={passive:!0},u={passive:!1};if(s.addEventListener("touchstart",this.onTouchStart,l?u:f),s.addEventListener("touchmove",this.onTouchMove,l?u:f),s.addEventListener("touchend",this.onTouchEnd,l?u:f),s.addEventListener("touchcancel",this.onTouchCancel,l?u:f),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("touchstart",this.onTouchStartWindow,u),window.top.addEventListener("touchend",this.onTouchEndWindow,u),window.top.addEventListener("touchcancel",this.onTouchCancelWindow,u)}catch{window.addEventListener("touchstart",this.onTouchStartWindow,u),window.addEventListener("touchend",this.onTouchEndWindow,u),window.addEventListener("touchcancel",this.onTouchCancelWindow,u),this.isTop=!1}this.enabled=!0}},stopListeners:function(){var s=this.target;s.removeEventListener("touchstart",this.onTouchStart),s.removeEventListener("touchmove",this.onTouchMove),s.removeEventListener("touchend",this.onTouchEnd),s.removeEventListener("touchcancel",this.onTouchCancel),window&&(s=this.isTop?window.top:window,s.removeEventListener("touchstart",this.onTouchStartWindow),s.removeEventListener("touchend",this.onTouchEndWindow),s.removeEventListener("touchcancel",this.onTouchCancelWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});v.exports=r},95618:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={TouchManager:t(36210)}},41299:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(54899),r=t(95540),s=t(98356),e=t(3374),n=t(84376),h=t(92638),i=new o({initialize:function(f,u){if(this.loader=f,this.cache=r(u,"cache",!1),this.type=r(u,"type",!1),!this.type)throw new Error("Invalid File type: "+this.type);this.key=r(u,"key",!1);var d=this.key;if(f.prefix&&f.prefix!==""&&(this.key=f.prefix+d),!this.key)throw new Error("Invalid File key: "+this.key);var p=r(u,"url");p===void 0?p=f.path+d+"."+r(u,"extension",""):typeof p=="string"&&!p.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)&&(p=f.path+p),this.url=p,this.src="",this.xhrSettings=h(r(u,"responseType",void 0)),r(u,"xhrSettings",!1)&&(this.xhrSettings=e(this.xhrSettings,r(u,"xhrSettings",{}))),this.xhrLoader=null,this.state=typeof this.url=="function"?g.FILE_POPULATED:g.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=r(u,"config",{}),this.multiFile,this.linkFile,this.base64=typeof p=="string"&&p.indexOf("data:")===0},setLink:function(l){this.linkFile=l,l.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===g.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=g.FILE_LOADING,this.src=s(this,this.loader.baseURL),this.src.indexOf("data:")===0&&(this.base64=!0),this.xhrLoader=n(this,this.loader.xhr))},onLoad:function(l,f){var u=l.responseURL&&this.loader.localSchemes.some(function(m){return l.responseURL.indexOf(m)===0}),d=u&&f.target.status===0,p=!(f.target&&f.target.status!==200)||d;l.readyState===4&&l.status>=400&&l.status<=599&&(p=!1),this.state=g.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,p)},onBase64Load:function(l){this.xhrLoader=l,this.state=g.FILE_LOADED,this.percentComplete=1,this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete),this.loader.nextFile(this,!0)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(l){l.lengthComputable&&(this.bytesLoaded=l.loaded,this.bytesTotal=l.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(a.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=g.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=g.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){console.error('Failed to process file: %s "%s"',this.type,this.key),this.state=g.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.data&&this.cache.add(this.key,this.data)},pendingDestroy:function(l){if(this.state!==g.FILE_PENDING_DESTROY){l===void 0&&(l=this.data);var f=this.key,u=this.type;this.loader.emit(a.FILE_COMPLETE,f,u,l),this.loader.emit(a.FILE_KEY_COMPLETE+u+"-"+f,f,u,l),this.loader.flagForRemoval(this),this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});i.createObjectURL=function(l,f,u){if(typeof URL=="function")l.src=URL.createObjectURL(f);else{var d=new FileReader;d.onload=function(){l.removeAttribute("crossOrigin"),l.src="data:"+(f.type||u)+";base64,"+d.result.split(",")[1]},d.onerror=l.onerror,d.readAsDataURL(f)}},i.revokeObjectURL=function(l){typeof URL=="function"&&URL.revokeObjectURL(l.src)},v.exports=i},74099:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},t={install:function(o){for(var g in E)o[g]=E[g]},register:function(o,g){E[o]=g},destroy:function(){E={}}};v.exports=t},98356:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.url?t.url.match(/^(?:blob:|data:|capacitor:\/\/|http:\/\/|https:\/\/|\/\/)/)?t.url:o+t.url:!1};v.exports=E},74261:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(35072),r=t(50792),s=t(54899),e=t(74099),n=t(95540),h=t(35154),i=t(37277),l=t(44594),f=t(92638),u=new o({Extends:r,initialize:function(p){r.call(this);var m=p.sys.game.config,T=p.sys.settings.loader;this.scene=p,this.systems=p.sys,this.cacheManager=p.sys.cache,this.textureManager=p.sys.textures,this.sceneManager=p.sys.game.scene,e.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(n(T,"baseURL",m.loaderBaseURL)),this.setPath(n(T,"path",m.loaderPath)),this.setPrefix(n(T,"prefix",m.loaderPrefix)),this.maxParallelDownloads=n(T,"maxParallelDownloads",m.loaderMaxParallelDownloads),this.xhr=f(n(T,"responseType",m.loaderResponseType),n(T,"async",m.loaderAsync),n(T,"user",m.loaderUser),n(T,"password",m.loaderPassword),n(T,"timeout",m.loaderTimeout),n(T,"withCredentials",m.loaderWithCredentials)),this.crossOrigin=n(T,"crossOrigin",m.loaderCrossOrigin),this.imageLoadType=n(T,"imageLoadType",m.loaderImageLoadType),this.localSchemes=n(T,"localScheme",m.loaderLocalScheme),this.totalToLoad=0,this.progress=0,this.list=new a,this.inflight=new a,this.queue=new a,this._deleteQueue=new a,this.totalFailed=0,this.totalComplete=0,this.state=g.LOADER_IDLE,this.multiKeyIndex=0,p.sys.events.once(l.BOOT,this.boot,this),p.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.baseURL=d,this},setPath:function(d){return d===void 0&&(d=""),d!==""&&d.substr(-1)!=="/"&&(d=d.concat("/")),this.path=d,this},setPrefix:function(d){return d===void 0&&(d=""),this.prefix=d,this},setCORS:function(d){return this.crossOrigin=d,this},addFile:function(d){Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++){var m=d[p];this.keyExists(m)||(this.list.set(m),this.emit(s.ADD,m.key,m.type,this,m),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(d){var p=d.hasCacheConflict();return p||this.list.iterate(function(m){if(m.type===d.type&&m.key===d.key)return p=!0,!1}),!p&&this.isLoading()&&(this.inflight.iterate(function(m){if(m.type===d.type&&m.key===d.key)return p=!0,!1}),this.queue.iterate(function(m){if(m.type===d.type&&m.key===d.key)return p=!0,!1})),p},addPack:function(d,p){if(typeof p=="string"){var m=h(d,p);m&&(d={packKey:m})}var T=0,y=this.baseURL,S=this.path,C=this.prefix;for(var R in d)if(Object.prototype.hasOwnProperty.call(d,R)){var I=d[R],L=n(I,"baseURL",y),w=n(I,"path",S),O=n(I,"prefix",C),B=n(I,"files",null),V=n(I,"defaultType","void");if(Array.isArray(B)){this.setBaseURL(L),this.setPath(w),this.setPrefix(O);for(var b=0;b<B.length;b++){var X=B[b],K=X.hasOwnProperty("type")?X.type:V;this[K]&&(this[K](X),T++)}}}return this.setBaseURL(y),this.setPath(S),this.setPrefix(C),T>0},isLoading:function(){return this.state===g.LOADER_LOADING||this.state===g.LOADER_PROCESSING},isReady:function(){return this.state===g.LOADER_IDLE||this.state===g.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(s.START,this),this.list.size===0?this.loadComplete():(this.state=g.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(s.PROGRESS,this.progress)},update:function(){this.state===g.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(d){if((d.state===g.FILE_POPULATED||d.state===g.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(d),this.list.delete(d),d.crossOrigin||(d.crossOrigin=this.crossOrigin),d.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(d,p){this.inflight&&(this.inflight.delete(d),this.updateProgress(),p?(this.totalComplete++,this.queue.set(d),this.emit(s.FILE_LOAD,d),d.onProcess()):(this.totalFailed++,this._deleteQueue.set(d),this.emit(s.FILE_LOAD_ERROR,d),this.fileProcessComplete(d)))},fileProcessComplete:function(d){!this.scene||!this.systems||!this.systems.game||this.systems.game.pendingDestroy||(d.state===g.FILE_ERRORED?d.multiFile&&d.multiFile.onFileFailed(d):d.state===g.FILE_COMPLETE&&(d.multiFile?d.multiFile.isReadyToProcess()&&(d.multiFile.addToCache(),d.multiFile.pendingDestroy()):(d.addToCache(),d.pendingDestroy())),this.queue.delete(d),this.list.size===0&&this.inflight.size===0&&this.queue.size===0&&this.loadComplete())},loadComplete:function(){this.emit(s.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=g.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(s.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(d){this._deleteQueue.set(d)},saveJSON:function(d,p){return this.save(JSON.stringify(d),p)},save:function(d,p,m){p===void 0&&(p="file.json"),m===void 0&&(m="application/json");var T=new Blob([d],{type:m}),y=URL.createObjectURL(T),S=document.createElement("a");return S.download=p,S.textContent="Download "+p,S.href=y,S.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var d=this.systems.game.config,p=this.systems.settings.loader;this.setBaseURL(n(p,"baseURL",d.loaderBaseURL)),this.setPath(n(p,"path",d.loaderPath)),this.setPrefix(n(p,"prefix",d.loaderPrefix)),this.state=g.LOADER_IDLE},shutdown:function(){this.reset(),this.state=g.LOADER_SHUTDOWN,this.removeAllListeners(),this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=g.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});i.register("Loader",u,"load"),v.exports=u},3374:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(92638),a=function(r,s){var e=r===void 0?g():o({},r);if(s)for(var n in s)s[n]!==void 0&&(e[n]=s[n]);return e};v.exports=a},26430:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(54899),r=new o({initialize:function(e,n,h,i){var l=[];i.forEach(function(d){d&&l.push(d)}),this.loader=e,this.type=n,this.key=h;var f=this.key;e.prefix&&e.prefix!==""&&(this.key=e.prefix+f),this.multiKeyIndex=e.multiKeyIndex++,this.files=l,this.state=g.FILE_PENDING,this.complete=!1,this.pending=l.length,this.failed=0,this.config={},this.baseURL=e.baseURL,this.path=e.path,this.prefix=e.prefix;for(var u=0;u<l.length;u++)l[u].multiFile=this},isReadyToProcess:function(){return this.pending===0&&this.failed===0&&!this.complete},addToMultiFile:function(s){return this.files.push(s),s.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(s){var e=this.files.indexOf(s);e!==-1&&this.pending--},onFileFailed:function(s){var e=this.files.indexOf(s);e!==-1&&(this.failed++,console.error('File failed: %s "%s" (via %s "%s")',this.type,this.key,s.type,s.key))},pendingDestroy:function(){if(this.state!==g.FILE_PENDING_DESTROY){var s=this.key,e=this.type;this.loader.emit(a.FILE_COMPLETE,s,e),this.loader.emit(a.FILE_KEY_COMPLETE+e+"-"+s,s,e),this.loader.flagForRemoval(this);for(var n=0;n<this.files.length;n++)this.files[n].pendingDestroy();this.state=g.FILE_PENDING_DESTROY}},destroy:function(){this.loader=null,this.files=null,this.config=null}});v.exports=r},84376:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(3374),g=function(a,r){var s=o(r,a.xhrSettings);if(a.base64){var e=a.url.split(";base64,").pop()||a.url.split(",").pop(),n={responseText:atob(e)};a.onBase64Load(n);return}var h=new XMLHttpRequest;if(h.open("GET",a.src,s.async,s.user,s.password),h.responseType=a.xhrSettings.responseType,h.timeout=s.timeout,s.headers)for(var i in s.headers)h.setRequestHeader(i,s.headers[i]);return s.header&&s.headerValue&&h.setRequestHeader(s.header,s.headerValue),s.requestedWith&&h.setRequestHeader("X-Requested-With",s.requestedWith),s.overrideMimeType&&h.overrideMimeType(s.overrideMimeType),s.withCredentials&&(h.withCredentials=!0),h.onload=a.onLoad.bind(a,h),h.onerror=a.onError.bind(a,h),h.onprogress=a.onProgress.bind(a),h.ontimeout=a.onError.bind(a,h),h.send(),h};v.exports=g},92638:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r,s){return t===void 0&&(t=""),o===void 0&&(o=!0),g===void 0&&(g=""),a===void 0&&(a=""),r===void 0&&(r=0),s===void 0&&(s=!1),{responseType:t,async:o,user:g,password:a,timeout:r,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:s}};v.exports=E},23906:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19,FILE_PENDING_DESTROY:20};v.exports=E},42155:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="addfile"},38991:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="complete"},27540:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="filecomplete"},87464:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="filecomplete-"},94486:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="loaderror"},13035:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="load"},38144:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="fileprogress"},97520:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="postprocess"},85595:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="progress"},55680:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="start"},54899:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ADD:t(42155),COMPLETE:t(38991),FILE_COMPLETE:t(27540),FILE_KEY_COMPLETE:t(87464),FILE_LOAD_ERROR:t(94486),FILE_LOAD:t(13035),FILE_PROGRESS:t(38144),POST_PROCESS:t(97520),PROGRESS:t(85595),START:t(55680)}},14135:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(518),r=t(54899),s=new o({Extends:a,initialize:function(n,h,i,l,f){a.call(this,n,h,i,l,f),this.type="animationJSON"},onProcess:function(){this.loader.once(r.POST_PROCESS,this.onLoadComplete,this),a.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});g.register("animation",function(e,n,h,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new s(this,e[l]));else this.addFile(new s(this,e,n,i,h));return this}),v.exports=s},76272:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(19550),s=t(41212),e=t(518),n=t(26430),h=new o({Extends:n,initialize:function(l,f,u,d,p,m){var T,y;if(s(f)){var S=f;f=a(S,"key"),T=new r(l,{key:f,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),y=new e(l,{key:f,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","json"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new r(l,f,u,p),y=new e(l,f,d,m);T.linkFile?n.call(this,l,"atlasjson",f,[T,y,T.linkFile]):n.call(this,l,"atlasjson",f,[T,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,l.data,f),l.addToCache(),this.complete=!0}}});g.register("aseprite",function(i,l,f,u,d){var p;if(Array.isArray(i))for(var m=0;m<i.length;m++)p=new h(this,i[m]),this.addFile(p.files);else p=new h(this,i,l,f,u,d),this.addFile(p.files);return this}),v.exports=h},38734:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(19550),s=t(41212),e=t(518),n=t(26430),h=new o({Extends:n,initialize:function(l,f,u,d,p,m){var T,y;if(s(f)){var S=f;f=a(S,"key"),T=new r(l,{key:f,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),y=new e(l,{key:f,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","json"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new r(l,f,u,p),y=new e(l,f,d,m);T.linkFile?n.call(this,l,"atlasjson",f,[T,y,T.linkFile]):n.call(this,l,"atlasjson",f,[T,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(i.key,i.data,l.data,f),this.complete=!0}}});g.register("atlas",function(i,l,f,u,d){var p;if(Array.isArray(i))for(var m=0;m<i.length;m++)p=new h(this,i[m]),this.addFile(p.files);else p=new h(this,i,l,f,u,d),this.addFile(p.files);return this}),v.exports=h},74599:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(19550),s=t(41212),e=t(26430),n=t(57318),h=new o({Extends:e,initialize:function(l,f,u,d,p,m){var T,y;if(s(f)){var S=f;f=a(S,"key"),T=new r(l,{key:f,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),y=new n(l,{key:f,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","xml"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new r(l,f,u,p),y=new n(l,f,d,m);T.linkFile?e.call(this,l,"atlasxml",f,[T,y,T.linkFile]):e.call(this,l,"atlasxml",f,[T,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(i.key,i.data,l.data,f),this.complete=!0}}});g.register("atlasXML",function(i,l,f,u,d){var p;if(Array.isArray(i))for(var m=0;m<i.length;m++)p=new h(this,i[m]),this.addFile(p.files);else p=new h(this,i,l,f,u,d),this.addFile(p.files);return this}),v.exports=h},21097:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(89749),n=t(41212),h=new o({Extends:a,initialize:function(l,f,u,d,p){if(n(f)){var m=f;f=s(m,"key"),d=s(m,"xhrSettings"),p=s(m,"context",p)}var T={type:"audio",cache:l.cacheManager.audio,extension:u.type,responseType:"arraybuffer",key:f,url:u.url,xhrSettings:d,config:{context:p}};a.call(this,l,T)},onProcess:function(){this.state=g.FILE_PROCESSING;var i=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(l){i.data=l,i.onProcessComplete()},function(l){console.error("Error decoding audio: "+i.key+" - ",l?l.message:null),i.onProcessError()}),this.config.context=null}});h.create=function(i,l,f,u,d){var p=i.systems.game,m=p.config.audio,T=p.device.audio;n(l)&&(f=s(l,"url",[]),u=s(l,"config",{}));var y=h.getAudioURL(p,f);return y?T.webAudio&&!m.disableWebAudio?new h(i,l,y,d,p.sound.context):new e(i,l,y,u):(console.warn('No audio URLs for "%s" matched this device',l),null)},h.getAudioURL=function(i,l){Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++){var u=s(l[f],"url",l[f]);if(u.indexOf("blob:")===0||u.indexOf("data:")===0)return{url:u,type:""};var d=u.match(/\.([a-zA-Z0-9]+)($|\?)/);if(d=s(l[f],"type",d?d[1]:"").toLowerCase(),i.device.audio[d])return{url:u,type:d}}return null},r.register("audio",function(i,l,f,u){var d=this.systems.game,p=d.config.audio,m=d.device.audio;if(p.noAudio||!m.webAudio&&!m.audioData)return this;var T;if(Array.isArray(i))for(var y=0;y<i.length;y++)T=h.create(this,i[y]),T&&this.addFile(T);else T=h.create(this,i,l,f,u),T&&this.addFile(T);return this}),v.exports=h},89524:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(21097),g=t(83419),a=t(74099),r=t(95540),s=t(41212),e=t(518),n=t(26430),h=new g({Extends:n,initialize:function(l,f,u,d,p,m,T){if(s(f)){var y=f;f=r(y,"key"),u=r(y,"jsonURL"),d=r(y,"audioURL"),p=r(y,"audioConfig"),m=r(y,"audioXhrSettings"),T=r(y,"jsonXhrSettings")}var S;if(!d)S=new e(l,f,u,T),n.call(this,l,"audiosprite",f,[S]),this.config.resourceLoad=!0,this.config.audioConfig=p,this.config.audioXhrSettings=m;else{var C=o.create(l,f,d,p,m);C&&(S=new e(l,f,u,T),n.call(this,l,"audiosprite",f,[C,S]),this.config.resourceLoad=!1)}},onFileComplete:function(i){var l=this.files.indexOf(i);if(l!==-1&&(this.pending--,this.config.resourceLoad&&i.type==="json"&&i.data.hasOwnProperty("resources"))){var f=i.data.resources,u=r(this.config,"audioConfig"),d=r(this.config,"audioXhrSettings"),p=o.create(this.loader,i.key,f,u,d);p&&(this.addToMultiFile(p),this.loader.addFile(p))}},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1];i.addToCache(),l.addToCache(),this.complete=!0}}});a.register("audioSprite",function(i,l,f,u,d,p){var m=this.systems.game,T=m.config.audio,y=m.device.audio;if(T&&T.noAudio||!y.webAudio&&!y.audioData)return this;var S;if(Array.isArray(i))for(var C=0;C<i.length;C++)S=new h(this,i[C]),S.files&&this.addFile(S.files);else S=new h(this,i,l,f,u,d,p),S.files&&this.addFile(S.files);return this})},85722:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u,d){var p="bin";if(e(l)){var m=l;l=s(m,"key"),f=s(m,"url"),u=s(m,"xhrSettings"),p=s(m,"extension",p),d=s(m,"dataType",d)}var T={type:"binary",cache:i.cacheManager.binary,extension:p,responseType:"arraybuffer",key:l,url:f,xhrSettings:u,config:{dataType:d}};a.call(this,i,T)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this.config.dataType;this.data=h?new h(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});r.register("binary",function(h,i,l,f){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new n(this,h[u]));else this.addFile(new n(this,h,i,f,l));return this}),v.exports=n},97025:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(19550),s=t(41212),e=t(26430),n=t(21859),h=t(57318),i=new o({Extends:e,initialize:function(f,u,d,p,m,T){var y,S;if(s(u)){var C=u;u=a(C,"key"),y=new r(f,{key:u,url:a(C,"textureURL"),extension:a(C,"textureExtension","png"),normalMap:a(C,"normalMap"),xhrSettings:a(C,"textureXhrSettings")}),S=new h(f,{key:u,url:a(C,"fontDataURL"),extension:a(C,"fontDataExtension","xml"),xhrSettings:a(C,"fontDataXhrSettings")})}else y=new r(f,u,d,m),S=new h(f,u,p,T);y.linkFile?e.call(this,f,"bitmapfont",u,[y,S,y.linkFile]):e.call(this,f,"bitmapfont",u,[y,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1];l.addToCache();var u=l.cache.get(l.key),d=n(f.data,l.cache.getFrame(l.key),0,0,u);this.loader.cacheManager.bitmapFont.add(l.key,{data:d,texture:l.key,frame:null}),this.complete=!0}}});g.register("bitmapFont",function(l,f,u,d,p){var m;if(Array.isArray(l))for(var T=0;T<l.length;T++)m=new i(this,l[T]),this.addFile(m.files);else m=new i(this,l,f,u,d,p),this.addFile(m.files);return this}),v.exports=i},16024:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u){var d="css";if(e(l)){var p=l;l=s(p,"key"),f=s(p,"url"),u=s(p,"xhrSettings"),d=s(p,"extension",d)}var m={type:"script",cache:!1,extension:d,responseType:"text",key:l,url:f,xhrSettings:u};a.call(this,i,m)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("css",function(h,i,l){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new n(this,h[f]));else this.addFile(new n(this,h,i,l));return this}),v.exports=n},69559:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(38734),g=t(85722),a=t(83419),r=t(74099),s=t(95540),e=t(19550),n=t(41212),h=t(518),i=t(31403),l=t(46975),f=t(59327),u=t(26430),d=t(82038),p=t(55222),m=new a({Extends:u,initialize:function(y,S,C,R){if(C.multiAtlasURL){var I=new h(y,{key:S,url:C.multiAtlasURL,xhrSettings:R,config:C});u.call(this,y,"texture",S,[I])}else{var L=C.textureURL.substr(C.textureURL.length-3);C.type||(C.type=L.toLowerCase()==="ktx"?"KTX":"PVR");var w=new g(y,{key:S,url:C.textureURL,extension:L,xhrSettings:R,config:C});if(C.atlasURL){var O=new h(y,{key:S,url:C.atlasURL,xhrSettings:R,config:C});u.call(this,y,"texture",S,[w,O])}else u.call(this,y,"texture",S,[w])}this.config=C},onFileComplete:function(T){var y=this.files.indexOf(T);if(y!==-1){if(this.pending--,!this.config.multiAtlasURL)return;if(T.type==="json"&&T.data.hasOwnProperty("textures")){var S=T.data.textures,C=this.config,R=this.loader,I=R.baseURL,L=R.path,w=R.prefix,O=s(C,"multiBaseURL",this.baseURL),B=s(C,"multiPath",this.path),V=s(C,"prefix",this.prefix),b=s(C,"textureXhrSettings");O&&R.setBaseURL(O),B&&R.setPath(B),V&&R.setPrefix(V);for(var X=0;X<S.length;X++){var K=S[X].image,Q="CMA"+this.multiKeyIndex+"_"+K,U=new g(R,Q,K,b);if(this.addToMultiFile(U),R.addFile(U),S[X].normalMap){var W=new g(R,Q,S[X].normalMap,b);W.type="normalMap",U.setLink(W),this.addToMultiFile(W),R.addFile(W)}}R.setBaseURL(I),R.setPath(L),R.setPrefix(w)}}},addToCache:function(){function T(O){console.warn('Compressed Texture Invalid: "'+I.key+'". '+O)}if(this.isReadyToProcess()){var y=this.config;if(y.multiAtlasURL)this.addMultiToCache();else{var S=this.loader.systems.renderer,C=this.loader.textureManager,R,I=this.files[0],L=this.files[1];if(y.type==="PVR"?R=d(I.data):y.type==="KTX"&&(R=i(I.data),R||T("KTX file contains unsupported format.")),R&&!p(R)&&(T("Texture dimensions failed verification. Check the texture format specifications for "+y.format+" 0x"+R.internalFormat.toString(16)+"."),R=null),R&&!S.supportsCompressedTexture(y.format,R.internalFormat)&&(T("Texture format "+y.format+" with internal format "+R.internalFormat+" not supported by the GPU. Texture invalid. This is often due to the texture using sRGB instead of linear RGB."),R=null),R){R.format=S.getCompressedTextureName(y.format,R.internalFormat);var w=L&&L.data?L.data:null;C.addCompressedTexture(I.key,R,w)}}this.complete=!0}},addMultiToCache:function(){for(var T=this.config,y=this.files[0],S=[],C=[],R=[],I=this.loader.systems.renderer,L=this.loader.textureManager,w,O=1;O<this.files.length;O++){var B=this.files[O];if(B.type!=="normalMap")for(var V=B.key.indexOf("_"),b=B.key.substr(V+1),X=B.data,K=0;K<y.data.textures.length;K++){var Q=y.data.textures[K];if(Q.image===b){T.type==="PVR"?w=d(X):T.type==="KTX"&&(w=i(X)),w&&I.supportsCompressedTexture(T.format,w.internalFormat)&&(w.format=I.getCompressedTextureName(T.format,w.internalFormat),C.push(w),S.push(Q),B.linkFile&&R.push(B.linkFile.data));break}}}R.length===0&&(R=void 0),L.addAtlasJSONArray(this.key,C,S,R),this.complete=!0}});r.register("texture",function(T,y,S){var C=this.systems.renderer,R=function(L,w,O,B){var V={format:null,type:null,textureURL:void 0,atlasURL:void 0,multiAtlasURL:void 0,multiPath:void 0,multiBaseURL:void 0};if(n(w)){var b=w;w=s(b,"key"),O=s(b,"url"),B=s(b,"xhrSettings")}var X=!1;for(var K in O)if(C.supportsCompressedTexture(K)){var Q=O[K];typeof Q=="string"?V.textureURL=Q:V=l(Q,V),V.format=K.toUpperCase(),X=!0;break}if(!X)console.warn("No supported compressed texture format or IMG fallback",w);else if(V.format==="IMG"){var U,W;V.multiAtlasURL?(W=new f(L,w,V.multiAtlasURL,V.multiPath,V.multiBaseURL,B),U=W.files):V.atlasURL?(W=new o(L,w,V.textureURL,V.atlasURL,B),U=W.files):U=new e(L,w,V.textureURL,B),L.addFile(U)}else{var F=new m(L,w,V,B);L.addFile(F.files)}};if(Array.isArray(T))for(var I=0;I<T.length;I++)R(this,T[I]);else R(this,T,y,S);return this}),v.exports=m},47931:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=t(73894),h=new o({Extends:a,initialize:function(l,f,u,d,p){var m="glsl";if(e(f)){var T=f;f=s(T,"key"),u=s(T,"url"),d=s(T,"shaderType","fragment"),p=s(T,"xhrSettings"),m=s(T,"extension",m)}else d===void 0&&(d="fragment");var y={type:"glsl",cache:l.cacheManager.shader,extension:m,responseType:"text",key:f,url:u,config:{shaderType:d},xhrSettings:p};a.call(this,l,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i=this.data.split(`
`),l=this.extractBlock(i,0);if(l)for(;l;){var f=this.getShaderName(l.header),u=this.getShaderType(l.header),d=this.getShaderUniforms(l.header),p=l.shader;if(this.cache.has(f)){var m=this.cache.get(f);u==="fragment"?m.fragmentSrc=p:m.vertexSrc=p,m.uniforms||(m.uniforms=d)}else u==="fragment"?this.cache.add(f,new n(f,p,"",d)):this.cache.add(f,new n(f,"",p,d));l=this.extractBlock(i,l.offset)}else this.config.shaderType==="fragment"?this.cache.add(this.key,new n(this.key,this.data)):this.cache.add(this.key,new n(this.key,"",this.data))},getShaderName:function(i){for(var l=0;l<i.length;l++){var f=i[l].trim();if(f.substring(0,5)==="name:")return f.substring(5).trim()}return this.key},getShaderType:function(i){for(var l=0;l<i.length;l++){var f=i[l].trim();if(f.substring(0,5)==="type:")return f.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(i){for(var l={},f=0;f<i.length;f++){var u=i[f].trim();if(u.substring(0,8)==="uniform."){var d=u.indexOf(":");if(d){var p=u.substring(8,d);try{l[p]=JSON.parse(u.substring(d+1))}catch{console.warn("Invalid uniform JSON: "+p)}}}}return l},extractBlock:function(i,l){for(var f=-1,u=-1,d=-1,p=!1,m=!1,T=[],y=[],S=l;S<i.length;S++){var C=i[S].trim();if(C==="---")if(f===-1)f=S,p=!0;else if(p)u=S,p=!1,m=!0;else{m=!1;break}else p?T.push(C):m&&(y.push(C),d=S)}return!p&&u!==-1?{header:T,shader:y.join(`
`),offset:d}:null}});r.register("glsl",function(i,l,f,u){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new h(this,i[d]));else this.addFile(new h(this,i,l,f,u));return this}),v.exports=h},89749:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(54899),a=t(41299),r=t(95540),s=t(98356),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u){if(e(l)){var d=l;l=r(d,"key"),u=r(d,"config",u)}var p={type:"audio",cache:i.cacheManager.audio,extension:f.type,key:l,url:f.url,config:u};a.call(this,i,p),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var h=0;h<this.data.length;h++){var i=this.data[h];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(h){var i=h.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(g.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var h=this.config&&this.config.instances||1;this.filesTotal=h,this.filesLoaded=0,this.percentComplete=0;for(var i=0;i<h;i++){var l=new Audio;l.dataset||(l.dataset={}),l.dataset.name=this.key+("0"+i).slice(-2),l.dataset.used="false",this.locked?l.dataset.locked="true":(l.dataset.locked="false",l.preload="auto",l.oncanplaythrough=this.onProgress.bind(this),l.onerror=this.onError.bind(this)),this.data.push(l)}for(i=0;i<this.data.length;i++)l=this.data[i],l.src=s(this,this.loader.baseURL),this.locked||l.load();this.locked&&setTimeout(this.onLoad.bind(this))}});v.exports=n},88470:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u){var d="html";if(e(l)){var p=l;l=s(p,"key"),f=s(p,"url"),u=s(p,"xhrSettings"),d=s(p,"extension",d)}var m={type:"text",cache:i.cacheManager.html,extension:d,responseType:"text",key:l,url:f,xhrSettings:u};a.call(this,i,m)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("html",function(h,i,l){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new n(this,h[f]));else this.addFile(new n(this,h,i,l));return this}),v.exports=n},14643:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u,d,p){u===void 0&&(u=512),d===void 0&&(d=512);var m="html";if(e(l)){var T=l;l=s(T,"key"),f=s(T,"url"),p=s(T,"xhrSettings"),m=s(T,"extension",m),u=s(T,"width",u),d=s(T,"height",d)}var y={type:"html",cache:i.textureManager,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{width:u,height:d}};a.call(this,i,y)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this.config.width,i=this.config.height,l=[];l.push('<svg width="'+h+'px" height="'+i+'px" viewBox="0 0 '+h+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),l.push('<foreignObject width="100%" height="100%">'),l.push('<body xmlns="http://www.w3.org/1999/xhtml">'),l.push(this.xhrLoader.responseText),l.push("</body>"),l.push("</foreignObject>"),l.push("</svg>");var f=[l.join(`
`)],u=this;try{var d=new window.Blob(f,{type:"image/svg+xml;charset=utf-8"})}catch{u.state=g.FILE_ERRORED,u.onProcessComplete();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){a.revokeObjectURL(u.data),u.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(u.data),u.onProcessError()},a.createObjectURL(this.data,d,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("htmlTexture",function(h,i,l,f,u){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new n(this,h[d]));else this.addFile(new n(this,h,i,l,f,u));return this}),v.exports=n},19550:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=t(98356),h=new o({Extends:a,initialize:function i(l,f,u,d,p){var m="png",T;if(e(f)){var y=f;f=s(y,"key"),u=s(y,"url"),T=s(y,"normalMap"),d=s(y,"xhrSettings"),m=s(y,"extension",m),p=s(y,"frameConfig")}Array.isArray(u)&&(T=u[1],u=u[0]);var S={type:"image",cache:l.textureManager,extension:m,responseType:"blob",key:f,url:u,xhrSettings:d,config:p};if(a.call(this,l,S),T){var C=new i(l,this.key,T,d,p);C.type="normalMap",this.setLink(C),l.addFile(C)}this.useImageElementLoad=l.imageLoadType==="HTMLImageElement"||this.base64,this.useImageElementLoad&&(this.load=this.loadImage,this.onProcess=this.onProcessImage)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var i=this;this.data.onload=function(){a.revokeObjectURL(i.data),i.onProcessComplete()},this.data.onerror=function(){a.revokeObjectURL(i.data),i.onProcessError()},a.createObjectURL(this.data,this.xhrLoader.response,"image/png")},onProcessImage:function(){var i=this.state;this.state=g.FILE_PROCESSING,i===g.FILE_LOADED?this.onProcessComplete():this.onProcessError()},loadImage:function(){this.state=g.FILE_LOADING,this.src=n(this,this.loader.baseURL),this.data=new Image,this.data.crossOrigin=this.crossOrigin;var i=this;this.data.onload=function(){i.state=g.FILE_LOADED,i.loader.nextFile(i,!0)},this.data.onerror=function(){i.loader.nextFile(i,!1)},this.data.src=this.src},addToCache:function(){var i=this.linkFile;i?i.state>=g.FILE_COMPLETE&&(i.type==="spritesheet"?i.addToCache():this.type==="normalMap"?this.cache.addImage(this.key,i.data,this.data):this.cache.addImage(this.key,this.data,i.data)):this.cache.addImage(this.key,this.data)}});r.register("image",function(i,l,f){if(Array.isArray(i))for(var u=0;u<i.length;u++)this.addFile(new h(this,i[u]));else this.addFile(new h(this,i,l,f));return this}),v.exports=h},518:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(35154),n=t(41212),h=new o({Extends:a,initialize:function(l,f,u,d,p){var m="json";if(n(f)){var T=f;f=s(T,"key"),u=s(T,"url"),d=s(T,"xhrSettings"),m=s(T,"extension",m),p=s(T,"dataKey",p)}var y={type:"json",cache:l.cacheManager.json,extension:m,responseType:"text",key:f,url:u,xhrSettings:d,config:p};a.call(this,l,y),n(u)&&(p?this.data=e(u,p):this.data=u,this.state=g.FILE_POPULATED)},onProcess:function(){if(this.state!==g.FILE_POPULATED){this.state=g.FILE_PROCESSING;try{var i=JSON.parse(this.xhrLoader.responseText)}catch(f){throw this.onProcessError(),f}var l=this.config;typeof l=="string"?this.data=e(i,l,i):this.data=i}this.onProcessComplete()}});r.register("json",function(i,l,f,u){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new h(this,i[d]));else this.addFile(new h(this,i,l,u,f));return this}),v.exports=h},59327:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(19550),s=t(41212),e=t(518),n=t(26430),h=new o({Extends:n,initialize:function(l,f,u,d,p,m,T){if(s(f)){var y=f;f=a(y,"key"),a(y,"url",!1)?u=a(y,"url"):u=a(y,"atlasURL"),m=a(y,"xhrSettings"),d=a(y,"path"),p=a(y,"baseURL"),T=a(y,"textureXhrSettings")}var S=new e(l,f,u,m);n.call(this,l,"multiatlas",f,[S]),this.config.path=d,this.config.baseURL=p,this.config.textureXhrSettings=T},onFileComplete:function(i){var l=this.files.indexOf(i);if(l!==-1&&(this.pending--,i.type==="json"&&i.data.hasOwnProperty("textures"))){var f=i.data.textures,u=this.config,d=this.loader,p=d.baseURL,m=d.path,T=d.prefix,y=a(u,"baseURL",this.baseURL),S=a(u,"path",this.path),C=a(u,"prefix",this.prefix),R=a(u,"textureXhrSettings");d.setBaseURL(y),d.setPath(S),d.setPrefix(C);for(var I=0;I<f.length;I++){var L=f[I].image,w="MA"+this.multiKeyIndex+"_"+L,O=new r(d,w,L,R);if(this.addToMultiFile(O),d.addFile(O),f[I].normalMap){var B=new r(d,w,f[I].normalMap,R);B.type="normalMap",O.setLink(B),this.addToMultiFile(B),d.addFile(B)}}d.setBaseURL(p),d.setPath(m),d.setPrefix(T)}},addToCache:function(){if(this.isReadyToProcess()){for(var i=this.files[0],l=[],f=[],u=[],d=1;d<this.files.length;d++){var p=this.files[d];if(p.type!=="normalMap")for(var m=p.key.indexOf("_"),T=p.key.substr(m+1),y=p.data,S=0;S<i.data.textures.length;S++){var C=i.data.textures[S];if(C.image===T){f.push(y),l.push(C),p.linkFile&&u.push(p.linkFile.data);break}}}u.length===0&&(u=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,f,l,u),this.complete=!0}}});g.register("multiatlas",function(i,l,f,u,d){var p;if(Array.isArray(i))for(var m=0;m<i.length;m++)p=new h(this,i[m]),this.addFile(p.files);else p=new h(this,i,l,f,u,d),this.addFile(p.files);return this}),v.exports=h},99297:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(41212),s=t(26430),e=t(34328),n=new o({Extends:s,initialize:function(i,l,f,u){var d="js",p=[];if(r(l)){var m=l;l=a(m,"key"),f=a(m,"url"),u=a(m,"xhrSettings"),d=a(m,"extension",d)}Array.isArray(f)||(f=[f]);for(var T=0;T<f.length;T++){var y=new e(i,{key:l+"_"+T.toString(),url:f[T],extension:d,xhrSettings:u});y.onProcess=function(){this.onProcessComplete()},p.push(y)}s.call(this,i,"scripts",l,p)},addToCache:function(){if(this.isReadyToProcess()){for(var h=0;h<this.files.length;h++){var i=this.files[h];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});g.register("scripts",function(h,i,l){var f;if(Array.isArray(h))for(var u=0;u<h.length;u++)f=new n(this,h[u]),this.addFile(f.files);else f=new n(this,h,i,l),this.addFile(f.files);return this}),v.exports=n},41846:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(41212),s=t(26430),e=t(85048),n=t(61485),h=t(78776),i=new o({Extends:s,initialize:function(f,u,d,p,m,T){var y,S,C=f.cacheManager.obj;if(r(u)){var R=u;u=a(R,"key"),y=new h(f,{key:u,type:"obj",cache:C,url:a(R,"url"),extension:a(R,"extension","obj"),xhrSettings:a(R,"xhrSettings"),config:{flipUV:a(R,"flipUV",m)}}),p=a(R,"matURL"),p&&(S=new h(f,{key:u,type:"mat",cache:C,url:p,extension:a(R,"matExtension","mat"),xhrSettings:a(R,"xhrSettings")}))}else y=new h(f,{key:u,url:d,type:"obj",cache:C,extension:"obj",xhrSettings:T,config:{flipUV:m}}),p&&(S=new h(f,{key:u,url:p,type:"mat",cache:C,extension:"mat",xhrSettings:T}));s.call(this,f,"obj",u,[y,S])},addToCache:function(){if(this.isReadyToProcess()){var l=this.files[0],f=this.files[1],u=e(l.data,l.config.flipUV);f&&(u.materials=n(f.data)),l.cache.add(l.key,u),this.complete=!0}}});g.register("obj",function(l,f,u,d,p){var m;if(Array.isArray(l))for(var T=0;T<l.length;T++)m=new i(this,l[T]),this.addFile(m.files);else m=new i(this,l,f,u,d,p),this.addFile(m.files);return this}),v.exports=i},58610:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(74099),r=t(518),s=new o({Extends:r,initialize:function(n,h,i,l,f){r.call(this,n,h,i,l,f),this.type="packfile"},onProcess:function(){if(this.state!==g.FILE_POPULATED&&(this.state=g.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.data.hasOwnProperty("files")&&this.config){var e={};e[this.config]=this.data,this.data=e}this.loader.addPack(this.data,this.config),this.onProcessComplete()}});a.register("pack",function(e,n,h,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new s(this,e[l]));else this.addFile(new s(this,e,n,i,h));return this}),v.exports=s},48988:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u,d,p){var m="js";if(e(l)){var T=l;l=s(T,"key"),f=s(T,"url"),p=s(T,"xhrSettings"),m=s(T,"extension",m),u=s(T,"start"),d=s(T,"mapping")}var y={type:"plugin",cache:!1,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{start:u,mapping:d}};a.call(this,i,y),typeof f=="function"&&(this.data=f,this.state=g.FILE_POPULATED)},onProcess:function(){var h=this.loader.systems.plugins,i=this.config,l=s(i,"start",!1),f=s(i,"mapping",null);if(this.state===g.FILE_POPULATED)h.install(this.key,this.data,l,f);else{this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var u=h.install(this.key,window[this.key],l,f);(l||f)&&(this.loader.systems[f]=u,this.loader.scene[f]=u)}this.onProcessComplete()}});r.register("plugin",function(h,i,l,f,u){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new n(this,h[d]));else this.addFile(new n(this,h,i,l,f,u));return this}),v.exports=n},67397:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u,d){var p="svg";if(e(l)){var m=l;l=s(m,"key"),f=s(m,"url"),u=s(m,"svgConfig",{}),d=s(m,"xhrSettings"),p=s(m,"extension",p)}var T={type:"svg",cache:i.textureManager,extension:p,responseType:"text",key:l,url:f,xhrSettings:d,config:{width:s(u,"width"),height:s(u,"height"),scale:s(u,"scale")}};a.call(this,i,T)},onProcess:function(){this.state=g.FILE_PROCESSING;var h=this.xhrLoader.responseText,i=[h],l=this.config.width,f=this.config.height,u=this.config.scale;t:if(l&&f||u){var d=null,p=new DOMParser;d=p.parseFromString(h,"text/xml");var m=d.getElementsByTagName("svg")[0],T=m.hasAttribute("viewBox"),y=parseFloat(m.getAttribute("width")),S=parseFloat(m.getAttribute("height"));if(!T&&y&&S)m.setAttribute("viewBox","0  0 "+y+" "+S);else if(T&&!y&&!S){var C=m.getAttribute("viewBox").split(/\s+|,/);y=C[2],S=C[3]}if(u)if(y&&S)l=y*u,f=S*u;else break t;m.setAttribute("width",l.toString()+"px"),m.setAttribute("height",f.toString()+"px"),i=[new XMLSerializer().serializeToString(m)]}try{var R=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch{this.onProcessError();return}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var I=this,L=!1;this.data.onload=function(){L||a.revokeObjectURL(I.data),I.onProcessComplete()},this.data.onerror=function(){L?I.onProcessError():(L=!0,a.revokeObjectURL(I.data),I.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},a.createObjectURL(this.data,R,"image/svg+xml")},addToCache:function(){this.cache.addImage(this.key,this.data)}});r.register("svg",function(h,i,l,f){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new n(this,h[u]));else this.addFile(new n(this,h,i,l,f));return this}),v.exports=n},88423:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u){var d="js";if(e(l)){var p=l;l=s(p,"key"),f=s(p,"url"),u=s(p,"xhrSettings"),d=s(p,"extension",d)}var m={type:"text",extension:d,responseType:"text",key:l,url:f,xhrSettings:u};a.call(this,i,m)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var h=this.data.concat(`(function(){
return new `+this.key+`();
}).call(this);`),i=eval;this.loader.sceneManager.add(this.key,i(h)),this.complete=!0}});r.register("sceneFile",function(h,i,l){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new n(this,h[f]));else this.addFile(new n(this,h,i,l));return this}),v.exports=n},56812:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u,d,p){var m="js";if(e(l)){var T=l;l=s(T,"key"),f=s(T,"url"),p=s(T,"xhrSettings"),m=s(T,"extension",m),u=s(T,"systemKey"),d=s(T,"sceneKey")}var y={type:"scenePlugin",cache:!1,extension:m,responseType:"text",key:l,url:f,xhrSettings:p,config:{systemKey:u,sceneKey:d}};a.call(this,i,y),typeof f=="function"&&(this.data=f,this.state=g.FILE_POPULATED)},onProcess:function(){var h=this.loader.systems.plugins,i=this.config,l=this.key,f=s(i,"systemKey",l),u=s(i,"sceneKey",l);this.state===g.FILE_POPULATED?h.installScenePlugin(f,this.data,u,this.loader.scene,!0):(this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),h.installScenePlugin(f,window[this.key],u,this.loader.scene,!0)),this.onProcessComplete()}});r.register("scenePlugin",function(h,i,l,f,u){if(Array.isArray(h))for(var d=0;d<h.length;d++)this.addFile(new n(this,h[d]));else this.addFile(new n(this,h,i,l,f,u));return this}),v.exports=n},34328:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u,d){var p="js";if(e(l)){var m=l;l=s(m,"key"),f=s(m,"url"),u=s(m,"type","script"),d=s(m,"xhrSettings"),p=s(m,"extension",p)}else u===void 0&&(u="script");var T={type:u,cache:!1,extension:p,responseType:"text",key:l,url:f,xhrSettings:d};a.call(this,i,T)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});r.register("script",function(h,i,l,f){if(Array.isArray(h))for(var u=0;u<h.length;u++)this.addFile(new n(this,h[u]));else this.addFile(new n(this,h,i,l,f));return this}),v.exports=n},85035:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(74099),r=t(19550),s=new o({Extends:r,initialize:function(n,h,i,l,f){r.call(this,n,h,i,f,l),this.type="spritesheet"},addToCache:function(){var e=this.linkFile;e?e.state>=g.FILE_COMPLETE&&(this.type==="normalMap"?this.cache.addSpriteSheet(this.key,e.data,this.config,this.data):this.cache.addSpriteSheet(this.key,this.data,this.config,e.data)):this.cache.addSpriteSheet(this.key,this.data,this.config)}});a.register("spritesheet",function(e,n,h,i){if(Array.isArray(e))for(var l=0;l<e.length;l++)this.addFile(new s(this,e[l]));else this.addFile(new s(this,e,n,h,i));return this}),v.exports=s},78776:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=new o({Extends:a,initialize:function(i,l,f,u){var d="text",p="txt",m=i.cacheManager.text;if(e(l)){var T=l;l=s(T,"key"),f=s(T,"url"),u=s(T,"xhrSettings"),p=s(T,"extension",p),d=s(T,"type",d),m=s(T,"cache",m)}var y={type:d,cache:m,extension:p,responseType:"text",key:l,url:f,xhrSettings:u};a.call(this,i,y)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});r.register("text",function(h,i,l){if(Array.isArray(h))for(var f=0;f<h.length;f++)this.addFile(new n(this,h[f]));else this.addFile(new n(this,h,i,l));return this}),v.exports=n},49477:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=t(80341),h=new o({Extends:a,initialize:function(l,f,u,d){var p="csv";if(e(f)){var m=f;f=s(m,"key"),u=s(m,"url"),d=s(m,"xhrSettings"),p=s(m,"extension",p)}var T={type:"tilemapCSV",cache:l.cacheManager.tilemap,extension:p,responseType:"text",key:f,url:u,xhrSettings:d};a.call(this,l,T),this.tilemapFormat=n.CSV},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,i)}});r.register("tilemapCSV",function(i,l,f){if(Array.isArray(i))for(var u=0;u<i.length;u++)this.addFile(new h(this,i[u]));else this.addFile(new h(this,i,l,f));return this}),v.exports=h},40807:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(518),r=t(80341),s=new o({Extends:a,initialize:function(n,h,i,l){a.call(this,n,h,i,l),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var e={format:r.WELTMEISTER,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapImpact",function(e,n,h){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new s(this,e[i]));else this.addFile(new s(this,e,n,h));return this}),v.exports=s},56775:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(518),r=t(80341),s=new o({Extends:a,initialize:function(n,h,i,l){a.call(this,n,h,i,l),this.type="tilemapJSON",this.cache=n.cacheManager.tilemap},addToCache:function(){var e={format:r.TILED_JSON,data:this.data};this.cache.add(this.key,e)}});g.register("tilemapTiledJSON",function(e,n,h){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new s(this,e[i]));else this.addFile(new s(this,e,n,h));return this}),v.exports=s},25771:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(74099),a=t(95540),r=t(19550),s=t(41212),e=t(26430),n=t(78776),h=new o({Extends:e,initialize:function(l,f,u,d,p,m){var T,y;if(s(f)){var S=f;f=a(S,"key"),T=new r(l,{key:f,url:a(S,"textureURL"),extension:a(S,"textureExtension","png"),normalMap:a(S,"normalMap"),xhrSettings:a(S,"textureXhrSettings")}),y=new n(l,{key:f,url:a(S,"atlasURL"),extension:a(S,"atlasExtension","txt"),xhrSettings:a(S,"atlasXhrSettings")})}else T=new r(l,f,u,p),y=new n(l,f,d,m);T.linkFile?e.call(this,l,"unityatlas",f,[T,y,T.linkFile]):e.call(this,l,"unityatlas",f,[T,y])},addToCache:function(){if(this.isReadyToProcess()){var i=this.files[0],l=this.files[1],f=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(i.key,i.data,l.data,f),this.complete=!0}}});g.register("unityAtlas",function(i,l,f,u,d){var p;if(Array.isArray(i))for(var m=0;m<i.length;m++)p=new h(this,i[m]),this.addFile(p.files);else p=new h(this,i,l,f,u,d),this.addFile(p.files);return this}),v.exports=h},33720:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(98356),e=t(95540),n=t(41212),h=new o({Extends:a,initialize:function(l,f,u,d){if(d===void 0&&(d=!1),n(f)){var p=f;f=e(p,"key"),u=e(p,"url",[]),d=e(p,"noAudio",!1)}var m=l.systems.game.device.video.getVideoURL(u);m||console.warn("VideoFile: No supported format for "+f);var T={type:"video",cache:l.cacheManager.video,extension:m.type,key:f,url:m.url,config:{noAudio:d}};a.call(this,l,T)},onProcess:function(){this.data={url:this.src,noAudio:this.config.noAudio,crossOrigin:this.crossOrigin},this.onProcessComplete()},load:function(){this.src=s(this,this.loader.baseURL),this.state=g.FILE_LOADED,this.loader.nextFile(this,!0)}});r.register("video",function(i,l,f){if(Array.isArray(i))for(var u=0;u<i.length;u++)this.addFile(new h(this,i[u]));else this.addFile(new h(this,i,l,f));return this}),v.exports=h},57318:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(23906),a=t(41299),r=t(74099),s=t(95540),e=t(41212),n=t(56836),h=new o({Extends:a,initialize:function(l,f,u,d){var p="xml";if(e(f)){var m=f;f=s(m,"key"),u=s(m,"url"),d=s(m,"xhrSettings"),p=s(m,"extension",p)}var T={type:"xml",cache:l.cacheManager.xml,extension:p,responseType:"text",key:f,url:u,xhrSettings:d};a.call(this,l,T)},onProcess:function(){this.state=g.FILE_PROCESSING,this.data=n(this.xhrLoader.responseText),this.data?this.onProcessComplete():this.onProcessError()}});r.register("xml",function(i,l,f){if(Array.isArray(i))for(var u=0;u<i.length;u++)this.addFile(new h(this,i[u]));else this.addFile(new h(this,i,l,f));return this}),v.exports=h},64589:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AnimationJSONFile:t(14135),AsepriteFile:t(76272),AtlasJSONFile:t(38734),AtlasXMLFile:t(74599),AudioFile:t(21097),AudioSpriteFile:t(89524),BinaryFile:t(85722),BitmapFontFile:t(97025),CompressedTextureFile:t(69559),CSSFile:t(16024),GLSLFile:t(47931),HTML5AudioFile:t(89749),HTMLFile:t(88470),HTMLTextureFile:t(14643),ImageFile:t(19550),JSONFile:t(518),MultiAtlasFile:t(59327),MultiScriptFile:t(99297),OBJFile:t(41846),PackFile:t(58610),PluginFile:t(48988),SceneFile:t(88423),ScenePluginFile:t(56812),ScriptFile:t(34328),SpriteSheetFile:t(85035),SVGFile:t(67397),TextFile:t(78776),TilemapCSVFile:t(49477),TilemapImpactFile:t(40807),TilemapJSONFile:t(56775),UnityAtlasFile:t(25771),VideoFile:t(33720),XMLFile:t(57318)}},57777:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23906),g=t(79291),a={Events:t(54899),FileTypes:t(64589),File:t(41299),FileTypesManager:t(74099),GetURL:t(98356),LoaderPlugin:t(74261),MergeXHRSettings:t(3374),MultiFile:t(26430),XHRLoader:t(84376),XHRSettings:t(92638)};a=g(!1,a,o),v.exports=a},53307:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){for(var o=0,g=0;g<t.length;g++)o+=+t[g];return o/t.length};v.exports=E},85710:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6411),g=function(a,r){return o(a)/o(r)/o(a-r)};v.exports=g},30976:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return Math.floor(Math.random()*(o-t+1)+t)};v.exports=E},87842:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){var s=(a-o)*.5,e=(r-g)*.5,n=t*t,h=t*n;return(2*g-2*a+s+e)*h+(-3*g+3*a-2*s-e)*n+s*t+g};v.exports=E},26302:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=10);var a=Math.pow(g,-o);return Math.ceil(t*a)/a};v.exports=E},45319:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return Math.max(o,Math.min(g,t))};v.exports=E},39506:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a){return a*o.DEG_TO_RAD};v.exports=g},61241:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return Math.abs(t-o)};v.exports=E},38857:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(37867),r=t(29747),s=new a,e=new g({initialize:function n(h,i,l,f){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f=n.DefaultOrder),this._x=h,this._y=i,this._z=l,this._order=f,this.onChangeCallback=r},x:{get:function(){return this._x},set:function(n){this._x=n,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(n){this._y=n,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(n){this._z=n,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(n){this._order=n,this.onChangeCallback(this)}},set:function(n,h,i,l){return l===void 0&&(l=this._order),this._x=n,this._y=h,this._z=i,this._order=l,this.onChangeCallback(this),this},copy:function(n){return this.set(n.x,n.y,n.z,n.order)},setFromQuaternion:function(n,h,i){return h===void 0&&(h=this._order),i===void 0&&(i=!1),s.fromQuat(n),this.setFromRotationMatrix(s,h,i)},setFromRotationMatrix:function(n,h,i){h===void 0&&(h=this._order),i===void 0&&(i=!1);var l=n.val,f=l[0],u=l[4],d=l[8],p=l[1],m=l[5],T=l[9],y=l[2],S=l[6],C=l[10],R=0,I=0,L=0,w=.99999;switch(h){case"XYZ":{I=Math.asin(o(d,-1,1)),Math.abs(d)<w?(R=Math.atan2(-T,C),L=Math.atan2(-u,f)):R=Math.atan2(S,m);break}case"YXZ":{R=Math.asin(-o(T,-1,1)),Math.abs(T)<w?(I=Math.atan2(d,C),L=Math.atan2(p,m)):I=Math.atan2(-y,f);break}case"ZXY":{R=Math.asin(o(S,-1,1)),Math.abs(S)<w?(I=Math.atan2(-y,C),L=Math.atan2(-u,m)):L=Math.atan2(p,f);break}case"ZYX":{I=Math.asin(-o(y,-1,1)),Math.abs(y)<w?(R=Math.atan2(S,C),L=Math.atan2(p,f)):L=Math.atan2(-u,m);break}case"YZX":{L=Math.asin(o(p,-1,1)),Math.abs(p)<w?(R=Math.atan2(-T,m),I=Math.atan2(-y,f)):I=Math.atan2(d,C);break}case"XZY":{L=Math.asin(-o(u,-1,1)),Math.abs(u)<w?(R=Math.atan2(S,m),I=Math.atan2(d,f)):R=Math.atan2(-T,C);break}}return this._x=R,this._y=I,this._z=L,this._order=h,i&&this.onChangeCallback(this),this}});e.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],e.DefaultOrder="XYZ",v.exports=e},6411:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){if(t===0)return 1;for(var o=t;--t;)o*=t;return o};v.exports=E},99472:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return Math.random()*(o-t)+t};v.exports=E},77623:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=10);var a=Math.pow(g,-o);return Math.floor(t*a)/a};v.exports=E},62945:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=function(a,r,s){return a=o(a,0,1),(s-r)*a+r};v.exports=g},38265:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t/o/1e3};v.exports=E},78702:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t==parseFloat(t)?!(t%2):void 0};v.exports=E},94883:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t===parseFloat(t)?!(t%2):void 0};v.exports=E},28915:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return(o-t)*g+t};v.exports=E},94908:v=>{/**
 * @author       Greg McLean <GregDevProjects>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return g===void 0&&(g=0),t.clone().lerp(o,g)};v.exports=E},94434:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r){this.val=new Float32Array(9),r?this.copy(r):this.identity()},clone:function(){return new g(this)},set:function(a){return this.copy(a)},copy:function(a){var r=this.val,s=a.val;return r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],r[4]=s[4],r[5]=s[5],r[6]=s[6],r[7]=s[7],r[8]=s[8],this},fromMat4:function(a){var r=a.val,s=this.val;return s[0]=r[0],s[1]=r[1],s[2]=r[2],s[3]=r[4],s[4]=r[5],s[5]=r[6],s[6]=r[8],s[7]=r[9],s[8]=r[10],this},fromArray:function(a){var r=this.val;return r[0]=a[0],r[1]=a[1],r[2]=a[2],r[3]=a[3],r[4]=a[4],r[5]=a[5],r[6]=a[6],r[7]=a[7],r[8]=a[8],this},identity:function(){var a=this.val;return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,this},transpose:function(){var a=this.val,r=a[1],s=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=r,a[5]=a[7],a[6]=s,a[7]=e,this},invert:function(){var a=this.val,r=a[0],s=a[1],e=a[2],n=a[3],h=a[4],i=a[5],l=a[6],f=a[7],u=a[8],d=u*h-i*f,p=-u*n+i*l,m=f*n-h*l,T=r*d+s*p+e*m;return T?(T=1/T,a[0]=d*T,a[1]=(-u*s+e*f)*T,a[2]=(i*s-e*h)*T,a[3]=p*T,a[4]=(u*r-e*l)*T,a[5]=(-i*r+e*n)*T,a[6]=m*T,a[7]=(-f*r+s*l)*T,a[8]=(h*r-s*n)*T,this):null},adjoint:function(){var a=this.val,r=a[0],s=a[1],e=a[2],n=a[3],h=a[4],i=a[5],l=a[6],f=a[7],u=a[8];return a[0]=h*u-i*f,a[1]=e*f-s*u,a[2]=s*i-e*h,a[3]=i*l-n*u,a[4]=r*u-e*l,a[5]=e*n-r*i,a[6]=n*f-h*l,a[7]=s*l-r*f,a[8]=r*h-s*n,this},determinant:function(){var a=this.val,r=a[0],s=a[1],e=a[2],n=a[3],h=a[4],i=a[5],l=a[6],f=a[7],u=a[8];return r*(u*h-i*f)+s*(-u*n+i*l)+e*(f*n-h*l)},multiply:function(a){var r=this.val,s=r[0],e=r[1],n=r[2],h=r[3],i=r[4],l=r[5],f=r[6],u=r[7],d=r[8],p=a.val,m=p[0],T=p[1],y=p[2],S=p[3],C=p[4],R=p[5],I=p[6],L=p[7],w=p[8];return r[0]=m*s+T*h+y*f,r[1]=m*e+T*i+y*u,r[2]=m*n+T*l+y*d,r[3]=S*s+C*h+R*f,r[4]=S*e+C*i+R*u,r[5]=S*n+C*l+R*d,r[6]=I*s+L*h+w*f,r[7]=I*e+L*i+w*u,r[8]=I*n+L*l+w*d,this},translate:function(a){var r=this.val,s=a.x,e=a.y;return r[6]=s*r[0]+e*r[3]+r[6],r[7]=s*r[1]+e*r[4]+r[7],r[8]=s*r[2]+e*r[5]+r[8],this},rotate:function(a){var r=this.val,s=r[0],e=r[1],n=r[2],h=r[3],i=r[4],l=r[5],f=Math.sin(a),u=Math.cos(a);return r[0]=u*s+f*h,r[1]=u*e+f*i,r[2]=u*n+f*l,r[3]=u*h-f*s,r[4]=u*i-f*e,r[5]=u*l-f*n,this},scale:function(a){var r=this.val,s=a.x,e=a.y;return r[0]=s*r[0],r[1]=s*r[1],r[2]=s*r[2],r[3]=e*r[3],r[4]=e*r[4],r[5]=e*r[5],this},fromQuat:function(a){var r=a.x,s=a.y,e=a.z,n=a.w,h=r+r,i=s+s,l=e+e,f=r*h,u=r*i,d=r*l,p=s*i,m=s*l,T=e*l,y=n*h,S=n*i,C=n*l,R=this.val;return R[0]=1-(p+T),R[3]=u+C,R[6]=d-S,R[1]=u-C,R[4]=1-(f+T),R[7]=m+y,R[2]=d+S,R[5]=m-y,R[8]=1-(f+p),this},normalFromMat4:function(a){var r=a.val,s=this.val,e=r[0],n=r[1],h=r[2],i=r[3],l=r[4],f=r[5],u=r[6],d=r[7],p=r[8],m=r[9],T=r[10],y=r[11],S=r[12],C=r[13],R=r[14],I=r[15],L=e*f-n*l,w=e*u-h*l,O=e*d-i*l,B=n*u-h*f,V=n*d-i*f,b=h*d-i*u,X=p*C-m*S,K=p*R-T*S,Q=p*I-y*S,U=m*R-T*C,W=m*I-y*C,F=T*I-y*R,G=L*F-w*W+O*U+B*Q-V*K+b*X;return G?(G=1/G,s[0]=(f*F-u*W+d*U)*G,s[1]=(u*Q-l*F-d*K)*G,s[2]=(l*W-f*Q+d*X)*G,s[3]=(h*W-n*F-i*U)*G,s[4]=(e*F-h*Q+i*K)*G,s[5]=(n*Q-e*W-i*X)*G,s[6]=(C*b-R*V+I*B)*G,s[7]=(R*O-S*b-I*w)*G,s[8]=(S*V-C*O+I*L)*G,this):null}});v.exports=g},37867:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(25836),a=1e-6,r=new o({initialize:function(f){this.val=new Float32Array(16),f?this.copy(f):this.identity()},clone:function(){return new r(this)},set:function(l){return this.copy(l)},setValues:function(l,f,u,d,p,m,T,y,S,C,R,I,L,w,O,B){var V=this.val;return V[0]=l,V[1]=f,V[2]=u,V[3]=d,V[4]=p,V[5]=m,V[6]=T,V[7]=y,V[8]=S,V[9]=C,V[10]=R,V[11]=I,V[12]=L,V[13]=w,V[14]=O,V[15]=B,this},copy:function(l){var f=l.val;return this.setValues(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],f[8],f[9],f[10],f[11],f[12],f[13],f[14],f[15])},fromArray:function(l){return this.setValues(l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],l[8],l[9],l[10],l[11],l[12],l[13],l[14],l[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(l,f,u){var d=s.fromQuat(u),p=d.val,m=f.x,T=f.y,y=f.z;return this.setValues(p[0]*m,p[1]*m,p[2]*m,0,p[4]*T,p[5]*T,p[6]*T,0,p[8]*y,p[9]*y,p[10]*y,0,l.x,l.y,l.z,1)},xyz:function(l,f,u){this.identity();var d=this.val;return d[12]=l,d[13]=f,d[14]=u,this},scaling:function(l,f,u){this.zero();var d=this.val;return d[0]=l,d[5]=f,d[10]=u,d[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var l=this.val,f=l[1],u=l[2],d=l[3],p=l[6],m=l[7],T=l[11];return l[1]=l[4],l[2]=l[8],l[3]=l[12],l[4]=f,l[6]=l[9],l[7]=l[13],l[8]=u,l[9]=p,l[11]=l[14],l[12]=d,l[13]=m,l[14]=T,this},getInverse:function(l){return this.copy(l),this.invert()},invert:function(){var l=this.val,f=l[0],u=l[1],d=l[2],p=l[3],m=l[4],T=l[5],y=l[6],S=l[7],C=l[8],R=l[9],I=l[10],L=l[11],w=l[12],O=l[13],B=l[14],V=l[15],b=f*T-u*m,X=f*y-d*m,K=f*S-p*m,Q=u*y-d*T,U=u*S-p*T,W=d*S-p*y,F=C*O-R*w,G=C*B-I*w,z=C*V-L*w,Y=R*B-I*O,$=R*V-L*O,j=I*V-L*B,Z=b*j-X*$+K*Y+Q*z-U*G+W*F;return Z?(Z=1/Z,this.setValues((T*j-y*$+S*Y)*Z,(d*$-u*j-p*Y)*Z,(O*W-B*U+V*Q)*Z,(I*U-R*W-L*Q)*Z,(y*z-m*j-S*G)*Z,(f*j-d*z+p*G)*Z,(B*K-w*W-V*X)*Z,(C*W-I*K+L*X)*Z,(m*$-T*z+S*F)*Z,(u*z-f*$-p*F)*Z,(w*U-O*K+V*b)*Z,(R*K-C*U-L*b)*Z,(T*G-m*Y-y*F)*Z,(f*Y-u*G+d*F)*Z,(O*X-w*Q-B*b)*Z,(C*Q-R*X+I*b)*Z)):this},adjoint:function(){var l=this.val,f=l[0],u=l[1],d=l[2],p=l[3],m=l[4],T=l[5],y=l[6],S=l[7],C=l[8],R=l[9],I=l[10],L=l[11],w=l[12],O=l[13],B=l[14],V=l[15];return this.setValues(T*(I*V-L*B)-R*(y*V-S*B)+O*(y*L-S*I),-(u*(I*V-L*B)-R*(d*V-p*B)+O*(d*L-p*I)),u*(y*V-S*B)-T*(d*V-p*B)+O*(d*S-p*y),-(u*(y*L-S*I)-T*(d*L-p*I)+R*(d*S-p*y)),-(m*(I*V-L*B)-C*(y*V-S*B)+w*(y*L-S*I)),f*(I*V-L*B)-C*(d*V-p*B)+w*(d*L-p*I),-(f*(y*V-S*B)-m*(d*V-p*B)+w*(d*S-p*y)),f*(y*L-S*I)-m*(d*L-p*I)+C*(d*S-p*y),m*(R*V-L*O)-C*(T*V-S*O)+w*(T*L-S*R),-(f*(R*V-L*O)-C*(u*V-p*O)+w*(u*L-p*R)),f*(T*V-S*O)-m*(u*V-p*O)+w*(u*S-p*T),-(f*(T*L-S*R)-m*(u*L-p*R)+C*(u*S-p*T)),-(m*(R*B-I*O)-C*(T*B-y*O)+w*(T*I-y*R)),f*(R*B-I*O)-C*(u*B-d*O)+w*(u*I-d*R),-(f*(T*B-y*O)-m*(u*B-d*O)+w*(u*y-d*T)),f*(T*I-y*R)-m*(u*I-d*R)+C*(u*y-d*T))},determinant:function(){var l=this.val,f=l[0],u=l[1],d=l[2],p=l[3],m=l[4],T=l[5],y=l[6],S=l[7],C=l[8],R=l[9],I=l[10],L=l[11],w=l[12],O=l[13],B=l[14],V=l[15],b=f*T-u*m,X=f*y-d*m,K=f*S-p*m,Q=u*y-d*T,U=u*S-p*T,W=d*S-p*y,F=C*O-R*w,G=C*B-I*w,z=C*V-L*w,Y=R*B-I*O,$=R*V-L*O,j=I*V-L*B;return b*j-X*$+K*Y+Q*z-U*G+W*F},multiply:function(l){var f=this.val,u=f[0],d=f[1],p=f[2],m=f[3],T=f[4],y=f[5],S=f[6],C=f[7],R=f[8],I=f[9],L=f[10],w=f[11],O=f[12],B=f[13],V=f[14],b=f[15],X=l.val,K=X[0],Q=X[1],U=X[2],W=X[3];return f[0]=K*u+Q*T+U*R+W*O,f[1]=K*d+Q*y+U*I+W*B,f[2]=K*p+Q*S+U*L+W*V,f[3]=K*m+Q*C+U*w+W*b,K=X[4],Q=X[5],U=X[6],W=X[7],f[4]=K*u+Q*T+U*R+W*O,f[5]=K*d+Q*y+U*I+W*B,f[6]=K*p+Q*S+U*L+W*V,f[7]=K*m+Q*C+U*w+W*b,K=X[8],Q=X[9],U=X[10],W=X[11],f[8]=K*u+Q*T+U*R+W*O,f[9]=K*d+Q*y+U*I+W*B,f[10]=K*p+Q*S+U*L+W*V,f[11]=K*m+Q*C+U*w+W*b,K=X[12],Q=X[13],U=X[14],W=X[15],f[12]=K*u+Q*T+U*R+W*O,f[13]=K*d+Q*y+U*I+W*B,f[14]=K*p+Q*S+U*L+W*V,f[15]=K*m+Q*C+U*w+W*b,this},multiplyLocal:function(l){var f=this.val,u=l.val;return this.setValues(f[0]*u[0]+f[1]*u[4]+f[2]*u[8]+f[3]*u[12],f[0]*u[1]+f[1]*u[5]+f[2]*u[9]+f[3]*u[13],f[0]*u[2]+f[1]*u[6]+f[2]*u[10]+f[3]*u[14],f[0]*u[3]+f[1]*u[7]+f[2]*u[11]+f[3]*u[15],f[4]*u[0]+f[5]*u[4]+f[6]*u[8]+f[7]*u[12],f[4]*u[1]+f[5]*u[5]+f[6]*u[9]+f[7]*u[13],f[4]*u[2]+f[5]*u[6]+f[6]*u[10]+f[7]*u[14],f[4]*u[3]+f[5]*u[7]+f[6]*u[11]+f[7]*u[15],f[8]*u[0]+f[9]*u[4]+f[10]*u[8]+f[11]*u[12],f[8]*u[1]+f[9]*u[5]+f[10]*u[9]+f[11]*u[13],f[8]*u[2]+f[9]*u[6]+f[10]*u[10]+f[11]*u[14],f[8]*u[3]+f[9]*u[7]+f[10]*u[11]+f[11]*u[15],f[12]*u[0]+f[13]*u[4]+f[14]*u[8]+f[15]*u[12],f[12]*u[1]+f[13]*u[5]+f[14]*u[9]+f[15]*u[13],f[12]*u[2]+f[13]*u[6]+f[14]*u[10]+f[15]*u[14],f[12]*u[3]+f[13]*u[7]+f[14]*u[11]+f[15]*u[15])},premultiply:function(l){return this.multiplyMatrices(l,this)},multiplyMatrices:function(l,f){var u=l.val,d=f.val,p=u[0],m=u[4],T=u[8],y=u[12],S=u[1],C=u[5],R=u[9],I=u[13],L=u[2],w=u[6],O=u[10],B=u[14],V=u[3],b=u[7],X=u[11],K=u[15],Q=d[0],U=d[4],W=d[8],F=d[12],G=d[1],z=d[5],Y=d[9],$=d[13],j=d[2],Z=d[6],q=d[10],_=d[14],tt=d[3],nt=d[7],at=d[11],st=d[15];return this.setValues(p*Q+m*G+T*j+y*tt,S*Q+C*G+R*j+I*tt,L*Q+w*G+O*j+B*tt,V*Q+b*G+X*j+K*tt,p*U+m*z+T*Z+y*nt,S*U+C*z+R*Z+I*nt,L*U+w*z+O*Z+B*nt,V*U+b*z+X*Z+K*nt,p*W+m*Y+T*q+y*at,S*W+C*Y+R*q+I*at,L*W+w*Y+O*q+B*at,V*W+b*Y+X*q+K*at,p*F+m*$+T*_+y*st,S*F+C*$+R*_+I*st,L*F+w*$+O*_+B*st,V*F+b*$+X*_+K*st)},translate:function(l){return this.translateXYZ(l.x,l.y,l.z)},translateXYZ:function(l,f,u){var d=this.val;return d[12]=d[0]*l+d[4]*f+d[8]*u+d[12],d[13]=d[1]*l+d[5]*f+d[9]*u+d[13],d[14]=d[2]*l+d[6]*f+d[10]*u+d[14],d[15]=d[3]*l+d[7]*f+d[11]*u+d[15],this},scale:function(l){return this.scaleXYZ(l.x,l.y,l.z)},scaleXYZ:function(l,f,u){var d=this.val;return d[0]=d[0]*l,d[1]=d[1]*l,d[2]=d[2]*l,d[3]=d[3]*l,d[4]=d[4]*f,d[5]=d[5]*f,d[6]=d[6]*f,d[7]=d[7]*f,d[8]=d[8]*u,d[9]=d[9]*u,d[10]=d[10]*u,d[11]=d[11]*u,this},makeRotationAxis:function(l,f){var u=Math.cos(f),d=Math.sin(f),p=1-u,m=l.x,T=l.y,y=l.z,S=p*m,C=p*T;return this.setValues(S*m+u,S*T-d*y,S*y+d*T,0,S*T+d*y,C*T+u,C*y-d*m,0,S*y-d*T,C*y+d*m,p*y*y+u,0,0,0,0,1)},rotate:function(l,f){var u=this.val,d=f.x,p=f.y,m=f.z,T=Math.sqrt(d*d+p*p+m*m);if(Math.abs(T)<a)return this;T=1/T,d*=T,p*=T,m*=T;var y=Math.sin(l),S=Math.cos(l),C=1-S,R=u[0],I=u[1],L=u[2],w=u[3],O=u[4],B=u[5],V=u[6],b=u[7],X=u[8],K=u[9],Q=u[10],U=u[11],W=u[12],F=u[13],G=u[14],z=u[15],Y=d*d*C+S,$=p*d*C+m*y,j=m*d*C-p*y,Z=d*p*C-m*y,q=p*p*C+S,_=m*p*C+d*y,tt=d*m*C+p*y,nt=p*m*C-d*y,at=m*m*C+S;return this.setValues(R*Y+O*$+X*j,I*Y+B*$+K*j,L*Y+V*$+Q*j,w*Y+b*$+U*j,R*Z+O*q+X*_,I*Z+B*q+K*_,L*Z+V*q+Q*_,w*Z+b*q+U*_,R*tt+O*nt+X*at,I*tt+B*nt+K*at,L*tt+V*nt+Q*at,w*tt+b*nt+U*at,W,F,G,z)},rotateX:function(l){var f=this.val,u=Math.sin(l),d=Math.cos(l),p=f[4],m=f[5],T=f[6],y=f[7],S=f[8],C=f[9],R=f[10],I=f[11];return f[4]=p*d+S*u,f[5]=m*d+C*u,f[6]=T*d+R*u,f[7]=y*d+I*u,f[8]=S*d-p*u,f[9]=C*d-m*u,f[10]=R*d-T*u,f[11]=I*d-y*u,this},rotateY:function(l){var f=this.val,u=Math.sin(l),d=Math.cos(l),p=f[0],m=f[1],T=f[2],y=f[3],S=f[8],C=f[9],R=f[10],I=f[11];return f[0]=p*d-S*u,f[1]=m*d-C*u,f[2]=T*d-R*u,f[3]=y*d-I*u,f[8]=p*u+S*d,f[9]=m*u+C*d,f[10]=T*u+R*d,f[11]=y*u+I*d,this},rotateZ:function(l){var f=this.val,u=Math.sin(l),d=Math.cos(l),p=f[0],m=f[1],T=f[2],y=f[3],S=f[4],C=f[5],R=f[6],I=f[7];return f[0]=p*d+S*u,f[1]=m*d+C*u,f[2]=T*d+R*u,f[3]=y*d+I*u,f[4]=S*d-p*u,f[5]=C*d-m*u,f[6]=R*d-T*u,f[7]=I*d-y*u,this},fromRotationTranslation:function(l,f){var u=l.x,d=l.y,p=l.z,m=l.w,T=u+u,y=d+d,S=p+p,C=u*T,R=u*y,I=u*S,L=d*y,w=d*S,O=p*S,B=m*T,V=m*y,b=m*S;return this.setValues(1-(L+O),R+b,I-V,0,R-b,1-(C+O),w+B,0,I+V,w-B,1-(C+L),0,f.x,f.y,f.z,1)},fromQuat:function(l){var f=l.x,u=l.y,d=l.z,p=l.w,m=f+f,T=u+u,y=d+d,S=f*m,C=f*T,R=f*y,I=u*T,L=u*y,w=d*y,O=p*m,B=p*T,V=p*y;return this.setValues(1-(I+w),C+V,R-B,0,C-V,1-(S+w),L+O,0,R+B,L-O,1-(S+I),0,0,0,0,1)},frustum:function(l,f,u,d,p,m){var T=1/(f-l),y=1/(d-u),S=1/(p-m);return this.setValues(p*2*T,0,0,0,0,p*2*y,0,0,(f+l)*T,(d+u)*y,(m+p)*S,-1,0,0,m*p*2*S,0)},perspective:function(l,f,u,d){var p=1/Math.tan(l/2),m=1/(u-d);return this.setValues(p/f,0,0,0,0,p,0,0,0,0,(d+u)*m,-1,0,0,2*d*u*m,0)},perspectiveLH:function(l,f,u,d){return this.setValues(2*u/l,0,0,0,0,2*u/f,0,0,0,0,-d/(u-d),1,0,0,u*d/(u-d),0)},ortho:function(l,f,u,d,p,m){var T=l-f,y=u-d,S=p-m;return T=T===0?T:1/T,y=y===0?y:1/y,S=S===0?S:1/S,this.setValues(-2*T,0,0,0,0,-2*y,0,0,0,0,2*S,0,(l+f)*T,(d+u)*y,(m+p)*S,1)},lookAtRH:function(l,f,u){var d=this.val;return i.subVectors(l,f),i.getLengthSquared()===0&&(i.z=1),i.normalize(),n.crossVectors(u,i),n.getLengthSquared()===0&&(Math.abs(u.z)===1?i.x+=1e-4:i.z+=1e-4,i.normalize(),n.crossVectors(u,i)),n.normalize(),h.crossVectors(i,n),d[0]=n.x,d[1]=n.y,d[2]=n.z,d[4]=h.x,d[5]=h.y,d[6]=h.z,d[8]=i.x,d[9]=i.y,d[10]=i.z,this},lookAt:function(l,f,u){var d=l.x,p=l.y,m=l.z,T=u.x,y=u.y,S=u.z,C=f.x,R=f.y,I=f.z;if(Math.abs(d-C)<a&&Math.abs(p-R)<a&&Math.abs(m-I)<a)return this.identity();var L=d-C,w=p-R,O=m-I,B=1/Math.sqrt(L*L+w*w+O*O);L*=B,w*=B,O*=B;var V=y*O-S*w,b=S*L-T*O,X=T*w-y*L;B=Math.sqrt(V*V+b*b+X*X),B?(B=1/B,V*=B,b*=B,X*=B):(V=0,b=0,X=0);var K=w*X-O*b,Q=O*V-L*X,U=L*b-w*V;return B=Math.sqrt(K*K+Q*Q+U*U),B?(B=1/B,K*=B,Q*=B,U*=B):(K=0,Q=0,U=0),this.setValues(V,K,L,0,b,Q,w,0,X,U,O,0,-(V*d+b*p+X*m),-(K*d+Q*p+U*m),-(L*d+w*p+O*m),1)},yawPitchRoll:function(l,f,u){this.zero(),s.zero(),e.zero();var d=this.val,p=s.val,m=e.val,T=Math.sin(u),y=Math.cos(u);return d[10]=1,d[15]=1,d[0]=y,d[1]=T,d[4]=-T,d[5]=y,T=Math.sin(f),y=Math.cos(f),p[0]=1,p[15]=1,p[5]=y,p[10]=y,p[9]=-T,p[6]=T,T=Math.sin(l),y=Math.cos(l),m[5]=1,m[15]=1,m[0]=y,m[2]=-T,m[8]=T,m[10]=y,this.multiplyLocal(s),this.multiplyLocal(e),this},setWorldMatrix:function(l,f,u,d,p){return this.yawPitchRoll(l.y,l.x,l.z),s.scaling(u.x,u.y,u.z),e.xyz(f.x,f.y,f.z),this.multiplyLocal(s),this.multiplyLocal(e),d&&this.multiplyLocal(d),p&&this.multiplyLocal(p),this},multiplyToMat4:function(l,f){var u=this.val,d=l.val,p=u[0],m=u[1],T=u[2],y=u[3],S=u[4],C=u[5],R=u[6],I=u[7],L=u[8],w=u[9],O=u[10],B=u[11],V=u[12],b=u[13],X=u[14],K=u[15],Q=d[0],U=d[1],W=d[2],F=d[3],G=d[4],z=d[5],Y=d[6],$=d[7],j=d[8],Z=d[9],q=d[10],_=d[11],tt=d[12],nt=d[13],at=d[14],st=d[15];return f.setValues(Q*p+U*S+W*L+F*V,U*m+U*C+W*w+F*b,W*T+U*R+W*O+F*X,F*y+U*I+W*B+F*K,G*p+z*S+Y*L+$*V,G*m+z*C+Y*w+$*b,G*T+z*R+Y*O+$*X,G*y+z*I+Y*B+$*K,j*p+Z*S+q*L+_*V,j*m+Z*C+q*w+_*b,j*T+Z*R+q*O+_*X,j*y+Z*I+q*B+_*K,tt*p+nt*S+at*L+st*V,tt*m+nt*C+at*w+st*b,tt*T+nt*R+at*O+st*X,tt*y+nt*I+at*B+st*K)},fromRotationXYTranslation:function(l,f,u){var d=f.x,p=f.y,m=f.z,T=Math.sin(l.x),y=Math.cos(l.x),S=Math.sin(l.y),C=Math.cos(l.y),R=d,I=p,L=m,w=-T,O=0-w*S,B=0-y*S,V=w*C,b=y*C;return u||(R=C*d+S*m,I=O*d+y*p+V*m,L=B*d+T*p+b*m),this.setValues(C,O,B,0,0,y,T,0,S,V,b,0,R,I,L,1)},getMaxScaleOnAxis:function(){var l=this.val,f=l[0]*l[0]+l[1]*l[1]+l[2]*l[2],u=l[4]*l[4]+l[5]*l[5]+l[6]*l[6],d=l[8]*l[8]+l[9]*l[9]+l[10]*l[10];return Math.sqrt(Math.max(f,u,d))}}),s=new r,e=new r,n=new g,h=new g,i=new g;v.exports=r},86883:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return Math.min(t+o,g)};v.exports=E},50040:v=>{/**
 * @author       Vladislav Forsh <vlad@robowhale.com>
 * @copyright    2021 RoboWhale
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=t.length;if(o===0)return 0;t.sort(function(a,r){return a-r});var g=Math.floor(o/2);return o%2===0?(t[g]+t[g-1])/2:t[g]};v.exports=E},37204:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return Math.max(t-o,g)};v.exports=E},65201:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){g===void 0&&(g=o+1);var r=(t-o)/(g-o);return r>1?a!==void 0?(r=(a-t)/(a-g),r<0&&(r=0)):r=1:r<0&&(r=0),r};v.exports=E},15746:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(94434),a=t(29747),r=t(25836),s=1e-6,e=new Int8Array([1,2,0]),n=new Float32Array([0,0,0]),h=new r(1,0,0),i=new r(0,1,0),l=new r,f=new g,u=new o({initialize:function(p,m,T,y){this.onChangeCallback=a,this.set(p,m,T,y)},x:{get:function(){return this._x},set:function(d){this._x=d,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(d){this._y=d,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(d){this._z=d,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(d){this._w=d,this.onChangeCallback(this)}},copy:function(d){return this.set(d)},set:function(d,p,m,T,y){return y===void 0&&(y=!0),typeof d=="object"?(this._x=d.x||0,this._y=d.y||0,this._z=d.z||0,this._w=d.w||0):(this._x=d||0,this._y=p||0,this._z=m||0,this._w=T||0),y&&this.onChangeCallback(this),this},add:function(d){return this._x+=d.x,this._y+=d.y,this._z+=d.z,this._w+=d.w,this.onChangeCallback(this),this},subtract:function(d){return this._x-=d.x,this._y-=d.y,this._z-=d.z,this._w-=d.w,this.onChangeCallback(this),this},scale:function(d){return this._x*=d,this._y*=d,this._z*=d,this._w*=d,this.onChangeCallback(this),this},length:function(){var d=this.x,p=this.y,m=this.z,T=this.w;return Math.sqrt(d*d+p*p+m*m+T*T)},lengthSq:function(){var d=this.x,p=this.y,m=this.z,T=this.w;return d*d+p*p+m*m+T*T},normalize:function(){var d=this.x,p=this.y,m=this.z,T=this.w,y=d*d+p*p+m*m+T*T;return y>0&&(y=1/Math.sqrt(y),this._x=d*y,this._y=p*y,this._z=m*y,this._w=T*y),this.onChangeCallback(this),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,p){p===void 0&&(p=0);var m=this.x,T=this.y,y=this.z,S=this.w;return this.set(m+p*(d.x-m),T+p*(d.y-T),y+p*(d.z-y),S+p*(d.w-S))},rotationTo:function(d,p){var m=d.x*p.x+d.y*p.y+d.z*p.z;return m<-.999999?(l.copy(h).cross(d).length()<s&&l.copy(i).cross(d),l.normalize(),this.setAxisAngle(l,Math.PI)):m>.999999?this.set(0,0,0,1):(l.copy(d).cross(p),this._x=l.x,this._y=l.y,this._z=l.z,this._w=1+m,this.normalize())},setAxes:function(d,p,m){var T=f.val;return T[0]=p.x,T[3]=p.y,T[6]=p.z,T[1]=m.x,T[4]=m.y,T[7]=m.z,T[2]=-d.x,T[5]=-d.y,T[8]=-d.z,this.fromMat3(f).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(d,p){p=p*.5;var m=Math.sin(p);return this.set(m*d.x,m*d.y,m*d.z,Math.cos(p))},multiply:function(d){var p=this.x,m=this.y,T=this.z,y=this.w,S=d.x,C=d.y,R=d.z,I=d.w;return this.set(p*I+y*S+m*R-T*C,m*I+y*C+T*S-p*R,T*I+y*R+p*C-m*S,y*I-p*S-m*C-T*R)},slerp:function(d,p){var m=this.x,T=this.y,y=this.z,S=this.w,C=d.x,R=d.y,I=d.z,L=d.w,w=m*C+T*R+y*I+S*L;w<0&&(w=-w,C=-C,R=-R,I=-I,L=-L);var O=1-p,B=p;if(1-w>s){var V=Math.acos(w),b=Math.sin(V);O=Math.sin((1-p)*V)/b,B=Math.sin(p*V)/b}return this.set(O*m+B*C,O*T+B*R,O*y+B*I,O*S+B*L)},invert:function(){var d=this.x,p=this.y,m=this.z,T=this.w,y=d*d+p*p+m*m+T*T,S=y?1/y:0;return this.set(-d*S,-p*S,-m*S,T*S)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(d){d*=.5;var p=this.x,m=this.y,T=this.z,y=this.w,S=Math.sin(d),C=Math.cos(d);return this.set(p*C+y*S,m*C+T*S,T*C-m*S,y*C-p*S)},rotateY:function(d){d*=.5;var p=this.x,m=this.y,T=this.z,y=this.w,S=Math.sin(d),C=Math.cos(d);return this.set(p*C-T*S,m*C+y*S,T*C+p*S,y*C-m*S)},rotateZ:function(d){d*=.5;var p=this.x,m=this.y,T=this.z,y=this.w,S=Math.sin(d),C=Math.cos(d);return this.set(p*C+m*S,m*C-p*S,T*C+y*S,y*C-T*S)},calculateW:function(){var d=this.x,p=this.y,m=this.z;return this.w=-Math.sqrt(1-d*d-p*p-m*m),this},setFromEuler:function(d,p){var m=d.x/2,T=d.y/2,y=d.z/2,S=Math.cos(m),C=Math.cos(T),R=Math.cos(y),I=Math.sin(m),L=Math.sin(T),w=Math.sin(y);switch(d.order){case"XYZ":{this.set(I*C*R+S*L*w,S*L*R-I*C*w,S*C*w+I*L*R,S*C*R-I*L*w,p);break}case"YXZ":{this.set(I*C*R+S*L*w,S*L*R-I*C*w,S*C*w-I*L*R,S*C*R+I*L*w,p);break}case"ZXY":{this.set(I*C*R-S*L*w,S*L*R+I*C*w,S*C*w+I*L*R,S*C*R-I*L*w,p);break}case"ZYX":{this.set(I*C*R-S*L*w,S*L*R+I*C*w,S*C*w-I*L*R,S*C*R+I*L*w,p);break}case"YZX":{this.set(I*C*R+S*L*w,S*L*R+I*C*w,S*C*w-I*L*R,S*C*R-I*L*w,p);break}case"XZY":{this.set(I*C*R-S*L*w,S*L*R-I*C*w,S*C*w+I*L*R,S*C*R+I*L*w,p);break}}return this},setFromRotationMatrix:function(d){var p=d.val,m=p[0],T=p[4],y=p[8],S=p[1],C=p[5],R=p[9],I=p[2],L=p[6],w=p[10],O=m+C+w,B;return O>0?(B=.5/Math.sqrt(O+1),this.set((L-R)*B,(y-I)*B,(S-T)*B,.25/B)):m>C&&m>w?(B=2*Math.sqrt(1+m-C-w),this.set(.25*B,(T+S)/B,(y+I)/B,(L-R)/B)):C>w?(B=2*Math.sqrt(1+C-m-w),this.set((T+S)/B,.25*B,(R+L)/B,(y-I)/B)):(B=2*Math.sqrt(1+w-m-C),this.set((y+I)/B,(R+L)/B,.25*B,(S-T)/B)),this},fromMat3:function(d){var p=d.val,m=p[0]+p[4]+p[8],T;if(m>0)T=Math.sqrt(m+1),this.w=.5*T,T=.5/T,this._x=(p[7]-p[5])*T,this._y=(p[2]-p[6])*T,this._z=(p[3]-p[1])*T;else{var y=0;p[4]>p[0]&&(y=1),p[8]>p[y*3+y]&&(y=2);var S=e[y],C=e[S];T=Math.sqrt(p[y*3+y]-p[S*3+S]-p[C*3+C]+1),n[y]=.5*T,T=.5/T,n[S]=(p[S*3+y]+p[y*3+S])*T,n[C]=(p[C*3+y]+p[y*3+C])*T,this._x=n[0],this._y=n[1],this._z=n[2],this._w=(p[C*3+S]-p[S*3+C])*T}return this.onChangeCallback(this),this}});v.exports=u},43396:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a){return a*o.RAD_TO_DEG};v.exports=g},74362:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=1);var g=Math.random()*2*Math.PI;return t.x=Math.cos(g)*o,t.y=Math.sin(g)*o,t};v.exports=E},60706:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=1);var g=Math.random()*2*Math.PI,a=Math.random()*2-1,r=Math.sqrt(1-a*a)*o;return t.x=Math.cos(g)*r,t.y=Math.sin(g)*r,t.z=a*o,t};v.exports=E},67421:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=1),t.x=(Math.random()*2-1)*o,t.y=(Math.random()*2-1)*o,t.z=(Math.random()*2-1)*o,t.w=(Math.random()*2-1)*o,t};v.exports=E},36305:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.x,a=t.y;return t.x=g*Math.cos(o)-a*Math.sin(o),t.y=g*Math.sin(o)+a*Math.cos(o),t};v.exports=E},11520:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=Math.cos(a),s=Math.sin(a),e=t.x-o,n=t.y-g;return t.x=e*r-n*s+o,t.y=e*s+n*r+g,t};v.exports=E},1163:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){var s=a+Math.atan2(t.y-g,t.x-o);return t.x=o+r*Math.cos(s),t.y=g+r*Math.sin(s),t};v.exports=E},70336:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){return t.x=o+r*Math.cos(a),t.y=g+r*Math.sin(a),t};v.exports=E},72678:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(25836),g=t(37867),a=t(15746),r=new g,s=new a,e=new o,n=function(h,i,l){return s.setAxisAngle(i,l),r.fromRotationTranslation(s,e.set(0,0,0)),h.transformMat4(r)};v.exports=n},2284:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t>0?Math.ceil(t):Math.floor(t)};v.exports=E},41013:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=10);var a=Math.pow(g,-o);return Math.round(t*a)/a};v.exports=E},16922:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o===void 0&&(o=1),g===void 0&&(g=1),a===void 0&&(a=1),a*=Math.PI/t;for(var r=[],s=[],e=0;e<t;e++)g-=o*a,o+=g*a,r[e]=g,s[e]=o;return{sin:s,cos:r,length:t}};v.exports=E},7602:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t<=o?0:t>=g?1:(t=(t-o)/(g-o),t*t*(3-2*t))};v.exports=E},54261:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t=Math.max(0,Math.min(1,(t-o)/(g-o))),t*t*t*(t*(t*6-15)+10)};v.exports=E},44408:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e){e===void 0&&(e=new o);var n=0,h=0,i=r*s;return a>0&&a<=i&&(a>r-1?(h=Math.floor(a/r),n=a-h*r):n=a),e.set(n,h)};v.exports=g},85955:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n,h,i,l){l===void 0&&(l=new o);var f=Math.sin(n),u=Math.cos(n),d=u*h,p=f*h,m=-f*i,T=u*i,y=1/(d*T+m*-p);return l.x=T*y*a+-m*y*r+(e*m-s*T)*y,l.y=d*y*r+-p*y*a+(-e*d+s*p)*y,l};v.exports=g},26099:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(43855),a=new o({initialize:function(s,e){this.x=0,this.y=0,typeof s=="object"?(this.x=s.x||0,this.y=s.y||0):(e===void 0&&(e=s),this.x=s||0,this.y=e||0)},clone:function(){return new a(this.x,this.y)},copy:function(r){return this.x=r.x||0,this.y=r.y||0,this},setFromObject:function(r){return this.x=r.x||0,this.y=r.y||0,this},set:function(r,s){return s===void 0&&(s=r),this.x=r,this.y=s,this},setTo:function(r,s){return this.set(r,s)},setToPolar:function(r,s){return s==null&&(s=1),this.x=Math.cos(r)*s,this.y=Math.sin(r)*s,this},equals:function(r){return this.x===r.x&&this.y===r.y},fuzzyEquals:function(r,s){return g(this.x,r.x,s)&&g(this.y,r.y,s)},angle:function(){var r=Math.atan2(this.y,this.x);return r<0&&(r+=2*Math.PI),r},setAngle:function(r){return this.setToPolar(r,this.length())},add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.x-=r.x,this.y-=r.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},scale:function(r){return isFinite(r)?(this.x*=r,this.y*=r):(this.x=0,this.y=0),this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(r){var s=r.x-this.x,e=r.y-this.y;return Math.sqrt(s*s+e*e)},distanceSq:function(r){var s=r.x-this.x,e=r.y-this.y;return s*s+e*e},length:function(){var r=this.x,s=this.y;return Math.sqrt(r*r+s*s)},setLength:function(r){return this.normalize().scale(r)},lengthSq:function(){var r=this.x,s=this.y;return r*r+s*s},normalize:function(){var r=this.x,s=this.y,e=r*r+s*s;return e>0&&(e=1/Math.sqrt(e),this.x=r*e,this.y=s*e),this},normalizeRightHand:function(){var r=this.x;return this.x=this.y*-1,this.y=r,this},normalizeLeftHand:function(){var r=this.x;return this.x=this.y,this.y=r*-1,this},dot:function(r){return this.x*r.x+this.y*r.y},cross:function(r){return this.x*r.y-this.y*r.x},lerp:function(r,s){s===void 0&&(s=0);var e=this.x,n=this.y;return this.x=e+s*(r.x-e),this.y=n+s*(r.y-n),this},transformMat3:function(r){var s=this.x,e=this.y,n=r.val;return this.x=n[0]*s+n[3]*e+n[6],this.y=n[1]*s+n[4]*e+n[7],this},transformMat4:function(r){var s=this.x,e=this.y,n=r.val;return this.x=n[0]*s+n[4]*e+n[12],this.y=n[1]*s+n[5]*e+n[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(r){var s=this.length();return s&&s>r&&this.scale(r/s),this},reflect:function(r){return r=r.clone().normalize(),this.subtract(r.scale(2*this.dot(r)))},mirror:function(r){return this.reflect(r).negate()},rotate:function(r){var s=Math.cos(r),e=Math.sin(r);return this.set(s*this.x-e*this.y,e*this.x+s*this.y)},project:function(r){var s=this.dot(r)/r.dot(r);return this.copy(r).scale(s)}});a.ZERO=new a,a.RIGHT=new a(1,0),a.LEFT=new a(-1,0),a.UP=new a(0,-1),a.DOWN=new a(0,1),a.ONE=new a(1,1),v.exports=a},25836:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e){this.x=0,this.y=0,this.z=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0):(this.x=r||0,this.y=s||0,this.z=e||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},clone:function(){return new g(this.x,this.y,this.z)},addVectors:function(a,r){return this.x=a.x+r.x,this.y=a.y+r.y,this.z=a.z+r.z,this},crossVectors:function(a,r){var s=a.x,e=a.y,n=a.z,h=r.x,i=r.y,l=r.z;return this.x=e*l-n*i,this.y=n*h-s*l,this.z=s*i-e*h,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this},set:function(a,r,s){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0):(this.x=a||0,this.y=r||0,this.z=s||0),this},setFromMatrixPosition:function(a){return this.fromArray(a.val,12)},setFromMatrixColumn:function(a,r){return this.fromArray(a.val,r*4)},fromArray:function(a,r){return r===void 0&&(r=0),this.x=a[r],this.y=a[r+1],this.z=a[r+2],this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this},addScalar:function(a){return this.x+=a,this.y+=a,this.z+=a,this},addScale:function(a,r){return this.x+=a.x*r,this.y+=a.y*r,this.z+=a.z*r||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this},scale:function(a){return isFinite(a)?(this.x*=a,this.y*=a,this.z*=a):(this.x=0,this.y=0,this.z=0),this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(a){var r=a.x-this.x,s=a.y-this.y,e=a.z-this.z||0;return Math.sqrt(r*r+s*s+e*e)},distanceSq:function(a){var r=a.x-this.x,s=a.y-this.y,e=a.z-this.z||0;return r*r+s*s+e*e},length:function(){var a=this.x,r=this.y,s=this.z;return Math.sqrt(a*a+r*r+s*s)},lengthSq:function(){var a=this.x,r=this.y,s=this.z;return a*a+r*r+s*s},normalize:function(){var a=this.x,r=this.y,s=this.z,e=a*a+r*r+s*s;return e>0&&(e=1/Math.sqrt(e),this.x=a*e,this.y=r*e,this.z=s*e),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},cross:function(a){var r=this.x,s=this.y,e=this.z,n=a.x,h=a.y,i=a.z;return this.x=s*i-e*h,this.y=e*n-r*i,this.z=r*h-s*n,this},lerp:function(a,r){r===void 0&&(r=0);var s=this.x,e=this.y,n=this.z;return this.x=s+r*(a.x-s),this.y=e+r*(a.y-e),this.z=n+r*(a.z-n),this},applyMatrix3:function(a){var r=this.x,s=this.y,e=this.z,n=a.val;return this.x=n[0]*r+n[3]*s+n[6]*e,this.y=n[1]*r+n[4]*s+n[7]*e,this.z=n[2]*r+n[5]*s+n[8]*e,this},applyMatrix4:function(a){var r=this.x,s=this.y,e=this.z,n=a.val,h=1/(n[3]*r+n[7]*s+n[11]*e+n[15]);return this.x=(n[0]*r+n[4]*s+n[8]*e+n[12])*h,this.y=(n[1]*r+n[5]*s+n[9]*e+n[13])*h,this.z=(n[2]*r+n[6]*s+n[10]*e+n[14])*h,this},transformMat3:function(a){var r=this.x,s=this.y,e=this.z,n=a.val;return this.x=r*n[0]+s*n[3]+e*n[6],this.y=r*n[1]+s*n[4]+e*n[7],this.z=r*n[2]+s*n[5]+e*n[8],this},transformMat4:function(a){var r=this.x,s=this.y,e=this.z,n=a.val;return this.x=n[0]*r+n[4]*s+n[8]*e+n[12],this.y=n[1]*r+n[5]*s+n[9]*e+n[13],this.z=n[2]*r+n[6]*s+n[10]*e+n[14],this},transformCoordinates:function(a){var r=this.x,s=this.y,e=this.z,n=a.val,h=r*n[0]+s*n[4]+e*n[8]+n[12],i=r*n[1]+s*n[5]+e*n[9]+n[13],l=r*n[2]+s*n[6]+e*n[10]+n[14],f=r*n[3]+s*n[7]+e*n[11]+n[15];return this.x=h/f,this.y=i/f,this.z=l/f,this},transformQuat:function(a){var r=this.x,s=this.y,e=this.z,n=a.x,h=a.y,i=a.z,l=a.w,f=l*r+h*e-i*s,u=l*s+i*r-n*e,d=l*e+n*s-h*r,p=-n*r-h*s-i*e;return this.x=f*l+p*-n+u*-i-d*-h,this.y=u*l+p*-h+d*-n-f*-i,this.z=d*l+p*-i+f*-h-u*-n,this},project:function(a){var r=this.x,s=this.y,e=this.z,n=a.val,h=n[0],i=n[1],l=n[2],f=n[3],u=n[4],d=n[5],p=n[6],m=n[7],T=n[8],y=n[9],S=n[10],C=n[11],R=n[12],I=n[13],L=n[14],w=n[15],O=1/(r*f+s*m+e*C+w);return this.x=(r*h+s*u+e*T+R)*O,this.y=(r*i+s*d+e*y+I)*O,this.z=(r*l+s*p+e*S+L)*O,this},projectViewMatrix:function(a,r){return this.applyMatrix4(a).applyMatrix4(r)},unprojectViewMatrix:function(a,r){return this.applyMatrix4(a).applyMatrix4(r)},unproject:function(a,r){var s=a.x,e=a.y,n=a.z,h=a.w,i=this.x-s,l=h-this.y-1-e,f=this.z;return this.x=2*i/n-1,this.y=2*l/h-1,this.z=2*f-1,this.project(r)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});g.ZERO=new g,g.RIGHT=new g(1,0,0),g.LEFT=new g(-1,0,0),g.UP=new g(0,-1,0),g.DOWN=new g(0,1,0),g.FORWARD=new g(0,0,1),g.BACK=new g(0,0,-1),g.ONE=new g(1,1,1),v.exports=g},61369:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n){this.x=0,this.y=0,this.z=0,this.w=0,typeof r=="object"?(this.x=r.x||0,this.y=r.y||0,this.z=r.z||0,this.w=r.w||0):(this.x=r||0,this.y=s||0,this.z=e||0,this.w=n||0)},clone:function(){return new g(this.x,this.y,this.z,this.w)},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z||0,this.w=a.w||0,this},equals:function(a){return this.x===a.x&&this.y===a.y&&this.z===a.z&&this.w===a.w},set:function(a,r,s,e){return typeof a=="object"?(this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.w=a.w||0):(this.x=a||0,this.y=r||0,this.z=s||0,this.w=e||0),this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z||0,this.w+=a.w||0,this},subtract:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z||0,this.w-=a.w||0,this},scale:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},length:function(){var a=this.x,r=this.y,s=this.z,e=this.w;return Math.sqrt(a*a+r*r+s*s+e*e)},lengthSq:function(){var a=this.x,r=this.y,s=this.z,e=this.w;return a*a+r*r+s*s+e*e},normalize:function(){var a=this.x,r=this.y,s=this.z,e=this.w,n=a*a+r*r+s*s+e*e;return n>0&&(n=1/Math.sqrt(n),this.x=a*n,this.y=r*n,this.z=s*n,this.w=e*n),this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lerp:function(a,r){r===void 0&&(r=0);var s=this.x,e=this.y,n=this.z,h=this.w;return this.x=s+r*(a.x-s),this.y=e+r*(a.y-e),this.z=n+r*(a.z-n),this.w=h+r*(a.w-h),this},multiply:function(a){return this.x*=a.x,this.y*=a.y,this.z*=a.z||1,this.w*=a.w||1,this},divide:function(a){return this.x/=a.x,this.y/=a.y,this.z/=a.z||1,this.w/=a.w||1,this},distance:function(a){var r=a.x-this.x,s=a.y-this.y,e=a.z-this.z||0,n=a.w-this.w||0;return Math.sqrt(r*r+s*s+e*e+n*n)},distanceSq:function(a){var r=a.x-this.x,s=a.y-this.y,e=a.z-this.z||0,n=a.w-this.w||0;return r*r+s*s+e*e+n*n},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(a){var r=this.x,s=this.y,e=this.z,n=this.w,h=a.val;return this.x=h[0]*r+h[4]*s+h[8]*e+h[12]*n,this.y=h[1]*r+h[5]*s+h[9]*e+h[13]*n,this.z=h[2]*r+h[6]*s+h[10]*e+h[14]*n,this.w=h[3]*r+h[7]*s+h[11]*e+h[15]*n,this},transformQuat:function(a){var r=this.x,s=this.y,e=this.z,n=a.x,h=a.y,i=a.z,l=a.w,f=l*r+h*e-i*s,u=l*s+i*r-n*e,d=l*e+n*s-h*r,p=-n*r-h*s-i*e;return this.x=f*l+p*-n+u*-i-d*-h,this.y=u*l+p*-h+d*-n-f*-i,this.z=d*l+p*-i+f*-h-u*-n,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});g.prototype.sub=g.prototype.subtract,g.prototype.mul=g.prototype.multiply,g.prototype.div=g.prototype.divide,g.prototype.dist=g.prototype.distance,g.prototype.distSq=g.prototype.distanceSq,g.prototype.len=g.prototype.length,g.prototype.lenSq=g.prototype.lengthSq,v.exports=g},60417:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return Math.abs(t-o)<=g};v.exports=E},15994:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=g-o;return o+((t-o)%a+a)%a};v.exports=E},31040:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return Math.atan2(a-o,g-t)};v.exports=E},55495:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return Math.atan2(o.y-t.y,o.x-t.x)};v.exports=E},128:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return Math.atan2(o.x-t.x,o.y-t.y)};v.exports=E},41273:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return Math.atan2(g-t,a-o)};v.exports=E},1432:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a){return a>Math.PI&&(a-=o.PI2),Math.abs(((a+o.TAU)%o.PI2-o.PI2)%o.PI2)};v.exports=g},12407:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t=t%(2*Math.PI),t>=0?t:t+2*Math.PI};v.exports=E},53993:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99472),g=function(){return o(-Math.PI,Math.PI)};v.exports=g},86564:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       @samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(99472),g=function(){return o(-180,180)};v.exports=g},90154:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(12407),g=function(a){return o(a+Math.PI)};v.exports=g},48736:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=function(a,r,s){return s===void 0&&(s=.05),a===r||(Math.abs(r-a)<=s||Math.abs(r-a)>=o.PI2-s?a=r:(Math.abs(r-a)>Math.PI&&(r<a?r+=o.PI2:r-=o.PI2),r>a?a+=s:r<a&&(a-=s))),a};v.exports=g},61430:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=o-t;if(g===0)return 0;var a=Math.floor((g- -180)/360);return g-a*360};v.exports=E},86554:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15994),g=function(a){return o(a,-Math.PI,Math.PI)};v.exports=g},30954:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15994),g=function(a){return o(a,-180,180)};v.exports=g},25588:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Between:t(31040),BetweenPoints:t(55495),BetweenPointsY:t(128),BetweenY:t(41273),CounterClockwise:t(1432),Normalize:t(12407),Random:t(53993),RandomDegrees:t(86564),Reverse:t(90154),RotateTo:t(48736),ShortestBetween:t(61430),Wrap:t(86554),WrapDegrees:t(30954)}},36383:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PI2:Math.PI*2,TAU:Math.PI*.5,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};v.exports=E},20339:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=t-g,s=o-a;return Math.sqrt(r*r+s*s)};v.exports=E},52816:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.x-o.x,a=t.y-o.y;return Math.sqrt(g*g+a*a)};v.exports=E},64559:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.x-o.x,a=t.y-o.y;return g*g+a*a};v.exports=E},82340:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return Math.max(Math.abs(t-g),Math.abs(o-a))};v.exports=E},14390:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){return r===void 0&&(r=2),Math.sqrt(Math.pow(g-t,r)+Math.pow(a-o,r))};v.exports=E},2243:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return Math.abs(t-g)+Math.abs(o-a)};v.exports=E},89774:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=t-g,s=o-a;return r*r+s*s};v.exports=E},50994:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Between:t(20339),BetweenPoints:t(52816),BetweenPointsSquared:t(64559),Chebyshev:t(82340),Power:t(14390),Snake:t(2243),Squared:t(89774)}},62640:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54178),g=t(41521),a=t(79980),r=t(85433),s=t(99140),e=t(48857),n=t(81596),h=t(59133),i=t(98516),l=t(35248),f=t(82500),u=t(49752);v.exports={Power0:n,Power1:h.Out,Power2:r.Out,Power3:i.Out,Power4:l.Out,Linear:n,Quad:h.Out,Cubic:r.Out,Quart:i.Out,Quint:l.Out,Sine:f.Out,Expo:e.Out,Circ:a.Out,Elastic:s.Out,Back:o.Out,Bounce:g.Out,Stepped:u,"Quad.easeIn":h.In,"Cubic.easeIn":r.In,"Quart.easeIn":i.In,"Quint.easeIn":l.In,"Sine.easeIn":f.In,"Expo.easeIn":e.In,"Circ.easeIn":a.In,"Elastic.easeIn":s.In,"Back.easeIn":o.In,"Bounce.easeIn":g.In,"Quad.easeOut":h.Out,"Cubic.easeOut":r.Out,"Quart.easeOut":i.Out,"Quint.easeOut":l.Out,"Sine.easeOut":f.Out,"Expo.easeOut":e.Out,"Circ.easeOut":a.Out,"Elastic.easeOut":s.Out,"Back.easeOut":o.Out,"Bounce.easeOut":g.Out,"Quad.easeInOut":h.InOut,"Cubic.easeInOut":r.InOut,"Quart.easeInOut":i.InOut,"Quint.easeInOut":l.InOut,"Sine.easeInOut":f.InOut,"Expo.easeInOut":e.InOut,"Circ.easeInOut":a.InOut,"Elastic.easeInOut":s.InOut,"Back.easeInOut":o.InOut,"Bounce.easeInOut":g.InOut}},1639:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=1.70158),t*t*((o+1)*t-o)};v.exports=E},50099:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=1.70158);var g=o*1.525;return(t*=2)<1?.5*(t*t*((g+1)*t-g)):.5*((t-=2)*t*((g+1)*t+g)+2)};v.exports=E},41286:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=1.70158),--t*t*((o+1)*t+o)+1};v.exports=E},54178:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(1639),Out:t(41286),InOut:t(50099)}},59590:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t=1-t,t<.36363636363636365?1-7.5625*t*t:t<.7272727272727273?1-(7.5625*(t-=.5454545454545454)*t+.75):t<.9090909090909091?1-(7.5625*(t-=.8181818181818182)*t+.9375):1-(7.5625*(t-=.9545454545454546)*t+.984375)};v.exports=E},41788:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=!1;return t<.5?(t=1-t*2,o=!0):t=t*2-1,t<.36363636363636365?t=7.5625*t*t:t<.7272727272727273?t=7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?t=7.5625*(t-=.8181818181818182)*t+.9375:t=7.5625*(t-=.9545454545454546)*t+.984375,o?(1-t)*.5:t*.5+.5};v.exports=E},69905:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375};v.exports=E},41521:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(59590),Out:t(69905),InOut:t(41788)}},91861:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return 1-Math.sqrt(1-t*t)};v.exports=E},4177:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)};v.exports=E},57512:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.sqrt(1- --t*t)};v.exports=E},79980:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(91861),Out:t(57512),InOut:t(4177)}},51150:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t*t*t};v.exports=E},82820:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)};v.exports=E},35033:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return--t*t*t+1};v.exports=E},85433:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(51150),Out:t(35033),InOut:t(82820)}},69965:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o===void 0&&(o=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var a=g/4;return o<1?o=1:a=g*Math.asin(1/o)/(2*Math.PI),-(o*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/g))};v.exports=E},50665:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o===void 0&&(o=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var a=g/4;return o<1?o=1:a=g*Math.asin(1/o)/(2*Math.PI),(t*=2)<1?-.5*(o*Math.pow(2,10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/g)):o*Math.pow(2,-10*(t-=1))*Math.sin((t-a)*(2*Math.PI)/g)*.5+1};v.exports=E},7744:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o===void 0&&(o=.1),g===void 0&&(g=.1),t===0)return 0;if(t===1)return 1;var a=g/4;return o<1?o=1:a=g*Math.asin(1/o)/(2*Math.PI),o*Math.pow(2,-10*t)*Math.sin((t-a)*(2*Math.PI)/g)+1};v.exports=E},99140:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(69965),Out:t(7744),InOut:t(50665)}},24590:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return Math.pow(2,10*(t-1))-.001};v.exports=E},87844:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))};v.exports=E},89433:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return 1-Math.pow(2,-10*t)};v.exports=E},48857:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(24590),Out:t(89433),InOut:t(87844)}},48820:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Back:t(54178),Bounce:t(41521),Circular:t(79980),Cubic:t(85433),Elastic:t(99140),Expo:t(48857),Linear:t(81596),Quadratic:t(59133),Quartic:t(98516),Quintic:t(35248),Sine:t(82500),Stepped:t(49752)}},7147:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t};v.exports=E},81596:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports=t(7147)},34826:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t*t};v.exports=E},20544:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)};v.exports=E},92029:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t*(2-t)};v.exports=E},59133:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(34826),Out:t(92029),InOut:t(20544)}},64413:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t*t*t*t};v.exports=E},78137:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)};v.exports=E},45840:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return 1- --t*t*t*t};v.exports=E},98516:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(64413),Out:t(45840),InOut:t(78137)}},87745:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t*t*t*t*t};v.exports=E},16509:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)};v.exports=E},17868:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return--t*t*t*t*t+1};v.exports=E},35248:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(87745),Out:t(17868),InOut:t(16509)}},80461:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t===0?0:t===1?1:1-Math.cos(t*Math.PI/2)};v.exports=E},34025:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t===0?0:t===1?1:.5*(1-Math.cos(Math.PI*t))};v.exports=E},52768:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t===0?0:t===1?1:Math.sin(t*Math.PI/2)};v.exports=E},82500:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={In:t(80461),Out:t(52768),InOut:t(34025)}},72251:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=1),t<=0?0:t>=1?1:((o*t|0)+1)*(1/o)};v.exports=E},49752:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports=t(72251)},75698:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=1e-4),Math.ceil(t-o)};v.exports=E},43855:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return g===void 0&&(g=1e-4),Math.abs(t-o)<g};v.exports=E},25777:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o=1e-4),Math.floor(t+o)};v.exports=E},5470:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return g===void 0&&(g=1e-4),t>o-g};v.exports=E},94977:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return g===void 0&&(g=1e-4),t<o+g};v.exports=E},48379:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Ceil:t(75698),Equal:t(43855),Floor:t(25777),GreaterThan:t(5470),LessThan:t(94977)}},75508:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36383),g=t(79291),a={Angle:t(25588),Distance:t(50994),Easing:t(48820),Fuzzy:t(48379),Interpolation:t(38289),Pow2:t(49001),Snap:t(73697),RandomDataGenerator:t(28453),Average:t(53307),Bernstein:t(85710),Between:t(30976),CatmullRom:t(87842),CeilTo:t(26302),Clamp:t(45319),DegToRad:t(39506),Difference:t(61241),Euler:t(38857),Factorial:t(6411),FloatBetween:t(99472),FloorTo:t(77623),FromPercent:t(62945),GetSpeed:t(38265),IsEven:t(78702),IsEvenStrict:t(94883),Linear:t(28915),LinearXY:t(94908),MaxAdd:t(86883),Median:t(50040),MinSub:t(37204),Percent:t(65201),RadToDeg:t(43396),RandomXY:t(74362),RandomXYZ:t(60706),RandomXYZW:t(67421),Rotate:t(36305),RotateAround:t(11520),RotateAroundDistance:t(1163),RotateTo:t(70336),RoundAwayFromZero:t(2284),RoundTo:t(41013),SinCosTableGenerator:t(16922),SmootherStep:t(54261),SmoothStep:t(7602),ToXY:t(44408),TransformXY:t(85955),Within:t(60417),Wrap:t(15994),Vector2:t(26099),Vector3:t(25836),Vector4:t(61369),Matrix3:t(94434),Matrix4:t(37867),Quaternion:t(15746),RotateVec3:t(72678)};a=g(!1,a,o),v.exports=a},89318:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85710),g=function(a,r){for(var s=0,e=a.length-1,n=0;n<=e;n++)s+=Math.pow(1-r,e-n)*Math.pow(r,n)*a[n]*o(e,n);return s};v.exports=g},77259:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87842),g=function(a,r){var s=a.length-1,e=s*r,n=Math.floor(e);return a[0]===a[s]?(r<0&&(n=Math.floor(e=s*(1+r))),o(e-n,a[(n-1+s)%s],a[n],a[(n+1)%s],a[(n+2)%s])):r<0?a[0]-(o(-e,a[0],a[0],a[1],a[1])-a[0]):r>1?a[s]-(o(e-s,a[s],a[s],a[s-1],a[s-1])-a[s]):o(e-n,a[n?n-1:0],a[n],a[s<n+1?s:n+1],a[s<n+2?s:n+2])};v.exports=g},36316:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(r,s){var e=1-r;return e*e*e*s}function t(r,s){var e=1-r;return 3*e*e*r*s}function o(r,s){return 3*(1-r)*r*r*s}function g(r,s){return r*r*r*s}var a=function(r,s,e,n,h){return E(r,s)+t(r,e)+o(r,n)+g(r,h)};v.exports=a},28392:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(28915),g=function(a,r){var s=a.length-1,e=s*r,n=Math.floor(e);return r<0?o(a[0],a[1],e):r>1?o(a[s],a[s-1],s-e):o(a[n],a[n+1>s?s:n+1],e-n)};v.exports=g},32112:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(a,r){var s=1-a;return s*s*r}function t(a,r){return 2*(1-a)*a*r}function o(a,r){return a*a*r}var g=function(a,r,s,e){return E(a,r)+t(a,s)+o(a,e)};v.exports=g},47235:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7602),g=function(a,r,s){return r+(s-r)*o(a,0,1)};v.exports=g},50178:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(54261),g=function(a,r,s){return r+(s-r)*o(a,0,1)};v.exports=g},38289:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Bezier:t(89318),CatmullRom:t(77259),CubicBezier:t(36316),Linear:t(28392),QuadraticBezier:t(32112),SmoothStep:t(47235),SmootherStep:t(50178)}},98439:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=Math.log(t)/.6931471805599453;return 1<<Math.ceil(o)};v.exports=E},50030:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t>0&&(t&t-1)===0&&o>0&&(o&o-1)===0};v.exports=E},81230:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t>0&&(t&t-1)===0};v.exports=E},49001:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={GetNext:t(98439),IsSize:t(50030),IsValue:t(81230)}},28453:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r){r===void 0&&(r=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],r&&this.init(r)},rnd:function(){var a=2091639*this.s0+this.c*23283064365386963e-26;return this.c=a|0,this.s0=this.s1,this.s1=this.s2,this.s2=a-this.c,this.s2},hash:function(a){var r,s=this.n;a=a.toString();for(var e=0;e<a.length;e++)s+=a.charCodeAt(e),r=.02519603282416938*s,s=r>>>0,r-=s,r*=s,s=r>>>0,r-=s,s+=r*4294967296;return this.n=s,(s>>>0)*23283064365386963e-26},init:function(a){typeof a=="string"?this.state(a):this.sow(a)},sow:function(a){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,!!a)for(var r=0;r<a.length&&a[r]!=null;r++){var s=a[r];this.s0-=this.hash(s),this.s0+=~~(this.s0<0),this.s1-=this.hash(s),this.s1+=~~(this.s1<0),this.s2-=this.hash(s),this.s2+=~~(this.s2<0)}},integer:function(){return this.rnd()*4294967296},frac:function(){return this.rnd()+(this.rnd()*2097152|0)*11102230246251565e-32},real:function(){return this.integer()+this.frac()},integerInRange:function(a,r){return Math.floor(this.realInRange(0,r-a+1)+a)},between:function(a,r){return Math.floor(this.realInRange(0,r-a+1)+a)},realInRange:function(a,r){return this.frac()*(r-a)+a},normal:function(){return 1-2*this.frac()},uuid:function(){var a="",r="";for(r=a="";a++<36;r+=~a%5|a*3&4?(a^15?8^this.frac()*(a^20?16:4):4).toString(16):"-");return r},pick:function(a){return a[this.integerInRange(0,a.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(a){return a[~~(Math.pow(this.frac(),2)*(a.length-.5)+.5)]},timestamp:function(a,r){return this.realInRange(a||9466848e5,r||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(a){return typeof a=="string"&&a.match(/^!rnd/)&&(a=a.split(","),this.c=parseFloat(a[1]),this.s0=parseFloat(a[2]),this.s1=parseFloat(a[3]),this.s2=parseFloat(a[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(a){for(var r=a.length-1,s=r;s>0;s--){var e=Math.floor(this.frac()*(s+1)),n=a[e];a[e]=a[s],a[s]=n}return a}});v.exports=g},63448:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return g===void 0&&(g=0),o===0?t:(t-=g,t=o*Math.ceil(t/o),a?(g+t)/o:g+t)};v.exports=E},56583:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return g===void 0&&(g=0),o===0?t:(t-=g,t=o*Math.floor(t/o),a?(g+t)/o:g+t)};v.exports=E},77720:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){return g===void 0&&(g=0),o===0?t:(t-=g,t=o*Math.round(t/o),a?(g+t)/o:g+t)};v.exports=E},73697:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Ceil:t(63448),Floor:t(56583),To:t(77720)}},85454:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */t(63595);var o=t(8054),g=t(79291),a={Actions:t(61061),Animations:t(60421),BlendModes:t(10312),Cache:t(83388),Cameras:t(26638),Core:t(42857),Class:t(83419),Create:t(15822),Curves:t(25410),Data:t(44965),Display:t(27460),DOM:t(84902),Events:t(93055),FX:t(66064),Game:t(50127),GameObjects:t(77856),Geom:t(55738),Input:t(14350),Loader:t(57777),Math:t(75508),Physics:t(44563),Plugins:t(18922),Renderer:t(36909),Scale:t(93364),ScaleModes:t(29795),Scene:t(97482),Scenes:t(62194),Structs:t(41392),Textures:t(27458),Tilemaps:t(62501),Time:t(90291),Tweens:t(43066),Utils:t(91799)};a.Sound=t(23717),a=g(!1,a,o),v.exports=a,t.g.Phaser=a},71289:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92209),a=t(88571),r=new o({Extends:a,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,n,h,i,l){a.call(this,e,n,h,i,l),this.body=null}});v.exports=r},86689:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(39506),a=t(20339),r=t(89774),s=t(66022),e=t(95540),n=t(46975),h=t(72441),i=t(47956),l=t(37277),f=t(44594),u=t(26099),d=t(82248),p=new o({initialize:function(T){this.scene=T,this.systems=T.sys,this.config=this.getConfig(),this.world,this.add,this._category=1,T.sys.events.once(f.BOOT,this.boot,this),T.sys.events.on(f.START,this.start,this)},boot:function(){this.world=new d(this.scene,this.config),this.add=new s(this.world),this.systems.events.once(f.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new d(this.scene,this.config),this.add=new s(this.world));var m=this.systems.events;e(this.config,"customUpdate",!1)||m.on(f.UPDATE,this.world.update,this.world),m.on(f.POST_UPDATE,this.world.postUpdate,this.world),m.once(f.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(f.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(f.UPDATE,this.world.update,this.world)},getConfig:function(){var m=this.systems.game.config.physics,T=this.systems.settings.physics,y=n(e(T,"arcade",{}),e(m,"arcade",{}));return y},nextCategory:function(){return this._category=this._category<<1,this._category},overlap:function(m,T,y,S,C){return y===void 0&&(y=null),S===void 0&&(S=null),C===void 0&&(C=y),this.world.collideObjects(m,T,y,S,C,!0)},collide:function(m,T,y,S,C){return y===void 0&&(y=null),S===void 0&&(S=null),C===void 0&&(C=y),this.world.collideObjects(m,T,y,S,C,!1)},collideTiles:function(m,T,y,S,C){return this.world.collideTiles(m,T,y,S,C)},overlapTiles:function(m,T,y,S,C){return this.world.overlapTiles(m,T,y,S,C)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(m,T,y,S,C,R){S===void 0&&(S=60);var I=Math.atan2(y-m.y,T-m.x);return m.body.acceleration.setToPolar(I,S),C!==void 0&&R!==void 0&&m.body.maxVelocity.set(C,R),I},accelerateToObject:function(m,T,y,S,C){return this.accelerateTo(m,T.x,T.y,y,S,C)},closest:function(m,T){T||(T=this.world.bodies.entries);for(var y=Number.MAX_VALUE,S=null,C=m.x,R=m.y,I=T.length,L=0;L<I;L++){var w=T[L],O=w.body||w;if(!(m===w||m===O||m===O.gameObject||m===O.center)){var B=r(C,R,O.center.x,O.center.y);B<y&&(S=w,y=B)}}return S},furthest:function(m,T){T||(T=this.world.bodies.entries);for(var y=-1,S=null,C=m.x,R=m.y,I=T.length,L=0;L<I;L++){var w=T[L],O=w.body||w;if(!(m===w||m===O||m===O.gameObject||m===O.center)){var B=r(C,R,O.center.x,O.center.y);B>y&&(S=w,y=B)}}return S},moveTo:function(m,T,y,S,C){S===void 0&&(S=60),C===void 0&&(C=0);var R=Math.atan2(y-m.y,T-m.x);return C>0&&(S=a(m.x,m.y,T,y)/(C/1e3)),m.body.velocity.setToPolar(R,S),R},moveToObject:function(m,T,y,S){return this.moveTo(m,T.x,T.y,y,S)},velocityFromAngle:function(m,T,y){return T===void 0&&(T=60),y===void 0&&(y=new u),y.setToPolar(g(m),T)},velocityFromRotation:function(m,T,y){return T===void 0&&(T=60),y===void 0&&(y=new u),y.setToPolar(m,T)},overlapRect:function(m,T,y,S,C,R){return i(this.world,m,T,y,S,C,R)},overlapCirc:function(m,T,y,S,C){return h(this.world,m,T,y,S,C)},shutdown:function(){if(this.world){var m=this.systems.events;m.off(f.UPDATE,this.world.update,this.world),m.off(f.POST_UPDATE,this.world.postUpdate,this.world),m.off(f.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null,this._category=1}},destroy:function(){this.shutdown(),this.scene.sys.events.off(f.START,this.start,this),this.scene=null,this.systems=null}});l.register("ArcadePhysics",p,"arcadePhysics"),v.exports=p},13759:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92209),a=t(68287),r=new o({Extends:a,Mixins:[g.Acceleration,g.Angular,g.Bounce,g.Collision,g.Debug,g.Drag,g.Enable,g.Friction,g.Gravity,g.Immovable,g.Mass,g.Pushable,g.Size,g.Velocity],initialize:function(e,n,h,i,l){a.call(this,e,n,h,i,l),this.body=null}});v.exports=r},37742:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(78389),a=t(37747),r=t(63012),s=t(43396),e=t(87841),n=t(37303),h=t(95829),i=t(26099),l=new o({Mixins:[g],initialize:function(u,d){var p=64,m=64,T={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},y=d!==void 0;y&&d.displayWidth&&(p=d.displayWidth,m=d.displayHeight),y||(d=T),this.world=u,this.gameObject=y?d:void 0,this.isBody=!0,this.transform={x:d.x,y:d.y,rotation:d.angle,scaleX:d.scaleX,scaleY:d.scaleY,displayOriginX:d.displayOriginX,displayOriginY:d.displayOriginY},this.debugShowBody=u.defaults.debugShowBody,this.debugShowVelocity=u.defaults.debugShowVelocity,this.debugBodyColor=u.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new i,this.position=new i(d.x-d.scaleX*d.displayOriginX,d.y-d.scaleY*d.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=d.angle,this.preRotation=d.angle,this.width=p,this.height=m,this.sourceWidth=p,this.sourceHeight=m,d.frame&&(this.sourceWidth=d.frame.realWidth,this.sourceHeight=d.frame.realHeight),this.halfWidth=Math.abs(p/2),this.halfHeight=Math.abs(m/2),this.center=new i(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new i,this.newVelocity=new i,this.deltaMax=new i,this.acceleration=new i,this.allowDrag=!0,this.drag=new i,this.allowGravity=!0,this.gravity=new i,this.bounce=new i,this.worldBounce=null,this.customBoundsRectangle=u.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new i(1e4,1e4),this.maxSpeed=-1,this.friction=new i(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=a.FACING_NONE,this.immovable=!1,this.pushable=!0,this.slideFactor=new i(1,1),this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=h(!1),this.touching=h(!0),this.wasTouching=h(!0),this.blocked=h(!0),this.syncBounds=!1,this.physicsType=a.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._sx=d.scaleX,this._sy=d.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new e,this.directControl=!1,this.autoFrame=this.position.clone()},updateBounds:function(){var f=this.gameObject,u=this.transform;if(f.parentContainer){var d=f.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);u.x=d.tx,u.y=d.ty,u.rotation=s(d.rotation),u.scaleX=d.scaleX,u.scaleY=d.scaleY,u.displayOriginX=f.displayOriginX,u.displayOriginY=f.displayOriginY}else u.x=f.x,u.y=f.y,u.rotation=f.angle,u.scaleX=f.scaleX,u.scaleY=f.scaleY,u.displayOriginX=f.displayOriginX,u.displayOriginY=f.displayOriginY;var p=!1;if(this.syncBounds){var m=f.getBounds(this._bounds);this.width=m.width,this.height=m.height,p=!0}else{var T=Math.abs(u.scaleX),y=Math.abs(u.scaleY);(this._sx!==T||this._sy!==y)&&(this.width=this.sourceWidth*T,this.height=this.sourceHeight*y,this._sx=T,this._sy=y,p=!0)}p&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var f=this.transform;this.position.x=f.x+f.scaleX*(this.offset.x-f.displayOriginX),this.position.y=f.y+f.scaleY*(this.offset.y-f.displayOriginY),this.updateCenter()},resetFlags:function(f){f===void 0&&(f=!1);var u=this.wasTouching,d=this.touching,p=this.blocked;f?h(!0,u):(u.none=d.none,u.up=d.up,u.down=d.down,u.left=d.left,u.right=d.right),h(!0,d),h(!0,p),this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(f,u){if(f&&this.resetFlags(),this.gameObject&&this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves){var d=this.position;this.prev.x=d.x,this.prev.y=d.y,this.prevFrame.x=d.x,this.prevFrame.y=d.y}f&&this.update(u)},update:function(f){var u=this.prev,d=this.position,p=this.velocity;if(u.set(d.x,d.y),!this.moves){this._dx=d.x-u.x,this._dy=d.y-u.y;return}if(this.directControl){var m=this.autoFrame;p.set((d.x-m.x)/f,(d.y-m.y)/f),this.world.updateMotion(this,f),this._dx=d.x-m.x,this._dy=d.y-m.y}else this.world.updateMotion(this,f),this.newVelocity.set(p.x*f,p.y*f),d.add(this.newVelocity),this._dx=d.x-u.x,this._dy=d.y-u.y;var T=p.x,y=p.y;if(this.updateCenter(),this.angle=Math.atan2(y,T),this.speed=Math.sqrt(T*T+y*y),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds){var S=this.blocked;this.world.emit(r.WORLD_BOUNDS,this,S.up,S.down,S.left,S.right)}},postUpdate:function(){var f=this.position,u=f.x-this.prevFrame.x,d=f.y-this.prevFrame.y,p=this.gameObject;if(this.moves){var m=this.deltaMax.x,T=this.deltaMax.y;m!==0&&u!==0&&(u<0&&u<-m?u=-m:u>0&&u>m&&(u=m)),T!==0&&d!==0&&(d<0&&d<-T?d=-T:d>0&&d>T&&(d=T)),p&&(p.x+=u,p.y+=d)}u<0?this.facing=a.FACING_LEFT:u>0&&(this.facing=a.FACING_RIGHT),d<0?this.facing=a.FACING_UP:d>0&&(this.facing=a.FACING_DOWN),this.allowRotation&&p&&(p.angle+=this.deltaZ()),this._tx=u,this._ty=d,this.autoFrame.set(f.x,f.y)},setBoundsRectangle:function(f){return this.customBoundsRectangle=f||this.world.bounds,this},checkWorldBounds:function(){var f=this.position,u=this.velocity,d=this.blocked,p=this.customBoundsRectangle,m=this.world.checkCollision,T=this.worldBounce?-this.worldBounce.x:-this.bounce.x,y=this.worldBounce?-this.worldBounce.y:-this.bounce.y,S=!1;return f.x<p.x&&m.left?(f.x=p.x,u.x*=T,d.left=!0,S=!0):this.right>p.right&&m.right&&(f.x=p.right-this.width,u.x*=T,d.right=!0,S=!0),f.y<p.y&&m.up?(f.y=p.y,u.y*=y,d.up=!0,S=!0):this.bottom>p.bottom&&m.down&&(f.y=p.bottom-this.height,u.y*=y,d.down=!0,S=!0),S&&(this.blocked.none=!1,this.updateCenter()),S},setOffset:function(f,u){return u===void 0&&(u=f),this.offset.set(f,u),this},setGameObject:function(f,u){return u===void 0&&(u=!0),this.world.remove(this),this.gameObject&&this.gameObject.body&&(this.gameObject.body=null),this.gameObject=f,f.body&&(f.body=this),this.setSize(),this.world.add(this),this.enable=u,this},setSize:function(f,u,d){d===void 0&&(d=!0);var p=this.gameObject;if(p&&(!f&&p.frame&&(f=p.frame.realWidth),!u&&p.frame&&(u=p.frame.realHeight)),this.sourceWidth=f,this.sourceHeight=u,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),d&&p&&p.getCenter){var m=(p.width-f)/2,T=(p.height-u)/2;this.offset.set(m,T)}return this.isCircle=!1,this.radius=0,this},setCircle:function(f,u,d){return u===void 0&&(u=this.offset.x),d===void 0&&(d=this.offset.y),f>0?(this.isCircle=!0,this.radius=f,this.sourceWidth=f*2,this.sourceHeight=f*2,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,d),this.updateCenter()):this.isCircle=!1,this},reset:function(f,u){this.stop();var d=this.gameObject;d&&(d.setPosition(f,u),this.rotation=d.angle,this.preRotation=d.angle);var p=this.position;d&&d.getTopLeft?d.getTopLeft(p):p.set(f,u),this.prev.copy(p),this.prevFrame.copy(p),this.autoFrame.copy(p),d&&this.updateBounds(),this.updateCenter(),this.collideWorldBounds&&this.checkWorldBounds(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(f){return f.x=this.x,f.y=this.y,f.right=this.right,f.bottom=this.bottom,f},hitTest:function(f,u){if(!this.isCircle)return n(this,f,u);if(this.radius>0&&f>=this.left&&f<=this.right&&u>=this.top&&u<=this.bottom){var d=(this.center.x-f)*(this.center.x-f),p=(this.center.y-u)*(this.center.y-u);return d+p<=this.radius*this.radius}return!1},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(f){var u=this.position,d=u.x+this.halfWidth,p=u.y+this.halfHeight;this.debugShowBody&&(f.lineStyle(f.defaultStrokeWidth,this.debugBodyColor),this.isCircle?f.strokeCircle(d,p,this.width/2):(this.checkCollision.up&&f.lineBetween(u.x,u.y,u.x+this.width,u.y),this.checkCollision.right&&f.lineBetween(u.x+this.width,u.y,u.x+this.width,u.y+this.height),this.checkCollision.down&&f.lineBetween(u.x,u.y+this.height,u.x+this.width,u.y+this.height),this.checkCollision.left&&f.lineBetween(u.x,u.y,u.x,u.y+this.height))),this.debugShowVelocity&&(f.lineStyle(f.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),f.lineBetween(d,p,d+this.velocity.x/2,p+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setDirectControl:function(f){return f===void 0&&(f=!0),this.directControl=f,this},setCollideWorldBounds:function(f,u,d,p){f===void 0&&(f=!0),this.collideWorldBounds=f;var m=u!==void 0,T=d!==void 0;return(m||T)&&(this.worldBounce||(this.worldBounce=new i),m&&(this.worldBounce.x=u),T&&(this.worldBounce.y=d)),p!==void 0&&(this.onWorldBounds=p),this},setVelocity:function(f,u){return this.velocity.set(f,u),f=this.velocity.x,u=this.velocity.y,this.speed=Math.sqrt(f*f+u*u),this},setVelocityX:function(f){return this.setVelocity(f,this.velocity.y)},setVelocityY:function(f){return this.setVelocity(this.velocity.x,f)},setMaxVelocity:function(f,u){return this.maxVelocity.set(f,u),this},setMaxVelocityX:function(f){return this.maxVelocity.x=f,this},setMaxVelocityY:function(f){return this.maxVelocity.y=f,this},setMaxSpeed:function(f){return this.maxSpeed=f,this},setSlideFactor:function(f,u){return this.slideFactor.set(f,u),this},setBounce:function(f,u){return this.bounce.set(f,u),this},setBounceX:function(f){return this.bounce.x=f,this},setBounceY:function(f){return this.bounce.y=f,this},setAcceleration:function(f,u){return this.acceleration.set(f,u),this},setAccelerationX:function(f){return this.acceleration.x=f,this},setAccelerationY:function(f){return this.acceleration.y=f,this},setAllowDrag:function(f){return f===void 0&&(f=!0),this.allowDrag=f,this},setAllowGravity:function(f){return f===void 0&&(f=!0),this.allowGravity=f,this},setAllowRotation:function(f){return f===void 0&&(f=!0),this.allowRotation=f,this},setDrag:function(f,u){return this.drag.set(f,u),this},setDamping:function(f){return this.useDamping=f,this},setDragX:function(f){return this.drag.x=f,this},setDragY:function(f){return this.drag.y=f,this},setGravity:function(f,u){return this.gravity.set(f,u),this},setGravityX:function(f){return this.gravity.x=f,this},setGravityY:function(f){return this.gravity.y=f,this},setFriction:function(f,u){return this.friction.set(f,u),this},setFrictionX:function(f){return this.friction.x=f,this},setFrictionY:function(f){return this.friction.y=f,this},setAngularVelocity:function(f){return this.angularVelocity=f,this},setAngularAcceleration:function(f){return this.angularAcceleration=f,this},setAngularDrag:function(f){return this.angularDrag=f,this},setMass:function(f){return this.mass=f,this},setImmovable:function(f){return f===void 0&&(f=!0),this.immovable=f,this},setEnable:function(f){return f===void 0&&(f=!0),this.enable=f,this},processX:function(f,u,d,p){this.x+=f,this.updateCenter(),u!==null&&(this.velocity.x=u*this.slideFactor.x);var m=this.blocked;d&&(m.left=!0,m.none=!1),p&&(m.right=!0,m.none=!1)},processY:function(f,u,d,p){this.y+=f,this.updateCenter(),u!==null&&(this.velocity.y=u*this.slideFactor.y);var m=this.blocked;d&&(m.up=!0,m.none=!1),p&&(m.down=!0,m.none=!1)},x:{get:function(){return this.position.x},set:function(f){this.position.x=f}},y:{get:function(){return this.position.y},set:function(f){this.position.y=f}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});v.exports=l},79342:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n,h,i,l){this.world=r,this.name="",this.active=!0,this.overlapOnly=s,this.object1=e,this.object2=n,this.collideCallback=h,this.processCallback=i,this.callbackContext=l},setName:function(a){return this.name=a,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});v.exports=g},66022:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71289),g=t(13759),a=t(37742),r=t(83419),s=t(37747),e=t(60758),n=t(72624),h=t(71464),i=new r({initialize:function(f){this.world=f,this.scene=f.scene,this.sys=f.scene.sys},collider:function(l,f,u,d,p){return this.world.addCollider(l,f,u,d,p)},overlap:function(l,f,u,d,p){return this.world.addOverlap(l,f,u,d,p)},existing:function(l,f){var u=f?s.STATIC_BODY:s.DYNAMIC_BODY;return this.world.enableBody(l,u),l},staticImage:function(l,f,u,d){var p=new o(this.scene,l,f,u,d);return this.sys.displayList.add(p),this.world.enableBody(p,s.STATIC_BODY),p},image:function(l,f,u,d){var p=new o(this.scene,l,f,u,d);return this.sys.displayList.add(p),this.world.enableBody(p,s.DYNAMIC_BODY),p},staticSprite:function(l,f,u,d){var p=new g(this.scene,l,f,u,d);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,s.STATIC_BODY),p},sprite:function(l,f,u,d){var p=new g(this.scene,l,f,u,d);return this.sys.displayList.add(p),this.sys.updateList.add(p),this.world.enableBody(p,s.DYNAMIC_BODY),p},staticGroup:function(l,f){return this.sys.updateList.add(new h(this.world,this.world.scene,l,f))},group:function(l,f){return this.sys.updateList.add(new e(this.world,this.world.scene,l,f))},body:function(l,f,u,d){var p=new a(this.world);return p.position.set(l,f),u&&d&&p.setSize(u,d),this.world.add(p,s.DYNAMIC_BODY),p},staticBody:function(l,f,u,d){var p=new n(this.world);return p.position.set(l,f),u&&d&&p.setSize(u,d),this.world.add(p,s.STATIC_BODY),p},destroy:function(){this.world=null,this.scene=null,this.sys=null}});v.exports=i},79599:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=0;if(!Array.isArray(t))o=t;else for(var g=0;g<t.length;g++)o|=t[g];return o};v.exports=E},64897:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37747),g=function(a,r,s,e){var n=0,h=a.deltaAbsX()+r.deltaAbsX()+e;return a._dx===0&&r._dx===0?(a.embedded=!0,r.embedded=!0):a._dx>r._dx?(n=a.right-r.x,n>h&&!s||a.checkCollision.right===!1||r.checkCollision.left===!1?n=0:(a.touching.none=!1,a.touching.right=!0,r.touching.none=!1,r.touching.left=!0,r.physicsType===o.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.right=!0),a.physicsType===o.STATIC_BODY&&!s&&(r.blocked.none=!1,r.blocked.left=!0))):a._dx<r._dx&&(n=a.x-r.width-r.x,-n>h&&!s||a.checkCollision.left===!1||r.checkCollision.right===!1?n=0:(a.touching.none=!1,a.touching.left=!0,r.touching.none=!1,r.touching.right=!0,r.physicsType===o.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.left=!0),a.physicsType===o.STATIC_BODY&&!s&&(r.blocked.none=!1,r.blocked.right=!0))),a.overlapX=n,r.overlapX=n,n};v.exports=g},45170:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37747),g=function(a,r,s,e){var n=0,h=a.deltaAbsY()+r.deltaAbsY()+e;return a._dy===0&&r._dy===0?(a.embedded=!0,r.embedded=!0):a._dy>r._dy?(n=a.bottom-r.y,n>h&&!s||a.checkCollision.down===!1||r.checkCollision.up===!1?n=0:(a.touching.none=!1,a.touching.down=!0,r.touching.none=!1,r.touching.up=!0,r.physicsType===o.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.down=!0),a.physicsType===o.STATIC_BODY&&!s&&(r.blocked.none=!1,r.blocked.up=!0))):a._dy<r._dy&&(n=a.y-r.bottom,-n>h&&!s||a.checkCollision.up===!1||r.checkCollision.down===!1?n=0:(a.touching.none=!1,a.touching.up=!0,r.touching.none=!1,r.touching.down=!0,r.physicsType===o.STATIC_BODY&&!s&&(a.blocked.none=!1,a.blocked.up=!0),a.physicsType===o.STATIC_BODY&&!s&&(r.blocked.none=!1,r.blocked.down=!0))),a.overlapY=n,r.overlapY=n,n};v.exports=g},60758:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13759),g=t(83419),a=t(78389),r=t(37747),s=t(95540),e=t(26479),n=t(41212),h=new g({Extends:e,Mixins:[a],initialize:function(l,f,u,d){if(!u&&!d)d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else if(n(u))d=u,u=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(u)&&n(u[0])){var p=this;u.forEach(function(m){m.internalCreateCallback=p.createCallbackHandler,m.internalRemoveCallback=p.removeCallbackHandler,m.classType=s(m,"classType",o)}),d=null}else d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=l,d&&(d.classType=s(d,"classType",o)),this.physicsType=r.DYNAMIC_BODY,this.collisionCategory=1,this.collisionMask=1,this.defaults={setCollideWorldBounds:s(d,"collideWorldBounds",!1),setBoundsRectangle:s(d,"customBoundsRectangle",null),setAccelerationX:s(d,"accelerationX",0),setAccelerationY:s(d,"accelerationY",0),setAllowDrag:s(d,"allowDrag",!0),setAllowGravity:s(d,"allowGravity",!0),setAllowRotation:s(d,"allowRotation",!0),setDamping:s(d,"useDamping",!1),setBounceX:s(d,"bounceX",0),setBounceY:s(d,"bounceY",0),setDragX:s(d,"dragX",0),setDragY:s(d,"dragY",0),setEnable:s(d,"enable",!0),setGravityX:s(d,"gravityX",0),setGravityY:s(d,"gravityY",0),setFrictionX:s(d,"frictionX",0),setFrictionY:s(d,"frictionY",0),setMaxSpeed:s(d,"maxSpeed",-1),setMaxVelocityX:s(d,"maxVelocityX",1e4),setMaxVelocityY:s(d,"maxVelocityY",1e4),setVelocityX:s(d,"velocityX",0),setVelocityY:s(d,"velocityY",0),setAngularVelocity:s(d,"angularVelocity",0),setAngularAcceleration:s(d,"angularAcceleration",0),setAngularDrag:s(d,"angularDrag",0),setMass:s(d,"mass",1),setImmovable:s(d,"immovable",!1)},e.call(this,f,u,d),this.type="PhysicsGroup"},createCallbackHandler:function(i){i.body||this.world.enableBody(i,r.DYNAMIC_BODY);var l=i.body;for(var f in this.defaults)l[f](this.defaults[f])},removeCallbackHandler:function(i){i.body&&this.world.disableBody(i)},setVelocity:function(i,l,f){f===void 0&&(f=0);for(var u=this.getChildren(),d=0;d<u.length;d++)u[d].body.velocity.set(i+d*f,l+d*f);return this},setVelocityX:function(i,l){l===void 0&&(l=0);for(var f=this.getChildren(),u=0;u<f.length;u++)f[u].body.velocity.x=i+u*l;return this},setVelocityY:function(i,l){l===void 0&&(l=0);for(var f=this.getChildren(),u=0;u<f.length;u++)f[u].body.velocity.y=i+u*l;return this}});v.exports=h},3017:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,t,o,g,a,r,s,e,n,h,i,l,f,u,d,p,m,T=function(L,w,O){E=L,t=w;var B=E.velocity.x,V=t.velocity.x;return o=E.pushable,n=E._dx<0,h=E._dx>0,i=E._dx===0,d=Math.abs(E.right-t.x)<=Math.abs(t.right-E.x),s=V-B*E.bounce.x,g=t.pushable,l=t._dx<0,f=t._dx>0,u=t._dx===0,p=!d,e=B-V*t.bounce.x,m=Math.abs(O),y()},y=function(){return h&&d&&t.blocked.right?(E.processX(-m,s,!1,!0),1):n&&p&&t.blocked.left?(E.processX(m,s,!0),1):f&&p&&E.blocked.right?(t.processX(-m,e,!1,!0),2):l&&d&&E.blocked.left?(t.processX(m,e,!0),2):0},S=function(){var L=E.velocity.x,w=t.velocity.x,O=Math.sqrt(w*w*t.mass/E.mass)*(w>0?1:-1),B=Math.sqrt(L*L*E.mass/t.mass)*(L>0?1:-1),V=(O+B)*.5;return O-=V,B-=V,a=V+O*E.bounce.x,r=V+B*t.bounce.x,n&&p?C(0):l&&d?C(1):h&&d?C(2):f&&p?C(3):!1},C=function(L){if(o&&g)m*=.5,L===0||L===3?(E.processX(m,a),t.processX(-m,r)):(E.processX(-m,a),t.processX(m,r));else if(o&&!g)L===0||L===3?E.processX(m,s,!0):E.processX(-m,s,!1,!0);else if(!o&&g)L===0||L===3?t.processX(-m,e,!1,!0):t.processX(m,e,!0);else{var w=m*.5;L===0?u?(E.processX(m,0,!0),t.processX(0,null,!1,!0)):f?(E.processX(w,0,!0),t.processX(-w,0,!1,!0)):(E.processX(w,t.velocity.x,!0),t.processX(-w,null,!1,!0)):L===1?i?(E.processX(0,null,!1,!0),t.processX(m,0,!0)):h?(E.processX(-w,0,!1,!0),t.processX(w,0,!0)):(E.processX(-w,null,!1,!0),t.processX(w,E.velocity.x,!0)):L===2?u?(E.processX(-m,0,!1,!0),t.processX(0,null,!0)):l?(E.processX(-w,0,!1,!0),t.processX(w,0,!0)):(E.processX(-w,t.velocity.x,!1,!0),t.processX(w,null,!0)):L===3&&(i?(E.processX(0,null,!0),t.processX(-m,0,!1,!0)):n?(E.processX(w,0,!0),t.processX(-w,0,!1,!0)):(E.processX(w,t.velocity.y,!0),t.processX(-w,null,!1,!0)))}return!0},R=function(L){L===1?t.velocity.x=0:d?t.processX(m,e,!0):t.processX(-m,e,!1,!0),E.moves&&(t.y+=(E.y-E.prev.y)*E.friction.y,t._dy=t.y-t.prev.y)},I=function(L){L===2?E.velocity.x=0:p?E.processX(m,s,!0):E.processX(-m,s,!1,!0),t.moves&&(E.y+=(t.y-t.prev.y)*t.friction.y,E._dy=E.y-E.prev.y)};v.exports={BlockCheck:y,Check:S,Set:T,Run:C,RunImmovableBody1:R,RunImmovableBody2:I}},47962:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E,t,o,g,a,r,s,e,n,h,i,l,f,u,d,p,m,T=function(L,w,O){E=L,t=w;var B=E.velocity.y,V=t.velocity.y;return o=E.pushable,n=E._dy<0,h=E._dy>0,i=E._dy===0,d=Math.abs(E.bottom-t.y)<=Math.abs(t.bottom-E.y),s=V-B*E.bounce.y,g=t.pushable,l=t._dy<0,f=t._dy>0,u=t._dy===0,p=!d,e=B-V*t.bounce.y,m=Math.abs(O),y()},y=function(){return h&&d&&t.blocked.down?(E.processY(-m,s,!1,!0),1):n&&p&&t.blocked.up?(E.processY(m,s,!0),1):f&&p&&E.blocked.down?(t.processY(-m,e,!1,!0),2):l&&d&&E.blocked.up?(t.processY(m,e,!0),2):0},S=function(){var L=E.velocity.y,w=t.velocity.y,O=Math.sqrt(w*w*t.mass/E.mass)*(w>0?1:-1),B=Math.sqrt(L*L*E.mass/t.mass)*(L>0?1:-1),V=(O+B)*.5;return O-=V,B-=V,a=V+O*E.bounce.y,r=V+B*t.bounce.y,n&&p?C(0):l&&d?C(1):h&&d?C(2):f&&p?C(3):!1},C=function(L){if(o&&g)m*=.5,L===0||L===3?(E.processY(m,a),t.processY(-m,r)):(E.processY(-m,a),t.processY(m,r));else if(o&&!g)L===0||L===3?E.processY(m,s,!0):E.processY(-m,s,!1,!0);else if(!o&&g)L===0||L===3?t.processY(-m,e,!1,!0):t.processY(m,e,!0);else{var w=m*.5;L===0?u?(E.processY(m,0,!0),t.processY(0,null,!1,!0)):f?(E.processY(w,0,!0),t.processY(-w,0,!1,!0)):(E.processY(w,t.velocity.y,!0),t.processY(-w,null,!1,!0)):L===1?i?(E.processY(0,null,!1,!0),t.processY(m,0,!0)):h?(E.processY(-w,0,!1,!0),t.processY(w,0,!0)):(E.processY(-w,null,!1,!0),t.processY(w,E.velocity.y,!0)):L===2?u?(E.processY(-m,0,!1,!0),t.processY(0,null,!0)):l?(E.processY(-w,0,!1,!0),t.processY(w,0,!0)):(E.processY(-w,t.velocity.y,!1,!0),t.processY(w,null,!0)):L===3&&(i?(E.processY(0,null,!0),t.processY(-m,0,!1,!0)):n?(E.processY(w,0,!0),t.processY(-w,0,!1,!0)):(E.processY(w,t.velocity.y,!0),t.processY(-w,null,!1,!0)))}return!0},R=function(L){L===1?t.velocity.y=0:d?t.processY(m,e,!0):t.processY(-m,e,!1,!0),E.moves&&(t.x+=(E.x-E.prev.x)*E.friction.x,t._dx=t.x-t.prev.x)},I=function(L){L===2?E.velocity.y=0:p?E.processY(m,s,!0):E.processY(-m,s,!1,!0),t.moves&&(E.x+=(t.x-t.prev.x)*t.friction.x,E._dx=E.x-E.prev.x)};v.exports={BlockCheck:y,Check:S,Set:T,Run:C,RunImmovableBody1:R,RunImmovableBody2:I}},14087:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(64897),g=t(3017),a=function(r,s,e,n,h){h===void 0&&(h=o(r,s,e,n));var i=r.immovable,l=s.immovable;if(e||h===0||i&&l||r.customSeparateX||s.customSeparateX)return h!==0||r.embedded&&s.embedded;var f=g.Set(r,s,h);return!i&&!l?f>0?!0:g.Check():(i?g.RunImmovableBody1(f):l&&g.RunImmovableBody2(f),!0)};v.exports=a},89936:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45170),g=t(47962),a=function(r,s,e,n,h){h===void 0&&(h=o(r,s,e,n));var i=r.immovable,l=s.immovable;if(e||h===0||i&&l||r.customSeparateY||s.customSeparateY)return h!==0||r.embedded&&s.embedded;var f=g.Set(r,s,h);return!i&&!l?f>0?!0:g.Check():(i?g.RunImmovableBody1(f):l&&g.RunImmovableBody2(f),!0)};v.exports=a},95829:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===void 0&&(o={}),o.none=t,o.up=!1,o.down=!1,o.left=!1,o.right=!1,t||(o.up=!0,o.down=!0,o.left=!0,o.right=!0),o};v.exports=E},72624:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87902),g=t(83419),a=t(78389),r=t(37747),s=t(37303),e=t(95829),n=t(26099),h=new g({Mixins:[a],initialize:function(l,f){var u=64,d=64,p={x:0,y:0,angle:0,rotation:0,scaleX:1,scaleY:1,displayOriginX:0,displayOriginY:0},m=f!==void 0;m&&f.displayWidth&&(u=f.displayWidth,d=f.displayHeight),m||(f=p),this.world=l,this.gameObject=m?f:void 0,this.isBody=!0,this.debugShowBody=l.defaults.debugShowStaticBody,this.debugBodyColor=l.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new n,this.position=new n(f.x-u*f.originX,f.y-d*f.originY),this.width=u,this.height=d,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new n(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=n.ZERO,this.allowGravity=!1,this.gravity=n.ZERO,this.bounce=n.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision=e(!1),this.touching=e(!0),this.wasTouching=e(!0),this.blocked=e(!0),this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,this._dx=0,this._dy=0},setGameObject:function(i,l){return i&&i!==this.gameObject&&(this.gameObject.body=null,i.body=this,this.gameObject=i),l&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var i=this.gameObject;return i.getTopLeft(this.position),this.width=i.displayWidth,this.height=i.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(i,l){return l===void 0&&(l=i),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(i,l),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(i,l,f){f===void 0&&(f=!0);var u=this.gameObject;if(u&&u.frame&&(i||(i=u.frame.realWidth),l||(l=u.frame.realHeight)),this.world.staticTree.remove(this),this.width=i,this.height=l,this.halfWidth=Math.floor(i/2),this.halfHeight=Math.floor(l/2),f&&u&&u.getCenter){var d=u.displayWidth/2,p=u.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(d-this.halfWidth,p-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(i,l,f){return l===void 0&&(l=this.offset.x),f===void 0&&(f=this.offset.y),i>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=i,this.width=i*2,this.height=i*2,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(l,f),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(i,l){var f=this.gameObject;i===void 0&&(i=f.x),l===void 0&&(l=f.y),this.world.staticTree.remove(this),f.setPosition(i,l),f.getTopLeft(this.position),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(i){return i.x=this.x,i.y=this.y,i.right=this.right,i.bottom=this.bottom,i},hitTest:function(i,l){return this.isCircle?o(this,i,l):s(this,i,l)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(i){var l=this.position,f=l.x+this.halfWidth,u=l.y+this.halfHeight;this.debugShowBody&&(i.lineStyle(i.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?i.strokeCircle(f,u,this.width/2):i.strokeRect(l.x,l.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(i){return i<=0&&(i=.1),this.mass=i,this},x:{get:function(){return this.position.x},set:function(i){this.world.staticTree.remove(this),this.position.x=i,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(i){this.world.staticTree.remove(this),this.position.y=i,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});v.exports=h},71464:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13759),g=t(83419),a=t(78389),r=t(37747),s=t(95540),e=t(26479),n=t(41212),h=new g({Extends:e,Mixins:[a],initialize:function(l,f,u,d){!u&&!d?d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:o}:n(u)?(d=u,u=null,d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler,d.createMultipleCallback=this.createMultipleCallbackHandler,d.classType=s(d,"classType",o)):Array.isArray(u)&&n(u[0])?(d=u,u=null,d.forEach(function(p){p.internalCreateCallback=this.createCallbackHandler,p.internalRemoveCallback=this.removeCallbackHandler,p.createMultipleCallback=this.createMultipleCallbackHandler,p.classType=s(p,"classType",o)})):d={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=l,this.physicsType=r.STATIC_BODY,this.collisionCategory=1,this.collisionMask=1,e.call(this,f,u,d),this.type="StaticPhysicsGroup"},createCallbackHandler:function(i){i.body||this.world.enableBody(i,r.STATIC_BODY)},removeCallbackHandler:function(i){i.body&&this.world.disableBody(i)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var i=this.children.entries,l=0;l<i.length;l++)i[l].body.reset();return this}});v.exports=h},82248:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(55495),g=t(37742),a=t(45319),r=t(83419),s=t(79342),e=t(37747),n=t(20339),h=t(52816),i=t(50792),l=t(63012),f=t(43855),u=t(5470),d=t(94977),p=t(64897),m=t(45170),T=t(96523),y=t(35154),S=t(36383),C=t(25774),R=t(96602),I=t(87841),L=t(59542),w=t(40012),O=t(14087),B=t(89936),V=t(35072),b=t(72624),X=t(2483),K=t(61340),Q=t(26099),U=t(15994),W=new r({Extends:i,initialize:function(G,z){i.call(this),this.scene=G,this.bodies=new V,this.staticBodies=new V,this.pendingDestroy=new V,this.colliders=new C,this.gravity=new Q(y(z,"gravity.x",0),y(z,"gravity.y",0)),this.bounds=new I(y(z,"x",0),y(z,"y",0),y(z,"width",G.sys.scale.width),y(z,"height",G.sys.scale.height)),this.checkCollision={up:y(z,"checkCollision.up",!0),down:y(z,"checkCollision.down",!0),left:y(z,"checkCollision.left",!0),right:y(z,"checkCollision.right",!0)},this.fps=y(z,"fps",60),this.fixedStep=y(z,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(z,"timeScale",1),this.OVERLAP_BIAS=y(z,"overlapBias",4),this.TILE_BIAS=y(z,"tileBias",16),this.forceX=y(z,"forceX",!1),this.isPaused=y(z,"isPaused",!1),this._total=0,this.drawDebug=y(z,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(z,"debugShowBody",!0),debugShowStaticBody:y(z,"debugShowStaticBody",!0),debugShowVelocity:y(z,"debugShowVelocity",!0),bodyDebugColor:y(z,"debugBodyColor",16711935),staticBodyDebugColor:y(z,"debugStaticBodyColor",255),velocityDebugColor:y(z,"debugVelocityColor",65280)},this.maxEntries=y(z,"maxEntries",16),this.useTree=y(z,"useTree",!0),this.tree=new L(this.maxEntries),this.staticTree=new L(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new K,this._tempMatrix2=new K,this.tileFilterOptions={isColliding:!0,isNotEmpty:!0,hasInterestingFace:!0},this.drawDebug&&this.createDebugGraphic()},enable:function(F,G){G===void 0&&(G=e.DYNAMIC_BODY),Array.isArray(F)||(F=[F]);for(var z=0;z<F.length;z++){var Y=F[z];if(Y.isParent)for(var $=Y.getChildren(),j=0;j<$.length;j++){var Z=$[j];Z.isParent?this.enable(Z,G):this.enableBody(Z,G)}else this.enableBody(Y,G)}},enableBody:function(F,G){return G===void 0&&(G=e.DYNAMIC_BODY),F.hasTransformComponent&&(F.body||(G===e.DYNAMIC_BODY?F.body=new g(this,F):G===e.STATIC_BODY&&(F.body=new b(this,F))),this.add(F.body)),F},add:function(F){return F.physicsType===e.DYNAMIC_BODY?this.bodies.set(F):F.physicsType===e.STATIC_BODY&&(this.staticBodies.set(F),this.staticTree.insert(F)),F.enable=!0,F},disable:function(F){Array.isArray(F)||(F=[F]);for(var G=0;G<F.length;G++){var z=F[G];if(z.isParent)for(var Y=z.getChildren(),$=0;$<Y.length;$++){var j=Y[$];j.isParent?this.disable(j):this.disableBody(j.body)}else this.disableBody(z.body)}},disableBody:function(F){this.remove(F),F.enable=!1},remove:function(F){F.physicsType===e.DYNAMIC_BODY?(this.tree.remove(F),this.bodies.delete(F)):F.physicsType===e.STATIC_BODY&&(this.staticBodies.delete(F),this.staticTree.remove(F))},createDebugGraphic:function(){var F=this.scene.sys.add.graphics({x:0,y:0});return F.setDepth(Number.MAX_VALUE),this.debugGraphic=F,this.drawDebug=!0,F},setBounds:function(F,G,z,Y,$,j,Z,q){return this.bounds.setTo(F,G,z,Y),$!==void 0&&this.setBoundsCollision($,j,Z,q),this},setBoundsCollision:function(F,G,z,Y){return F===void 0&&(F=!0),G===void 0&&(G=!0),z===void 0&&(z=!0),Y===void 0&&(Y=!0),this.checkCollision.left=F,this.checkCollision.right=G,this.checkCollision.up=z,this.checkCollision.down=Y,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(F,G,z,Y,$){z===void 0&&(z=null),Y===void 0&&(Y=null),$===void 0&&($=z);var j=new s(this,!1,F,G,z,Y,$);return this.colliders.add(j),j},addOverlap:function(F,G,z,Y,$){z===void 0&&(z=null),Y===void 0&&(Y=null),$===void 0&&($=z);var j=new s(this,!0,F,G,z,Y,$);return this.colliders.add(j),j},removeCollider:function(F){return this.colliders.remove(F),this},setFPS:function(F){return this.fps=F,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(F,G){if(!(this.isPaused||this.bodies.size===0)){var z,Y=this._frameTime,$=this._frameTimeMS*this.timeScale;this._elapsed+=G;var j,Z=this.bodies.entries,q=this._elapsed>=$;for(this.fixedStep||(Y=G*.001,q=!0,this._elapsed=0),z=0;z<Z.length;z++)j=Z[z],j.enable&&j.preUpdate(q,Y);if(q){this._elapsed-=$,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(Z));var _=this.colliders.update();for(z=0;z<_.length;z++){var tt=_[z];tt.active&&tt.update()}this.emit(l.WORLD_STEP,Y)}for(;this._elapsed>=$;)this._elapsed-=$,this.step(Y)}},step:function(F){var G,z,Y=this.bodies.entries,$=Y.length;for(G=0;G<$;G++)z=Y[G],z.enable&&z.update(F);this.useTree&&(this.tree.clear(),this.tree.load(Y));var j=this.colliders.update();for(G=0;G<j.length;G++){var Z=j[G];Z.active&&Z.update()}this.emit(l.WORLD_STEP,F),this.stepsLastFrame++},singleStep:function(){this.update(0,this._frameTimeMS),this.postUpdate()},postUpdate:function(){var F,G,z=this.bodies.entries,Y=z.length,$=this.bodies,j=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,F=0;F<Y;F++)G=z[F],G.enable&&G.postUpdate();if(this.drawDebug){var Z=this.debugGraphic;for(Z.clear(),F=0;F<Y;F++)G=z[F],G.willDrawDebug()&&G.drawDebug(Z);for(z=j.entries,Y=z.length,F=0;F<Y;F++)G=z[F],G.willDrawDebug()&&G.drawDebug(Z)}var q=this.pendingDestroy;if(q.size>0){var _=this.tree,tt=this.staticTree;for(z=q.entries,Y=z.length,F=0;F<Y;F++)G=z[F],G.physicsType===e.DYNAMIC_BODY?(_.remove(G),$.delete(G)):G.physicsType===e.STATIC_BODY&&(tt.remove(G),j.delete(G)),G.world=void 0,G.gameObject=void 0;q.clear()}},updateMotion:function(F,G){F.allowRotation&&this.computeAngularVelocity(F,G),this.computeVelocity(F,G)},computeAngularVelocity:function(F,G){var z=F.angularVelocity,Y=F.angularAcceleration,$=F.angularDrag,j=F.maxAngular;Y?z+=Y*G:F.allowDrag&&$&&($*=G,u(z-$,0,.1)?z-=$:d(z+$,0,.1)?z+=$:z=0),z=a(z,-j,j);var Z=z-F.angularVelocity;F.angularVelocity+=Z,F.rotation+=F.angularVelocity*G},computeVelocity:function(F,G){var z=F.velocity.x,Y=F.acceleration.x,$=F.drag.x,j=F.maxVelocity.x,Z=F.velocity.y,q=F.acceleration.y,_=F.drag.y,tt=F.maxVelocity.y,nt=F.speed,at=F.maxSpeed,st=F.allowDrag,lt=F.useDamping;F.allowGravity&&(z+=(this.gravity.x+F.gravity.x)*G,Z+=(this.gravity.y+F.gravity.y)*G),Y?z+=Y*G:st&&$&&(lt?($=Math.pow($,G),z*=$,nt=Math.sqrt(z*z+Z*Z),f(nt,0,.001)&&(z=0)):($*=G,u(z-$,0,.01)?z-=$:d(z+$,0,.01)?z+=$:z=0)),q?Z+=q*G:st&&_&&(lt?(_=Math.pow(_,G),Z*=_,nt=Math.sqrt(z*z+Z*Z),f(nt,0,.001)&&(Z=0)):(_*=G,u(Z-_,0,.01)?Z-=_:d(Z+_,0,.01)?Z+=_:Z=0)),z=a(z,-j,j),Z=a(Z,-tt,tt),F.velocity.set(z,Z),at>-1&&F.velocity.length()>at&&(F.velocity.normalize().scale(at),nt=at),F.speed=nt},separate:function(F,G,z,Y,$){var j,Z,q=!1,_=!0;if(!F.enable||!G.enable||F.checkCollision.none||G.checkCollision.none||!this.intersects(F,G)||z&&z.call(Y,F.gameObject,G.gameObject)===!1)return q;if(F.isCircle||G.isCircle){var tt=this.separateCircle(F,G,$);tt.result?(q=!0,_=!1):(j=tt.x,Z=tt.y,_=!0)}if(_){var nt=!1,at=!1,st=this.OVERLAP_BIAS;$?(nt=O(F,G,$,st,j),at=B(F,G,$,st,Z)):this.forceX||Math.abs(this.gravity.y+F.gravity.y)<Math.abs(this.gravity.x+F.gravity.x)?(nt=O(F,G,$,st,j),this.intersects(F,G)&&(at=B(F,G,$,st,Z))):(at=B(F,G,$,st,Z),this.intersects(F,G)&&(nt=O(F,G,$,st,j))),q=nt||at}return q&&($?(F.onOverlap||G.onOverlap)&&this.emit(l.OVERLAP,F.gameObject,G.gameObject,F,G):(F.onCollide||G.onCollide)&&this.emit(l.COLLIDE,F.gameObject,G.gameObject,F,G)),q},separateCircle:function(F,G,z){p(F,G,!1,0),m(F,G,!1,0);var Y=F.isCircle,$=G.isCircle,j=F.center,Z=G.center,q=F.immovable,_=G.immovable,tt=F.velocity,nt=G.velocity,at=0,st=!0;if(Y!==$){st=!1;var lt=j.x,vt=j.y,mt=F.halfWidth,pt=G.position.x,ot=G.position.y,ct=G.right,ft=G.bottom;$&&(lt=Z.x,vt=Z.y,mt=G.halfWidth,pt=F.position.x,ot=F.position.y,ct=F.right,ft=F.bottom),vt<ot?lt<pt?at=n(lt,vt,pt,ot)-mt:lt>ct&&(at=n(lt,vt,ct,ot)-mt):vt>ft&&(lt<pt?at=n(lt,vt,pt,ft)-mt:lt>ct&&(at=n(lt,vt,ct,ft)-mt)),at*=-1}else at=F.halfWidth+G.halfWidth-h(j,Z);F.overlapR=at,G.overlapR=at;var Et=o(j,Z),St=(at+S.EPSILON)*Math.cos(Et),It=(at+S.EPSILON)*Math.sin(Et),Mt={overlap:at,result:!1,x:St,y:It};if(z&&(!st||st&&at!==0))return Mt.result=!0,Mt;if(!st&&at===0||q&&_||F.customSeparateX||G.customSeparateX)return Mt.x=void 0,Mt.y=void 0,Mt;var wt=!F.pushable&&!G.pushable;if(st){var Rt=j.x-Z.x,zt=j.y-Z.y,Bt=Math.sqrt(Math.pow(Rt,2)+Math.pow(zt,2)),Xt=(Z.x-j.x)/Bt||0,$t=(Z.y-j.y)/Bt||0,ne=2*(tt.x*Xt+tt.y*$t-nt.x*Xt-nt.y*$t)/(F.mass+G.mass);(q||_)&&(ne*=2),q||(tt.x=tt.x-ne/F.mass*Xt,tt.y=tt.y-ne/F.mass*$t,tt.multiply(F.bounce)),_||(nt.x=nt.x+ne/G.mass*Xt,nt.y=nt.y+ne/G.mass*$t,nt.multiply(G.bounce)),!q&&!_&&(St*=.5,It*=.5),q||(F.x-=St,F.y-=It,F.updateCenter()),_||(G.x+=St,G.y+=It,G.updateCenter()),Mt.result=!0}else!q||F.pushable||wt?(F.x-=St,F.y-=It,F.updateCenter()):(!_||G.pushable||wt)&&(G.x+=St,G.y+=It,G.updateCenter()),Mt.x=void 0,Mt.y=void 0;return Mt},intersects:function(F,G){return F===G?!1:!F.isCircle&&!G.isCircle?!(F.right<=G.left||F.bottom<=G.top||F.left>=G.right||F.top>=G.bottom):F.isCircle?G.isCircle?h(F.center,G.center)<=F.halfWidth+G.halfWidth:this.circleBodyIntersects(F,G):this.circleBodyIntersects(G,F)},circleBodyIntersects:function(F,G){var z=a(F.center.x,G.left,G.right),Y=a(F.center.y,G.top,G.bottom),$=(F.center.x-z)*(F.center.x-z),j=(F.center.y-Y)*(F.center.y-Y);return $+j<=F.halfWidth*F.halfWidth},overlap:function(F,G,z,Y,$){return z===void 0&&(z=null),Y===void 0&&(Y=null),$===void 0&&($=z),this.collideObjects(F,G,z,Y,$,!0)},collide:function(F,G,z,Y,$){return z===void 0&&(z=null),Y===void 0&&(Y=null),$===void 0&&($=z),this.collideObjects(F,G,z,Y,$,!1)},collideObjects:function(F,G,z,Y,$,j){var Z,q;F.isParent&&(F.physicsType===void 0||G===void 0||F===G)&&(F=F.children.entries),G&&G.isParent&&G.physicsType===void 0&&(G=G.children.entries);var _=Array.isArray(F),tt=Array.isArray(G);if(this._total=0,!_&&!tt)this.collideHandler(F,G,z,Y,$,j);else if(!_&&tt)for(Z=0;Z<G.length;Z++)this.collideHandler(F,G[Z],z,Y,$,j);else if(_&&!tt)if(G)for(Z=0;Z<F.length;Z++)this.collideHandler(F[Z],G,z,Y,$,j);else for(Z=0;Z<F.length;Z++){var nt=F[Z];for(q=Z+1;q<F.length;q++)Z!==q&&this.collideHandler(nt,F[q],z,Y,$,j)}else for(Z=0;Z<F.length;Z++)for(q=0;q<G.length;q++)this.collideHandler(F[Z],G[q],z,Y,$,j);return this._total>0},collideHandler:function(F,G,z,Y,$,j){if(G===void 0&&F.isParent)return this.collideGroupVsGroup(F,F,z,Y,$,j);if(!F||!G)return!1;if(F.body||F.isBody){if(G.body||G.isBody)return this.collideSpriteVsSprite(F,G,z,Y,$,j);if(G.isParent)return this.collideSpriteVsGroup(F,G,z,Y,$,j);if(G.isTilemap)return this.collideSpriteVsTilemapLayer(F,G,z,Y,$,j)}else if(F.isParent){if(G.body||G.isBody)return this.collideSpriteVsGroup(G,F,z,Y,$,j);if(G.isParent)return this.collideGroupVsGroup(F,G,z,Y,$,j);if(G.isTilemap)return this.collideGroupVsTilemapLayer(F,G,z,Y,$,j)}else if(F.isTilemap){if(G.body||G.isBody)return this.collideSpriteVsTilemapLayer(G,F,z,Y,$,j);if(G.isParent)return this.collideGroupVsTilemapLayer(G,F,z,Y,$,j)}},canCollide:function(F,G){return F&&G&&(F.collisionMask&G.collisionCategory)!==0&&(G.collisionMask&F.collisionCategory)!==0},collideSpriteVsSprite:function(F,G,z,Y,$,j){var Z=F.isBody?F:F.body,q=G.isBody?G:G.body;return this.canCollide(Z,q)?(this.separate(Z,q,Y,$,j)&&(z&&z.call($,F,G),this._total++),!0):!1},collideSpriteVsGroup:function(F,G,z,Y,$,j){var Z=F.isBody?F:F.body;if(!(G.length===0||!Z||!Z.enable||Z.checkCollision.none||!this.canCollide(Z,G))){var q,_,tt;if(this.useTree||G.physicsType===e.STATIC_BODY){var nt=this.treeMinMax;nt.minX=Z.left,nt.minY=Z.top,nt.maxX=Z.right,nt.maxY=Z.bottom;var at=G.physicsType===e.DYNAMIC_BODY?this.tree.search(nt):this.staticTree.search(nt);for(_=at.length,q=0;q<_;q++)tt=at[q],!(Z===tt||!tt.enable||tt.checkCollision.none||!G.contains(tt.gameObject))&&this.separate(Z,tt,Y,$,j)&&(z&&z.call($,Z.gameObject,tt.gameObject),this._total++)}else{var st=G.getChildren(),lt=G.children.entries.indexOf(F);for(_=st.length,q=0;q<_;q++)tt=st[q].body,!(!tt||q===lt||!tt.enable)&&this.separate(Z,tt,Y,$,j)&&(z&&z.call($,Z.gameObject,tt.gameObject),this._total++)}}},collideGroupVsTilemapLayer:function(F,G,z,Y,$,j){if(!this.canCollide(F,G))return!1;var Z=F.getChildren();if(Z.length===0)return!1;for(var q=!1,_=0;_<Z.length;_++)(Z[_].body||Z[_].isBody)&&this.collideSpriteVsTilemapLayer(Z[_],G,z,Y,$,j)&&(q=!0);return q},collideTiles:function(F,G,z,Y,$){return G.length===0||F.body&&!F.body.enable||F.isBody&&!F.enable?!1:this.collideSpriteVsTilesHandler(F,G,z,Y,$,!1,!1)},overlapTiles:function(F,G,z,Y,$){return G.length===0||F.body&&!F.body.enable||F.isBody&&!F.enable?!1:this.collideSpriteVsTilesHandler(F,G,z,Y,$,!0,!1)},collideSpriteVsTilemapLayer:function(F,G,z,Y,$,j){var Z=F.isBody?F:F.body;if(!Z.enable||Z.checkCollision.none||!this.canCollide(Z,G))return!1;var q=G.layer,_=Z.x-q.tileWidth*G.scaleX,tt=Z.y-q.tileHeight*G.scaleY,nt=Z.width+q.tileWidth*G.scaleX,at=Z.height+q.tileHeight*G.scaleY,st=j?null:this.tileFilterOptions,lt=T(_,tt,nt,at,st,G.scene.cameras.main,G.layer);return lt.length===0?!1:this.collideSpriteVsTilesHandler(F,lt,z,Y,$,j,!0)},collideSpriteVsTilesHandler:function(F,G,z,Y,$,j,Z){for(var q=F.isBody?F:F.body,_,tt={left:0,right:0,top:0,bottom:0},nt,at=!1,st=0;st<G.length;st++){_=G[st],nt=_.tilemapLayer;var lt=nt.tileToWorldXY(_.x,_.y);tt.left=lt.x,tt.top=lt.y,tt.right=tt.left+_.width*nt.scaleX,tt.bottom=tt.top+_.height*nt.scaleY,X(tt,q)&&(!Y||Y.call($,F,_))&&R(_,F)&&(j||w(st,q,_,tt,nt,this.TILE_BIAS,Z))&&(this._total++,at=!0,z&&z.call($,F,_),j&&q.onOverlap?this.emit(l.TILE_OVERLAP,F,_,q):q.onCollide&&this.emit(l.TILE_COLLIDE,F,_,q))}return at},collideGroupVsGroup:function(F,G,z,Y,$,j){if(!(F.length===0||G.length===0||!this.canCollide(F,G)))for(var Z=F.getChildren(),q=0;q<Z.length;q++)this.collideSpriteVsGroup(Z[q],G,z,Y,$,j)},wrap:function(F,G){F.body?this.wrapObject(F,G):F.getChildren?this.wrapArray(F.getChildren(),G):Array.isArray(F)?this.wrapArray(F,G):this.wrapObject(F,G)},wrapArray:function(F,G){for(var z=0;z<F.length;z++)this.wrapObject(F[z],G)},wrapObject:function(F,G){G===void 0&&(G=0),F.x=U(F.x,this.bounds.left-G,this.bounds.right+G),F.y=U(F.y,this.bounds.top-G,this.bounds.bottom+G)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null,this.debugGraphic&&(this.debugGraphic.destroy(),this.debugGraphic=null)}});v.exports=W},1093:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAcceleration:function(t,o){return this.body.acceleration.set(t,o),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}};v.exports=E},59023:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}};v.exports=E},62069:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(t,o){return this.body.bounce.set(t,o),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,o,g,a){return this.body.setCollideWorldBounds(t,o,g,a),this}};v.exports=E},78389:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79599),g={setCollisionCategory:function(a){var r=this.body?this.body:this;return r.collisionCategory=a,this},willCollideWith:function(a){var r=this.body?this.body:this;return(r.collisionMask&a)!==0},addCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask|a,this},removeCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=r.collisionMask&~a,this},setCollidesWith:function(a){var r=this.body?this.body:this;return r.collisionMask=o(a),this},resetCollisionCategory:function(){var a=this.body?this.body:this;return a.collisionCategory=1,a.collisionMask=1,this}};v.exports=g},87118:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDebug:function(t,o,g){return this.debugShowBody=t,this.debugShowVelocity=o,this.debugBodyColor=g,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}};v.exports=E},52819:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDrag:function(t,o){return this.body.drag.set(t,o),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}};v.exports=E},4074:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setDirectControl:function(t){return this.body.setDirectControl(t),this},enableBody:function(t,o,g,a,r){return t&&this.body.reset(o,g),a&&(this.body.gameObject.active=!0),r&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,o){return t===void 0&&(t=!1),o===void 0&&(o=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),o&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};v.exports=E},40831:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(t,o){return this.body.friction.set(t,o),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}};v.exports=E},26775:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setGravity:function(t,o){return this.body.gravity.set(t,o),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}};v.exports=E},9437:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setImmovable:function(t){return t===void 0&&(t=!0),this.body.immovable=t,this}};v.exports=E},30621:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setMass:function(t){return this.body.mass=t,this}};v.exports=E},72441:(v,E,t)=>{var o=t(47956),g=t(96503),a=t(2044),r=t(81491),s=function(e,n,h,i,l,f){var u=o(e,n-i,h-i,2*i,2*i,l,f);if(u.length===0)return u;for(var d=new g(n,h,i),p=new g,m=[],T=0;T<u.length;T++){var y=u[T];y.isCircle?(p.setTo(y.center.x,y.center.y,y.halfWidth),a(d,p)&&m.push(y)):r(d,y)&&m.push(y)}return m};v.exports=s},47956:v=>{var E=function(t,o,g,a,r,s,e){s===void 0&&(s=!0),e===void 0&&(e=!1);var n=[],h=[],i=t.treeMinMax;if(i.minX=o,i.minY=g,i.maxX=o+a,i.maxY=g+r,e&&(h=t.staticTree.search(i)),s&&t.useTree)n=t.tree.search(i);else if(s){var l=t.bodies,f={position:{x:o,y:g},left:o,top:g,right:o+a,bottom:g+r,isCircle:!1},u=t.intersects;l.iterate(function(d){u(d,f)&&n.push(d)})}return h.concat(n)};v.exports=E},62121:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setPushable:function(t){return t===void 0&&(t=!0),this.body.pushable=t,this}};v.exports=E},29384:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setOffset:function(t,o){return this.body.setOffset(t,o),this},setSize:function(t,o,g){return this.body.setSize(t,o,g),this},setBodySize:function(t,o,g){return this.body.setSize(t,o,g),this},setCircle:function(t,o,g){return this.body.setCircle(t,o,g),this}};v.exports=E},15098:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setVelocity:function(t,o){return this.body.setVelocity(t,o),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,o){return this.body.maxVelocity.set(t,o),this}};v.exports=E},92209:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Acceleration:t(1093),Angular:t(59023),Bounce:t(62069),Collision:t(78389),Debug:t(87118),Drag:t(52819),Enable:t(4074),Friction:t(40831),Gravity:t(26775),Immovable:t(9437),Mass:t(30621),OverlapCirc:t(72441),OverlapRect:t(47956),Pushable:t(62121),Size:t(29384),Velocity:t(15098)}},37747:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14};v.exports=E},20009:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="collide"},36768:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="overlap"},60473:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pause"},89954:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resume"},61804:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="tilecollide"},7161:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="tileoverlap"},34689:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="worldbounds"},16006:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="worldstep"},63012:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={COLLIDE:t(20009),OVERLAP:t(36768),PAUSE:t(60473),RESUME:t(89954),TILE_COLLIDE:t(61804),TILE_OVERLAP:t(7161),WORLD_BOUNDS:t(34689),WORLD_STEP:t(16006)}},27064:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37747),g=t(79291),a={ArcadePhysics:t(86689),Body:t(37742),Collider:t(79342),Components:t(92209),Events:t(63012),Factory:t(66022),GetCollidesWith:t(79599),GetOverlapX:t(64897),GetOverlapY:t(45170),SeparateX:t(14087),SeparateY:t(89936),Group:t(60758),Image:t(71289),Sprite:t(13759),StaticBody:t(72624),StaticGroup:t(71464),Tilemap:t(55173),World:t(82248)};a=g(!1,a,o),v.exports=a},96602:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,o,t):t.layer.callbacks[t.index]?!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,o,t):!0};v.exports=E},36294:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o<0?(t.blocked.none=!1,t.blocked.left=!0):o>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=o,t.updateCenter(),t.bounce.x===0?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x};v.exports=E},67013:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o<0?(t.blocked.none=!1,t.blocked.up=!0):o>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=o,t.updateCenter(),t.bounce.y===0?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y};v.exports=E},40012:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(21329),g=t(53442),a=t(2483),r=function(s,e,n,h,i,l,f){var u=h.left,d=h.top,p=h.right,m=h.bottom,T=n.faceLeft||n.faceRight,y=n.faceTop||n.faceBottom;if(f||(T=!0,y=!0),!T&&!y)return!1;var S=0,C=0,R=0,I=1;if(e.deltaAbsX()>e.deltaAbsY()?R=-1:e.deltaAbsX()<e.deltaAbsY()&&(I=-1),e.deltaX()!==0&&e.deltaY()!==0&&T&&y&&(R=Math.min(Math.abs(e.position.x-p),Math.abs(e.right-u)),I=Math.min(Math.abs(e.position.y-m),Math.abs(e.bottom-d))),R<I){if(T&&(S=o(e,n,u,p,l,f),S!==0&&!a(h,e)))return!0;y&&(C=g(e,n,d,m,l,f))}else{if(y&&(C=g(e,n,d,m,l,f),C!==0&&!a(h,e)))return!0;T&&(S=o(e,n,u,p,l,f))}return S!==0||C!==0};v.exports=r},21329:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36294),g=function(a,r,s,e,n,h){var i=0,l=r.faceLeft,f=r.faceRight,u=r.collideLeft,d=r.collideRight;return h||(l=!0,f=!0,u=!0,d=!0),a.deltaX()<0&&d&&a.checkCollision.left?f&&a.x<e&&(i=a.x-e,i<-n&&(i=0)):a.deltaX()>0&&u&&a.checkCollision.right&&l&&a.right>s&&(i=a.right-s,i>n&&(i=0)),i!==0&&(a.customSeparateX?a.overlapX=i:o(a,i)),i};v.exports=g},53442:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(67013),g=function(a,r,s,e,n,h){var i=0,l=r.faceTop,f=r.faceBottom,u=r.collideUp,d=r.collideDown;return h||(l=!0,f=!0,u=!0,d=!0),a.deltaY()<0&&d&&a.checkCollision.up?f&&a.y<e&&(i=a.y-e,i<-n&&(i=0)):a.deltaY()>0&&u&&a.checkCollision.down&&l&&a.bottom>s&&(i=a.bottom-s,i>n&&(i=0)),i!==0&&(a.customSeparateY?a.overlapY=i:o(a,i)),i};v.exports=g},2483:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return!(o.right<=t.left||o.bottom<=t.top||o.position.x>=t.right||o.position.y>=t.bottom)};v.exports=E},55173:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={ProcessTileCallbacks:t(96602),ProcessTileSeparationX:t(36294),ProcessTileSeparationY:t(67013),SeparateTile:t(40012),TileCheckX:t(21329),TileCheckY:t(53442),TileIntersectsBody:t(2483)};v.exports=o},44563:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Arcade:t(27064),Matter:t(3875)}},68174:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(){this.boundsCenter=new g,this.centerDiff=new g},parseBody:function(r){if(r=r.hasOwnProperty("body")?r.body:r,!r.hasOwnProperty("bounds")||!r.hasOwnProperty("centerOfMass"))return!1;var s=this.boundsCenter,e=this.centerDiff,n=r.bounds.max.x-r.bounds.min.x,h=r.bounds.max.y-r.bounds.min.y,i=n*r.centerOfMass.x,l=h*r.centerOfMass.y;return s.set(n/2,h/2),e.set(i-s.x,l-s.y),!0},getTopLeft:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s+n.x+h.x,e+n.y+h.y)}return!1},getTopCenter:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s+h.x,e+n.y+h.y)}return!1},getTopRight:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s-(n.x-h.x),e+n.y+h.y)}return!1},getLeftCenter:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s+n.x+h.x,e+h.y)}return!1},getCenter:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.centerDiff;return new g(s+n.x,e+n.y)}return!1},getRightCenter:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s-(n.x-h.x),e+h.y)}return!1},getBottomLeft:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s+n.x+h.x,e-(n.y-h.y))}return!1},getBottomCenter:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s+h.x,e-(n.y-h.y))}return!1},getBottomRight:function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),this.parseBody(r)){var n=this.boundsCenter,h=this.centerDiff;return new g(s-(n.x-h.x),e-(n.y-h.y))}return!1}});v.exports=a},19933:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6790);o.Body=t(22562),o.Composite=t(69351),o.World=t(4372),o.Collision=t(52284),o.Detector=t(81388),o.Pairs=t(99561),o.Pair=t(4506),o.Query=t(73296),o.Resolver=t(66272),o.Constraint=t(48140),o.Common=t(53402),o.Engine=t(48413),o.Events=t(35810),o.Sleeping=t(53614),o.Plugin=t(73832),o.Bodies=t(66280),o.Composites=t(74116),o.Axes=t(66615),o.Bounds=t(15647),o.Svg=t(74058),o.Vector=t(31725),o.Vertices=t(41598),o.World.add=o.Composite.add,o.World.remove=o.Composite.remove,o.World.addComposite=o.Composite.addComposite,o.World.addBody=o.Composite.addBody,o.World.addConstraint=o.Composite.addConstraint,o.World.clear=o.Composite.clear,v.exports=o},28137:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(83419),a=t(74116),r=t(48140),s=t(74058),e=t(75803),n=t(23181),h=t(34803),i=t(73834),l=t(19496),f=t(85791),u=t(98713),d=t(41598),p=new g({initialize:function(T){this.world=T,this.scene=T.scene,this.sys=T.scene.sys},rectangle:function(m,T,y,S,C){var R=o.rectangle(m,T,y,S,C);return this.world.add(R),R},trapezoid:function(m,T,y,S,C,R){var I=o.trapezoid(m,T,y,S,C,R);return this.world.add(I),I},circle:function(m,T,y,S,C){var R=o.circle(m,T,y,S,C);return this.world.add(R),R},polygon:function(m,T,y,S,C){var R=o.polygon(m,T,y,S,C);return this.world.add(R),R},fromVertices:function(m,T,y,S,C,R,I){typeof y=="string"&&(y=d.fromPath(y));var L=o.fromVertices(m,T,y,S,C,R,I);return this.world.add(L),L},fromPhysicsEditor:function(m,T,y,S,C){C===void 0&&(C=!0);var R=l.parseBody(m,T,y,S);return C&&!this.world.has(R)&&this.world.add(R),R},fromSVG:function(m,T,y,S,C,R){S===void 0&&(S=1),C===void 0&&(C={}),R===void 0&&(R=!0);for(var I=y.getElementsByTagName("path"),L=[],w=0;w<I.length;w++){var O=s.pathToVertices(I[w],30);S!==1&&d.scale(O,S,S),L.push(O)}var B=o.fromVertices(m,T,L,C);return R&&this.world.add(B),B},fromJSON:function(m,T,y,S,C){S===void 0&&(S={}),C===void 0&&(C=!0);var R=f.parseBody(m,T,y,S);return R&&C&&this.world.add(R),R},imageStack:function(m,T,y,S,C,R,I,L,w){I===void 0&&(I=0),L===void 0&&(L=0),w===void 0&&(w={});var O=this.world,B=this.sys.displayList;w.addToWorld=!1;var V=a.stack(y,S,C,R,I,L,function(b,X){var K=new n(O,b,X,m,T,w);return B.add(K),K.body});return O.add(V),V},stack:function(m,T,y,S,C,R,I){var L=a.stack(m,T,y,S,C,R,I);return this.world.add(L),L},pyramid:function(m,T,y,S,C,R,I){var L=a.pyramid(m,T,y,S,C,R,I);return this.world.add(L),L},chain:function(m,T,y,S,C,R){return a.chain(m,T,y,S,C,R)},mesh:function(m,T,y,S,C){return a.mesh(m,T,y,S,C)},newtonsCradle:function(m,T,y,S,C){var R=a.newtonsCradle(m,T,y,S,C);return this.world.add(R),R},car:function(m,T,y,S,C){var R=a.car(m,T,y,S,C);return this.world.add(R),R},softBody:function(m,T,y,S,C,R,I,L,w,O){var B=a.softBody(m,T,y,S,C,R,I,L,w,O);return this.world.add(B),B},joint:function(m,T,y,S,C){return this.constraint(m,T,y,S,C)},spring:function(m,T,y,S,C){return this.constraint(m,T,y,S,C)},constraint:function(m,T,y,S,C){S===void 0&&(S=1),C===void 0&&(C={}),C.bodyA=m.type==="body"?m:m.body,C.bodyB=T.type==="body"?T:T.body,isNaN(y)||(C.length=y),C.stiffness=S;var R=r.create(C);return this.world.add(R),R},worldConstraint:function(m,T,y,S){y===void 0&&(y=1),S===void 0&&(S={}),S.bodyB=m.type==="body"?m:m.body,isNaN(T)||(S.length=T),S.stiffness=y;var C=r.create(S);return this.world.add(C),C},mouseSpring:function(m){return this.pointerConstraint(m)},pointerConstraint:function(m){m===void 0&&(m={}),m.hasOwnProperty("render")||(m.render={visible:!1});var T=new u(this.scene,this.world,m);return this.world.add(T.constraint),T},image:function(m,T,y,S,C){var R=new n(this.world,m,T,y,S,C);return this.sys.displayList.add(R),R},tileBody:function(m,T){return new i(this.world,m,T)},sprite:function(m,T,y,S,C){var R=new h(this.world,m,T,y,S,C);return this.sys.displayList.add(R),this.sys.updateList.add(R),R},gameObject:function(m,T,y){return e(this.world,m,T,y)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});v.exports=p},75803:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(31884),g=t(95540),a=t(26099);function r(e){return!!e.get&&typeof e.get=="function"||!!e.set&&typeof e.set=="function"}var s=function(e,n,h,i){h===void 0&&(h={}),i===void 0&&(i=!0);var l=n.x,f=n.y;n.body={temp:!0,position:{x:l,y:f}};var u=[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity];if(u.forEach(function(p){for(var m in p)r(p[m])?Object.defineProperty(n,m,{get:p[m].get,set:p[m].set}):Object.defineProperty(n,m,{value:p[m]})}),n.world=e,n._tempVec2=new a(l,f),h.hasOwnProperty("type")&&h.type==="body")n.setExistingBody(h,i);else{var d=g(h,"shape",null);d||(d="rectangle"),h.addToWorld=i,n.setBody(d,h)}return n};v.exports=s},23181:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31884),a=t(95643),r=t(95540),s=t(88571),e=t(72699),n=t(26099),h=new o({Extends:s,Mixins:[g.Bounce,g.Collision,g.Force,g.Friction,g.Gravity,g.Mass,g.Sensor,g.SetBody,g.Sleep,g.Static,g.Transform,g.Velocity,e],initialize:function(l,f,u,d,p,m){a.call(this,l.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,p),this.setSizeToFrame(),this.setOrigin(),this.world=l,this._tempVec2=new n(f,u);var T=r(m,"shape",null);T?this.setBody(T,m):this.setRectangle(this.width,this.height,m),this.setPosition(f,u),this.initPipeline(),this.initPostPipeline(!0)}});v.exports=h},42045:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(60461),g=t(66615),a=t(66280),r=t(22562),s=t(68174),e=t(15647),n=t(83419),h=t(52284),i=t(53402),l=t(69351),f=t(74116),u=t(48140),d=t(81388),p=t(20339),m=t(28137),T=t(95540),y=t(35154),S=t(18210),C=t(40178),R=t(6790),I=t(74507),L=t(46975),w=t(4506),O=t(99561),B=t(73832),V=t(37277),b=t(73296),X=t(66272),K=t(44594),Q=t(74058),U=t(31725),W=t(41598),F=t(68243);i.setDecomp(t(55973));var G=new n({initialize:function(Y){this.scene=Y,this.systems=Y.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=r,this.composite=l,this.collision=h,this.detector=d,this.pair=w,this.pairs=O,this.query=b,this.resolver=X,this.constraint=u,this.bodies=a,this.composites=f,this.axes=g,this.bounds=e,this.svg=Q,this.vector=U,this.vertices=W,this.verts=W,this._tempVec2=U.create(),y(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),y(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),y(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),X._restingThresh=y(this.config,"restingThresh",4),X._restingThreshTangent=y(this.config,"restingThreshTangent",6),X._positionDampen=y(this.config,"positionDampen",.9),X._positionWarming=y(this.config,"positionWarming",.8),X._frictionNormalMultiplier=y(this.config,"frictionNormalMultiplier",5),Y.sys.events.once(K.BOOT,this.boot,this),Y.sys.events.on(K.START,this.start,this)},boot:function(){this.world=new F(this.scene,this.config),this.add=new m(this.world),this.bodyBounds=new s,this.systems.events.once(K.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new F(this.scene,this.config),this.add=new m(this.world));var z=this.systems.events;z.on(K.UPDATE,this.world.update,this.world),z.on(K.POST_UPDATE,this.world.postUpdate,this.world),z.once(K.SHUTDOWN,this.shutdown,this)},getConfig:function(){var z=this.systems.game.config.physics,Y=this.systems.settings.physics,$=L(T(Y,"matter",{}),T(z,"matter",{}));return $},enableAttractorPlugin:function(){return B.register(S),B.use(R,S),this},enableWrapPlugin:function(){return B.register(I),B.use(R,I),this},enableCollisionEventsPlugin:function(){return B.register(C),B.use(R,C),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(z,Y){this.world.step(z,Y)},containsPoint:function(z,Y,$){z=this.getMatterBodies(z);var j=U.create(Y,$),Z=b.point(z,j);return Z.length>0},intersectPoint:function(z,Y,$){$=this.getMatterBodies($);var j=U.create(z,Y),Z=[],q=b.point($,j);return q.forEach(function(_){Z.indexOf(_)===-1&&Z.push(_)}),Z},intersectRect:function(z,Y,$,j,Z,q){Z===void 0&&(Z=!1),q=this.getMatterBodies(q);var _={min:{x:z,y:Y},max:{x:z+$,y:Y+j}},tt=[],nt=b.region(q,_,Z);return nt.forEach(function(at){tt.indexOf(at)===-1&&tt.push(at)}),tt},intersectRay:function(z,Y,$,j,Z,q){Z===void 0&&(Z=1),q=this.getMatterBodies(q);for(var _=[],tt=b.ray(q,U.create(z,Y),U.create($,j),Z),nt=0;nt<tt.length;nt++)_.push(tt[nt].body);return _},intersectBody:function(z,Y){Y=this.getMatterBodies(Y);for(var $=[],j=b.collides(z,Y),Z=0;Z<j.length;Z++){var q=j[Z];q.bodyA===z?$.push(q.bodyB):$.push(q.bodyA)}return $},overlap:function(z,Y,$,j,Z){$===void 0&&($=null),j===void 0&&(j=null),Z===void 0&&(Z=$),Array.isArray(z)||(z=[z]),z=this.getMatterBodies(z),Y=this.getMatterBodies(Y);for(var q=!1,_=0;_<z.length;_++)for(var tt=z[_],nt=b.collides(tt,Y),at=0;at<nt.length;at++){var st=nt[at],lt=st.bodyA.id===tt.id?st.bodyB:st.bodyA;if(!j||j.call(Z,tt,lt,st)){if(q=!0,$)$.call(Z,tt,lt,st);else if(!j)return!0}}return q},setCollisionCategory:function(z,Y){return z=this.getMatterBodies(z),z.forEach(function($){$.collisionFilter.category=Y}),this},setCollisionGroup:function(z,Y){return z=this.getMatterBodies(z),z.forEach(function($){$.collisionFilter.group=Y}),this},setCollidesWith:function(z,Y){z=this.getMatterBodies(z);var $=0;if(!Array.isArray(Y))$=Y;else for(var j=0;j<Y.length;j++)$|=Y[j];return z.forEach(function(Z){Z.collisionFilter.mask=$}),this},getMatterBodies:function(z){if(!z)return this.world.getAllBodies();Array.isArray(z)||(z=[z]);for(var Y=[],$=0;$<z.length;$++){var j=z[$].hasOwnProperty("body")?z[$].body:z[$];Y.push(j)}return Y},setVelocity:function(z,Y,$){z=this.getMatterBodies(z);var j=this._tempVec2;return j.x=Y,j.y=$,z.forEach(function(Z){r.setVelocity(Z,j)}),this},setVelocityX:function(z,Y){z=this.getMatterBodies(z);var $=this._tempVec2;return $.x=Y,z.forEach(function(j){$.y=j.velocity.y,r.setVelocity(j,$)}),this},setVelocityY:function(z,Y){z=this.getMatterBodies(z);var $=this._tempVec2;return $.y=Y,z.forEach(function(j){$.x=j.velocity.x,r.setVelocity(j,$)}),this},setAngularVelocity:function(z,Y){return z=this.getMatterBodies(z),z.forEach(function($){r.setAngularVelocity($,Y)}),this},applyForce:function(z,Y){z=this.getMatterBodies(z);var $=this._tempVec2;return z.forEach(function(j){$.x=j.position.x,$.y=j.position.y,r.applyForce(j,$,Y)}),this},applyForceFromPosition:function(z,Y,$,j){z=this.getMatterBodies(z);var Z=this._tempVec2;return z.forEach(function(q){j===void 0&&(j=q.angle),Z.x=$*Math.cos(j),Z.y=$*Math.sin(j),r.applyForce(q,Y,Z)}),this},applyForceFromAngle:function(z,Y,$){z=this.getMatterBodies(z);var j=this._tempVec2;return z.forEach(function(Z){$===void 0&&($=Z.angle),j.x=Y*Math.cos($),j.y=Y*Math.sin($),r.applyForce(Z,{x:Z.position.x,y:Z.position.y},j)}),this},getConstraintLength:function(z){var Y=z.pointA.x,$=z.pointA.y,j=z.pointB.x,Z=z.pointB.y;return z.bodyA&&(Y+=z.bodyA.position.x,$+=z.bodyA.position.y),z.bodyB&&(j+=z.bodyB.position.x,Z+=z.bodyB.position.y),p(Y,$,j,Z)},alignBody:function(z,Y,$,j){z=z.hasOwnProperty("body")?z.body:z;var Z;switch(j){case o.TOP_LEFT:case o.LEFT_TOP:Z=this.bodyBounds.getTopLeft(z,Y,$);break;case o.TOP_CENTER:Z=this.bodyBounds.getTopCenter(z,Y,$);break;case o.TOP_RIGHT:case o.RIGHT_TOP:Z=this.bodyBounds.getTopRight(z,Y,$);break;case o.LEFT_CENTER:Z=this.bodyBounds.getLeftCenter(z,Y,$);break;case o.CENTER:Z=this.bodyBounds.getCenter(z,Y,$);break;case o.RIGHT_CENTER:Z=this.bodyBounds.getRightCenter(z,Y,$);break;case o.LEFT_BOTTOM:case o.BOTTOM_LEFT:Z=this.bodyBounds.getBottomLeft(z,Y,$);break;case o.BOTTOM_CENTER:Z=this.bodyBounds.getBottomCenter(z,Y,$);break;case o.BOTTOM_RIGHT:case o.RIGHT_BOTTOM:Z=this.bodyBounds.getBottomRight(z,Y,$);break}return Z&&r.setPosition(z,Z),this},shutdown:function(){var z=this.systems.events;this.world&&(z.off(K.UPDATE,this.world.update,this.world),z.off(K.POST_UPDATE,this.world.postUpdate,this.world)),z.off(K.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(K.START,this.start,this),this.scene=null,this.systems=null}});V.register("MatterPhysics",G,"matterPhysics"),v.exports=G},34803:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(9674),g=t(83419),a=t(31884),r=t(95643),s=t(95540),e=t(72699),n=t(68287),h=t(26099),i=new g({Extends:n,Mixins:[a.Bounce,a.Collision,a.Force,a.Friction,a.Gravity,a.Mass,a.Sensor,a.SetBody,a.Sleep,a.Static,a.Transform,a.Velocity,e],initialize:function(f,u,d,p,m,T){r.call(this,f.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new o(this),this.setTexture(p,m),this.setSizeToFrame(),this.setOrigin(),this.world=f,this._tempVec2=new h(u,d);var y=s(T,"shape",null);y?this.setBody(y,T):this.setRectangle(this.width,this.height,T),this.setPosition(u,d),this.initPipeline(),this.initPostPipeline(!0)}});v.exports=i},73834:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(83419),r=t(31884),s=t(62644),e=t(50792),n=t(95540),h=t(97022),i=t(41598),l=new a({Extends:e,Mixins:[r.Bounce,r.Collision,r.Friction,r.Gravity,r.Mass,r.Sensor,r.Sleep,r.Static],initialize:function(u,d,p){e.call(this),this.tile=d,this.world=u,d.physics.matterBody&&d.physics.matterBody.destroy(),d.physics.matterBody=this;var m=n(p,"body",null),T=n(p,"addToWorld",!0);if(m)this.setBody(m,T);else{var y=d.getCollisionGroup(),S=n(y,"objects",[]);S.length>0?this.setFromTileCollision(p):this.setFromTileRectangle(p)}if(d.flipX||d.flipY){var C={x:d.getCenterX(),y:d.getCenterY()},R=d.flipX?-1:1,I=d.flipY?-1:1;g.scale(m,R,I,C)}},setFromTileRectangle:function(f){f===void 0&&(f={}),h(f,"isStatic")||(f.isStatic=!0),h(f,"addToWorld")||(f.addToWorld=!0);var u=this.tile.getBounds(),d=u.x+u.width/2,p=u.y+u.height/2,m=o.rectangle(d,p,u.width,u.height,f);return this.setBody(m,f.addToWorld),this},setFromTileCollision:function(f){f===void 0&&(f={}),h(f,"isStatic")||(f.isStatic=!0),h(f,"addToWorld")||(f.addToWorld=!0);for(var u=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,p=this.tile.getLeft(),m=this.tile.getTop(),T=this.tile.getCollisionGroup(),y=n(T,"objects",[]),S=[],C=0;C<y.length;C++){var R=y[C],I=p+R.x*u,L=m+R.y*d,w=R.width*u,O=R.height*d,B=null;if(R.rectangle)B=o.rectangle(I+w/2,L+O/2,w,O,f);else if(R.ellipse)B=o.circle(I+w/2,L+O/2,w/2,f);else if(R.polygon||R.polyline){var V=R.polygon?R.polygon:R.polyline,b=V.map(function(U){return{x:U.x*u,y:U.y*d}}),X=i.create(b),K=i.centre(X);I+=K.x,L+=K.y,B=o.fromVertices(I,L,X,f)}B&&S.push(B)}if(S.length===1)this.setBody(S[0],f.addToWorld);else if(S.length>1){var Q=s(f);Q.parts=S,this.setBody(g.create(Q),Q.addToWorld)}return this},setBody:function(f,u){return u===void 0&&(u=!0),this.body&&this.removeBody(),this.body=f,this.body.gameObject=this,u&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});v.exports=l},19496:(v,E,t)=>{/**
 * @author       Joachim Grill <joachim@codeandweb.com>
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2018 CodeAndWeb GmbH
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(53402),r=t(95540),s=t(41598),e={parseBody:function(n,h,i,l){l===void 0&&(l={});for(var f=r(i,"fixtures",[]),u=[],d=0;d<f.length;d++)for(var p=this.parseFixture(f[d]),m=0;m<p.length;m++)u.push(p[m]);var T=a.clone(i,!0);a.extend(T,l,!0),delete T.fixtures,delete T.type;var y=g.create(T);return g.setParts(y,u),g.setPosition(y,{x:n,y:h}),y},parseFixture:function(n){var h=a.extend({},!1,n);delete h.circle,delete h.vertices;var i;if(n.circle){var l=r(n.circle,"x"),f=r(n.circle,"y"),u=r(n.circle,"radius");i=[o.circle(l,f,u,h)]}else n.vertices&&(i=this.parseVertices(n.vertices,h));return i},parseVertices:function(n,h){h===void 0&&(h={});for(var i=[],l=0;l<n.length;l++)s.clockwiseSort(n[l]),i.push(g.create(a.extend({position:s.centre(n[l]),vertices:n[l]},h)));return o.flagCoincidentParts(i)}};v.exports=e},85791:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a={parseBody:function(r,s,e,n){n===void 0&&(n={});var h,i=e.vertices;if(i.length===1)n.vertices=i[0],h=g.create(n),o.flagCoincidentParts(h.parts);else{for(var l=[],f=0;f<i.length;f++){var u=g.create({vertices:i[f]});l.push(u)}o.flagCoincidentParts(l),n.parts=l,h=g.create(n)}return h.label=e.label,g.setPosition(h,{x:r,y:s}),h}};v.exports=a},98713:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(15647),g=t(83419),a=t(69351),r=t(48140),s=t(81388),e=t(1121),n=t(8214),h=t(46975),i=t(53614),l=t(26099),f=t(41598),u=new g({initialize:function(p,m,T){T===void 0&&(T={});var y={label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}};this.scene=p,this.world=m,this.camera=null,this.pointer=null,this.active=!0,this.position=new l,this.body=null,this.part=null,this.constraint=r.create(h(T,y)),this.world.on(e.BEFORE_UPDATE,this.update,this),p.sys.input.on(n.POINTER_DOWN,this.onDown,this),p.sys.input.on(n.POINTER_UP,this.onUp,this)},onDown:function(d){this.pointer||(this.pointer=d,this.camera=d.camera)},onUp:function(d){d===this.pointer&&(this.pointer=null)},getBody:function(d){var p=this.position,m=this.constraint;this.camera.getWorldPoint(d.x,d.y,p);for(var T=a.allBodies(this.world.localWorld),y=0;y<T.length;y++){var S=T[y];if(!S.ignorePointer&&o.contains(S.bounds,p)&&s.canCollide(S.collisionFilter,m.collisionFilter)&&this.hitTestBody(S,p))return this.world.emit(e.DRAG_START,S,this.part,this),!0}return!1},hitTestBody:function(d,p){for(var m=this.constraint,T=d.parts.length,y=T>1?1:0,S=y;S<T;S++){var C=d.parts[S];if(f.contains(C.vertices,p))return m.pointA=p,m.pointB={x:p.x-d.position.x,y:p.y-d.position.y},m.bodyB=d,m.angleB=d.angle,i.set(d,!1),this.part=C,this.body=d,!0}return!1},update:function(){var d=this.pointer,p=this.body;if(!this.active||!d){p&&this.stopDrag();return}if(!d.isDown&&p){this.stopDrag();return}else if(d.isDown){if(!this.camera||!p&&!this.getBody(d))return;p=this.body;var m=this.position,T=this.constraint;this.camera.getWorldPoint(d.x,d.y,m),T.pointA.x=m.x,T.pointA.y=m.y,i.set(p,!1),this.world.emit(e.DRAG,p,this)}},stopDrag:function(){var d=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,d&&this.world.emit(e.DRAG_END,d,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(e.BEFORE_UPDATE,this.update),this.scene.sys.input.off(n.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(n.POINTER_UP,this.onUp,this)}});v.exports=u},68243:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(83419),r=t(53402),s=t(69351),e=t(48413),n=t(50792),h=t(1121),i=t(95540),l=t(35154),f=t(22562),u=t(35810),d=t(73834),p=t(4372),m=t(31725),T=new a({Extends:n,initialize:function(S,C){n.call(this),this.scene=S,this.engine=e.create(C),this.localWorld=this.engine.world;var R=l(C,"gravity",null);R?this.setGravity(R.x,R.y,R.scale):R===!1&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=l(C,"enabled",!0),this.getDelta=l(C,"getDelta",this.update60Hz);var I=i(C,"runner",{}),L=i(I,"fps",!1),w=i(I,"fps",60),O=i(I,"delta",1e3/w),B=i(I,"deltaMin",1e3/w),V=i(I,"deltaMax",1e3/(w*.5));L||(w=1e3/O),this.runner={fps:w,deltaSampleSize:i(I,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:i(I,"isFixed",!1),delta:O,deltaMin:B,deltaMax:V},this.autoUpdate=l(C,"autoUpdate",!0);var b=l(C,"debug",!1);if(this.drawDebug=typeof b=="object"?!0:b,this.debugGraphic,this.debugConfig={showAxes:i(b,"showAxes",!1),showAngleIndicator:i(b,"showAngleIndicator",!1),angleColor:i(b,"angleColor",15208787),showBroadphase:i(b,"showBroadphase",!1),broadphaseColor:i(b,"broadphaseColor",16757760),showBounds:i(b,"showBounds",!1),boundsColor:i(b,"boundsColor",16777215),showVelocity:i(b,"showVelocity",!1),velocityColor:i(b,"velocityColor",44783),showCollisions:i(b,"showCollisions",!1),collisionColor:i(b,"collisionColor",16094476),showSeparations:i(b,"showSeparations",!1),separationColor:i(b,"separationColor",16753920),showBody:i(b,"showBody",!0),showStaticBody:i(b,"showStaticBody",!0),showInternalEdges:i(b,"showInternalEdges",!1),renderFill:i(b,"renderFill",!1),renderLine:i(b,"renderLine",!0),fillColor:i(b,"fillColor",1075465),fillOpacity:i(b,"fillOpacity",1),lineColor:i(b,"lineColor",2678297),lineOpacity:i(b,"lineOpacity",1),lineThickness:i(b,"lineThickness",1),staticFillColor:i(b,"staticFillColor",857979),staticLineColor:i(b,"staticLineColor",1255396),showSleeping:i(b,"showSleeping",!1),staticBodySleepOpacity:i(b,"staticBodySleepOpacity",.7),sleepFillColor:i(b,"sleepFillColor",4605510),sleepLineColor:i(b,"sleepLineColor",10066585),showSensors:i(b,"showSensors",!0),sensorFillColor:i(b,"sensorFillColor",857979),sensorLineColor:i(b,"sensorLineColor",1255396),showPositions:i(b,"showPositions",!0),positionSize:i(b,"positionSize",4),positionColor:i(b,"positionColor",14697178),showJoint:i(b,"showJoint",!0),jointColor:i(b,"jointColor",14737474),jointLineOpacity:i(b,"jointLineOpacity",1),jointLineThickness:i(b,"jointLineThickness",2),pinSize:i(b,"pinSize",4),pinColor:i(b,"pinColor",4382944),springColor:i(b,"springColor",14697184),anchorColor:i(b,"anchorColor",15724527),anchorSize:i(b,"anchorSize",4),showConvexHulls:i(b,"showConvexHulls",!1),hullColor:i(b,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),i(C,"setBounds",!1)){var X=C.setBounds;if(typeof X=="boolean")this.setBounds();else{var K=i(X,"x",0),Q=i(X,"y",0),U=i(X,"width",S.sys.scale.width),W=i(X,"height",S.sys.scale.height),F=i(X,"thickness",64),G=i(X,"left",!0),z=i(X,"right",!0),Y=i(X,"top",!0),$=i(X,"bottom",!0);this.setBounds(K,Q,U,W,F,G,z,Y,$)}}},setCompositeRenderStyle:function(y){var S=y.bodies,C=y.constraints,R=y.composites,I,L,w;for(I=0;I<S.length;I++)L=S[I],w=L.render,this.setBodyRenderStyle(L,w.lineColor,w.lineOpacity,w.lineThickness,w.fillColor,w.fillOpacity);for(I=0;I<C.length;I++)L=C[I],w=L.render,this.setConstraintRenderStyle(L,w.lineColor,w.lineOpacity,w.lineThickness,w.pinSize,w.anchorColor,w.anchorSize);for(I=0;I<R.length;I++)L=R[I],this.setCompositeRenderStyle(L);return this},setBodyRenderStyle:function(y,S,C,R,I,L){var w=y.render,O=this.debugConfig;return w?(S==null&&(S=y.isStatic?O.staticLineColor:O.lineColor),C==null&&(C=O.lineOpacity),R==null&&(R=O.lineThickness),I==null&&(I=y.isStatic?O.staticFillColor:O.fillColor),L==null&&(L=O.fillOpacity),S!==!1&&(w.lineColor=S),C!==!1&&(w.lineOpacity=C),R!==!1&&(w.lineThickness=R),I!==!1&&(w.fillColor=I),L!==!1&&(w.fillOpacity=L),this):this},setConstraintRenderStyle:function(y,S,C,R,I,L,w){var O=y.render,B=this.debugConfig;if(!O)return this;if(S==null){var V=O.type;V==="line"?S=B.jointColor:V==="pin"?S=B.pinColor:V==="spring"&&(S=B.springColor)}return C==null&&(C=B.jointLineOpacity),R==null&&(R=B.jointLineThickness),I==null&&(I=B.pinSize),L==null&&(L=B.anchorColor),w==null&&(w=B.anchorSize),S!==!1&&(O.lineColor=S),C!==!1&&(O.lineOpacity=C),R!==!1&&(O.lineThickness=R),I!==!1&&(O.pinSize=I),L!==!1&&(O.anchorColor=L),w!==!1&&(O.anchorSize=w),this},setEventsProxy:function(){var y=this,S=this.engine,C=this.localWorld;this.drawDebug&&(u.on(C,"compositeModified",function(R){y.setCompositeRenderStyle(R)}),u.on(C,"beforeAdd",function(R){for(var I=[].concat(R.object),L=0;L<I.length;L++){var w=I[L],O=w.render;w.type==="body"?y.setBodyRenderStyle(w,O.lineColor,O.lineOpacity,O.lineThickness,O.fillColor,O.fillOpacity):w.type==="composite"?y.setCompositeRenderStyle(w):w.type==="constraint"&&y.setConstraintRenderStyle(w,O.lineColor,O.lineOpacity,O.lineThickness,O.pinSize,O.anchorColor,O.anchorSize)}})),u.on(C,"beforeAdd",function(R){y.emit(h.BEFORE_ADD,R)}),u.on(C,"afterAdd",function(R){y.emit(h.AFTER_ADD,R)}),u.on(C,"beforeRemove",function(R){y.emit(h.BEFORE_REMOVE,R)}),u.on(C,"afterRemove",function(R){y.emit(h.AFTER_REMOVE,R)}),u.on(S,"beforeUpdate",function(R){y.emit(h.BEFORE_UPDATE,R)}),u.on(S,"afterUpdate",function(R){y.emit(h.AFTER_UPDATE,R)}),u.on(S,"collisionStart",function(R){var I=R.pairs,L,w;I.length>0&&(L=I[0].bodyA,w=I[0].bodyB),y.emit(h.COLLISION_START,R,L,w)}),u.on(S,"collisionActive",function(R){var I=R.pairs,L,w;I.length>0&&(L=I[0].bodyA,w=I[0].bodyB),y.emit(h.COLLISION_ACTIVE,R,L,w)}),u.on(S,"collisionEnd",function(R){var I=R.pairs,L,w;I.length>0&&(L=I[0].bodyA,w=I[0].bodyB),y.emit(h.COLLISION_END,R,L,w)})},setBounds:function(y,S,C,R,I,L,w,O,B){return y===void 0&&(y=0),S===void 0&&(S=0),C===void 0&&(C=this.scene.sys.scale.width),R===void 0&&(R=this.scene.sys.scale.height),I===void 0&&(I=64),L===void 0&&(L=!0),w===void 0&&(w=!0),O===void 0&&(O=!0),B===void 0&&(B=!0),this.updateWall(L,"left",y-I,S-I,I,R+I*2),this.updateWall(w,"right",y+C,S-I,I,R+I*2),this.updateWall(O,"top",y,S-I,C,I),this.updateWall(B,"bottom",y,S+R,C,I),this},updateWall:function(y,S,C,R,I,L){var w=this.walls[S];y?(w&&p.remove(this.localWorld,w),C+=I/2,R+=L/2,this.walls[S]=this.create(C,R,I,L,{isStatic:!0,friction:0,frictionStatic:0})):(w&&p.remove(this.localWorld,w),this.walls[S]=null)},createDebugGraphic:function(){var y=this.scene.sys.add.graphics({x:0,y:0});return y.setDepth(Number.MAX_VALUE),this.debugGraphic=y,this.drawDebug=!0,y},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(y,S,C){return y===void 0&&(y=0),S===void 0&&(S=1),C===void 0&&(C=.001),this.localWorld.gravity.x=y,this.localWorld.gravity.y=S,this.localWorld.gravity.scale=C,this},create:function(y,S,C,R,I){var L=o.rectangle(y,S,C,R,I);return p.add(this.localWorld,L),L},add:function(y){return p.add(this.localWorld,y),this},remove:function(y,S){Array.isArray(y)||(y=[y]);for(var C=0;C<y.length;C++){var R=y[C],I=R.body?R.body:R;s.remove(this.localWorld,I,S)}return this},removeConstraint:function(y,S){return s.remove(this.localWorld,y,S),this},convertTilemapLayer:function(y,S){var C=y.layer,R=y.getTilesWithin(0,0,C.width,C.height,{isColliding:!0});return this.convertTiles(R,S),this},convertTiles:function(y,S){if(y.length===0)return this;for(var C=0;C<y.length;C++)new d(this,y[C],S);return this},nextGroup:function(y){return f.nextGroup(y)},nextCategory:function(){return f.nextCategory()},pause:function(){return this.enabled=!1,this.emit(h.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(h.RESUME),this},update:function(y,S){if(!(!this.enabled||!this.autoUpdate)){var C=this.engine,R=this.runner,I=C.timing;R.isFixed?S=this.getDelta(y,S):(S=y-R.timePrev||R.delta,R.timePrev=y,R.deltaHistory.push(S),R.deltaHistory=R.deltaHistory.slice(-R.deltaSampleSize),S=Math.min.apply(null,R.deltaHistory),S=S<R.deltaMin?R.deltaMin:S,S=S>R.deltaMax?R.deltaMax:S,R.delta=S),R.timeScalePrev=I.timeScale,R.frameCounter+=1,y-R.counterTimestamp>=1e3&&(R.fps=R.frameCounter*((y-R.counterTimestamp)/1e3),R.counterTimestamp=y,R.frameCounter=0),e.update(C,S)}},step:function(y){e.update(this.engine,y)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(y){var S=y.hasOwnProperty("body")?y.body:y;return s.get(this.localWorld,S.id,S.type)!==null},getAllBodies:function(){return s.allBodies(this.localWorld)},getAllConstraints:function(){return s.allConstraints(this.localWorld)},getAllComposites:function(){return s.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var y=this.debugConfig,S=this.engine,C=this.debugGraphic,R=s.allBodies(this.localWorld);this.debugGraphic.clear(),y.showBroadphase&&S.broadphase.controller&&this.renderGrid(S.broadphase,C,y.broadphaseColor,.5),y.showBounds&&this.renderBodyBounds(R,C,y.boundsColor,.5),(y.showBody||y.showStaticBody)&&this.renderBodies(R),y.showJoint&&this.renderJoints(),(y.showAxes||y.showAngleIndicator)&&this.renderBodyAxes(R,C,y.showAxes,y.angleColor,.5),y.showVelocity&&this.renderBodyVelocity(R,C,y.velocityColor,1,2),y.showSeparations&&this.renderSeparations(S.pairs.list,C,y.separationColor),y.showCollisions&&this.renderCollisions(S.pairs.list,C,y.collisionColor)}},renderGrid:function(y,S,C,R){S.lineStyle(1,C,R);for(var I=r.keys(y.buckets),L=0;L<I.length;L++){var w=I[L];if(!(y.buckets[w].length<2)){var O=w.split(/C|R/);S.strokeRect(parseInt(O[1],10)*y.bucketWidth,parseInt(O[2],10)*y.bucketHeight,y.bucketWidth,y.bucketHeight)}}return this},renderSeparations:function(y,S,C){S.lineStyle(1,C,1);for(var R=0;R<y.length;R++){var I=y[R];if(I.isActive){var L=I.collision,w=L.bodyA,O=L.bodyB,B=w.position,V=O.position,b=L.penetration,X=!w.isStatic&&!O.isStatic?4:1;O.isStatic&&(X=0),S.lineBetween(V.x,V.y,V.x-b.x*X,V.y-b.y*X),X=!w.isStatic&&!O.isStatic?4:1,w.isStatic&&(X=0),S.lineBetween(B.x,B.y,B.x-b.x*X,B.y-b.y*X)}}return this},renderCollisions:function(y,S,C){S.lineStyle(1,C,.5),S.fillStyle(C,1);var R,I;for(R=0;R<y.length;R++)if(I=y[R],!!I.isActive)for(var L=0;L<I.activeContacts.length;L++){var w=I.activeContacts[L],O=w.vertex;S.fillRect(O.x-2,O.y-2,5,5)}for(R=0;R<y.length;R++)if(I=y[R],!!I.isActive){var B=I.collision,V=I.activeContacts;if(V.length>0){var b=V[0].vertex.x,X=V[0].vertex.y;V.length===2&&(b=(V[0].vertex.x+V[1].vertex.x)/2,X=(V[0].vertex.y+V[1].vertex.y)/2),B.bodyB===B.supports[0].body||B.bodyA.isStatic?S.lineBetween(b-B.normal.x*8,X-B.normal.y*8,b,X):S.lineBetween(b+B.normal.x*8,X+B.normal.y*8,b,X)}}return this},renderBodyBounds:function(y,S,C,R){S.lineStyle(1,C,R);for(var I=0;I<y.length;I++){var L=y[I];if(L.render.visible){var w=L.bounds;if(w)S.strokeRect(w.min.x,w.min.y,w.max.x-w.min.x,w.max.y-w.min.y);else for(var O=L.parts,B=O.length>1?1:0;B<O.length;B++){var V=O[B];S.strokeRect(V.bounds.min.x,V.bounds.min.y,V.bounds.max.x-V.bounds.min.x,V.bounds.max.y-V.bounds.min.y)}}}return this},renderBodyAxes:function(y,S,C,R,I){S.lineStyle(1,R,I);for(var L=0;L<y.length;L++){var w=y[L],O=w.parts;if(w.render.visible){var B,V,b;if(C)for(V=O.length>1?1:0;V<O.length;V++)for(B=O[V],b=0;b<B.axes.length;b++){var X=B.axes[b];S.lineBetween(B.position.x,B.position.y,B.position.x+X.x*20,B.position.y+X.y*20)}else for(V=O.length>1?1:0;V<O.length;V++)for(B=O[V],b=0;b<B.axes.length;b++)S.lineBetween(B.position.x,B.position.y,(B.vertices[0].x+B.vertices[B.vertices.length-1].x)/2,(B.vertices[0].y+B.vertices[B.vertices.length-1].y)/2)}}return this},renderBodyVelocity:function(y,S,C,R,I){S.lineStyle(I,C,R);for(var L=0;L<y.length;L++){var w=y[L];w.render.visible&&S.lineBetween(w.position.x,w.position.y,w.position.x+(w.position.x-w.positionPrev.x)*2,w.position.y+(w.position.y-w.positionPrev.y)*2)}return this},renderBodies:function(y){for(var S=this.debugGraphic,C=this.debugConfig,R=C.showBody,I=C.showStaticBody,L=C.showSleeping,w=C.showInternalEdges,O=C.showConvexHulls,B=C.renderFill,V=C.renderLine,b=C.staticBodySleepOpacity,X=C.sleepFillColor,K=C.sleepLineColor,Q=C.hullColor,U=0;U<y.length;U++){var W=y[U];if(W.render.visible&&!(!I&&W.isStatic||!R&&!W.isStatic)){var F=W.render.lineColor,G=W.render.lineOpacity,z=W.render.lineThickness,Y=W.render.fillColor,$=W.render.fillOpacity;L&&W.isSleeping&&(W.isStatic?(G*=b,$*=b):(F=K,Y=X)),B||(Y=null),V||(F=null),this.renderBody(W,S,w,F,G,z,Y,$);var j=W.parts.length;O&&j>1&&this.renderConvexHull(W,S,Q,z)}}},renderBody:function(y,S,C,R,I,L,w,O){R===void 0&&(R=null),I===void 0&&(I=null),L===void 0&&(L=1),w===void 0&&(w=null),O===void 0&&(O=null);for(var B=this.debugConfig,V=B.sensorFillColor,b=B.sensorLineColor,X=y.parts,K=X.length,Q=K>1?1:0;Q<K;Q++){var U=X[Q],W=U.render,F=W.opacity;if(!(!W.visible||F===0||U.isSensor&&!B.showSensors)){var G=U.circleRadius;if(S.beginPath(),U.isSensor?(w!==null&&S.fillStyle(V,O*F),R!==null&&S.lineStyle(L,b,I*F)):(w!==null&&S.fillStyle(w,O*F),R!==null&&S.lineStyle(L,R,I*F)),G)S.arc(U.position.x,U.position.y,G,0,2*Math.PI);else{var z=U.vertices,Y=z.length;S.moveTo(z[0].x,z[0].y);for(var $=1;$<Y;$++){var j=z[$];if(!z[$-1].isInternal||C?S.lineTo(j.x,j.y):S.moveTo(j.x,j.y),$<Y&&j.isInternal&&!C){var Z=($+1)%Y;S.moveTo(z[Z].x,z[Z].y)}}S.closePath()}w!==null&&S.fillPath(),R!==null&&S.strokePath()}}if(B.showPositions&&!y.isStatic){var q=y.position.x,_=y.position.y,tt=Math.ceil(B.positionSize/2);S.fillStyle(B.positionColor,1),S.fillRect(q-tt,_-tt,B.positionSize,B.positionSize)}return this},renderConvexHull:function(y,S,C,R){R===void 0&&(R=1);var I=y.parts,L=I.length;if(L>1){var w=y.vertices;S.lineStyle(R,C),S.beginPath(),S.moveTo(w[0].x,w[0].y);for(var O=1;O<w.length;O++)S.lineTo(w[O].x,w[O].y);S.lineTo(w[0].x,w[0].y),S.strokePath()}return this},renderJoints:function(){for(var y=this.debugGraphic,S=s.allConstraints(this.localWorld),C=0;C<S.length;C++){var R=S[C].render,I=R.lineColor,L=R.lineOpacity,w=R.lineThickness,O=R.pinSize,B=R.anchorColor,V=R.anchorSize;this.renderConstraint(S[C],y,I,L,w,O,B,V)}},renderConstraint:function(y,S,C,R,I,L,w,O){var B=y.render;if(!B.visible||!y.pointA||!y.pointB)return this;S.lineStyle(I,C,R);var V=y.bodyA,b=y.bodyB,X,K;if(V?X=m.add(V.position,y.pointA):X=y.pointA,B.type==="pin")S.strokeCircle(X.x,X.y,L);else{if(b?K=m.add(b.position,y.pointB):K=y.pointB,S.beginPath(),S.moveTo(X.x,X.y),B.type==="spring")for(var Q=m.sub(K,X),U=m.perp(m.normalise(Q)),W=Math.ceil(r.clamp(y.length/5,12,20)),F,G=1;G<W;G+=1)F=G%2===0?1:-1,S.lineTo(X.x+Q.x*(G/W)+U.x*F*4,X.y+Q.y*(G/W)+U.y*F*4);S.lineTo(K.x,K.y)}return S.strokePath(),B.anchors&&O>0&&(S.fillStyle(w),S.fillCircle(X.x,X.y,O),S.fillCircle(K.x,K.y,O)),this},resetCollisionIDs:function(){return g._nextCollidingGroupId=1,g._nextNonCollidingGroupId=-1,g._nextCategory=1,this},shutdown:function(){u.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),e.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});v.exports=T},70410:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setBounce:function(t){return this.body.restitution=t,this}};v.exports=E},66968:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var o=0;if(!Array.isArray(t))o=t;else for(var g=0;g<t.length;g++)o|=t[g];return this.body.collisionFilter.mask=o,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,o){Array.isArray(t)||(t=[t]);for(var g=0;g<t.length;g++){var a=t[g].hasOwnProperty("body")?t[g].body:t[g];this.body.setOnCollideWith(a,o)}return this}};v.exports=E},51607:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g={applyForce:function(a){return this._tempVec2.set(this.body.position.x,this.body.position.y),o.applyForce(this.body,this._tempVec2,a),this},applyForceFrom:function(a,r){return o.applyForce(this.body,a,r),this},thrust:function(a){var r=this.body.angle;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(a){var r=this.body.angle-Math.PI/2;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(a){var r=this.body.angle+Math.PI/2;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(a){var r=this.body.angle-Math.PI;return this._tempVec2.set(a*Math.cos(r),a*Math.sin(r)),o.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};v.exports=g},5436:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setFriction:function(t,o,g){return this.body.friction=t,o!==void 0&&(this.body.frictionAir=o),g!==void 0&&(this.body.frictionStatic=g),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};v.exports=E},39858:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}};v.exports=E},37302:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g=t(26099),a={setMass:function(r){return o.setMass(this.body,r),this},setDensity:function(r){return o.setDensity(this.body,r),this},centerOfMass:{get:function(){return new g(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};v.exports=a},39132:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}};v.exports=E},57772:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(66280),g=t(22562),a=t(43855),r=t(95540),s=t(19496),e=t(85791),n=t(41598),h={setRectangle:function(i,l,f){return this.setBody({type:"rectangle",width:i,height:l},f)},setCircle:function(i,l){return this.setBody({type:"circle",radius:i},l)},setPolygon:function(i,l,f){return this.setBody({type:"polygon",sides:l,radius:i},f)},setTrapezoid:function(i,l,f,u){return this.setBody({type:"trapezoid",width:i,height:l,slope:f},u)},setExistingBody:function(i,l){l===void 0&&(l=!0),this.body&&this.world.remove(this.body,!0),this.body=i;for(var f=0;f<i.parts.length;f++)i.parts[f].gameObject=this;var u=this;if(i.destroy=function(){u.world.remove(u.body,!0),u.body.gameObject=null},l&&(this.world.has(i)&&this.world.remove(i,!0),this.world.add(i)),this._originComponent){var d=i.render.sprite.xOffset,p=i.render.sprite.yOffset,m=i.centerOfMass.x,T=i.centerOfMass.y;if(a(m,.5)&&a(T,.5))this.setOrigin(d+.5,p+.5);else{var y=i.centerOffset.x,S=i.centerOffset.y;this.setOrigin(d+y/this.displayWidth,p+S/this.displayHeight)}}return this},setBody:function(i,l){if(!i)return this;var f;typeof i=="string"&&(i={type:i});var u=r(i,"type","rectangle"),d=r(i,"x",this._tempVec2.x),p=r(i,"y",this._tempVec2.y),m=r(i,"width",this.width),T=r(i,"height",this.height);switch(u){case"rectangle":f=o.rectangle(d,p,m,T,l);break;case"circle":var y=r(i,"radius",Math.max(m,T)/2),S=r(i,"maxSides",25);f=o.circle(d,p,y,l,S);break;case"trapezoid":var C=r(i,"slope",.5);f=o.trapezoid(d,p,m,T,C,l);break;case"polygon":var R=r(i,"sides",5),I=r(i,"radius",Math.max(m,T)/2);f=o.polygon(d,p,R,I,l);break;case"fromVertices":case"fromVerts":var L=r(i,"verts",null);if(L)if(typeof L=="string"&&(L=n.fromPath(L)),this.body&&!this.body.hasOwnProperty("temp"))g.setVertices(this.body,L),f=this.body;else{var w=r(i,"flagInternal",!1),O=r(i,"removeCollinear",.01),B=r(i,"minimumArea",10);f=o.fromVertices(d,p,L,l,w,O,B)}break;case"fromPhysicsEditor":f=s.parseBody(d,p,i,l);break;case"fromPhysicsTracer":f=e.parseBody(d,p,i,l);break}return f&&this.setExistingBody(f,i.addToWorld),this}};v.exports=h},38083:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(1121),g=t(53614),a=t(35810),r={setToSleep:function(){return g.set(this.body,!0),this},setAwake:function(){return g.set(this.body,!1),this},setSleepThreshold:function(s){return s===void 0&&(s=60),this.body.sleepThreshold=s,this},setSleepEvents:function(s,e){return this.setSleepStartEvent(s),this.setSleepEndEvent(e),this},setSleepStartEvent:function(s){if(s){var e=this.world;a.on(this.body,"sleepStart",function(n){e.emit(o.SLEEP_START,n,this)})}else a.off(this.body,"sleepStart");return this},setSleepEndEvent:function(s){if(s){var e=this.world;a.on(this.body,"sleepEnd",function(n){e.emit(o.SLEEP_END,n,this)})}else a.off(this.body,"sleepEnd");return this}};v.exports=r},90556:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g={setStatic:function(a){return o.setStatic(this.body,a),this},isStatic:function(){return this.body.isStatic}};v.exports=g},85436:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g=t(36383),a=t(86554),r=t(30954),s=4,e={x:{get:function(){return this.body.position.x},set:function(n){this._tempVec2.set(n,this.y),o.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(n){this._tempVec2.set(this.x,n),o.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(n){var h=1/this._scaleX,i=1/this._scaleY;this._scaleX=n,this._scaleX===0?this.renderFlags&=~s:this.renderFlags|=s,o.scale(this.body,h,i),o.scale(this.body,n,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(n){var h=1/this._scaleX,i=1/this._scaleY;this._scaleY=n,this._scaleY===0?this.renderFlags&=~s:this.renderFlags|=s,o.scale(this.body,h,i),o.scale(this.body,this._scaleX,n)}},angle:{get:function(){return r(this.body.angle*g.RAD_TO_DEG)},set:function(n){this.rotation=r(n)*g.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(n){this._rotation=a(n),o.setAngle(this.body,this._rotation)}},setPosition:function(n,h){return n===void 0&&(n=0),h===void 0&&(h=n),this._tempVec2.set(n,h),o.setPosition(this.body,this._tempVec2),this},setRotation:function(n){return n===void 0&&(n=0),this._rotation=a(n),o.setAngle(this.body,n),this},setFixedRotation:function(){return o.setInertia(this.body,1/0),this},setAngle:function(n){return n===void 0&&(n=0),this.angle=n,o.setAngle(this.body,this.rotation),this},setScale:function(n,h,i){n===void 0&&(n=1),h===void 0&&(h=n);var l=1/this._scaleX,f=1/this._scaleY;return this._scaleX=n,this._scaleY=h,o.scale(this.body,l,f,i),o.scale(this.body,n,h,i),this}};v.exports=e},42081:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(22562),g={setVelocityX:function(a){return this._tempVec2.set(a,this.body.velocity.y),o.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(a){return this._tempVec2.set(this.body.velocity.x,a),o.setVelocity(this.body,this._tempVec2),this},setVelocity:function(a,r){return this._tempVec2.set(a,r),o.setVelocity(this.body,this._tempVec2),this},getVelocity:function(){return o.getVelocity(this.body)},setAngularVelocity:function(a){return o.setAngularVelocity(this.body,a),this},getAngularVelocity:function(){return o.getAngularVelocity(this.body)},setAngularSpeed:function(a){return o.setAngularSpeed(this.body,a),this},getAngularSpeed:function(){return o.getAngularSpeed(this.body)}};v.exports=g},31884:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Bounce:t(70410),Collision:t(66968),Force:t(51607),Friction:t(5436),Gravity:t(39858),Mass:t(37302),Sensor:t(39132),SetBody:t(57772),Sleep:t(38083),Static:t(90556),Transform:t(85436),Velocity:t(42081)}},85608:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="afteradd"},1213:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="afterremove"},25968:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="afterupdate"},67205:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="beforeadd"},39438:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="beforeremove"},44823:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="beforeupdate"},92593:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="collisionactive"},60128:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="collisionend"},76861:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="collisionstart"},92362:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragend"},76408:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="drag"},93971:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="dragstart"},5656:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pause"},47861:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resume"},79099:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="sleepend"},35906:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="sleepstart"},1121:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AFTER_ADD:t(85608),AFTER_REMOVE:t(1213),AFTER_UPDATE:t(25968),BEFORE_ADD:t(67205),BEFORE_REMOVE:t(39438),BEFORE_UPDATE:t(44823),COLLISION_ACTIVE:t(92593),COLLISION_END:t(60128),COLLISION_START:t(76861),DRAG_END:t(92362),DRAG:t(76408),DRAG_START:t(93971),PAUSE:t(5656),RESUME:t(47861),SLEEP_END:t(79099),SLEEP_START:t(35906)}},3875:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BodyBounds:t(68174),Components:t(31884),Events:t(1121),Factory:t(28137),MatterGameObject:t(75803),Image:t(23181),Matter:t(19933),MatterPhysics:t(42045),PolyDecomp:t(55973),Sprite:t(34803),TileBody:t(73834),PhysicsEditorParser:t(19496),PhysicsJSONParser:t(85791),PointerConstraint:t(98713),World:t(68243)}},22562:(v,E,t)=>{var o={};v.exports=o;var g=t(41598),a=t(31725),r=t(53614),s=t(53402),e=t(15647),n=t(66615);(function(){o._timeCorrection=!0,o._inertiaScale=4,o._nextCollidingGroupId=1,o._nextNonCollidingGroupId=-1,o._nextCategory=1,o._baseDelta=16.666666666666668,o.create=function(i){var l={id:s.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,deltaTime:16.666666666666668,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=g.centre(i.vertices):i.hasOwnProperty("vertices")||(l.vertices=g.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var f=s.extend(l,i);return h(f,i),f.setOnCollideWith=function(u,d){return d?this.onCollideWith[u.id]=d:delete this.onCollideWith[u.id],this},f},o.nextGroup=function(i){return i?o._nextNonCollidingGroupId--:o._nextCollidingGroupId++},o.nextCategory=function(){return o._nextCategory=o._nextCategory<<1,o._nextCategory};var h=function(i,l){if(l=l||{},o.set(i,{bounds:i.bounds||e.create(i.vertices),positionPrev:i.positionPrev||a.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i}),g.rotate(i.vertices,i.angle,i.position),n.rotate(i.axes,i.angle),e.update(i.bounds,i.vertices,i.velocity),o.set(i,{axes:l.axes||i.axes,area:l.area||i.area,mass:l.mass||i.mass,inertia:l.inertia||i.inertia}),i.parts.length===1){var f=i.bounds,u=i.centerOfMass,d=i.centerOffset,p=f.max.x-f.min.x,m=f.max.y-f.min.y;u.x=-(f.min.x-i.position.x)/p,u.y=-(f.min.y-i.position.y)/m,d.x=p*u.x,d.y=m*u.y}};o.set=function(i,l,f){var u;typeof l=="string"&&(u=l,l={},l[u]=f);for(u in l)if(Object.prototype.hasOwnProperty.call(l,u))switch(f=l[u],u){case"isStatic":o.setStatic(i,f);break;case"isSleeping":r.set(i,f);break;case"mass":o.setMass(i,f);break;case"density":o.setDensity(i,f);break;case"inertia":o.setInertia(i,f);break;case"vertices":o.setVertices(i,f);break;case"position":o.setPosition(i,f);break;case"angle":o.setAngle(i,f);break;case"velocity":o.setVelocity(i,f);break;case"angularVelocity":o.setAngularVelocity(i,f);break;case"speed":o.setSpeed(i,f);break;case"angularSpeed":o.setAngularSpeed(i,f);break;case"parts":o.setParts(i,f);break;case"centre":o.setCentre(i,f);break;default:i[u]=f}},o.setStatic=function(i,l){for(var f=0;f<i.parts.length;f++){var u=i.parts[f];l?(u.isStatic||(u._original={restitution:u.restitution,friction:u.friction,mass:u.mass,inertia:u.inertia,density:u.density,inverseMass:u.inverseMass,inverseInertia:u.inverseInertia}),u.restitution=0,u.friction=1,u.mass=u.inertia=u.density=1/0,u.inverseMass=u.inverseInertia=0,u.positionPrev.x=u.position.x,u.positionPrev.y=u.position.y,u.anglePrev=u.angle,u.angularVelocity=0,u.speed=0,u.angularSpeed=0,u.motion=0):u._original&&(u.restitution=u._original.restitution,u.friction=u._original.friction,u.mass=u._original.mass,u.inertia=u._original.inertia,u.density=u._original.density,u.inverseMass=u._original.inverseMass,u.inverseInertia=u._original.inverseInertia,u._original=null),u.isStatic=l}},o.setMass=function(i,l){var f=i.inertia/(i.mass/6);i.inertia=f*(l/6),i.inverseInertia=1/i.inertia,i.mass=l,i.inverseMass=1/i.mass,i.density=i.mass/i.area},o.setDensity=function(i,l){o.setMass(i,l*i.area),i.density=l},o.setInertia=function(i,l){i.inertia=l,i.inverseInertia=1/i.inertia},o.setVertices=function(i,l){l[0].body===i?i.vertices=l:i.vertices=g.create(l,i),i.axes=n.fromVertices(i.vertices),i.area=g.area(i.vertices),o.setMass(i,i.density*i.area);var f=g.centre(i.vertices);g.translate(i.vertices,f,-1),o.setInertia(i,o._inertiaScale*g.inertia(i.vertices,i.mass)),g.translate(i.vertices,i.position),e.update(i.bounds,i.vertices,i.velocity)},o.setParts=function(i,l,f){var u;for(l=l.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,u=0;u<l.length;u++){var d=l[u];d!==i&&(d.parent=i,i.parts.push(d))}if(i.parts.length!==1){if(f=typeof f<"u"?f:!0,f){var p=[];for(u=0;u<l.length;u++)p=p.concat(l[u].vertices);g.clockwiseSort(p);var m=g.hull(p),T=g.centre(m);o.setVertices(i,m),g.translate(i.vertices,T)}var y=o._totalProperties(i),S=y.centre.x,C=y.centre.y,R=i.bounds,I=i.centerOfMass,L=i.centerOffset;e.update(R,i.vertices,i.velocity),I.x=-(R.min.x-S)/(R.max.x-R.min.x),I.y=-(R.min.y-C)/(R.max.y-R.min.y),L.x=S,L.y=C,i.area=y.area,i.parent=i,i.position.x=S,i.position.y=C,i.positionPrev.x=S,i.positionPrev.y=C,o.setMass(i,y.mass),o.setInertia(i,y.inertia),o.setPosition(i,y.centre)}},o.setCentre=function(i,l,f){f?(i.positionPrev.x+=l.x,i.positionPrev.y+=l.y,i.position.x+=l.x,i.position.y+=l.y):(i.positionPrev.x=l.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=l.y-(i.position.y-i.positionPrev.y),i.position.x=l.x,i.position.y=l.y)},o.setPosition=function(i,l,f){var u=a.sub(l,i.position);f?(i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.velocity.x=u.x,i.velocity.y=u.y,i.speed=a.magnitude(u)):(i.positionPrev.x+=u.x,i.positionPrev.y+=u.y);for(var d=0;d<i.parts.length;d++){var p=i.parts[d];p.position.x+=u.x,p.position.y+=u.y,g.translate(p.vertices,u),e.update(p.bounds,p.vertices,i.velocity)}},o.setAngle=function(i,l,f){var u=l-i.angle;f?(i.anglePrev=i.angle,i.angularVelocity=u,i.angularSpeed=Math.abs(u)):i.anglePrev+=u;for(var d=0;d<i.parts.length;d++){var p=i.parts[d];p.angle+=u,g.rotate(p.vertices,u,i.position),n.rotate(p.axes,u),e.update(p.bounds,p.vertices,i.velocity),d>0&&a.rotateAbout(p.position,u,i.position,p.position)}},o.setVelocity=function(i,l){var f=i.deltaTime/o._baseDelta;i.positionPrev.x=i.position.x-l.x*f,i.positionPrev.y=i.position.y-l.y*f,i.velocity.x=(i.position.x-i.positionPrev.x)/f,i.velocity.y=(i.position.y-i.positionPrev.y)/f,i.speed=a.magnitude(i.velocity)},o.getVelocity=function(i){var l=o._baseDelta/i.deltaTime;return{x:(i.position.x-i.positionPrev.x)*l,y:(i.position.y-i.positionPrev.y)*l}},o.getSpeed=function(i){return a.magnitude(o.getVelocity(i))},o.setSpeed=function(i,l){o.setVelocity(i,a.mult(a.normalise(o.getVelocity(i)),l))},o.setAngularVelocity=function(i,l){var f=i.deltaTime/o._baseDelta;i.anglePrev=i.angle-l*f,i.angularVelocity=(i.angle-i.anglePrev)/f,i.angularSpeed=Math.abs(i.angularVelocity)},o.getAngularVelocity=function(i){return(i.angle-i.anglePrev)*o._baseDelta/i.deltaTime},o.getAngularSpeed=function(i){return Math.abs(o.getAngularVelocity(i))},o.setAngularSpeed=function(i,l){o.setAngularVelocity(i,s.sign(o.getAngularVelocity(i))*l)},o.translate=function(i,l,f){o.setPosition(i,a.add(i.position,l),f)},o.rotate=function(i,l,f,u){if(!f)o.setAngle(i,i.angle+l,u);else{var d=Math.cos(l),p=Math.sin(l),m=i.position.x-f.x,T=i.position.y-f.y;o.setPosition(i,{x:f.x+(m*d-T*p),y:f.y+(m*p+T*d)},u),o.setAngle(i,i.angle+l,u)}},o.scale=function(i,l,f,u){var d=0,p=0;u=u||i.position;for(var m=i.inertia===1/0,T=0;T<i.parts.length;T++){var y=i.parts[T];y.scale.x=l,y.scale.y=f,g.scale(y.vertices,l,f,u),y.axes=n.fromVertices(y.vertices),y.area=g.area(y.vertices),o.setMass(y,i.density*y.area),g.translate(y.vertices,{x:-y.position.x,y:-y.position.y}),o.setInertia(y,o._inertiaScale*g.inertia(y.vertices,y.mass)),g.translate(y.vertices,{x:y.position.x,y:y.position.y}),T>0&&(d+=y.area,p+=y.inertia),y.position.x=u.x+(y.position.x-u.x)*l,y.position.y=u.y+(y.position.y-u.y)*f,e.update(y.bounds,y.vertices,i.velocity)}i.parts.length>1&&(i.area=d,i.isStatic||(o.setMass(i,i.density*d),o.setInertia(i,p))),i.circleRadius&&(l===f?i.circleRadius*=l:i.circleRadius=null),m&&o.setInertia(i,1/0)},o.update=function(i,l){l=(typeof l<"u"?l:16.666666666666668)*i.timeScale;var f=l*l,u=o._timeCorrection?l/(i.deltaTime||l):1,d=1-i.frictionAir*(l/s._baseDelta),p=(i.position.x-i.positionPrev.x)*u,m=(i.position.y-i.positionPrev.y)*u;i.velocity.x=p*d+i.force.x/i.mass*f,i.velocity.y=m*d+i.force.y/i.mass*f,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.deltaTime=l,i.angularVelocity=(i.angle-i.anglePrev)*d*u+i.torque/i.inertia*f,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=a.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var T=0;T<i.parts.length;T++){var y=i.parts[T];g.translate(y.vertices,i.velocity),T>0&&(y.position.x+=i.velocity.x,y.position.y+=i.velocity.y),i.angularVelocity!==0&&(g.rotate(y.vertices,i.angularVelocity,i.position),n.rotate(y.axes,i.angularVelocity),T>0&&a.rotateAbout(y.position,i.angularVelocity,i.position,y.position)),e.update(y.bounds,y.vertices,i.velocity)}},o.updateVelocities=function(i){var l=o._baseDelta/i.deltaTime,f=i.velocity;f.x=(i.position.x-i.positionPrev.x)*l,f.y=(i.position.y-i.positionPrev.y)*l,i.speed=Math.sqrt(f.x*f.x+f.y*f.y),i.angularVelocity=(i.angle-i.anglePrev)*l,i.angularSpeed=Math.abs(i.angularVelocity)},o.applyForce=function(i,l,f){var u={x:l.x-i.position.x,y:l.y-i.position.y};i.force.x+=f.x,i.force.y+=f.y,i.torque+=u.x*f.y-u.y*f.x},o._totalProperties=function(i){for(var l={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=i.parts.length===1?0:1;f<i.parts.length;f++){var u=i.parts[f],d=u.mass!==1/0?u.mass:1;l.mass+=d,l.area+=u.area,l.inertia+=u.inertia,l.centre=a.add(l.centre,a.mult(u.position,d))}return l.centre=a.div(l.centre,l.mass),l}})()},69351:(v,E,t)=>{var o={};v.exports=o;var g=t(35810),a=t(53402),r=t(15647),s=t(22562);(function(){o.create=function(e){return a.extend({id:a.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},o.setModified=function(e,n,h,i){if(g.trigger(e,"compositeModified",e),e.isModified=n,n&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),h&&e.parent&&o.setModified(e.parent,n,h,i),i)for(var l=0;l<e.composites.length;l++){var f=e.composites[l];o.setModified(f,n,h,i)}},o.add=function(e,n){var h=[].concat(n);g.trigger(e,"beforeAdd",{object:n});for(var i=0;i<h.length;i++){var l=h[i];switch(l.type){case"body":if(l.parent!==l){a.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}o.addBody(e,l);break;case"constraint":o.addConstraint(e,l);break;case"composite":o.addComposite(e,l);break;case"mouseConstraint":o.addConstraint(e,l.constraint);break}}return g.trigger(e,"afterAdd",{object:n}),e},o.remove=function(e,n,h){var i=[].concat(n);g.trigger(e,"beforeRemove",{object:n});for(var l=0;l<i.length;l++){var f=i[l];switch(f.type){case"body":o.removeBody(e,f,h);break;case"constraint":o.removeConstraint(e,f,h);break;case"composite":o.removeComposite(e,f,h);break;case"mouseConstraint":o.removeConstraint(e,f.constraint);break}}return g.trigger(e,"afterRemove",{object:n}),e},o.addComposite=function(e,n){return e.composites.push(n),n.parent=e,o.setModified(e,!0,!0,!1),e},o.removeComposite=function(e,n,h){var i=a.indexOf(e.composites,n);if(i!==-1&&o.removeCompositeAt(e,i),h)for(var l=0;l<e.composites.length;l++)o.removeComposite(e.composites[l],n,!0);return e},o.removeCompositeAt=function(e,n){return e.composites.splice(n,1),o.setModified(e,!0,!0,!1),e},o.addBody=function(e,n){return e.bodies.push(n),o.setModified(e,!0,!0,!1),e},o.removeBody=function(e,n,h){var i=a.indexOf(e.bodies,n);if(i!==-1&&o.removeBodyAt(e,i),h)for(var l=0;l<e.composites.length;l++)o.removeBody(e.composites[l],n,!0);return e},o.removeBodyAt=function(e,n){return e.bodies.splice(n,1),o.setModified(e,!0,!0,!1),e},o.addConstraint=function(e,n){return e.constraints.push(n),o.setModified(e,!0,!0,!1),e},o.removeConstraint=function(e,n,h){var i=a.indexOf(e.constraints,n);if(i!==-1&&o.removeConstraintAt(e,i),h)for(var l=0;l<e.composites.length;l++)o.removeConstraint(e.composites[l],n,!0);return e},o.removeConstraintAt=function(e,n){return e.constraints.splice(n,1),o.setModified(e,!0,!0,!1),e},o.clear=function(e,n,h){if(h)for(var i=0;i<e.composites.length;i++)o.clear(e.composites[i],n,!0);return n?e.bodies=e.bodies.filter(function(l){return l.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,o.setModified(e,!0,!0,!1),e},o.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var n=[].concat(e.bodies),h=0;h<e.composites.length;h++)n=n.concat(o.allBodies(e.composites[h]));return e.cache&&(e.cache.allBodies=n),n},o.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var n=[].concat(e.constraints),h=0;h<e.composites.length;h++)n=n.concat(o.allConstraints(e.composites[h]));return e.cache&&(e.cache.allConstraints=n),n},o.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var n=[].concat(e.composites),h=0;h<e.composites.length;h++)n=n.concat(o.allComposites(e.composites[h]));return e.cache&&(e.cache.allComposites=n),n},o.get=function(e,n,h){var i,l;switch(h){case"body":i=o.allBodies(e);break;case"constraint":i=o.allConstraints(e);break;case"composite":i=o.allComposites(e).concat(e);break}return i?(l=i.filter(function(f){return f.id.toString()===n.toString()}),l.length===0?null:l[0]):null},o.move=function(e,n,h){return o.remove(e,n),o.add(h,n),e},o.rebase=function(e){for(var n=o.allBodies(e).concat(o.allConstraints(e)).concat(o.allComposites(e)),h=0;h<n.length;h++)n[h].id=a.nextId();return e},o.translate=function(e,n,h){for(var i=h?o.allBodies(e):e.bodies,l=0;l<i.length;l++)s.translate(i[l],n);return e},o.rotate=function(e,n,h,i){for(var l=Math.cos(n),f=Math.sin(n),u=i?o.allBodies(e):e.bodies,d=0;d<u.length;d++){var p=u[d],m=p.position.x-h.x,T=p.position.y-h.y;s.setPosition(p,{x:h.x+(m*l-T*f),y:h.y+(m*f+T*l)}),s.rotate(p,n)}return e},o.scale=function(e,n,h,i,l){for(var f=l?o.allBodies(e):e.bodies,u=0;u<f.length;u++){var d=f[u],p=d.position.x-i.x,m=d.position.y-i.y;s.setPosition(d,{x:i.x+p*n,y:i.y+m*h}),s.scale(d,n,h)}return e},o.bounds=function(e){for(var n=o.allBodies(e),h=[],i=0;i<n.length;i+=1){var l=n[i];h.push(l.bounds.min,l.bounds.max)}return r.create(h)}})()},4372:(v,E,t)=>{var o={};v.exports=o;var g=t(69351);(function(){o.create=g.create,o.add=g.add,o.remove=g.remove,o.clear=g.clear,o.addComposite=g.addComposite,o.addBody=g.addBody,o.addConstraint=g.addConstraint})()},52284:(v,E,t)=>{var o={};v.exports=o;var g=t(41598),a=t(4506);(function(){var r=[],s={overlap:0,axis:null},e={overlap:0,axis:null};o.create=function(n,h){return{pair:null,collided:!1,bodyA:n,bodyB:h,parentA:n.parent,parentB:h.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},o.collides=function(n,h,i){if(o._overlapAxes(s,n.vertices,h.vertices,n.axes),s.overlap<=0||(o._overlapAxes(e,h.vertices,n.vertices,h.axes),e.overlap<=0))return null;var l=i&&i.table[a.id(n,h)],f;l?f=l.collision:(f=o.create(n,h),f.collided=!0,f.bodyA=n.id<h.id?n:h,f.bodyB=n.id<h.id?h:n,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent),n=f.bodyA,h=f.bodyB;var u;s.overlap<e.overlap?u=s:u=e;var d=f.normal,p=f.supports,m=u.axis,T=m.x,y=m.y;T*(h.position.x-n.position.x)+y*(h.position.y-n.position.y)<0?(d.x=T,d.y=y):(d.x=-T,d.y=-y),f.tangent.x=-d.y,f.tangent.y=d.x,f.depth=u.overlap,f.penetration.x=d.x*f.depth,f.penetration.y=d.y*f.depth;var S=o._findSupports(n,h,d,1),C=0;if(g.contains(n.vertices,S[0])&&(p[C++]=S[0]),g.contains(n.vertices,S[1])&&(p[C++]=S[1]),C<2){var R=o._findSupports(h,n,d,-1);g.contains(h.vertices,R[0])&&(p[C++]=R[0]),C<2&&g.contains(h.vertices,R[1])&&(p[C++]=R[1])}return C===0&&(p[C++]=S[0]),p.length=C,f},o._overlapAxes=function(n,h,i,l){var f=h.length,u=i.length,d=h[0].x,p=h[0].y,m=i[0].x,T=i[0].y,y=l.length,S=Number.MAX_VALUE,C=0,R,I,L,w,O,B;for(O=0;O<y;O++){var V=l[O],b=V.x,X=V.y,K=d*b+p*X,Q=m*b+T*X,U=K,W=Q;for(B=1;B<f;B+=1)w=h[B].x*b+h[B].y*X,w>U?U=w:w<K&&(K=w);for(B=1;B<u;B+=1)w=i[B].x*b+i[B].y*X,w>W?W=w:w<Q&&(Q=w);if(I=U-Q,L=W-K,R=I<L?I:L,R<S&&(S=R,C=O,R<=0))break}n.axis=l[C],n.overlap=S},o._projectToAxis=function(n,h,i){for(var l=h[0].x*i.x+h[0].y*i.y,f=l,u=1;u<h.length;u+=1){var d=h[u].x*i.x+h[u].y*i.y;d>f?f=d:d<l&&(l=d)}n.min=l,n.max=f},o._findSupports=function(n,h,i,l){var f=h.vertices,u=f.length,d=n.position.x,p=n.position.y,m=i.x*l,T=i.y*l,y=Number.MAX_VALUE,S,C,R,I,L;for(L=0;L<u;L+=1)C=f[L],I=m*(d-C.x)+T*(p-C.y),I<y&&(y=I,S=C);return R=f[(u+S.index-1)%u],y=m*(d-R.x)+T*(p-R.y),C=f[(S.index+1)%u],m*(d-C.x)+T*(p-C.y)<y?(r[0]=S,r[1]=C,r):(r[0]=S,r[1]=R,r)}})()},43424:v=>{var E={};v.exports=E,function(){E.create=function(t){return{vertex:t,normalImpulse:0,tangentImpulse:0}}}()},81388:(v,E,t)=>{var o={};v.exports=o;var g=t(53402),a=t(52284);(function(){o.create=function(r){var s={bodies:[],pairs:null};return g.extend(s,r)},o.setBodies=function(r,s){r.bodies=s.slice(0)},o.clear=function(r){r.bodies=[]},o.collisions=function(r){var s=[],e=r.pairs,n=r.bodies,h=n.length,i=o.canCollide,l=a.collides,f,u;for(n.sort(o._compareBoundsX),f=0;f<h;f++){var d=n[f],p=d.bounds,m=d.bounds.max.x,T=d.bounds.max.y,y=d.bounds.min.y,S=d.isStatic||d.isSleeping,C=d.parts.length,R=C===1;for(u=f+1;u<h;u++){var I=n[u],L=I.bounds;if(L.min.x>m)break;if(!(T<L.min.y||y>L.max.y)&&!(S&&(I.isStatic||I.isSleeping))&&i(d.collisionFilter,I.collisionFilter)){var w=I.parts.length;if(R&&w===1){var O=l(d,I,e);O&&s.push(O)}else for(var B=C>1?1:0,V=w>1?1:0,b=B;b<C;b++)for(var X=d.parts[b],p=X.bounds,K=V;K<w;K++){var Q=I.parts[K],L=Q.bounds;if(!(p.min.x>L.max.x||p.max.x<L.min.x||p.max.y<L.min.y||p.min.y>L.max.y)){var O=l(X,Q,e);O&&s.push(O)}}}}}return s},o.canCollide=function(r,s){return r.group===s.group&&r.group!==0?r.group>0:(r.mask&s.category)!==0&&(s.mask&r.category)!==0},o._compareBoundsX=function(r,s){return r.bounds.min.x-s.bounds.min.x}})()},4506:(v,E,t)=>{var o={};v.exports=o;var g=t(43424);(function(){o.create=function(a,r){var s=a.bodyA,e=a.bodyB,n={id:o.id(s,e),bodyA:s,bodyB:e,collision:a,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:s.isSensor||e.isSensor,timeCreated:r,timeUpdated:r,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return o.update(n,a,r),n},o.update=function(a,r,s){var e=a.contacts,n=r.supports,h=a.activeContacts,i=r.parentA,l=r.parentB,f=i.vertices.length;a.isActive=!0,a.timeUpdated=s,a.collision=r,a.separation=r.depth,a.inverseMass=i.inverseMass+l.inverseMass,a.friction=i.friction<l.friction?i.friction:l.friction,a.frictionStatic=i.frictionStatic>l.frictionStatic?i.frictionStatic:l.frictionStatic,a.restitution=i.restitution>l.restitution?i.restitution:l.restitution,a.slop=i.slop>l.slop?i.slop:l.slop,r.pair=a,h.length=0;for(var u=0;u<n.length;u++){var d=n[u],p=d.body===i?d.index:f+d.index,m=e[p];m?h.push(m):h.push(e[p]=g.create(d))}},o.setActive=function(a,r,s){r?(a.isActive=!0,a.timeUpdated=s):(a.isActive=!1,a.activeContacts.length=0)},o.id=function(a,r){return a.id<r.id?"A"+a.id+"B"+r.id:"A"+r.id+"B"+a.id}})()},99561:(v,E,t)=>{var o={};v.exports=o;var g=t(4506),a=t(53402);(function(){o.create=function(r){return a.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},o.update=function(r,s,e){var n=r.list,h=n.length,i=r.table,l=s.length,f=r.collisionStart,u=r.collisionEnd,d=r.collisionActive,p,m,T,y;for(f.length=0,u.length=0,d.length=0,y=0;y<h;y++)n[y].confirmedActive=!1;for(y=0;y<l;y++)p=s[y],T=p.pair,T?(T.isActive?d.push(T):f.push(T),g.update(T,p,e),T.confirmedActive=!0):(T=g.create(p,e),i[T.id]=T,f.push(T),n.push(T));var S=[];for(h=n.length,y=0;y<h;y++)T=n[y],T.confirmedActive||(g.setActive(T,!1,e),u.push(T),!T.collision.bodyA.isSleeping&&!T.collision.bodyB.isSleeping&&S.push(y));for(y=0;y<S.length;y++)m=S[y]-y,T=n[m],n.splice(m,1),delete i[T.id]},o.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},73296:(v,E,t)=>{var o={};v.exports=o;var g=t(31725),a=t(52284),r=t(15647),s=t(66280),e=t(41598);(function(){o.collides=function(n,h){for(var i=[],l=h.length,f=n.bounds,u=a.collides,d=r.overlaps,p=0;p<l;p++){var m=h[p],T=m.parts.length,y=T===1?0:1;if(n!==m&&d(m.bounds,f))for(var S=y;S<T;S++){var C=m.parts[S];if(d(C.bounds,f)){var R=u(C,n);if(R){i.push(R);break}}}}return i},o.ray=function(n,h,i,l){l=l||1e-100;for(var f=g.angle(h,i),u=g.magnitude(g.sub(h,i)),d=(i.x+h.x)*.5,p=(i.y+h.y)*.5,m=s.rectangle(d,p,u,l,{angle:f}),T=o.collides(m,n),y=0;y<T.length;y+=1){var S=T[y];S.body=S.bodyB=S.bodyA}return T},o.region=function(n,h,i){for(var l=[],f=0;f<n.length;f++){var u=n[f],d=r.overlaps(u.bounds,h);(d&&!i||!d&&i)&&l.push(u)}return l},o.point=function(n,h){for(var i=[],l=0;l<n.length;l++){var f=n[l];if(r.contains(f.bounds,h))for(var u=f.parts.length===1?0:1;u<f.parts.length;u++){var d=f.parts[u];if(r.contains(d.bounds,h)&&e.contains(d.vertices,h)){i.push(f);break}}}return i}})()},66272:(v,E,t)=>{var o={};v.exports=o;var g=t(41598),a=t(53402),r=t(15647);(function(){o._restingThresh=2,o._restingThreshTangent=Math.sqrt(6),o._positionDampen=.9,o._positionWarming=.8,o._frictionNormalMultiplier=5,o._frictionMaxStatic=Number.MAX_VALUE,o.preSolvePosition=function(s){var e,n,h,i=s.length;for(e=0;e<i;e++)n=s[e],n.isActive&&(h=n.activeContacts.length,n.collision.parentA.totalContacts+=h,n.collision.parentB.totalContacts+=h)},o.solvePosition=function(s,e,n){var h,i,l,f,u,d,p,m,T=o._positionDampen*(n||1),y=a.clamp(e/a._baseDelta,0,1),S=s.length;for(h=0;h<S;h++)i=s[h],!(!i.isActive||i.isSensor)&&(l=i.collision,f=l.parentA,u=l.parentB,d=l.normal,i.separation=d.x*(u.positionImpulse.x+l.penetration.x-f.positionImpulse.x)+d.y*(u.positionImpulse.y+l.penetration.y-f.positionImpulse.y));for(h=0;h<S;h++)i=s[h],!(!i.isActive||i.isSensor)&&(l=i.collision,f=l.parentA,u=l.parentB,d=l.normal,m=i.separation-i.slop*y,(f.isStatic||u.isStatic)&&(m*=2),f.isStatic||f.isSleeping||(p=T/f.totalContacts,f.positionImpulse.x+=d.x*m*p,f.positionImpulse.y+=d.y*m*p),u.isStatic||u.isSleeping||(p=T/u.totalContacts,u.positionImpulse.x-=d.x*m*p,u.positionImpulse.y-=d.y*m*p))},o.postSolvePosition=function(s){for(var e=o._positionWarming,n=s.length,h=g.translate,i=r.update,l=0;l<n;l++){var f=s[l],u=f.positionImpulse,d=u.x,p=u.y,m=f.velocity;if(f.totalContacts=0,d!==0||p!==0){for(var T=0;T<f.parts.length;T++){var y=f.parts[T];h(y.vertices,u),i(y.bounds,y.vertices,m),y.position.x+=d,y.position.y+=p}f.positionPrev.x+=d,f.positionPrev.y+=p,d*m.x+p*m.y<0?(u.x=0,u.y=0):(u.x*=e,u.y*=e)}}},o.preSolveVelocity=function(s){var e=s.length,n,h;for(n=0;n<e;n++){var i=s[n];if(!(!i.isActive||i.isSensor)){var l=i.activeContacts,f=l.length,u=i.collision,d=u.parentA,p=u.parentB,m=u.normal,T=u.tangent;for(h=0;h<f;h++){var y=l[h],S=y.vertex,C=y.normalImpulse,R=y.tangentImpulse;if(C!==0||R!==0){var I=m.x*C+T.x*R,L=m.y*C+T.y*R;d.isStatic||d.isSleeping||(d.positionPrev.x+=I*d.inverseMass,d.positionPrev.y+=L*d.inverseMass,d.anglePrev+=d.inverseInertia*((S.x-d.position.x)*L-(S.y-d.position.y)*I)),p.isStatic||p.isSleeping||(p.positionPrev.x-=I*p.inverseMass,p.positionPrev.y-=L*p.inverseMass,p.anglePrev-=p.inverseInertia*((S.x-p.position.x)*L-(S.y-p.position.y)*I))}}}}},o.solveVelocity=function(s,e){var n=e/a._baseDelta,h=n*n,i=h*n,l=-o._restingThresh*n,f=o._restingThreshTangent,u=o._frictionNormalMultiplier*n,d=o._frictionMaxStatic,p=s.length,m,T,y,S;for(y=0;y<p;y++){var C=s[y];if(!(!C.isActive||C.isSensor)){var R=C.collision,I=R.parentA,L=R.parentB,w=I.velocity,O=L.velocity,B=R.normal.x,V=R.normal.y,b=R.tangent.x,X=R.tangent.y,K=C.activeContacts,Q=K.length,U=1/Q,W=I.inverseMass+L.inverseMass,F=C.friction*C.frictionStatic*u;for(w.x=I.position.x-I.positionPrev.x,w.y=I.position.y-I.positionPrev.y,O.x=L.position.x-L.positionPrev.x,O.y=L.position.y-L.positionPrev.y,I.angularVelocity=I.angle-I.anglePrev,L.angularVelocity=L.angle-L.anglePrev,S=0;S<Q;S++){var G=K[S],z=G.vertex,Y=z.x-I.position.x,$=z.y-I.position.y,j=z.x-L.position.x,Z=z.y-L.position.y,q=w.x-$*I.angularVelocity,_=w.y+Y*I.angularVelocity,tt=O.x-Z*L.angularVelocity,nt=O.y+j*L.angularVelocity,at=q-tt,st=_-nt,lt=B*at+V*st,vt=b*at+X*st,mt=C.separation+lt,pt=Math.min(mt,1);pt=mt<0?0:pt;var ot=pt*F;vt<-ot||vt>ot?(T=vt>0?vt:-vt,m=C.friction*(vt>0?1:-1)*i,m<-T?m=-T:m>T&&(m=T)):(m=vt,T=d);var ct=Y*V-$*B,ft=j*V-Z*B,Et=U/(W+I.inverseInertia*ct*ct+L.inverseInertia*ft*ft),St=(1+C.restitution)*lt*Et;if(m*=Et,lt<l)G.normalImpulse=0;else{var It=G.normalImpulse;G.normalImpulse+=St,G.normalImpulse>0&&(G.normalImpulse=0),St=G.normalImpulse-It}if(vt<-f||vt>f)G.tangentImpulse=0;else{var Mt=G.tangentImpulse;G.tangentImpulse+=m,G.tangentImpulse<-T&&(G.tangentImpulse=-T),G.tangentImpulse>T&&(G.tangentImpulse=T),m=G.tangentImpulse-Mt}var wt=B*St+b*m,Rt=V*St+X*m;I.isStatic||I.isSleeping||(I.positionPrev.x+=wt*I.inverseMass,I.positionPrev.y+=Rt*I.inverseMass,I.anglePrev+=(Y*Rt-$*wt)*I.inverseInertia),L.isStatic||L.isSleeping||(L.positionPrev.x-=wt*L.inverseMass,L.positionPrev.y-=Rt*L.inverseMass,L.anglePrev-=(j*Rt-Z*wt)*L.inverseInertia)}}}}})()},48140:(v,E,t)=>{var o={};v.exports=o;var g=t(41598),a=t(31725),r=t(53614),s=t(15647),e=t(66615),n=t(53402);(function(){o._warming=.4,o._torqueDampen=1,o._minLength=1e-6,o.create=function(h){var i=h;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var l=i.bodyA?a.add(i.bodyA.position,i.pointA):i.pointA,f=i.bodyB?a.add(i.bodyB.position,i.pointB):i.pointB,u=a.magnitude(a.sub(l,f));i.length=typeof i.length<"u"?i.length:u,i.id=i.id||n.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(i.length>0?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var d={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return i.length===0&&i.stiffness>.1?(d.type="pin",d.anchors=!1):i.stiffness<.9&&(d.type="spring"),i.render=n.extend(d,i.render),i},o.preSolveAll=function(h){for(var i=0;i<h.length;i+=1){var l=h[i],f=l.constraintImpulse;l.isStatic||f.x===0&&f.y===0&&f.angle===0||(l.position.x+=f.x,l.position.y+=f.y,l.angle+=f.angle)}},o.solveAll=function(h,i){for(var l=n.clamp(i/n._baseDelta,0,1),f=0;f<h.length;f+=1){var u=h[f],d=!u.bodyA||u.bodyA&&u.bodyA.isStatic,p=!u.bodyB||u.bodyB&&u.bodyB.isStatic;(d||p)&&o.solve(h[f],l)}for(f=0;f<h.length;f+=1)u=h[f],d=!u.bodyA||u.bodyA&&u.bodyA.isStatic,p=!u.bodyB||u.bodyB&&u.bodyB.isStatic,!d&&!p&&o.solve(h[f],l)},o.solve=function(h,i){var l=h.bodyA,f=h.bodyB,u=h.pointA,d=h.pointB;if(!(!l&&!f)){l&&!l.isStatic&&(a.rotate(u,l.angle-h.angleA,u),h.angleA=l.angle),f&&!f.isStatic&&(a.rotate(d,f.angle-h.angleB,d),h.angleB=f.angle);var p=u,m=d;if(l&&(p=a.add(l.position,u)),f&&(m=a.add(f.position,d)),!(!p||!m)){var T=a.sub(p,m),y=a.magnitude(T);y<o._minLength&&(y=o._minLength);var S=(y-h.length)/y,C=h.stiffness>=1||h.length===0,R=C?h.stiffness*i:h.stiffness*i*i,I=h.damping*i,L=a.mult(T,S*R),w=(l?l.inverseMass:0)+(f?f.inverseMass:0),O=(l?l.inverseInertia:0)+(f?f.inverseInertia:0),B=w+O,V,b,X,K,Q;if(I>0){var U=a.create();X=a.div(T,y),Q=a.sub(f&&a.sub(f.position,f.positionPrev)||U,l&&a.sub(l.position,l.positionPrev)||U),K=a.dot(X,Q)}l&&!l.isStatic&&(b=l.inverseMass/w,l.constraintImpulse.x-=L.x*b,l.constraintImpulse.y-=L.y*b,l.position.x-=L.x*b,l.position.y-=L.y*b,I>0&&(l.positionPrev.x-=I*X.x*K*b,l.positionPrev.y-=I*X.y*K*b),V=a.cross(u,L)/B*o._torqueDampen*l.inverseInertia*(1-h.angularStiffness),l.constraintImpulse.angle-=V,l.angle-=V),f&&!f.isStatic&&(b=f.inverseMass/w,f.constraintImpulse.x+=L.x*b,f.constraintImpulse.y+=L.y*b,f.position.x+=L.x*b,f.position.y+=L.y*b,I>0&&(f.positionPrev.x+=I*X.x*K*b,f.positionPrev.y+=I*X.y*K*b),V=a.cross(d,L)/B*o._torqueDampen*f.inverseInertia*(1-h.angularStiffness),f.constraintImpulse.angle+=V,f.angle+=V)}}},o.postSolveAll=function(h){for(var i=0;i<h.length;i++){var l=h[i],f=l.constraintImpulse;if(!(l.isStatic||f.x===0&&f.y===0&&f.angle===0)){r.set(l,!1);for(var u=0;u<l.parts.length;u++){var d=l.parts[u];g.translate(d.vertices,f),u>0&&(d.position.x+=f.x,d.position.y+=f.y),f.angle!==0&&(g.rotate(d.vertices,f.angle,l.position),e.rotate(d.axes,f.angle),u>0&&a.rotateAbout(d.position,f.angle,l.position,d.position)),s.update(d.bounds,d.vertices,l.velocity)}f.angle*=o._warming,f.x*=o._warming,f.y*=o._warming}}},o.pointAWorld=function(h){return{x:(h.bodyA?h.bodyA.position.x:0)+(h.pointA?h.pointA.x:0),y:(h.bodyA?h.bodyA.position.y:0)+(h.pointA?h.pointA.y:0)}},o.pointBWorld=function(h){return{x:(h.bodyB?h.bodyB.position.x:0)+(h.pointB?h.pointB.x:0),y:(h.bodyB?h.bodyB.position.y:0)+(h.pointB?h.pointB.y:0)}},o.currentLength=function(h){var i=(h.bodyA?h.bodyA.position.x:0)+(h.pointA?h.pointA.x:0),l=(h.bodyA?h.bodyA.position.y:0)+(h.pointA?h.pointA.y:0),f=(h.bodyB?h.bodyB.position.x:0)+(h.pointB?h.pointB.x:0),u=(h.bodyB?h.bodyB.position.y:0)+(h.pointB?h.pointB.y:0),d=i-f,p=l-u;return Math.sqrt(d*d+p*p)}})()},53402:(v,E,t)=>{var o={};v.exports=o,function(){o._baseDelta=16.666666666666668,o._nextId=0,o._seed=0,o._nowStartTime=+new Date,o._warnedOnce={},o._decomp=null,o.extend=function(a,r){var s,e;typeof r=="boolean"?(s=2,e=r):(s=1,e=!0);for(var n=s;n<arguments.length;n++){var h=arguments[n];if(h)for(var i in h)e&&h[i]&&h[i].constructor===Object&&(!a[i]||a[i].constructor===Object)?(a[i]=a[i]||{},o.extend(a[i],e,h[i])):a[i]=h[i]}return a},o.clone=function(a,r){return o.extend({},r,a)},o.keys=function(a){if(Object.keys)return Object.keys(a);var r=[];for(var s in a)r.push(s);return r},o.values=function(a){var r=[];if(Object.keys){for(var s=Object.keys(a),e=0;e<s.length;e++)r.push(a[s[e]]);return r}for(var n in a)r.push(a[n]);return r},o.get=function(a,r,s,e){r=r.split(".").slice(s,e);for(var n=0;n<r.length;n+=1)a=a[r[n]];return a},o.set=function(a,r,s,e,n){var h=r.split(".").slice(e,n);return o.get(a,r,0,-1)[h[h.length-1]]=s,s},o.shuffle=function(a){for(var r=a.length-1;r>0;r--){var s=Math.floor(o.random()*(r+1)),e=a[r];a[r]=a[s],a[s]=e}return a},o.choose=function(a){return a[Math.floor(o.random()*a.length)]},o.isElement=function(a){return typeof HTMLElement<"u"?a instanceof HTMLElement:!!(a&&a.nodeType&&a.nodeName)},o.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},o.isFunction=function(a){return typeof a=="function"},o.isPlainObject=function(a){return typeof a=="object"&&a.constructor===Object},o.isString=function(a){return toString.call(a)==="[object String]"},o.clamp=function(a,r,s){return a<r?r:a>s?s:a},o.sign=function(a){return a<0?-1:1},o.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-o._nowStartTime},o.random=function(a,r){return a=typeof a<"u"?a:0,r=typeof r<"u"?r:1,a+g()*(r-a)};var g=function(){return o._seed=(o._seed*9301+49297)%233280,o._seed/233280};o.colorToNumber=function(a){return a=a.replace("#",""),a.length==3&&(a=a.charAt(0)+a.charAt(0)+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)),parseInt(a,16)},o.logLevel=1,o.log=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.info=function(){console&&o.logLevel>0&&o.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warn=function(){console&&o.logLevel>0&&o.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},o.warnOnce=function(){var a=Array.prototype.slice.call(arguments).join(" ");o._warnedOnce[a]||(o.warn(a),o._warnedOnce[a]=!0)},o.deprecated=function(a,r,s){a[r]=o.chain(function(){o.warnOnce("🔅 deprecated 🔅",s)},a[r])},o.nextId=function(){return o._nextId++},o.indexOf=function(a,r){if(a.indexOf)return a.indexOf(r);for(var s=0;s<a.length;s++)if(a[s]===r)return s;return-1},o.map=function(a,r){if(a.map)return a.map(r);for(var s=[],e=0;e<a.length;e+=1)s.push(r(a[e]));return s},o.topologicalSort=function(a){var r=[],s=[],e=[];for(var n in a)!s[n]&&!e[n]&&o._topologicalSort(n,s,e,a,r);return r},o._topologicalSort=function(a,r,s,e,n){var h=e[a]||[];s[a]=!0;for(var i=0;i<h.length;i+=1){var l=h[i];s[l]||r[l]||o._topologicalSort(l,r,s,e,n)}s[a]=!1,r[a]=!0,n.push(a)},o.chain=function(){for(var a=[],r=0;r<arguments.length;r+=1){var s=arguments[r];s._chained?a.push.apply(a,s._chained):a.push(s)}var e=function(){for(var n,h=new Array(arguments.length),i=0,l=arguments.length;i<l;i++)h[i]=arguments[i];for(i=0;i<a.length;i+=1){var f=a[i].apply(n,h);typeof f<"u"&&(n=f)}return n};return e._chained=a,e},o.chainPathBefore=function(a,r,s){return o.set(a,r,o.chain(s,o.get(a,r)))},o.chainPathAfter=function(a,r,s){return o.set(a,r,o.chain(o.get(a,r),s))},o.setDecomp=function(a){o._decomp=a},o.getDecomp=function(){var a=o._decomp;try{!a&&typeof window<"u"&&(a=window.decomp),!a&&typeof t.g<"u"&&(a=t.g.decomp)}catch{a=null}return a}}()},48413:(v,E,t)=>{var o={};v.exports=o;var g=t(53614),a=t(66272),r=t(81388),s=t(99561),e=t(35810),n=t(69351),h=t(48140),i=t(53402),l=t(22562);(function(){o.create=function(f){f=f||{};var u={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},d=i.extend(u,f);return d.world=f.world||n.create({label:"World"}),d.pairs=f.pairs||s.create(),d.detector=f.detector||r.create(),d.grid={buckets:[]},d.world.gravity=d.gravity,d.broadphase=d.grid,d.metrics={},d},o.update=function(f,u){var d=i.now(),p=f.world,m=f.detector,T=f.pairs,y=f.timing,S=y.timestamp,C;u=typeof u<"u"?u:i._baseDelta,u*=y.timeScale,y.timestamp+=u,y.lastDelta=u;var R={timestamp:y.timestamp,delta:u};e.trigger(f,"beforeUpdate",R);var I=n.allBodies(p),L=n.allConstraints(p);for(p.isModified&&(r.setBodies(m,I),n.setModified(p,!1,!1,!0)),f.enableSleeping&&g.update(I,u),o._bodiesApplyGravity(I,f.gravity),u>0&&o._bodiesUpdate(I,u),e.trigger(f,"beforeSolve",R),h.preSolveAll(I),C=0;C<f.constraintIterations;C++)h.solveAll(L,u);h.postSolveAll(I),m.pairs=f.pairs;var w=r.collisions(m);s.update(T,w,S),f.enableSleeping&&g.afterCollisions(T.list),T.collisionStart.length>0&&e.trigger(f,"collisionStart",{pairs:T.collisionStart,timestamp:y.timestamp,delta:u});var O=i.clamp(20/f.positionIterations,0,1);for(a.preSolvePosition(T.list),C=0;C<f.positionIterations;C++)a.solvePosition(T.list,u,O);for(a.postSolvePosition(I),h.preSolveAll(I),C=0;C<f.constraintIterations;C++)h.solveAll(L,u);for(h.postSolveAll(I),a.preSolveVelocity(T.list),C=0;C<f.velocityIterations;C++)a.solveVelocity(T.list,u);return o._bodiesUpdateVelocities(I),T.collisionActive.length>0&&e.trigger(f,"collisionActive",{pairs:T.collisionActive,timestamp:y.timestamp,delta:u}),T.collisionEnd.length>0&&e.trigger(f,"collisionEnd",{pairs:T.collisionEnd,timestamp:y.timestamp,delta:u}),o._bodiesClearForces(I),e.trigger(f,"afterUpdate",R),f.timing.lastElapsed=i.now()-d,f},o.merge=function(f,u){if(i.extend(f,u),u.world){f.world=u.world,o.clear(f);for(var d=n.allBodies(f.world),p=0;p<d.length;p++){var m=d[p];g.set(m,!1),m.id=i.nextId()}}},o.clear=function(f){s.clear(f.pairs),r.clear(f.detector)},o._bodiesClearForces=function(f){for(var u=f.length,d=0;d<u;d++){var p=f[d];p.force.x=0,p.force.y=0,p.torque=0}},o._bodiesApplyGravity=function(f,u){var d=typeof u.scale<"u"?u.scale:.001,p=f.length;if(!(u.x===0&&u.y===0||d===0))for(var m=0;m<p;m++){var T=f[m];T.ignoreGravity||T.isStatic||T.isSleeping||(T.force.y+=T.mass*u.y*d,T.force.x+=T.mass*u.x*d)}},o._bodiesUpdate=function(f,u){for(var d=f.length,p=0;p<d;p++){var m=f[p];m.isStatic||m.isSleeping||l.update(m,u)}},o._bodiesUpdateVelocities=function(f){for(var u=f.length,d=0;d<u;d++)l.updateVelocities(f[d])}})()},35810:(v,E,t)=>{var o={};v.exports=o;var g=t(53402);(function(){o.on=function(a,r,s){for(var e=r.split(" "),n,h=0;h<e.length;h++)n=e[h],a.events=a.events||{},a.events[n]=a.events[n]||[],a.events[n].push(s);return s},o.off=function(a,r,s){if(!r){a.events={};return}typeof r=="function"&&(s=r,r=g.keys(a.events).join(" "));for(var e=r.split(" "),n=0;n<e.length;n++){var h=a.events[e[n]],i=[];if(s&&h)for(var l=0;l<h.length;l++)h[l]!==s&&i.push(h[l]);a.events[e[n]]=i}},o.trigger=function(a,r,s){var e,n,h,i,l=a.events;if(l&&g.keys(l).length>0){s||(s={}),e=r.split(" ");for(var f=0;f<e.length;f++)if(n=e[f],h=l[n],h){i=g.clone(s,!1),i.name=n,i.source=a;for(var u=0;u<h.length;u++)h[u].apply(a,[i])}}}})()},6790:(v,E,t)=>{var o={};v.exports=o;var g=t(73832),a=t(53402);(function(){o.name="matter-js",o.version="0.19.0",o.uses=[],o.used=[],o.use=function(){g.use(o,Array.prototype.slice.call(arguments))},o.before=function(r,s){return r=r.replace(/^Matter./,""),a.chainPathBefore(o,r,s)},o.after=function(r,s){return r=r.replace(/^Matter./,""),a.chainPathAfter(o,r,s)}})()},73832:(v,E,t)=>{var o={};v.exports=o;var g=t(53402);(function(){o._registry={},o.register=function(a){if(o.isPlugin(a)||g.warn("Plugin.register:",o.toString(a),"does not implement all required fields."),a.name in o._registry){var r=o._registry[a.name],s=o.versionParse(a.version).number,e=o.versionParse(r.version).number;s>e?(g.warn("Plugin.register:",o.toString(r),"was upgraded to",o.toString(a)),o._registry[a.name]=a):s<e?g.warn("Plugin.register:",o.toString(r),"can not be downgraded to",o.toString(a)):a!==r&&g.warn("Plugin.register:",o.toString(a),"is already registered to different plugin object")}else o._registry[a.name]=a;return a},o.resolve=function(a){return o._registry[o.dependencyParse(a).name]},o.toString=function(a){return typeof a=="string"?a:(a.name||"anonymous")+"@"+(a.version||a.range||"0.0.0")},o.isPlugin=function(a){return a&&a.name&&a.version&&a.install},o.isUsed=function(a,r){return a.used.indexOf(r)>-1},o.isFor=function(a,r){var s=a.for&&o.dependencyParse(a.for);return!a.for||r.name===s.name&&o.versionSatisfies(r.version,s.range)},o.use=function(a,r){if(a.uses=(a.uses||[]).concat(r||[]),a.uses.length===0){g.warn("Plugin.use:",o.toString(a),"does not specify any dependencies to install.");return}for(var s=o.dependencies(a),e=g.topologicalSort(s),n=[],h=0;h<e.length;h+=1)if(e[h]!==a.name){var i=o.resolve(e[h]);if(!i){n.push("❌ "+e[h]);continue}o.isUsed(a,i.name)||(o.isFor(i,a)||(g.warn("Plugin.use:",o.toString(i),"is for",i.for,"but installed on",o.toString(a)+"."),i._warned=!0),i.install?i.install(a):(g.warn("Plugin.use:",o.toString(i),"does not specify an install function."),i._warned=!0),i._warned?(n.push("🔶 "+o.toString(i)),delete i._warned):n.push("✅ "+o.toString(i)),a.used.push(i.name))}n.length>0&&!i.silent&&g.info(n.join("  "))},o.dependencies=function(a,r){var s=o.dependencyParse(a),e=s.name;if(r=r||{},!(e in r)){a=o.resolve(a)||a,r[e]=g.map(a.uses||[],function(h){o.isPlugin(h)&&o.register(h);var i=o.dependencyParse(h),l=o.resolve(h);return l&&!o.versionSatisfies(l.version,i.range)?(g.warn("Plugin.dependencies:",o.toString(l),"does not satisfy",o.toString(i),"used by",o.toString(s)+"."),l._warned=!0,a._warned=!0):l||(g.warn("Plugin.dependencies:",o.toString(h),"used by",o.toString(s),"could not be resolved."),a._warned=!0),i.name});for(var n=0;n<r[e].length;n+=1)o.dependencies(r[e][n],r);return r}},o.dependencyParse=function(a){if(g.isString(a)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return r.test(a)||g.warn("Plugin.dependencyParse:",a,"is not a valid dependency string."),{name:a.split("@")[0],range:a.split("@")[1]||"*"}}return{name:a.name,range:a.range||a.version}},o.versionParse=function(a){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;r.test(a)||g.warn("Plugin.versionParse:",a,"is not a valid version or range.");var s=r.exec(a),e=Number(s[4]),n=Number(s[5]),h=Number(s[6]);return{isRange:!!(s[1]||s[2]),version:s[3],range:a,operator:s[1]||s[2]||"",major:e,minor:n,patch:h,parts:[e,n,h],prerelease:s[7],number:e*1e8+n*1e4+h}},o.versionSatisfies=function(a,r){r=r||"*";var s=o.versionParse(r),e=o.versionParse(a);if(s.isRange){if(s.operator==="*"||a==="*")return!0;if(s.operator===">")return e.number>s.number;if(s.operator===">=")return e.number>=s.number;if(s.operator==="~")return e.major===s.major&&e.minor===s.minor&&e.patch>=s.patch;if(s.operator==="^")return s.major>0?e.major===s.major&&e.number>=s.number:s.minor>0?e.minor===s.minor&&e.patch>=s.patch:e.patch===s.patch}return a===r||a==="*"}})()},53614:(v,E,t)=>{var o={};v.exports=o;var g=t(22562),a=t(35810),r=t(53402);(function(){o._motionWakeThreshold=.18,o._motionSleepThreshold=.08,o._minBias=.9,o.update=function(s,e){for(var n=e/r._baseDelta,h=o._motionSleepThreshold,i=0;i<s.length;i++){var l=s[i],f=g.getSpeed(l),u=g.getAngularSpeed(l),d=f*f+u*u;if(l.force.x!==0||l.force.y!==0){o.set(l,!1);continue}var p=Math.min(l.motion,d),m=Math.max(l.motion,d);l.motion=o._minBias*p+(1-o._minBias)*m,l.sleepThreshold>0&&l.motion<h?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/n&&o.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},o.afterCollisions=function(s){for(var e=o._motionSleepThreshold,n=0;n<s.length;n++){var h=s[n];if(h.isActive){var i=h.collision,l=i.bodyA.parent,f=i.bodyB.parent;if(!(l.isSleeping&&f.isSleeping||l.isStatic||f.isStatic)&&(l.isSleeping||f.isSleeping)){var u=l.isSleeping&&!l.isStatic?l:f,d=u===l?f:l;!u.isStatic&&d.motion>e&&o.set(u,!1)}}}},o.set=function(s,e){var n=s.isSleeping;e?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,n||a.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,n&&a.trigger(s,"sleepEnd"))}})()},66280:(v,E,t)=>{var o={};v.exports=o;var g=t(41598),a=t(53402),r=t(22562),s=t(15647),e=t(31725);(function(){o.rectangle=function(n,h,i,l,f){f=f||{};var u={label:"Rectangle Body",position:{x:n,y:h},vertices:g.fromPath("L 0 0 L "+i+" 0 L "+i+" "+l+" L 0 "+l)};if(f.chamfer){var d=f.chamfer;u.vertices=g.chamfer(u.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete f.chamfer}return r.create(a.extend({},u,f))},o.trapezoid=function(n,h,i,l,f,u){u=u||{},f*=.5;var d=(1-f*2)*i,p=i*f,m=p+d,T=m+p,y;f<.5?y="L 0 0 L "+p+" "+-l+" L "+m+" "+-l+" L "+T+" 0":y="L 0 0 L "+m+" "+-l+" L "+T+" 0";var S={label:"Trapezoid Body",position:{x:n,y:h},vertices:g.fromPath(y)};if(u.chamfer){var C=u.chamfer;S.vertices=g.chamfer(S.vertices,C.radius,C.quality,C.qualityMin,C.qualityMax),delete u.chamfer}return r.create(a.extend({},S,u))},o.circle=function(n,h,i,l,f){l=l||{};var u={label:"Circle Body",circleRadius:i};f=f||25;var d=Math.ceil(Math.max(10,Math.min(f,i)));return d%2===1&&(d+=1),o.polygon(n,h,d,i,a.extend({},u,l))},o.polygon=function(n,h,i,l,f){if(f=f||{},i<3)return o.circle(n,h,l,f);for(var u=2*Math.PI/i,d="",p=u*.5,m=0;m<i;m+=1){var T=p+m*u,y=Math.cos(T)*l,S=Math.sin(T)*l;d+="L "+y.toFixed(3)+" "+S.toFixed(3)+" "}var C={label:"Polygon Body",position:{x:n,y:h},vertices:g.fromPath(d)};if(f.chamfer){var R=f.chamfer;C.vertices=g.chamfer(C.vertices,R.radius,R.quality,R.qualityMin,R.qualityMax),delete f.chamfer}return r.create(a.extend({},C,f))},o.fromVertices=function(n,h,i,l,f,u,d,p){var m=a.getDecomp(),T,y,S,C,R,I,L,w,O,B,V;for(T=!!(m&&m.quickDecomp),l=l||{},S=[],f=typeof f<"u"?f:!1,u=typeof u<"u"?u:.01,d=typeof d<"u"?d:10,p=typeof p<"u"?p:.01,a.isArray(i[0])||(i=[i]),B=0;B<i.length;B+=1)if(I=i[B],C=g.isConvex(I),R=!C,R&&!T&&a.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),C||!T)C?I=g.clockwiseSort(I):I=g.hull(I),S.push({position:{x:n,y:h},vertices:I});else{var b=I.map(function(j){return[j.x,j.y]});m.makeCCW(b),u!==!1&&m.removeCollinearPoints(b,u),p!==!1&&m.removeDuplicatePoints&&m.removeDuplicatePoints(b,p);var X=m.quickDecomp(b);for(L=0;L<X.length;L++){var K=X[L],Q=K.map(function(j){return{x:j[0],y:j[1]}});d>0&&g.area(Q)<d||S.push({position:g.centre(Q),vertices:Q})}}for(L=0;L<S.length;L++)S[L]=r.create(a.extend(S[L],l));if(f){var U=5;for(L=0;L<S.length;L++){var W=S[L];for(w=L+1;w<S.length;w++){var F=S[w];if(s.overlaps(W.bounds,F.bounds)){var G=W.vertices,z=F.vertices;for(O=0;O<W.vertices.length;O++)for(V=0;V<F.vertices.length;V++){var Y=e.magnitudeSquared(e.sub(G[(O+1)%G.length],z[V])),$=e.magnitudeSquared(e.sub(G[O],z[(V+1)%z.length]));Y<U&&$<U&&(G[O].isInternal=!0,z[V].isInternal=!0)}}}}}return S.length>1?(y=r.create(a.extend({parts:S.slice(0)},l)),r.setPosition(y,{x:n,y:h}),y):S[0]},o.flagCoincidentParts=function(n,h){h===void 0&&(h=5);for(var i=0;i<n.length;i++)for(var l=n[i],f=i+1;f<n.length;f++){var u=n[f];if(s.overlaps(l.bounds,u.bounds))for(var d=l.vertices,p=u.vertices,m=0;m<l.vertices.length;m++)for(var T=0;T<u.vertices.length;T++){var y=e.magnitudeSquared(e.sub(d[(m+1)%d.length],p[T])),S=e.magnitudeSquared(e.sub(d[m],p[(T+1)%p.length]));y<h&&S<h&&(d[m].isInternal=!0,p[T].isInternal=!0)}}return n}})()},74116:(v,E,t)=>{var o={};v.exports=o;var g=t(69351),a=t(48140),r=t(53402),s=t(22562),e=t(66280);(function(){o.stack=function(n,h,i,l,f,u,d){for(var p=g.create({label:"Stack"}),m=n,T=h,y,S=0,C=0;C<l;C++){for(var R=0,I=0;I<i;I++){var L=d(m,T,I,C,y,S);if(L){var w=L.bounds.max.y-L.bounds.min.y,O=L.bounds.max.x-L.bounds.min.x;w>R&&(R=w),s.translate(L,{x:O*.5,y:w*.5}),m=L.bounds.max.x+f,g.addBody(p,L),y=L,S+=1}else m+=f}T+=R+u,m=n}return p},o.chain=function(n,h,i,l,f,u){for(var d=n.bodies,p=1;p<d.length;p++){var m=d[p-1],T=d[p],y=m.bounds.max.y-m.bounds.min.y,S=m.bounds.max.x-m.bounds.min.x,C=T.bounds.max.y-T.bounds.min.y,R=T.bounds.max.x-T.bounds.min.x,I={bodyA:m,pointA:{x:S*h,y:y*i},bodyB:T,pointB:{x:R*l,y:C*f}},L=r.extend(I,u);g.addConstraint(n,a.create(L))}return n.label+=" Chain",n},o.mesh=function(n,h,i,l,f){var u=n.bodies,d,p,m,T,y;for(d=0;d<i;d++){for(p=1;p<h;p++)m=u[p-1+d*h],T=u[p+d*h],g.addConstraint(n,a.create(r.extend({bodyA:m,bodyB:T},f)));if(d>0)for(p=0;p<h;p++)m=u[p+(d-1)*h],T=u[p+d*h],g.addConstraint(n,a.create(r.extend({bodyA:m,bodyB:T},f))),l&&p>0&&(y=u[p-1+(d-1)*h],g.addConstraint(n,a.create(r.extend({bodyA:y,bodyB:T},f)))),l&&p<h-1&&(y=u[p+1+(d-1)*h],g.addConstraint(n,a.create(r.extend({bodyA:y,bodyB:T},f))))}return n.label+=" Mesh",n},o.pyramid=function(n,h,i,l,f,u,d){return o.stack(n,h,i,l,f,u,function(p,m,T,y,S,C){var R=Math.min(l,Math.ceil(i/2)),I=S?S.bounds.max.x-S.bounds.min.x:0;if(!(y>R)){y=R-y;var L=y,w=i-1-y;if(!(T<L||T>w)){C===1&&s.translate(S,{x:(T+(i%2===1?1:-1))*I,y:0});var O=S?T*I:0;return d(n+O+T*f,m,T,y,S,C)}}})},o.newtonsCradle=function(n,h,i,l,f){for(var u=g.create({label:"Newtons Cradle"}),d=0;d<i;d++){var p=1.9,m=e.circle(n+d*(l*p),h+f,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),T=a.create({pointA:{x:n+d*(l*p),y:h},bodyB:m});g.addBody(u,m),g.addConstraint(u,T)}return u},o.car=function(n,h,i,l,f){var u=s.nextGroup(!0),d=20,p=-i*.5+d,m=i*.5-d,T=0,y=g.create({label:"Car"}),S=e.rectangle(n,h,i,l,{collisionFilter:{group:u},chamfer:{radius:l*.5},density:2e-4}),C=e.circle(n+p,h+T,f,{collisionFilter:{group:u},friction:.8}),R=e.circle(n+m,h+T,f,{collisionFilter:{group:u},friction:.8}),I=a.create({bodyB:S,pointB:{x:p,y:T},bodyA:C,stiffness:1,length:0}),L=a.create({bodyB:S,pointB:{x:m,y:T},bodyA:R,stiffness:1,length:0});return g.addBody(y,S),g.addBody(y,C),g.addBody(y,R),g.addConstraint(y,I),g.addConstraint(y,L),y},o.softBody=function(n,h,i,l,f,u,d,p,m,T){m=r.extend({inertia:1/0},m),T=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},T);var y=o.stack(n,h,i,l,f,u,function(S,C){return e.circle(S,C,p,m)});return o.mesh(y,i,l,d,T),y.label="Soft Body",y}})()},66615:(v,E,t)=>{var o={};v.exports=o;var g=t(31725),a=t(53402);(function(){o.fromVertices=function(r){for(var s={},e=0;e<r.length;e++){var n=(e+1)%r.length,h=g.normalise({x:r[n].y-r[e].y,y:r[e].x-r[n].x}),i=h.y===0?1/0:h.x/h.y;i=i.toFixed(3).toString(),s[i]=h}return a.values(s)},o.rotate=function(r,s){if(s!==0)for(var e=Math.cos(s),n=Math.sin(s),h=0;h<r.length;h++){var i=r[h],l;l=i.x*e-i.y*n,i.y=i.x*n+i.y*e,i.x=l}}})()},15647:v=>{var E={};v.exports=E,function(){E.create=function(t){var o={min:{x:0,y:0},max:{x:0,y:0}};return t&&E.update(o,t),o},E.update=function(t,o,g){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var a=0;a<o.length;a++){var r=o[a];r.x>t.max.x&&(t.max.x=r.x),r.x<t.min.x&&(t.min.x=r.x),r.y>t.max.y&&(t.max.y=r.y),r.y<t.min.y&&(t.min.y=r.y)}g&&(g.x>0?t.max.x+=g.x:t.min.x+=g.x,g.y>0?t.max.y+=g.y:t.min.y+=g.y)},E.contains=function(t,o){return o.x>=t.min.x&&o.x<=t.max.x&&o.y>=t.min.y&&o.y<=t.max.y},E.overlaps=function(t,o){return t.min.x<=o.max.x&&t.max.x>=o.min.x&&t.max.y>=o.min.y&&t.min.y<=o.max.y},E.translate=function(t,o){t.min.x+=o.x,t.max.x+=o.x,t.min.y+=o.y,t.max.y+=o.y},E.shift=function(t,o){var g=t.max.x-t.min.x,a=t.max.y-t.min.y;t.min.x=o.x,t.max.x=o.x+g,t.min.y=o.y,t.max.y=o.y+a}}()},74058:(v,E,t)=>{var o={};v.exports=o,t(15647);var g=t(53402);(function(){o.pathToVertices=function(a,r){typeof window<"u"&&!("SVGPathSeg"in window)&&g.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var s,e,n,h,i,l,f,u,d,p,m=[],T,y,S=0,C=0,R=0;r=r||15;var I=function(w,O,B){var V=B%2===1&&B>1;if(!d||w!=d.x||O!=d.y){d&&V?(T=d.x,y=d.y):(T=0,y=0);var b={x:T+w,y:y+O};(V||!d)&&(d=b),m.push(b),C=T+w,R=y+O}},L=function(w){var O=w.pathSegTypeAsLetter.toUpperCase();if(O!=="Z"){switch(O){case"M":case"L":case"T":case"C":case"S":case"Q":C=w.x,R=w.y;break;case"H":C=w.x;break;case"V":R=w.y;break}I(C,R,w.pathSegType)}};for(o._svgPathToAbsolute(a),n=a.getTotalLength(),l=[],s=0;s<a.pathSegList.numberOfItems;s+=1)l.push(a.pathSegList.getItem(s));for(f=l.concat();S<n;){if(p=a.getPathSegAtLength(S),i=l[p],i!=u){for(;f.length&&f[0]!=i;)L(f.shift());u=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":h=a.getPointAtLength(S),I(h.x,h.y,0);break}S+=r}for(s=0,e=f.length;s<e;++s)L(f[s]);return m},o._svgPathToAbsolute=function(a){for(var r,s,e,n,h,i,l=a.pathSegList,f=0,u=0,d=l.numberOfItems,p=0;p<d;++p){var m=l.getItem(p),T=m.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(T))"x"in m&&(f=m.x),"y"in m&&(u=m.y);else switch("x1"in m&&(e=f+m.x1),"x2"in m&&(h=f+m.x2),"y1"in m&&(n=u+m.y1),"y2"in m&&(i=u+m.y2),"x"in m&&(f+=m.x),"y"in m&&(u+=m.y),T){case"m":l.replaceItem(a.createSVGPathSegMovetoAbs(f,u),p);break;case"l":l.replaceItem(a.createSVGPathSegLinetoAbs(f,u),p);break;case"h":l.replaceItem(a.createSVGPathSegLinetoHorizontalAbs(f),p);break;case"v":l.replaceItem(a.createSVGPathSegLinetoVerticalAbs(u),p);break;case"c":l.replaceItem(a.createSVGPathSegCurvetoCubicAbs(f,u,e,n,h,i),p);break;case"s":l.replaceItem(a.createSVGPathSegCurvetoCubicSmoothAbs(f,u,h,i),p);break;case"q":l.replaceItem(a.createSVGPathSegCurvetoQuadraticAbs(f,u,e,n),p);break;case"t":l.replaceItem(a.createSVGPathSegCurvetoQuadraticSmoothAbs(f,u),p);break;case"a":l.replaceItem(a.createSVGPathSegArcAbs(f,u,m.r1,m.r2,m.angle,m.largeArcFlag,m.sweepFlag),p);break;case"z":case"Z":f=r,u=s;break}(T=="M"||T=="m")&&(r=f,s=u)}}})()},31725:v=>{var E={};v.exports=E,function(){E.create=function(t,o){return{x:t||0,y:o||0}},E.clone=function(t){return{x:t.x,y:t.y}},E.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},E.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},E.rotate=function(t,o,g){var a=Math.cos(o),r=Math.sin(o);g||(g={});var s=t.x*a-t.y*r;return g.y=t.x*r+t.y*a,g.x=s,g},E.rotateAbout=function(t,o,g,a){var r=Math.cos(o),s=Math.sin(o);a||(a={});var e=g.x+((t.x-g.x)*r-(t.y-g.y)*s);return a.y=g.y+((t.x-g.x)*s+(t.y-g.y)*r),a.x=e,a},E.normalise=function(t){var o=E.magnitude(t);return o===0?{x:0,y:0}:{x:t.x/o,y:t.y/o}},E.dot=function(t,o){return t.x*o.x+t.y*o.y},E.cross=function(t,o){return t.x*o.y-t.y*o.x},E.cross3=function(t,o,g){return(o.x-t.x)*(g.y-t.y)-(o.y-t.y)*(g.x-t.x)},E.add=function(t,o,g){return g||(g={}),g.x=t.x+o.x,g.y=t.y+o.y,g},E.sub=function(t,o,g){return g||(g={}),g.x=t.x-o.x,g.y=t.y-o.y,g},E.mult=function(t,o){return{x:t.x*o,y:t.y*o}},E.div=function(t,o){return{x:t.x/o,y:t.y/o}},E.perp=function(t,o){return o=o===!0?-1:1,{x:o*-t.y,y:o*t.x}},E.neg=function(t){return{x:-t.x,y:-t.y}},E.angle=function(t,o){return Math.atan2(o.y-t.y,o.x-t.x)},E._temp=[E.create(),E.create(),E.create(),E.create(),E.create(),E.create()]}()},41598:(v,E,t)=>{var o={};v.exports=o;var g=t(31725),a=t(53402);(function(){o.create=function(r,s){for(var e=[],n=0;n<r.length;n++){var h=r[n],i={x:h.x,y:h.y,index:n,body:s,isInternal:!1};e.push(i)}return e},o.fromPath=function(r,s){var e=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,n=[];return r.replace(e,function(h,i,l){n.push({x:parseFloat(i),y:parseFloat(l)})}),o.create(n,s)},o.centre=function(r){for(var s=o.area(r,!0),e={x:0,y:0},n,h,i,l=0;l<r.length;l++)i=(l+1)%r.length,n=g.cross(r[l],r[i]),h=g.mult(g.add(r[l],r[i]),n),e=g.add(e,h);return g.div(e,6*s)},o.mean=function(r){for(var s={x:0,y:0},e=0;e<r.length;e++)s.x+=r[e].x,s.y+=r[e].y;return g.div(s,r.length)},o.area=function(r,s){for(var e=0,n=r.length-1,h=0;h<r.length;h++)e+=(r[n].x-r[h].x)*(r[n].y+r[h].y),n=h;return s?e/2:Math.abs(e)/2},o.inertia=function(r,s){for(var e=0,n=0,h=r,i,l,f=0;f<h.length;f++)l=(f+1)%h.length,i=Math.abs(g.cross(h[l],h[f])),e+=i*(g.dot(h[l],h[l])+g.dot(h[l],h[f])+g.dot(h[f],h[f])),n+=i;return s/6*(e/n)},o.translate=function(r,s,e){e=typeof e<"u"?e:1;var n=r.length,h=s.x*e,i=s.y*e,l;for(l=0;l<n;l++)r[l].x+=h,r[l].y+=i;return r},o.rotate=function(r,s,e){if(s!==0){var n=Math.cos(s),h=Math.sin(s),i=e.x,l=e.y,f=r.length,u,d,p,m;for(m=0;m<f;m++)u=r[m],d=u.x-i,p=u.y-l,u.x=i+(d*n-p*h),u.y=l+(d*h+p*n);return r}},o.contains=function(r,s){for(var e=s.x,n=s.y,h=r.length,i=r[h-1],l,f=0;f<h;f++){if(l=r[f],(e-i.x)*(l.y-i.y)+(n-i.y)*(i.x-l.x)>0)return!1;i=l}return!0},o.scale=function(r,s,e,n){if(s===1&&e===1)return r;n=n||o.centre(r);for(var h,i,l=0;l<r.length;l++)h=r[l],i=g.sub(h,n),r[l].x=n.x+i.x*s,r[l].y=n.y+i.y*e;return r},o.chamfer=function(r,s,e,n,h){typeof s=="number"?s=[s]:s=s||[8],e=typeof e<"u"?e:-1,n=n||2,h=h||14;for(var i=[],l=0;l<r.length;l++){var f=r[l-1>=0?l-1:r.length-1],u=r[l],d=r[(l+1)%r.length],p=s[l<s.length?l:s.length-1];if(p===0){i.push(u);continue}var m=g.normalise({x:u.y-f.y,y:f.x-u.x}),T=g.normalise({x:d.y-u.y,y:u.x-d.x}),y=Math.sqrt(2*Math.pow(p,2)),S=g.mult(a.clone(m),p),C=g.normalise(g.mult(g.add(m,T),.5)),R=g.sub(u,g.mult(C,y)),I=e;e===-1&&(I=Math.pow(p,.32)*1.75),I=a.clamp(I,n,h),I%2===1&&(I+=1);for(var L=Math.acos(g.dot(m,T)),w=L/I,O=0;O<I;O++)i.push(g.add(g.rotate(S,w*O),R))}return i},o.clockwiseSort=function(r){var s=o.mean(r);return r.sort(function(e,n){return g.angle(s,e)-g.angle(s,n)}),r},o.isConvex=function(r){var s=0,e=r.length,n,h,i,l;if(e<3)return null;for(n=0;n<e;n++)if(h=(n+1)%e,i=(n+2)%e,l=(r[h].x-r[n].x)*(r[i].y-r[h].y),l-=(r[h].y-r[n].y)*(r[i].x-r[h].x),l<0?s|=1:l>0&&(s|=2),s===3)return!1;return s!==0?!0:null},o.hull=function(r){var s=[],e=[],n,h;for(r=r.slice(0),r.sort(function(i,l){var f=i.x-l.x;return f!==0?f:i.y-l.y}),h=0;h<r.length;h+=1){for(n=r[h];e.length>=2&&g.cross3(e[e.length-2],e[e.length-1],n)<=0;)e.pop();e.push(n)}for(h=r.length-1;h>=0;h-=1){for(n=r[h];s.length>=2&&g.cross3(s[s.length-2],s[s.length-1],n)<=0;)s.pop();s.push(n)}return s.pop(),e.pop(),s.concat(e)}})()},18210:(v,E,t)=>{var o=t(19933),g={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Body.create",function(){g.Body.init(this)}),a.before("Engine.update",function(r){g.Engine.update(r)})},Body:{init:function(a){a.plugin.attractors=a.plugin.attractors||[]}},Engine:{update:function(a){for(var r=o.Composite.allBodies(a.world),s=0;s<r.length;s++){var e=r[s],n=e.plugin.attractors;if(n&&n.length>0)for(var h=0;h<r.length;h++){var i=r[h];if(s!==h)for(var l=0;l<n.length;l++){var f=n[l],u=f;o.Common.isFunction(f)&&(u=f(e,i)),u&&o.Body.applyForce(i,i.position,u)}}}}},Attractors:{gravityConstant:.001,gravity:function(a,r){var s=o.Vector.sub(r.position,a.position),e=o.Vector.magnitudeSquared(s)||1e-4,n=o.Vector.normalise(s),h=-g.Attractors.gravityConstant*(a.mass*r.mass/e),i=o.Vector.mult(n,h);o.Body.applyForce(a,a.position,o.Vector.neg(i)),o.Body.applyForce(r,r.position,i)}}};v.exports=g},40178:v=>{/**
 * @author       @dxu https://github.com/dxu/matter-collision-events
 * @author       Richard Davey <rich@phaser.io>
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.19.0",silent:!0,install:function(t){t.after("Engine.create",function(){t.Events.on(this,"collisionStart",function(o){o.pairs.map(function(g){var a=g.bodyA,r=g.bodyB;a.gameObject&&a.gameObject.emit("collide",a,r,g),r.gameObject&&r.gameObject.emit("collide",r,a,g),t.Events.trigger(a,"onCollide",{pair:g}),t.Events.trigger(r,"onCollide",{pair:g}),a.onCollideCallback&&a.onCollideCallback(g),r.onCollideCallback&&r.onCollideCallback(g),a.onCollideWith[r.id]&&a.onCollideWith[r.id](r,g),r.onCollideWith[a.id]&&r.onCollideWith[a.id](a,g)})}),t.Events.on(this,"collisionActive",function(o){o.pairs.map(function(g){var a=g.bodyA,r=g.bodyB;a.gameObject&&a.gameObject.emit("collideActive",a,r,g),r.gameObject&&r.gameObject.emit("collideActive",r,a,g),t.Events.trigger(a,"onCollideActive",{pair:g}),t.Events.trigger(r,"onCollideActive",{pair:g}),a.onCollideActiveCallback&&a.onCollideActiveCallback(g),r.onCollideActiveCallback&&r.onCollideActiveCallback(g)})}),t.Events.on(this,"collisionEnd",function(o){o.pairs.map(function(g){var a=g.bodyA,r=g.bodyB;a.gameObject&&a.gameObject.emit("collideEnd",a,r,g),r.gameObject&&r.gameObject.emit("collideEnd",r,a,g),t.Events.trigger(a,"onCollideEnd",{pair:g}),t.Events.trigger(r,"onCollideEnd",{pair:g}),a.onCollideEndCallback&&a.onCollideEndCallback(g),r.onCollideEndCallback&&r.onCollideEndCallback(g)})})})}};v.exports=E},74507:(v,E,t)=>{var o=t(19933),g={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.19.0",silent:!0,install:function(a){a.after("Engine.update",function(){g.Engine.update(this)})},Engine:{update:function(a){for(var r=a.world,s=o.Composite.allBodies(r),e=o.Composite.allComposites(r),n=0;n<s.length;n+=1){var h=s[n];h.plugin.wrap&&g.Body.wrap(h,h.plugin.wrap)}for(n=0;n<e.length;n+=1){var i=e[n];i.plugin.wrap&&g.Composite.wrap(i,i.plugin.wrap)}}},Bounds:{wrap:function(a,r){var s=null,e=null;if(typeof r.min.x<"u"&&typeof r.max.x<"u"&&(a.min.x>r.max.x?s=r.min.x-a.max.x:a.max.x<r.min.x&&(s=r.max.x-a.min.x)),typeof r.min.y<"u"&&typeof r.max.y<"u"&&(a.min.y>r.max.y?e=r.min.y-a.max.y:a.max.y<r.min.y&&(e=r.max.y-a.min.y)),s!==null||e!==null)return{x:s||0,y:e||0}}},Body:{wrap:function(a,r){var s=g.Bounds.wrap(a.bounds,r);return s&&o.Body.translate(a,s),s}},Composite:{bounds:function(a){for(var r=o.Composite.allBodies(a),s=[],e=0;e<r.length;e+=1){var n=r[e];s.push(n.bounds.min,n.bounds.max)}return o.Bounds.create(s)},wrap:function(a,r){var s=g.Bounds.wrap(g.Composite.bounds(a),r);return s&&o.Composite.translate(a,s),s}}};v.exports=g},55973:v=>{/**
 * @author       Stefan Hedman <schteppe@gmail.com> (http://steffe.se)
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={decomp:L,quickDecomp:V,isSimple:O,removeCollinearPoints:b,removeDuplicatePoints:X,makeCCW:d};function E(U,W,F){F=F||0;var G=[0,0],z,Y,$,j,Z,q,_;return z=U[1][1]-U[0][1],Y=U[0][0]-U[1][0],$=z*U[0][0]+Y*U[0][1],j=W[1][1]-W[0][1],Z=W[0][0]-W[1][0],q=j*W[0][0]+Z*W[0][1],_=z*Z-j*Y,K(_,0,F)||(G[0]=(Z*$-Y*q)/_,G[1]=(z*q-j*$)/_),G}function t(U,W,F,G){var z=W[0]-U[0],Y=W[1]-U[1],$=G[0]-F[0],j=G[1]-F[1];if($*Y-j*z===0)return!1;var Z=(z*(F[1]-U[1])+Y*(U[0]-F[0]))/($*Y-j*z),q=($*(U[1]-F[1])+j*(F[0]-U[0]))/(j*z-$*Y);return Z>=0&&Z<=1&&q>=0&&q<=1}function o(U,W,F){return(W[0]-U[0])*(F[1]-U[1])-(F[0]-U[0])*(W[1]-U[1])}function g(U,W,F){return o(U,W,F)>0}function a(U,W,F){return o(U,W,F)>=0}function r(U,W,F){return o(U,W,F)<0}function s(U,W,F){return o(U,W,F)<=0}var e=[],n=[];function h(U,W,F,G){if(G){var z=e,Y=n;z[0]=W[0]-U[0],z[1]=W[1]-U[1],Y[0]=F[0]-W[0],Y[1]=F[1]-W[1];var $=z[0]*Y[0]+z[1]*Y[1],j=Math.sqrt(z[0]*z[0]+z[1]*z[1]),Z=Math.sqrt(Y[0]*Y[0]+Y[1]*Y[1]),q=Math.acos($/(j*Z));return q<G}else return o(U,W,F)===0}function i(U,W){var F=W[0]-U[0],G=W[1]-U[1];return F*F+G*G}function l(U,W){var F=U.length;return U[W<0?W%F+F:W%F]}function f(U){U.length=0}function u(U,W,F,G){for(var z=F;z<G;z++)U.push(W[z])}function d(U){for(var W=0,F=U,G=1;G<U.length;++G)(F[G][1]<F[W][1]||F[G][1]===F[W][1]&&F[G][0]>F[W][0])&&(W=G);return g(l(U,W-1),l(U,W),l(U,W+1))?!1:(p(U),!0)}function p(U){for(var W=[],F=U.length,G=0;G!==F;G++)W.push(U.pop());for(var G=0;G!==F;G++)U[G]=W[G]}function m(U,W){return r(l(U,W-1),l(U,W),l(U,W+1))}var T=[],y=[];function S(U,W,F){var G,z,Y=T,$=y;if(a(l(U,W+1),l(U,W),l(U,F))&&s(l(U,W-1),l(U,W),l(U,F)))return!1;z=i(l(U,W),l(U,F));for(var j=0;j!==U.length;++j)if(!((j+1)%U.length===W||j===W)&&a(l(U,W),l(U,F),l(U,j+1))&&s(l(U,W),l(U,F),l(U,j))&&(Y[0]=l(U,W),Y[1]=l(U,F),$[0]=l(U,j),$[1]=l(U,j+1),G=E(Y,$),i(l(U,W),G)<z))return!1;return!0}function C(U,W,F){for(var G=0;G!==U.length;++G)if(!(G===W||G===F||(G+1)%U.length===W||(G+1)%U.length===F)&&t(l(U,W),l(U,F),l(U,G),l(U,G+1)))return!1;return!0}function R(U,W,F,G){var z=G||[];if(f(z),W<F)for(var Y=W;Y<=F;Y++)z.push(U[Y]);else{for(var Y=0;Y<=F;Y++)z.push(U[Y]);for(var Y=W;Y<U.length;Y++)z.push(U[Y])}return z}function I(U){for(var W=[],F=[],G=[],z=[],Y=Number.MAX_VALUE,$=0;$<U.length;++$)if(m(U,$)){for(var j=0;j<U.length;++j)if(S(U,$,j)){F=I(R(U,$,j,z)),G=I(R(U,j,$,z));for(var Z=0;Z<G.length;Z++)F.push(G[Z]);F.length<Y&&(W=F,Y=F.length,W.push([l(U,$),l(U,j)]))}}return W}function L(U){var W=I(U);return W.length>0?w(U,W):[U]}function w(U,W){if(W.length===0)return[U];if(W instanceof Array&&W.length&&W[0]instanceof Array&&W[0].length===2&&W[0][0]instanceof Array){for(var F=[U],G=0;G<W.length;G++)for(var z=W[G],Y=0;Y<F.length;Y++){var $=F[Y],j=w($,z);if(j){F.splice(Y,1),F.push(j[0],j[1]);break}}return F}else{var z=W,G=U.indexOf(z[0]),Y=U.indexOf(z[1]);return G!==-1&&Y!==-1?[R(U,G,Y),R(U,Y,G)]:!1}}function O(U){var W=U,F;for(F=0;F<W.length-1;F++)for(var G=0;G<F-1;G++)if(t(W[F],W[F+1],W[G],W[G+1]))return!1;for(F=1;F<W.length-2;F++)if(t(W[0],W[W.length-1],W[F],W[F+1]))return!1;return!0}function B(U,W,F,G,z){z=z||0;var Y=W[1]-U[1],$=U[0]-W[0],j=Y*U[0]+$*U[1],Z=G[1]-F[1],q=F[0]-G[0],_=Z*F[0]+q*F[1],tt=Y*q-Z*$;return K(tt,0,z)?[0,0]:[(q*j-$*_)/tt,(Y*_-Z*j)/tt]}function V(U,W,F,G,z,Y,$){Y=Y||100,$=$||0,z=z||25,W=typeof W<"u"?W:[],F=F||[],G=G||[];var j=[0,0],Z=[0,0],q=[0,0],_=0,tt=0,nt=0,at=0,st=0,lt=0,vt=0,mt=[],pt=[],ot=U,ct=U;if(ct.length<3)return W;if($++,$>Y)return console.warn("quickDecomp: max level ("+Y+") reached."),W;for(var ft=0;ft<U.length;++ft)if(m(ot,ft)){F.push(ot[ft]),_=tt=Number.MAX_VALUE;for(var Et=0;Et<U.length;++Et)g(l(ot,ft-1),l(ot,ft),l(ot,Et))&&s(l(ot,ft-1),l(ot,ft),l(ot,Et-1))&&(q=B(l(ot,ft-1),l(ot,ft),l(ot,Et),l(ot,Et-1)),r(l(ot,ft+1),l(ot,ft),q)&&(nt=i(ot[ft],q),nt<tt&&(tt=nt,Z=q,lt=Et))),g(l(ot,ft+1),l(ot,ft),l(ot,Et+1))&&s(l(ot,ft+1),l(ot,ft),l(ot,Et))&&(q=B(l(ot,ft+1),l(ot,ft),l(ot,Et),l(ot,Et+1)),g(l(ot,ft-1),l(ot,ft),q)&&(nt=i(ot[ft],q),nt<_&&(_=nt,j=q,st=Et)));if(lt===(st+1)%U.length)q[0]=(Z[0]+j[0])/2,q[1]=(Z[1]+j[1])/2,G.push(q),ft<st?(u(mt,ot,ft,st+1),mt.push(q),pt.push(q),lt!==0&&u(pt,ot,lt,ot.length),u(pt,ot,0,ft+1)):(ft!==0&&u(mt,ot,ft,ot.length),u(mt,ot,0,st+1),mt.push(q),pt.push(q),u(pt,ot,lt,ft+1));else{if(lt>st&&(st+=U.length),at=Number.MAX_VALUE,st<lt)return W;for(var Et=lt;Et<=st;++Et)a(l(ot,ft-1),l(ot,ft),l(ot,Et))&&s(l(ot,ft+1),l(ot,ft),l(ot,Et))&&(nt=i(l(ot,ft),l(ot,Et)),nt<at&&C(ot,ft,Et)&&(at=nt,vt=Et%U.length));ft<vt?(u(mt,ot,ft,vt+1),vt!==0&&u(pt,ot,vt,ct.length),u(pt,ot,0,ft+1)):(ft!==0&&u(mt,ot,ft,ct.length),u(mt,ot,0,vt+1),u(pt,ot,vt,ft+1))}return mt.length<pt.length?(V(mt,W,F,G,z,Y,$),V(pt,W,F,G,z,Y,$)):(V(pt,W,F,G,z,Y,$),V(mt,W,F,G,z,Y,$)),W}return W.push(U),W}function b(U,W){for(var F=0,G=U.length-1;U.length>3&&G>=0;--G)h(l(U,G-1),l(U,G),l(U,G+1),W)&&(U.splice(G%U.length,1),F++);return F}function X(U,W){for(var F=U.length-1;F>=1;--F)for(var G=U[F],z=F-1;z>=0;--z)if(Q(G,U[z],W)){U.splice(F,1);continue}}function K(U,W,F){return F=F||0,Math.abs(U-W)<=F}function Q(U,W,F){return K(U[0],W[0],F)&&K(U[1],W[1],F)}},52018:(v,E,t)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var o=t(83419),g=new o({initialize:function(r){this.pluginManager=r,this.game=r.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});v.exports=g},42363:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]};v.exports=E},37277:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={},t={},o={};o.register=function(g,a,r,s){s===void 0&&(s=!1),E[g]={plugin:a,mapping:r,custom:s}},o.registerCustom=function(g,a,r,s){t[g]={plugin:a,mapping:r,data:s}},o.hasCore=function(g){return E.hasOwnProperty(g)},o.hasCustom=function(g){return t.hasOwnProperty(g)},o.getCore=function(g){return E[g]},o.getCustom=function(g){return t[g]},o.getCustomClass=function(g){return t.hasOwnProperty(g)?t[g].plugin:null},o.remove=function(g){E.hasOwnProperty(g)&&delete E[g]},o.removeCustom=function(g){t.hasOwnProperty(g)&&delete t[g]},o.destroyCorePlugins=function(){for(var g in E)E.hasOwnProperty(g)&&delete E[g]},o.destroyCustomPlugins=function(){for(var g in t)t.hasOwnProperty(g)&&delete t[g]},v.exports=o},77332:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(8443),a=t(50792),r=t(74099),s=t(44603),e=t(39429),n=t(95540),h=t(37277),i=t(72905),l=new o({Extends:a,initialize:function(u){a.call(this),this.game=u,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],u.isBooted?this.boot():u.events.once(g.BOOT,this.boot,this)},boot:function(){var f,u,d,p,m,T,y,S=this.game.config,C=S.installGlobalPlugins;for(C=C.concat(this._pendingGlobal),f=0;f<C.length;f++)u=C[f],d=n(u,"key",null),p=n(u,"plugin",null),m=n(u,"start",!1),T=n(u,"mapping",null),y=n(u,"data",null),d&&(p?this.install(d,p,m,T,y):console.warn("Missing `plugin` for key: "+d));for(C=S.installScenePlugins,C=C.concat(this._pendingScene),f=0;f<C.length;f++)u=C[f],d=n(u,"key",null),p=n(u,"plugin",null),T=n(u,"mapping",null),d&&(p?this.installScenePlugin(d,p,T):console.warn("Missing `plugin` for key: "+d));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(g.DESTROY,this.destroy,this)},addToScene:function(f,u,d){var p,m,T,y=this.game,S=f.scene,C=f.settings.map,R=f.settings.isBooted;for(p=0;p<u.length;p++)m=u[p],y[m]?(f[m]=y[m],C.hasOwnProperty(m)&&(S[C[m]]=f[m])):m==="game"&&C.hasOwnProperty(m)&&(S[C[m]]=y);for(var I=0;I<d.length;I++)for(T=d[I],p=0;p<T.length;p++)if(m=T[p],!!h.hasCore(m)){var L=h.getCore(m),w=L.mapping,O=new L.plugin(S,this,w);f[w]=O,L.custom?S[w]=O:C.hasOwnProperty(w)&&(S[C[w]]=O),R&&O.boot()}for(T=this.plugins,p=0;p<T.length;p++){var B=T[p];B.mapping&&(S[B.mapping]=B.plugin)}},getDefaultScenePlugins:function(){var f=this.game.config.defaultPlugins;return f=f.concat(this.scenePlugins),f},installScenePlugin:function(f,u,d,p,m){if(m===void 0&&(m=!1),typeof u!="function"){console.warn("Invalid Scene Plugin: "+f);return}if(h.hasCore(f)||h.register(f,u,d,!0),this.scenePlugins.indexOf(f)===-1)this.scenePlugins.push(f);else if(!m&&h.hasCore(f)){console.warn("Scene Plugin key in use: "+f);return}if(p){var T=new u(p,this,f);p.sys[f]=T,d&&d!==""&&(p[d]=T),T.boot()}},install:function(f,u,d,p,m){if(d===void 0&&(d=!1),p===void 0&&(p=null),m===void 0&&(m=null),typeof u!="function")return console.warn("Invalid Plugin: "+f),null;if(h.hasCustom(f))return console.warn("Plugin key in use: "+f),null;if(p!==null&&(d=!0),!this.game.isBooted)this._pendingGlobal.push({key:f,plugin:u,start:d,mapping:p,data:m});else if(h.registerCustom(f,u,p,m),d)return this.start(f);return null},getIndex:function(f){for(var u=this.plugins,d=0;d<u.length;d++){var p=u[d];if(p.key===f)return d}return-1},getEntry:function(f){var u=this.getIndex(f);if(u!==-1)return this.plugins[u]},isActive:function(f){var u=this.getEntry(f);return u&&u.active},start:function(f,u){u===void 0&&(u=f);var d=this.getEntry(u);return d&&!d.active?(d.active=!0,d.plugin.start()):d||(d=this.createEntry(f,u)),d?d.plugin:null},createEntry:function(f,u){var d=h.getCustom(f);if(d){var p=new d.plugin(this);d={key:u,plugin:p,active:!0,mapping:d.mapping,data:d.data},this.plugins.push(d),p.init(d.data),p.start()}return d},stop:function(f){var u=this.getEntry(f);return u&&u.active&&(u.active=!1,u.plugin.stop()),this},get:function(f,u){u===void 0&&(u=!0);var d=this.getEntry(f);if(d)return d.plugin;var p=this.getClass(f);return p&&u?(d=this.createEntry(f,f),d?d.plugin:null):p||null},getClass:function(f){return h.getCustomClass(f)},removeGlobalPlugin:function(f){var u=this.getEntry(f);u&&i(this.plugins,u),h.removeCustom(f)},removeScenePlugin:function(f){i(this.scenePlugins,f),h.remove(f)},registerGameObject:function(f,u,d){return u&&e.register(f,u),d&&s.register(f,d),this},removeGameObject:function(f,u,d){return u===void 0&&(u=!0),d===void 0&&(d=!0),u&&e.remove(f),d&&s.remove(f),this},registerFileType:function(f,u,d){r.register(f,u),d&&d.sys.load&&(d.sys.load[f]=u)},destroy:function(){for(var f=0;f<this.plugins.length;f++)this.plugins[f].plugin.destroy();h.destroyCustomPlugins(),this.game.noReturn&&h.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});v.exports=l},45145:(v,E,t)=>{/**
* @author       Richard Davey <rich@phaser.io>
* @copyright    2013-2024 Phaser Studio Inc.
* @license      {@link https://github.com/photonstorm/phaser3-plugin-template/blob/master/LICENSE|MIT License}
*/var o=t(52018),g=t(83419),a=t(44594),r=new g({Extends:o,initialize:function(e,n,h){o.call(this,n),this.scene=e,this.systems=e.sys,this.pluginKey=h,e.sys.events.once(a.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});v.exports=r},18922:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={BasePlugin:t(52018),DefaultPlugins:t(42363),PluginCache:t(37277),PluginManager:t(77332),ScenePlugin:t(45145)}},63595:()=>{HTMLVideoElement&&!("requestVideoFrameCallback"in HTMLVideoElement.prototype)&&"getVideoPlaybackQuality"in HTMLVideoElement.prototype&&(HTMLVideoElement.prototype._rvfcpolyfillmap={},HTMLVideoElement.prototype.requestVideoFrameCallback=function(v){const E=performance.now(),t=this.getVideoPlaybackQuality(),o=this.mozPresentedFrames||this.mozPaintedFrames||t.totalVideoFrames-t.droppedVideoFrames,g=(a,r)=>{const s=this.getVideoPlaybackQuality(),e=this.mozPresentedFrames||this.mozPaintedFrames||s.totalVideoFrames-s.droppedVideoFrames;if(e>o){const n=this.mozFrameDelay||s.totalFrameDelay-t.totalFrameDelay||0,h=r-a;v(r,{presentationTime:r+n*1e3,expectedDisplayTime:r+h,width:this.videoWidth,height:this.videoHeight,mediaTime:Math.max(0,this.currentTime||0)+h/1e3,presentedFrames:e,processingDuration:n}),delete this._rvfcpolyfillmap[E]}else this._rvfcpolyfillmap[E]=requestAnimationFrame(n=>g(r,n))};return this._rvfcpolyfillmap[E]=requestAnimationFrame(a=>g(E,a)),E},HTMLVideoElement.prototype.cancelVideoFrameCallback=function(v){cancelAnimationFrame(this._rvfcpolyfillmap[v]),delete this._rvfcpolyfillmap[v]})},10312:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},29795:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={DEFAULT:0,LINEAR:0,NEAREST:1};v.exports=E},68627:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19715),g=t(32880),a=t(83419),r=t(8054),s=t(50792),e=t(92503),n=t(56373),h=t(97480),i=t(69442),l=t(61340),f=new a({Extends:s,initialize:function(d){s.call(this);var p=d.config;this.config={clearBeforeRender:p.clearBeforeRender,backgroundColor:p.backgroundColor,antialias:p.antialias,roundPixels:p.roundPixels},this.game=d,this.type=r.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=d.canvas;var m={alpha:d.config.transparent,desynchronized:d.config.desynchronized,willReadFrequently:!1};this.gameContext=p.context?p.context:this.gameCanvas.getContext("2d",m),this.currentContext=this.gameContext,this.antialias=d.config.antialias,this.blendModes=n(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new l,this._tempMatrix2=new l,this._tempMatrix3=new l,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(i.READY,this.boot,this)},boot:function(){var u=this.game,d=u.scale.baseSize;this.width=d.width,this.height=d.height,this.isBooted=!0,u.scale.on(h.RESIZE,this.onResize,this),this.resize(d.width,d.height)},onResize:function(u,d){(d.width!==this.width||d.height!==this.height)&&this.resize(d.width,d.height)},resize:function(u,d){this.width=u,this.height=d,this.emit(e.RESIZE,u,d)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(u){return this.currentContext.globalCompositeOperation=u,this},setContext:function(u){return this.currentContext=u||this.gameContext,this},setAlpha:function(u){return this.currentContext.globalAlpha=u,this},preRender:function(){var u=this.gameContext,d=this.config,p=this.width,m=this.height;u.globalAlpha=1,u.globalCompositeOperation="source-over",u.setTransform(1,0,0,1,0,0),d.clearBeforeRender&&(u.clearRect(0,0,p,m),d.transparent||(u.fillStyle=d.backgroundColor.rgba,u.fillRect(0,0,p,m))),u.save(),this.drawCount=0,this.emit(e.PRE_RENDER)},render:function(u,d,p){var m=d.length;this.emit(e.RENDER,u,p);var T=p.x,y=p.y,S=p.width,C=p.height,R=p.renderToTexture?p.context:u.sys.context;R.save(),this.game.scene.customViewports&&(R.beginPath(),R.rect(T,y,S,C),R.clip()),p.emit(o.PRE_RENDER,p),this.currentContext=R;var I=p.mask;I&&I.preRenderCanvas(this,null,p._maskCamera),p.transparent||(R.fillStyle=p.backgroundColor.rgba,R.fillRect(T,y,S,C)),R.globalAlpha=p.alpha,R.globalCompositeOperation="source-over",this.drawCount+=m,p.renderToTexture&&p.emit(o.PRE_RENDER,p),p.matrix.copyToContext(R);for(var L=0;L<m;L++){var w=d[L];w.mask&&w.mask.preRenderCanvas(this,w,p),w.renderCanvas(this,w,p),w.mask&&w.mask.postRenderCanvas(this,w,p)}R.setTransform(1,0,0,1,0,0),R.globalCompositeOperation="source-over",R.globalAlpha=1,p.flashEffect.postRenderCanvas(R),p.fadeEffect.postRenderCanvas(R),p.dirty=!1,I&&I.postRenderCanvas(this),R.restore(),p.renderToTexture&&(p.emit(o.POST_RENDER,p),p.renderToGame&&u.sys.context.drawImage(p.canvas,T,y)),p.emit(o.POST_RENDER,p)},postRender:function(){var u=this.gameContext;u.restore(),this.emit(e.POST_RENDER);var d=this.snapshotState;d.callback&&(g(this.gameCanvas,d),d.callback=null)},snapshotCanvas:function(u,d,p,m,T,y,S,C,R){p===void 0&&(p=!1),this.snapshotArea(m,T,y,S,d,C,R);var I=this.snapshotState;return I.getPixel=p,g(u,I),I.callback=null,this},snapshot:function(u,d,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,u,d,p)},snapshotArea:function(u,d,p,m,T,y,S){var C=this.snapshotState;return C.callback=T,C.type=y,C.encoder=S,C.getPixel=!1,C.x=u,C.y=d,C.width=Math.min(p,this.gameCanvas.width),C.height=Math.min(m,this.gameCanvas.height),this},snapshotPixel:function(u,d,p){return this.snapshotArea(u,d,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(u,d,p,m){var T=p.alpha*u.alpha;if(T!==0){var y=this.currentContext,S=this._tempMatrix1,C=this._tempMatrix2,R=d.canvasData,I=R.x,L=R.y,w=d.cutWidth,O=d.cutHeight,B=d.customPivot,V=d.source.resolution,b=u.displayOriginX,X=u.displayOriginY,K=-b+d.x,Q=-X+d.y;if(u.isCropped){var U=u._crop;(U.flipX!==u.flipX||U.flipY!==u.flipY)&&d.updateCropUVs(U,u.flipX,u.flipY),w=U.cw,O=U.ch,I=U.cx,L=U.cy,K=-b+U.x,Q=-X+U.y,u.flipX&&(K>=0?K=-(K+w):K<0&&(K=Math.abs(K)-w)),u.flipY&&(Q>=0?Q=-(Q+O):Q<0&&(Q=Math.abs(Q)-O))}var W=1,F=1;u.flipX&&(B||(K+=-d.realWidth+b*2),W=-1),u.flipY&&(B||(Q+=-d.realHeight+X*2),F=-1);var G=u.x,z=u.y;C.applyITRS(G,z,u.rotation,u.scaleX*W,u.scaleY*F),S.copyFrom(p.matrix),m?(S.multiplyWithOffset(m,-p.scrollX*u.scrollFactorX,-p.scrollY*u.scrollFactorY),C.e=G,C.f=z):(C.e-=p.scrollX*u.scrollFactorX,C.f-=p.scrollY*u.scrollFactorY),S.multiply(C),p.roundPixels&&(S.e=Math.round(S.e),S.f=Math.round(S.f)),y.save(),S.setToContext(y),y.globalCompositeOperation=this.blendModes[u.blendMode],y.globalAlpha=T,y.imageSmoothingEnabled=!d.source.scaleMode,u.mask&&u.mask.preRenderCanvas(this,u,p),w>0&&O>0&&(p.roundPixels?y.drawImage(d.source.image,I,L,w,O,Math.round(K),Math.round(Q),Math.round(w/V),Math.round(O/V)):y.drawImage(d.source.image,I,L,w,O,K,Q,w/V,O/V)),u.mask&&u.mask.postRenderCanvas(this,u,p),y.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});v.exports=f},55830:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CanvasRenderer:t(68627),GetBlendModes:t(56373),SetTransform:t(20926)}},56373:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(89289),a=function(){var r=[],s=g.supportNewBlendModes,e="source-over";return r[o.NORMAL]=e,r[o.ADD]="lighter",r[o.MULTIPLY]=s?"multiply":e,r[o.SCREEN]=s?"screen":e,r[o.OVERLAY]=s?"overlay":e,r[o.DARKEN]=s?"darken":e,r[o.LIGHTEN]=s?"lighten":e,r[o.COLOR_DODGE]=s?"color-dodge":e,r[o.COLOR_BURN]=s?"color-burn":e,r[o.HARD_LIGHT]=s?"hard-light":e,r[o.SOFT_LIGHT]=s?"soft-light":e,r[o.DIFFERENCE]=s?"difference":e,r[o.EXCLUSION]=s?"exclusion":e,r[o.HUE]=s?"hue":e,r[o.SATURATION]=s?"saturation":e,r[o.COLOR]=s?"color":e,r[o.LUMINOSITY]=s?"luminosity":e,r[o.ERASE]="destination-out",r[o.SOURCE_IN]="source-in",r[o.SOURCE_OUT]="source-out",r[o.SOURCE_ATOP]="source-atop",r[o.DESTINATION_OVER]="destination-over",r[o.DESTINATION_IN]="destination-in",r[o.DESTINATION_OUT]="destination-out",r[o.DESTINATION_ATOP]="destination-atop",r[o.LIGHTER]="lighter",r[o.COPY]="copy",r[o.XOR]="xor",r};v.exports=a},20926:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91296),g=function(a,r,s,e,n){var h=e.alpha*s.alpha;if(h<=0)return!1;var i=o(s,e,n).calc;return r.globalCompositeOperation=a.blendModes[s.blendMode],r.globalAlpha=h,r.save(),i.setToContext(r),r.imageSmoothingEnabled=s.frame?!s.frame.source.scaleMode:a.antialias,!0};v.exports=g},63899:v=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="losewebgl"},6119:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="postrender"},48070:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="prerender"},15640:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="render"},8912:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resize"},87124:v=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="restorewebgl"},92503:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={LOSE_WEBGL:t(63899),POST_RENDER:t(6119),PRE_RENDER:t(48070),RENDER:t(15640),RESIZE:t(8912),RESTORE_WEBGL:t(87124)}},36909:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Events:t(92503),Snapshot:t(89966)},v.exports.Canvas=t(55830),v.exports.WebGL=t(4159)},32880:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(40987),a=t(95540),r=function(s,e){var n=a(e,"callback"),h=a(e,"type","image/png"),i=a(e,"encoder",.92),l=Math.abs(Math.round(a(e,"x",0))),f=Math.abs(Math.round(a(e,"y",0))),u=Math.floor(a(e,"width",s.width)),d=Math.floor(a(e,"height",s.height)),p=a(e,"getPixel",!1);if(p){var m=s.getContext("2d",{willReadFrequently:!1}),T=m.getImageData(l,f,1,1),y=T.data;n.call(null,new g(y[0],y[1],y[2],y[3]))}else if(l!==0||f!==0||u!==s.width||d!==s.height){var S=o.createWebGL(this,u,d),C=S.getContext("2d",{willReadFrequently:!0});u>0&&d>0&&C.drawImage(s,l,f,u,d,0,0,u,d);var R=new Image;R.onerror=function(){n.call(null),o.remove(S)},R.onload=function(){n.call(null,R),o.remove(S)},R.src=S.toDataURL(h,i)}else{var I=new Image;I.onerror=function(){n.call(null)},I.onload=function(){n.call(null,I)},I.src=s.toDataURL(h,i)}};v.exports=r},88815:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(40987),a=t(95540),r=function(s,e){var n=s,h=a(e,"callback"),i=a(e,"type","image/png"),l=a(e,"encoder",.92),f=Math.abs(Math.round(a(e,"x",0))),u=Math.abs(Math.round(a(e,"y",0))),d=a(e,"getPixel",!1),p=a(e,"isFramebuffer",!1),m=p?a(e,"bufferWidth",1):n.drawingBufferWidth,T=p?a(e,"bufferHeight",1):n.drawingBufferHeight;if(d){var y=new Uint8Array(4),S=p?u:T-u;n.readPixels(f,S,1,1,n.RGBA,n.UNSIGNED_BYTE,y),h.call(null,new g(y[0],y[1],y[2],y[3]))}else{var C=Math.floor(a(e,"width",m)),R=Math.floor(a(e,"height",T)),I=C*R*4,L=new Uint8Array(I);n.readPixels(f,T-u-R,C,R,n.RGBA,n.UNSIGNED_BYTE,L);for(var w=o.createWebGL(this,C,R),O=w.getContext("2d",{willReadFrequently:!0}),B=O.getImageData(0,0,C,R),V=B.data,b=0;b<R;b++)for(var X=0;X<C;X++){var K=((R-b-1)*C+X)*4,Q=p?I-(b*C+(C-X))*4:(b*C+X)*4;V[Q+0]=L[K+0],V[Q+1]=L[K+1],V[Q+2]=L[K+2],V[Q+3]=L[K+3]}O.putImageData(B,0,0);var U=new Image;U.onerror=function(){h.call(null),o.remove(w)},U.onload=function(){h.call(null,U),o.remove(w)},U.src=w.toDataURL(i,l)}};v.exports=r},89966:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Canvas:t(32880),WebGL:t(88815)}},7530:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(36060),a=t(90330),r=t(82264),s=t(95540),e=t(32302),n=t(63448),h=t(31302),i=t(58918),l=t(14811),f=t(92651),u=t(96569),d=t(56527),p=t(57516),m=t(43439),T=t(81041),y=t(12385),S=t(7589),C=t(95428),R=t(72905),I=new o({initialize:function(w){this.game=w.game,this.renderer=w,this.classes=new a([[g.UTILITY_PIPELINE,S],[g.MULTI_PIPELINE,p],[g.BITMAPMASK_PIPELINE,h],[g.SINGLE_PIPELINE,y],[g.ROPE_PIPELINE,T],[g.LIGHT_PIPELINE,u],[g.POINTLIGHT_PIPELINE,m],[g.MOBILE_PIPELINE,d]]),this.postPipelineClasses=new a,this.pipelines=new a,this.postPipelineInstances=[],this.default=null,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.MOBILE_PIPELINE=null,this.FX_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderTargets=[],this.maxDimension=0,this.frameInc=32,this.targetIndex=0},boot:function(L,w,O){var B=this.renderer,V=this.renderTargets;this.frameInc=Math.floor(s(L,"frameInc",32));var b=B.width,X=B.height,K=this.game.config.disablePreFX,Q=this.game.config.disablePostFX;if(Q||this.postPipelineClasses.setAll([[String(l.BARREL),i.Barrel],[String(l.BLOOM),i.Bloom],[String(l.BLUR),i.Blur],[String(l.BOKEH),i.Bokeh],[String(l.CIRCLE),i.Circle],[String(l.COLOR_MATRIX),i.ColorMatrix],[String(l.DISPLACEMENT),i.Displacement],[String(l.GLOW),i.Glow],[String(l.GRADIENT),i.Gradient],[String(l.PIXELATE),i.Pixelate],[String(l.SHADOW),i.Shadow],[String(l.SHINE),i.Shine],[String(l.VIGNETTE),i.Vignette],[String(l.WIPE),i.Wipe]]),!K){this.classes.set(g.FX_PIPELINE,f);for(var U=Math.min(b,X),W=Math.ceil(U/this.frameInc),F=1;F<W;F++){var G=F*this.frameInc;V.push(new e(B,G,G)),V.push(new e(B,G,G)),V.push(new e(B,G,G)),this.maxDimension=G}V.push(new e(B,b,X,1,0,!0,!0)),V.push(new e(B,b,X,1,0,!0,!0)),V.push(new e(B,b,X,1,0,!0,!0))}var z,Y,$=this,j=this.game;if(this.classes.each(function(q,_){z=$.add(q,new _({game:j})),q===g.UTILITY_PIPELINE&&($.UTILITY_PIPELINE=z,$.fullFrame1=z.fullFrame1,$.fullFrame2=z.fullFrame2,$.halfFrame1=z.halfFrame1,$.halfFrame2=z.halfFrame2)}),this.MULTI_PIPELINE=this.get(g.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(g.BITMAPMASK_PIPELINE),this.MOBILE_PIPELINE=this.get(g.MOBILE_PIPELINE),K||(this.FX_PIPELINE=this.get(g.FX_PIPELINE)),L)for(Y in L){var Z=L[Y];z=new Z(j),z.name=Y,z.isPostFX?this.postPipelineClasses.set(Y,Z):this.has(Y)||(this.classes.set(Y,Z),this.add(Y,z))}this.default=this.get(w),O&&!r.os.desktop&&(this.default=this.MOBILE_PIPELINE)},setDefaultPipeline:function(L){var w=this.get(L);return w&&(this.default=w),w},add:function(L,w){if(w.isPostFX){console.warn(L+" is a Post Pipeline. Use `addPostPipeline` instead");return}var O=this.pipelines,B=this.renderer;return O.has(L)?console.warn("Pipeline exists: "+L):(w.name=L,w.manager=this,O.set(L,w)),w.hasBooted||w.boot(),B.width!==0&&B.height!==0&&!w.isPreFX&&w.resize(B.width,B.height),w},addPostPipeline:function(L,w){this.postPipelineClasses.has(L)||this.postPipelineClasses.set(L,w)},flush:function(){this.current&&this.current.flush()},has:function(L){var w=this.pipelines;return typeof L=="string"?w.has(L):!!w.contains(L)},get:function(L){var w=this.pipelines;if(typeof L=="string")return w.get(L);if(w.contains(L))return L},getPostPipeline:function(L,w,O){var B=this.postPipelineClasses,V,b="",X=typeof L;if(X==="string"||X==="number"?(V=B.get(L),b=L):X==="function"?(B.contains(L)&&(V=L),b=L.name):X==="object"&&(V=B.get(L.name),b=L.name),V){var K=new V(this.game,O);return K.name=b,w&&(K.gameObject=w),this.postPipelineInstances.push(K),K}},removePostPipeline:function(L){R(this.postPipelineInstances,L)},remove:function(L,w,O){w===void 0&&(w=!0),O===void 0&&(O=!0),this.pipelines.delete(L),w&&this.classes.delete(L),O&&this.postPipelineClasses.delete(L)},set:function(L,w,O){if(!L.isPostFX)return this.isCurrent(L,O)||(this.flush(),this.current&&this.current.unbind(),this.current=L,L.bind(O)),L.updateProjectionMatrix(),L.onBind(w),L},preBatch:function(L){if(L.hasPostPipeline){this.flush();for(var w=L.postPipelines,O=w.length-1;O>=0;O--){var B=w[O];B.active&&B.preBatch(L)}}},postBatch:function(L){if(L.hasPostPipeline){this.flush();for(var w=L.postPipelines,O=0;O<w.length;O++){var B=w[O];B.active&&B.postBatch(L)}}},preBatchCamera:function(L){if(L.hasPostPipeline){this.flush();for(var w=L.postPipelines,O=w.length-1;O>=0;O--){var B=w[O];B.active&&B.preBatch(L)}}},postBatchCamera:function(L){if(L.hasPostPipeline){this.flush();for(var w=L.postPipelines,O=0;O<w.length;O++){var B=w[O];B.active&&B.postBatch(L)}}},isCurrent:function(L,w){var O=this.renderer,B=this.current;return B&&!w&&(w=B.currentShader),!(B!==L||w.program!==O.currentProgram)},copyFrame:function(L,w,O,B,V){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(L,w,O,B,V),this},copyToGame:function(L){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(L),this},drawFrame:function(L,w,O,B){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(L,w,O,B),this},blendFrames:function(L,w,O,B,V){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(L,w,O,B,V),this},blendFramesAdditive:function(L,w,O,B,V){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(L,w,O,B,V),this},clearFrame:function(L,w){return this.UTILITY_PIPELINE.clearFrame(L,w),this},blitFrame:function(L,w,O,B,V,b){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(L,w,O,B,V,b),this},copyFrameRect:function(L,w,O,B,V,b,X,K){return this.UTILITY_PIPELINE.copyFrameRect(L,w,O,B,V,b,X,K),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(L){return this.UTILITY_PIPELINE.bind(L)},setFX:function(){return this.set(this.FX_PIPELINE)},restoreContext:function(){this.rebind(),this.pipelines.each(function(L,w){w.restoreContext()}),C(this.postPipelineInstances,function(L){L.restoreContext()})},rebind:function(L){L===void 0&&this.previous&&(L=this.previous);var w=this.renderer,O=w.gl;O.disable(O.DEPTH_TEST),O.disable(O.CULL_FACE),w.hasActiveStencilMask()?O.clear(O.DEPTH_BUFFER_BIT):(O.disable(O.STENCIL_TEST),O.clear(O.DEPTH_BUFFER_BIT|O.STENCIL_BUFFER_BIT)),O.viewport(0,0,w.width,w.height),w.currentProgram=null,w.setBlendMode(0,!0);var B=w.vaoExtension;B&&B.bindVertexArrayOES(null);var V=this.pipelines.entries;for(var b in V)V[b].glReset=!0;L&&(this.current=L,L.rebind())},clear:function(){var L=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,L.currentProgram=null,L.setBlendMode(0,!0);var w=L.vaoExtension;w&&w.bindVertexArrayOES(null)},getRenderTarget:function(L){var w=this.renderTargets,O=3;if(L>this.maxDimension)return this.targetIndex=w.length-O,w[this.targetIndex];var B=(n(L,this.frameInc,0,!0)-1)*O;return this.targetIndex=B,w[B]},getSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+1]},getAltSwapRenderTarget:function(){return this.renderTargets[this.targetIndex+2]},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.default=null,this.current=null,this.previous=null}});v.exports=I},32302:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92503),a=new o({initialize:function(s,e,n,h,i,l,f,u,d){h===void 0&&(h=1),i===void 0&&(i=0),l===void 0&&(l=!0),f===void 0&&(f=!1),u===void 0&&(u=!0),d===void 0&&(d=!0),this.renderer=s,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=h,this.minFilter=i,this.autoClear=l,this.autoResize=!0,this.hasDepthBuffer=u,this.forceClamp=d,this.resize(e,n),f?this.setAutoResize(!0):this.autoResize=!1},setAutoResize:function(r){return r&&!this.autoResize?(this.renderer.on(g.RESIZE,this.resize,this),this.autoResize=!0):!r&&this.autoResize&&(this.renderer.off(g.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(r,s){if(r=Math.round(r*this.scale),s=Math.round(s*this.scale),r<=0&&(r=1),s<=0&&(s=1),this.autoResize&&(r!==this.width||s!==this.height)){var e=this.renderer;e.deleteFramebuffer(this.framebuffer),e.deleteTexture(this.texture),this.texture=e.createTextureFromSource(null,r,s,this.minFilter,this.forceClamp),this.framebuffer=e.createFramebuffer(r,s,this.texture,this.hasDepthBuffer),this.width=r,this.height=s}return this},willResize:function(r,s){return r=Math.round(r*this.scale),s=Math.round(s*this.scale),r<=0&&(r=1),s<=0&&(s=1),r!==this.width||s!==this.height},bind:function(r,s,e){r===void 0&&(r=!1);var n=this.renderer;if(r&&n.flush(),s&&e&&this.resize(s,e),n.pushFramebuffer(this.framebuffer,!1,!1),r&&this.adjustViewport(),this.autoClear){var h=this.renderer.gl;h.clearColor(0,0,0,0),h.clear(h.COLOR_BUFFER_BIT)}n.clearStencilMask()},adjustViewport:function(){var r=this.renderer.gl;r.viewport(0,0,this.width,this.height),r.disable(r.SCISSOR_TEST)},clear:function(){var r=this.renderer,s=r.gl;r.pushFramebuffer(this.framebuffer),s.disable(s.SCISSOR_TEST),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT),r.popFramebuffer(),r.resetScissor()},unbind:function(r){r===void 0&&(r=!1);var s=this.renderer;return r&&s.flush(),s.popFramebuffer()},destroy:function(){var r=this.renderer;r.off(g.RESIZE,this.resize,this),r.deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),this.renderer=null,this.framebuffer=null,this.texture=null}});v.exports=a},70554:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @author       Matthew Groves <@doormat>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={getTintFromFloats:function(E,t,o,g){var a=(E*255|0)&255,r=(t*255|0)&255,s=(o*255|0)&255,e=(g*255|0)&255;return(e<<24|a<<16|r<<8|s)>>>0},getTintAppendFloatAlpha:function(E,t){var o=(t*255|0)&255;return(o<<24|E)>>>0},getTintAppendFloatAlphaAndSwap:function(E,t){var o=(E>>16|0)&255,g=(E>>8|0)&255,a=(E|0)&255,r=(t*255|0)&255;return(r<<24|a<<16|g<<8|o)>>>0},getFloatsFromUintRGB:function(E){var t=(E>>16|0)&255,o=(E>>8|0)&255,g=(E|0)&255;return[t/255,o/255,g/255]},checkShaderMax:function(E,t){var o=Math.min(16,E.getParameter(E.MAX_TEXTURE_IMAGE_UNITS));return!t||t===-1?o:Math.min(o,t)},parseFragmentShaderMaxTextures:function(E,t){if(!E)return"";for(var o="",g=0;g<t;g++)g>0&&(o+=`
	else `),g<t-1&&(o+="if (outTexId < "+g+".5)"),o+=`
	{`,o+=`
		texture = texture2D(uMainSampler[`+g+"], outTexCoord);",o+=`
	}`;return E=E.replace(/%count%/gi,t.toString()),E.replace(/%forloop%/gi,o)},setGlowQuality:function(E,t,o,g){return o===void 0&&(o=t.config.glowFXQuality),g===void 0&&(g=t.config.glowFXDistance),E=E.replace(/__SIZE__/gi,(1/o/g).toFixed(7)),E=E.replace(/__DIST__/gi,g.toFixed(0)+".0"),E}}},29100:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(62644),a=t(50792),r=t(77085),s=t(95540),e=t(37867),n=t(92503),h=t(32302),i=t(70554),l=t(38683),f=new o({Extends:a,initialize:function(d){a.call(this);var p=d.game,m=p.renderer,T=m.gl;this.name=s(d,"name","WebGLPipeline"),this.game=p,this.renderer=m,this.manager,this.gl=T,this.view=p.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.activeBuffer,this.topology=s(d,"topology",T.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.forceZero=s(d,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.isPreFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=d,this.glReset=!1,this.batch=[],this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.activeTextures=[],this.resizeUniform=s(d,"resizeUniform","")},boot:function(){var u,d=this.gl,p=this.config,m=this.renderer;this.isPostFX||(this.projectionMatrix=new e().identity());var T=this.renderTargets,y=s(p,"renderTarget",!1);typeof y=="boolean"&&y&&(y=1);var S=m.width,C=m.height;if(typeof y=="number")for(u=0;u<y;u++)T.push(new h(m,S,C,1,0,!0));else if(Array.isArray(y))for(u=0;u<y.length;u++){var R=s(y[u],"scale",1),I=s(y[u],"minFilter",0),L=s(y[u],"autoClear",1),w=s(y[u],"autoResize",!1),O=s(y[u],"width",null),B=s(y[u],"height",O);O?T.push(new h(m,O,B,1,I,L,w)):T.push(new h(m,S,C,R,I,L,w))}T.length&&(this.currentRenderTarget=T[0]),this.setShadersFromConfig(p);var V=this.shaders,b=0;for(u=0;u<V.length;u++)V[u].vertexSize>b&&(b=V[u].vertexSize);var X=s(p,"batchSize",m.config.batchSize);this.vertexCapacity=X*6;var K=new ArrayBuffer(this.vertexCapacity*b);this.vertexData=K,this.bytes=new Uint8Array(K),this.vertexViewF32=new Float32Array(K),this.vertexViewU32=new Uint32Array(K);var Q=s(p,"vertices",null);for(Q?(this.vertexViewF32.set(Q),this.vertexBuffer=m.createVertexBuffer(K,d.STATIC_DRAW)):this.vertexBuffer=m.createVertexBuffer(K.byteLength,d.DYNAMIC_DRAW),this.setVertexBuffer(),u=V.length-1;u>=0;u--)V[u].rebind();this.hasBooted=!0,m.on(n.RESIZE,this.resize,this),m.on(n.PRE_RENDER,this.onPreRender,this),m.on(n.RENDER,this.onRender,this),m.on(n.POST_RENDER,this.onPostRender,this),this.emit(r.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(u,d,p){var m=this.renderer;if(u!==this.currentShader||m.currentProgram!==this.currentShader.program){this.flush();var T=this.setVertexBuffer(p);T&&!d&&(d=!0),u.bind(d,!1),this.currentShader=u}return this},getShaderByName:function(u){for(var d=this.shaders,p=0;p<d.length;p++)if(d[p].name===u)return d[p]},setShadersFromConfig:function(u){var d,p=this.shaders,m=this.renderer;for(d=0;d<p.length;d++)p[d].destroy();var T="vertShader",y="fragShader",S="attributes",C=s(u,T,null),R=i.parseFragmentShaderMaxTextures(s(u,y,null),m.maxTextures),I=s(u,S,null),L=s(u,"shaders",[]),w=L.length;if(w===0)C&&R&&(this.shaders=[new l(this,"default",C,R,g(I))]);else{var O=[];for(d=0;d<w;d++){var B=L[d],V,b,X,K;if(typeof B=="string"?(V="default",b=C,X=i.parseFragmentShaderMaxTextures(B,m.maxTextures),K=I):(V=s(B,"name","default"),b=s(B,T,C),X=i.parseFragmentShaderMaxTextures(s(B,y,R),m.maxTextures),K=s(B,S,I)),V==="default"){var Q=X.split(`
`),U=Q[0].trim();U.indexOf("#define SHADER_NAME")>-1&&(V=U.substring(20))}b&&X&&O.push(new l(this,V,b,X,g(K)))}this.shaders=O}return this.shaders.length===0?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},createBatch:function(u){return this.currentBatch={start:this.vertexCount,count:0,texture:[u],unit:0,maxUnit:0},this.currentUnit=0,this.currentTexture=u,this.batch.push(this.currentBatch),0},addTextureToBatch:function(u){var d=this.currentBatch;d&&(d.texture.push(u),d.unit++,d.maxUnit++)},pushBatch:function(u){if(!this.currentBatch||this.forceZero&&u!==this.currentTexture)return this.createBatch(u);if(u===this.currentTexture)return this.currentUnit;var d=this.currentBatch,p=d.texture.indexOf(u);return p===-1?d.texture.length===this.renderer.maxTextures?this.createBatch(u):(d.unit++,d.maxUnit++,d.texture.push(u),this.currentUnit=d.unit,this.currentTexture=u,d.unit):(this.currentUnit=p,this.currentTexture=u,p)},setGameObject:function(u,d){return d===void 0&&(d=u.frame),this.pushBatch(d.source.glTexture)},shouldFlush:function(u){return u===void 0&&(u=0),this.vertexCount+u>this.vertexCapacity},vertexAvailable:function(){return this.vertexCapacity-this.vertexCount},resize:function(u,d){(u!==this.width||d!==this.height)&&this.flush(),this.width=u,this.height=d;for(var p=this.renderTargets,m=0;m<p.length;m++)p[m].resize(u,d);return this.setProjectionMatrix(u,d),this.resizeUniform&&this.set2f(this.resizeUniform,u,d),this.emit(r.RESIZE,u,d,this),this.onResize(u,d),this},setProjectionMatrix:function(u,d){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=u,this.projectionHeight=d,p.ortho(0,u,d,0,-1e3,1e3);for(var m=this.shaders,T="uProjectionMatrix",y=0;y<m.length;y++){var S=m[y];S.hasUniform(T)&&(S.resetUniform(T),S.setMatrix4fv(T,!1,p.val,S))}return this},flipProjectionMatrix:function(u){u===void 0&&(u=!0);var d=this.projectionMatrix;if(!d)return this;var p=this.projectionWidth,m=this.projectionHeight;u?d.ortho(0,p,0,m,-1e3,1e3):d.ortho(0,p,m,0,-1e3,1e3),this.setMatrix4fv("uProjectionMatrix",!1,d.val)},updateProjectionMatrix:function(){if(this.projectionMatrix){var u=this.renderer.projectionWidth,d=this.renderer.projectionHeight;(this.projectionWidth!==u||this.projectionHeight!==d)&&this.setProjectionMatrix(u,d)}},bind:function(u){if(u===void 0&&(u=this.currentShader),this.glReset)return this.rebind(u);var d=!1,p=this.gl;return p.getParameter(p.ARRAY_BUFFER_BINDING)!==this.vertexBuffer&&(p.bindBuffer(p.ARRAY_BUFFER,this.vertexBuffer.webGLBuffer),this.activeBuffer=this.vertexBuffer,d=!0),u.bind(d),this.currentShader=u,this.activeTextures.length=0,this.emit(r.BIND,this,u),this.onActive(u),this},rebind:function(u){this.activeBuffer=null,this.setVertexBuffer();for(var d=this.shaders,p=d.length-1;p>=0;p--){var m=d[p].rebind();(!u||m===u)&&(this.currentShader=m)}return this.activeTextures.length=0,this.emit(r.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},restoreContext:function(){var u=this.shaders,d=!!this.vertexBuffer;this.activeBuffer=null,this.activeTextures.length=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,d&&this.setVertexBuffer();for(var p=0;p<u.length;p++){var m=u[p];m.syncUniforms(),d&&m.rebind()}},setVertexBuffer:function(u){if(u===void 0&&(u=this.vertexBuffer),u!==this.activeBuffer){var d=this.gl;return this.gl.bindBuffer(d.ARRAY_BUFFER,u.webGLBuffer),this.activeBuffer=u,!0}return!1},preBatch:function(u){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(u),this},postBatch:function(u){return this.onDraw(this.currentRenderTarget),this.onPostBatch(u),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(u){if(u===void 0&&(u=!1),this.vertexCount>0){this.emit(r.BEFORE_FLUSH,this,u),this.onBeforeFlush(u);var d=this.gl,p=this.vertexCount,m=this.currentShader.vertexSize,T=this.topology;if(this.active){this.setVertexBuffer(),p===this.vertexCapacity?d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.DYNAMIC_DRAW):d.bufferSubData(d.ARRAY_BUFFER,0,this.bytes.subarray(0,p*m));var y,S,C,R=this.batch,I=this.activeTextures;if(this.forceZero)for(I[0]||d.activeTexture(d.TEXTURE0),y=0;y<R.length;y++)S=R[y],C=S.texture[0],I[0]!==C&&(d.bindTexture(d.TEXTURE_2D,C.webGLTexture),I[0]=C),d.drawArrays(T,S.start,S.count);else for(y=0;y<R.length;y++){S=R[y];for(var L=0;L<=S.maxUnit;L++)C=S.texture[L],I[L]!==C&&(d.activeTexture(d.TEXTURE0+L),d.bindTexture(d.TEXTURE_2D,C.webGLTexture),I[L]=C);d.drawArrays(T,S.start,S.count)}}this.vertexCount=0,this.batch.length=0,this.currentBatch=null,this.currentTexture=null,this.currentUnit=0,this.emit(r.AFTER_FLUSH,this,u),this.onAfterFlush(u)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(u,d,p,m,T,y,S){var C=this.vertexViewF32,R=this.vertexViewU32,I=this.vertexCount*this.currentShader.vertexComponentCount-1;C[++I]=u,C[++I]=d,C[++I]=p,C[++I]=m,C[++I]=T,C[++I]=y,R[++I]=S,this.vertexCount++,this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchQuad:function(u,d,p,m,T,y,S,C,R,I,L,w,O,B,V,b,X,K,Q,U){U===void 0&&(U=this.currentUnit);var W=!1;this.shouldFlush(6)&&(this.flush(),W=!0),this.currentBatch||(U=this.setTexture2D(Q));var F=this.vertexViewF32,G=this.vertexViewU32,z=this.vertexCount*this.currentShader.vertexComponentCount-1;return F[++z]=d,F[++z]=p,F[++z]=I,F[++z]=L,F[++z]=U,F[++z]=K,G[++z]=B,F[++z]=m,F[++z]=T,F[++z]=I,F[++z]=O,F[++z]=U,F[++z]=K,G[++z]=b,F[++z]=y,F[++z]=S,F[++z]=w,F[++z]=O,F[++z]=U,F[++z]=K,G[++z]=X,F[++z]=d,F[++z]=p,F[++z]=I,F[++z]=L,F[++z]=U,F[++z]=K,G[++z]=B,F[++z]=y,F[++z]=S,F[++z]=w,F[++z]=O,F[++z]=U,F[++z]=K,G[++z]=X,F[++z]=C,F[++z]=R,F[++z]=w,F[++z]=L,F[++z]=U,F[++z]=K,G[++z]=V,this.vertexCount+=6,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(u),W},batchTri:function(u,d,p,m,T,y,S,C,R,I,L,w,O,B,V,b,X){X===void 0&&(X=this.currentUnit);var K=!1;this.shouldFlush(3)&&(this.flush(),K=!0),this.currentBatch||(X=this.setTexture2D(b));var Q=this.vertexViewF32,U=this.vertexViewU32,W=this.vertexCount*this.currentShader.vertexComponentCount-1;return Q[++W]=d,Q[++W]=p,Q[++W]=C,Q[++W]=R,Q[++W]=X,Q[++W]=V,U[++W]=w,Q[++W]=m,Q[++W]=T,Q[++W]=C,Q[++W]=L,Q[++W]=X,Q[++W]=V,U[++W]=O,Q[++W]=y,Q[++W]=S,Q[++W]=I,Q[++W]=L,Q[++W]=X,Q[++W]=V,U[++W]=B,this.vertexCount+=3,this.currentBatch.count=this.vertexCount-this.currentBatch.start,this.onBatch(u),K},drawFillRect:function(u,d,p,m,T,y,S,C){S===void 0&&(S=this.renderer.whiteTexture),C===void 0&&(C=!0),u=Math.floor(u),d=Math.floor(d);var R=Math.floor(u+p),I=Math.floor(d+m),L=this.setTexture2D(S),w=i.getTintAppendFloatAlphaAndSwap(T,y),O=0,B=0,V=1,b=1;C&&(B=1,b=0),this.batchQuad(null,u,d,u,I,R,I,R,d,O,B,V,b,w,w,w,w,0,S,L)},setTexture2D:function(u){return u===void 0&&(u=this.renderer.whiteTexture),this.pushBatch(u)},bindTexture:function(u,d){d===void 0&&(d=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+d),p.bindTexture(p.TEXTURE_2D,u.webGLTexture),this},bindRenderTarget:function(u,d){return this.bindTexture(u.texture,d)},setTime:function(u,d){return this.set1f(u,this.game.loop.getDuration(),d),this},setBoolean:function(u,d,p){return p===void 0&&(p=this.currentShader),p.setBoolean(u,d),this},set1f:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set1f(u,d),this},set2f:function(u,d,p,m){return m===void 0&&(m=this.currentShader),m.set2f(u,d,p),this},set3f:function(u,d,p,m,T){return T===void 0&&(T=this.currentShader),T.set3f(u,d,p,m),this},set4f:function(u,d,p,m,T,y){return y===void 0&&(y=this.currentShader),y.set4f(u,d,p,m,T),this},set1fv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set1fv(u,d),this},set2fv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set2fv(u,d),this},set3fv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set3fv(u,d),this},set4fv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set4fv(u,d),this},set1iv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set1iv(u,d),this},set2iv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set2iv(u,d),this},set3iv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set3iv(u,d),this},set4iv:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set4iv(u,d),this},set1i:function(u,d,p){return p===void 0&&(p=this.currentShader),p.set1i(u,d),this},set2i:function(u,d,p,m){return m===void 0&&(m=this.currentShader),m.set2i(u,d,p),this},set3i:function(u,d,p,m,T){return T===void 0&&(T=this.currentShader),T.set3i(u,d,p,m),this},set4i:function(u,d,p,m,T,y){return y===void 0&&(y=this.currentShader),y.set4i(u,d,p,m,T),this},setMatrix2fv:function(u,d,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix2fv(u,d,p),this},setMatrix3fv:function(u,d,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix3fv(u,d,p),this},setMatrix4fv:function(u,d,p,m){return m===void 0&&(m=this.currentShader),m.setMatrix4fv(u,d,p),this},destroy:function(){this.emit(r.DESTROY,this);var u,d=this.shaders;for(u=0;u<d.length;u++)d[u].destroy();var p=this.renderTargets;for(u=0;u<p.length;u++)p[u].destroy();var m=this.renderer;return m.deleteBuffer(this.vertexBuffer),m.off(n.RESIZE,this.resize,this),m.off(n.PRE_RENDER,this.onPreRender,this),m.off(n.RENDER,this.onRender,this),m.off(n.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this.activeTextures=null,this}});v.exports=f},74797:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95428),g=t(72905),a=t(19715),r=t(83419),s=t(8054),e=t(50792),n=t(92503),h=t(50030),i=t(37867),l=t(29747),f=t(7530),u=t(32302),d=t(97480),p=t(69442),m=t(70554),T=t(88815),y=t(26128),S=t(1482),C=t(82751),R=t(84387),I=t(93567),L=t(57183),w=new r({Extends:e,initialize:function(B){e.call(this);var V=B.config,b={alpha:V.transparent,desynchronized:V.desynchronized,depth:!0,antialias:V.antialiasGL,premultipliedAlpha:V.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:V.failIfMajorPerformanceCaveat,powerPreference:V.powerPreference,preserveDrawingBuffer:V.preserveDrawingBuffer,willReadFrequently:!1};this.config={clearBeforeRender:V.clearBeforeRender,antialias:V.antialias,backgroundColor:V.backgroundColor,contextCreation:b,roundPixels:V.roundPixels,maxTextures:V.maxTextures,maxTextureSize:V.maxTextureSize,batchSize:V.batchSize,maxLights:V.maxLights,mipmapFilter:V.mipmapFilter},this.game=B,this.type=s.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=B.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.maxTextures=0,this.textureIndexes,this.glBufferWrappers=[],this.glProgramWrappers=[],this.glTextureWrappers=[],this.glFramebufferWrappers=[],this.glAttribLocationWrappers=[],this.glUniformLocationWrappers=[],this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=l,this.contextRestoredHandler=l,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats,this.compression,this.drawingBufferHeight=0,this.blankTexture=null,this.normalTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.maskSource=null,this.maskTarget=null,this.spector=null,this._debugCapture=!1,this.init(this.config)},init:function(O){var B,V=this.game,b=this.canvas,X=O.backgroundColor;if(V.config.context?B=V.config.context:B=b.getContext("webgl",O.contextCreation)||b.getContext("experimental-webgl",O.contextCreation),!B||B.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=B;var K=this,Q=function(){var F=B.getSupportedExtensions();K.supportedExtensions=F;var G="ANGLE_instanced_arrays";K.instancedArraysExtension=F.indexOf(G)>-1?B.getExtension(G):null;var z="OES_vertex_array_object";K.vaoExtension=F.indexOf(z)>-1?B.getExtension(z):null};Q(),this.contextLostHandler=function(F){K.contextLost=!0,console&&console.warn("WebGL Context lost. Renderer disabled"),K.emit(n.LOSE_WEBGL,K),F.preventDefault()},b.addEventListener("webglcontextlost",this.contextLostHandler,!1),this.contextRestoredHandler=function(F){if(B.isContextLost()){console&&console.log("WebGL Context restored, but context is still lost");return}K.currentProgram=null,K.currentFramebuffer=null,K.setBlendMode(s.BlendModes.NORMAL),B.disable(B.BLEND),B.disable(B.DEPTH_TEST),B.enable(B.CULL_FACE),K.compression=K.getCompressedTextures();var G=function(z){z.createResource()};o(K.glTextureWrappers,G),o(K.glBufferWrappers,G),o(K.glFramebufferWrappers,G),o(K.glProgramWrappers,G),o(K.glAttribLocationWrappers,G),o(K.glUniformLocationWrappers,G),K.createTemporaryTextures(),K.pipelines.restoreContext(),K.resize(K.game.scale.baseSize.width,K.game.scale.baseSize.height),Q(),K.contextLost=!1,console&&console.warn("WebGL Context restored. Renderer running again."),K.emit(n.RESTORE_WEBGL,K),F.preventDefault()},b.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),V.context=B;for(var U=0;U<=27;U++)this.blendModes.push({func:[B.ONE,B.ONE_MINUS_SRC_ALPHA],equation:B.FUNC_ADD});this.blendModes[1].func=[B.ONE,B.DST_ALPHA],this.blendModes[2].func=[B.DST_COLOR,B.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[B.ONE,B.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[B.ZERO,B.ONE_MINUS_SRC_ALPHA],equation:B.FUNC_REVERSE_SUBTRACT},this.glFormats=[B.BYTE,B.SHORT,B.UNSIGNED_BYTE,B.UNSIGNED_SHORT,B.FLOAT],this.glFuncMap={mat2:{func:B.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:B.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:B.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:B.uniform1f,length:1},"1fv":{func:B.uniform1fv,length:1},"1i":{func:B.uniform1i,length:1},"1iv":{func:B.uniform1iv,length:1},"2f":{func:B.uniform2f,length:2},"2fv":{func:B.uniform2fv,length:1},"2i":{func:B.uniform2i,length:2},"2iv":{func:B.uniform2iv,length:1},"3f":{func:B.uniform3f,length:3},"3fv":{func:B.uniform3fv,length:1},"3i":{func:B.uniform3i,length:3},"3iv":{func:B.uniform3iv,length:1},"4f":{func:B.uniform4f,length:4},"4fv":{func:B.uniform4fv,length:1},"4i":{func:B.uniform4i,length:4},"4iv":{func:B.uniform4iv,length:1}},(!O.maxTextures||O.maxTextures===-1)&&(O.maxTextures=B.getParameter(B.MAX_TEXTURE_IMAGE_UNITS)),O.maxTextureSize||(O.maxTextureSize=B.getParameter(B.MAX_TEXTURE_SIZE)),this.compression=this.getCompressedTextures(),B.disable(B.DEPTH_TEST),B.disable(B.CULL_FACE),B.enable(B.BLEND),B.clearColor(X.redGL,X.greenGL,X.blueGL,X.alphaGL);var W=["NEAREST","LINEAR","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR"];return W.indexOf(O.mipmapFilter)!==-1&&(this.mipmapFilter=B[O.mipmapFilter]),this.maxTextures=m.checkShaderMax(B,O.maxTextures),this.textureIndexes=[],this.createTemporaryTextures(),this.pipelines=new f(this),this.setBlendMode(s.BlendModes.NORMAL),this.projectionMatrix=new i().identity(),V.textures.once(p.READY,this.boot,this),this},boot:function(){var O=this.game,B=this.pipelines,V=O.scale.baseSize,b=V.width,X=V.height;this.width=b,this.height=X,this.isBooted=!0,this.renderTarget=new u(this,b,X,1,0,!0,!0),this.maskTarget=new u(this,b,X,1,0,!0,!0),this.maskSource=new u(this,b,X,1,0,!0,!0);var K=O.config;B.boot(K.pipeline,K.defaultPipeline,K.autoMobilePipeline),this.blankTexture=O.textures.getFrame("__DEFAULT").glTexture,this.normalTexture=O.textures.getFrame("__NORMAL").glTexture,this.whiteTexture=O.textures.getFrame("__WHITE").glTexture;var Q=this.gl;Q.bindFramebuffer(Q.FRAMEBUFFER,null),Q.enable(Q.SCISSOR_TEST),O.scale.on(d.RESIZE,this.onResize,this),this.resize(b,X)},createTemporaryTextures:function(){for(var O=this.gl,B=0;B<this.maxTextures;B++){var V=O.createTexture();O.activeTexture(O.TEXTURE0+B),O.bindTexture(O.TEXTURE_2D,V),O.texImage2D(O.TEXTURE_2D,0,O.RGBA,1,1,0,O.RGBA,O.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),this.textureIndexes.push(B)}},captureFrame:function(O,B){},captureNextFrame:function(){},getFps:function(){},log:function(){},startCapture:function(O,B,V){},stopCapture:function(){},onCapture:function(O){},onResize:function(O,B){(B.width!==this.width||B.height!==this.height)&&this.resize(B.width,B.height)},beginCapture:function(O,B){O===void 0&&(O=this.width),B===void 0&&(B=this.height),this.renderTarget.bind(!0,O,B),this.setProjectionMatrix(O,B)},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(O,B){var V=this.gl;return this.width=O,this.height=B,this.setProjectionMatrix(O,B),V.viewport(0,0,O,B),this.drawingBufferHeight=V.drawingBufferHeight,V.scissor(0,V.drawingBufferHeight-B,O,B),this.defaultScissor[2]=O,this.defaultScissor[3]=B,this.emit(n.RESIZE,O,B),this},getCompressedTextures:function(){var O="WEBGL_compressed_texture_",B="WEBKIT_"+O,V="EXT_texture_compression_",b=function(K,Q){var U=K.getExtension(O+Q)||K.getExtension(B+Q)||K.getExtension(V+Q);if(U){var W={};for(var F in U)W[U[F]]=F;return W}},X=this.gl;return{ETC:b(X,"etc"),ETC1:b(X,"etc1"),ATC:b(X,"atc"),ASTC:b(X,"astc"),BPTC:b(X,"bptc"),RGTC:b(X,"rgtc"),PVRTC:b(X,"pvrtc"),S3TC:b(X,"s3tc"),S3TCSRGB:b(X,"s3tc_srgb"),IMG:!0}},getCompressedTextureName:function(O,B){var V=this.compression[O.toUpperCase()];if(B in V)return V[B]},supportsCompressedTexture:function(O,B){var V=this.compression[O.toUpperCase()];return V?B?B in V:!0:!1},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(O,B){return(O!==this.projectionWidth||B!==this.projectionHeight)&&(this.projectionWidth=O,this.projectionHeight=B,this.projectionMatrix.ortho(0,O,B,0,-1e3,1e3)),this},resetProjectionMatrix:function(){return this.setProjectionMatrix(this.width,this.height)},hasExtension:function(O){return this.supportedExtensions?this.supportedExtensions.indexOf(O):!1},getExtension:function(O){return this.hasExtension(O)?(O in this.extensions||(this.extensions[O]=this.gl.getExtension(O)),this.extensions[O]):null},flush:function(){this.pipelines.flush()},pushScissor:function(O,B,V,b,X){X===void 0&&(X=this.drawingBufferHeight);var K=this.scissorStack,Q=[O,B,V,b];return K.push(Q),this.setScissor(O,B,V,b,X),this.currentScissor=Q,Q},setScissor:function(O,B,V,b,X){X===void 0&&(X=this.drawingBufferHeight);var K=this.gl,Q=this.currentScissor,U=V>0&&b>0;if(Q&&U){var W=Q[0],F=Q[1],G=Q[2],z=Q[3];U=W!==O||F!==B||G!==V||z!==b}U&&(this.flush(),K.scissor(O,X-B-b,V,b))},resetScissor:function(){var O=this.gl;O.enable(O.SCISSOR_TEST);var B=this.currentScissor;if(B){var V=B[0],b=B[1],X=B[2],K=B[3];X>0&&K>0&&O.scissor(V,this.drawingBufferHeight-b-K,X,K)}},popScissor:function(){var O=this.scissorStack;O.pop();var B=O[O.length-1];B&&this.setScissor(B[0],B[1],B[2],B[3]),this.currentScissor=B},hasActiveStencilMask:function(){var O=this.currentMask.mask,B=this.currentCameraMask.mask;return O&&O.isStencil||B&&B.isStencil},resetViewport:function(){var O=this.gl;O.viewport(0,0,this.width,this.height),this.drawingBufferHeight=O.drawingBufferHeight},setBlendMode:function(O,B){B===void 0&&(B=!1);var V=this.gl,b=this.blendModes[O];return B||O!==s.BlendModes.SKIP_CHECK&&this.currentBlendMode!==O?(this.flush(),V.enable(V.BLEND),V.blendEquation(b.equation),b.func.length>2?V.blendFuncSeparate(b.func[0],b.func[1],b.func[2],b.func[3]):V.blendFunc(b.func[0],b.func[1]),this.currentBlendMode=O,!0):!1},addBlendMode:function(O,B){var V=this.blendModes.push({func:O,equation:B});return V-1},updateBlendMode:function(O,B,V){return this.blendModes[O]&&(this.blendModes[O].func=B,V&&(this.blendModes[O].equation=V)),this},removeBlendMode:function(O){return O>17&&this.blendModes[O]&&this.blendModes.splice(O,1),this},pushFramebuffer:function(O,B,V,b,X){return O===this.currentFramebuffer?this:(this.fboStack.push(O),this.setFramebuffer(O,B,V,b,X))},setFramebuffer:function(O,B,V,b,X){if(B===void 0&&(B=!1),V===void 0&&(V=!0),b===void 0&&(b=null),X===void 0&&(X=!1),O===this.currentFramebuffer)return this;var K=this.gl,Q=this.width,U=this.height;return O&&O.renderTexture&&V?(Q=O.renderTexture.width,U=O.renderTexture.height):this.flush(),O?K.bindFramebuffer(K.FRAMEBUFFER,O.webGLFramebuffer):K.bindFramebuffer(K.FRAMEBUFFER,null),V&&K.viewport(0,0,Q,U),b&&K.framebufferTexture2D(K.FRAMEBUFFER,K.COLOR_ATTACHMENT0,K.TEXTURE_2D,b.webGLTexture,0),X&&(K.clearColor(0,0,0,0),K.clear(K.COLOR_BUFFER_BIT)),B&&(O?(this.drawingBufferHeight=U,this.pushScissor(0,0,Q,U)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=O,this},popFramebuffer:function(O,B){O===void 0&&(O=!1),B===void 0&&(B=!0);var V=this.fboStack;V.pop();var b=V[V.length-1];return b||(b=null),this.setFramebuffer(b,O,B),b},restoreFramebuffer:function(O,B){O===void 0&&(O=!1),B===void 0&&(B=!0);var V=this.fboStack,b=V[V.length-1];b||(b=null),this.currentFramebuffer=null,this.setFramebuffer(b,O,B)},setProgram:function(O){return O!==this.currentProgram?(this.flush(),this.gl.useProgram(O.webGLProgram),this.currentProgram=O,!0):!1},resetProgram:function(){return this.gl.useProgram(this.currentProgram.webGLProgramWrapper),this},createTextureFromSource:function(O,B,V,b,X){X===void 0&&(X=!1);var K=this.gl,Q=K.NEAREST,U=K.NEAREST,W=K.CLAMP_TO_EDGE,F=null;B=O?O.width:B,V=O?O.height:V;var G=h(B,V);if(G&&!X&&(W=K.REPEAT),b===s.ScaleModes.LINEAR&&this.config.antialias){var z=O&&O.compressed,Y=!z&&G||z&&O.mipmaps.length>1;Q=this.mipmapFilter&&Y?this.mipmapFilter:K.LINEAR,U=K.LINEAR}return!O&&typeof B=="number"&&typeof V=="number"?F=this.createTexture2D(0,Q,U,W,W,K.RGBA,null,B,V):F=this.createTexture2D(0,Q,U,W,W,K.RGBA,O),F},createTexture2D:function(O,B,V,b,X,K,Q,U,W,F,G,z){typeof U!="number"&&(U=Q?Q.width:1),typeof W!="number"&&(W=Q?Q.height:1);var Y=new C(this.gl,O,B,V,b,X,K,Q,U,W,F,G,z);return this.glTextureWrappers.push(Y),Y},createFramebuffer:function(O,B,V,b){this.currentFramebuffer=null;var X=new R(this.gl,O,B,V,b);return this.glFramebufferWrappers.push(X),X},beginBitmapMask:function(O,B){var V=this.gl;V&&(this.flush(),this.maskTarget.bind(!0),this.currentCameraMask.mask!==O&&(this.currentMask.mask=O,this.currentMask.camera=B))},drawBitmapMask:function(O,B,V){this.flush(),this.maskSource.bind(),this.setBlendMode(0,!0),O.renderWebGL(this,O,B),this.maskSource.unbind(!0),this.maskTarget.unbind();var b=this.gl,X=this.getCurrentStencilMask();X?(b.enable(b.STENCIL_TEST),X.mask.applyStencil(this,X.camera,!0)):this.currentMask.mask=null,this.pipelines.set(V),b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,this.maskTarget.texture.webGLTexture),b.activeTexture(b.TEXTURE1),b.bindTexture(b.TEXTURE_2D,this.maskSource.texture.webGLTexture)},createProgram:function(O,B){var V=new S(this.gl,O,B);return this.glProgramWrappers.push(V),V},createVertexBuffer:function(O,B){var V=this.gl,b=new y(V,O,V.ARRAY_BUFFER,B);return this.glBufferWrappers.push(b),b},createAttribLocation:function(O,B){var V=new I(this.gl,O,B);return this.glAttribLocationWrappers.push(V),V},createUniformLocation:function(O,B){var V=new L(this.gl,O,B);return this.glUniformLocationWrappers.push(V),V},createIndexBuffer:function(O,B){var V=this.gl,b=new y(V,O,V.ELEMENT_ARRAY_BUFFER,B);return this.glBufferWrappers.push(b),b},deleteTexture:function(O){if(O)return g(this.glTextureWrappers,O),O.destroy(),this},deleteFramebuffer:function(O){return O?(g(this.fboStack,O),g(this.glFramebufferWrappers,O),O.destroy(),this):this},deleteProgram:function(O){return O&&(g(this.glProgramWrappers,O),O.destroy()),this},deleteAttribLocation:function(O){return O&&(g(this.glAttribLocationWrappers,O),O.destroy()),this},deleteUniformLocation:function(O){return O&&(g(this.glUniformLocationWrappers,O),O.destroy()),this},deleteBuffer:function(O){return O?(g(this.glBufferWrappers,O),O.destroy(),this):this},preRenderCamera:function(O){var B=O.x,V=O.y,b=O.width,X=O.height,K=O.backgroundColor;if(O.emit(a.PRE_RENDER,O),this.pipelines.preBatchCamera(O),this.pushScissor(B,V,b,X),O.mask&&(this.currentCameraMask.mask=O.mask,this.currentCameraMask.camera=O._maskCamera,O.mask.preRenderWebGL(this,O,O._maskCamera)),K.alphaGL>0){var Q=this.pipelines.setMulti();Q.drawFillRect(B,V,b,X,m.getTintFromFloats(K.blueGL,K.greenGL,K.redGL,1),K.alphaGL)}},getCurrentStencilMask:function(){var O=null,B=this.maskStack,V=this.currentCameraMask;return B.length>0?O=B[B.length-1]:V.mask&&V.mask.isStencil&&(O=V),O},postRenderCamera:function(O){var B=O.flashEffect,V=O.fadeEffect;if(B.isRunning||V.isRunning||V.isComplete){var b=this.pipelines.setMulti();B.postRenderWebGL(b,m.getTintFromFloats),V.postRenderWebGL(b,m.getTintFromFloats)}O.dirty=!1,this.popScissor(),O.mask&&(this.currentCameraMask.mask=null,O.mask.postRenderWebGL(this,O._maskCamera)),this.pipelines.postBatchCamera(O),O.emit(a.POST_RENDER,O)},preRender:function(){if(!this.contextLost){var O=this.gl;if(O.bindFramebuffer(O.FRAMEBUFFER,null),this.config.clearBeforeRender){var B=this.config.backgroundColor;O.clearColor(B.redGL,B.greenGL,B.blueGL,B.alphaGL),O.clear(O.COLOR_BUFFER_BIT|O.DEPTH_BUFFER_BIT|O.STENCIL_BUFFER_BIT)}O.enable(O.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&O.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.emit(n.PRE_RENDER)}},render:function(O,B,V){if(!this.contextLost){var b=B.length;if(this.emit(n.RENDER,O,V),this.preRenderCamera(V),b===0){this.setBlendMode(s.BlendModes.NORMAL),this.postRenderCamera(V);return}this.currentType="";for(var X=this.currentMask,K=0;K<b;K++){this.finalType=K===b-1;var Q=B[K],U=Q.mask;X=this.currentMask,X.mask&&X.mask!==U&&X.mask.postRenderWebGL(this,X.camera),U&&X.mask!==U&&U.preRenderWebGL(this,Q,V),Q.blendMode!==this.currentBlendMode&&this.setBlendMode(Q.blendMode);var W=Q.type;W!==this.currentType&&(this.newType=!0,this.currentType=W),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=B[K+1].type===this.currentType,Q.renderWebGL(this,Q,V),this.newType=!1}X=this.currentMask,X.mask&&X.mask.postRenderWebGL(this,X.camera),this.setBlendMode(s.BlendModes.NORMAL),this.postRenderCamera(V)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(n.POST_RENDER);var O=this.snapshotState;O.callback&&(T(this.gl,O),O.callback=null)}},clearStencilMask:function(){this.gl.disable(this.gl.STENCIL_TEST)},restoreStencilMask:function(){var O=this.gl,B=this.getCurrentStencilMask();if(B){var V=B.mask;O.enable(O.STENCIL_TEST),V.invertAlpha?O.stencilFunc(O.NOTEQUAL,V.level,255):O.stencilFunc(O.EQUAL,V.level,255)}},snapshot:function(O,B,V){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,O,B,V)},snapshotArea:function(O,B,V,b,X,K,Q){var U=this.snapshotState;return U.callback=X,U.type=K,U.encoder=Q,U.getPixel=!1,U.x=O,U.y=B,U.width=V,U.height=b,this},snapshotPixel:function(O,B,V){return this.snapshotArea(O,B,1,1,V),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(O,B,V,b,X,K,Q,U,W,F,G){X===void 0&&(X=!1),K===void 0&&(K=0),Q===void 0&&(Q=0),U===void 0&&(U=B),W===void 0&&(W=V),F==="pixel"&&(X=!0,F="image/png");var z=this.currentFramebuffer;this.snapshotArea(K,Q,U,W,b,F,G);var Y=this.snapshotState;return Y.getPixel=X,Y.isFramebuffer=!0,Y.bufferWidth=B,Y.bufferHeight=V,Y.width=Math.min(Y.width,B),Y.height=Math.min(Y.height,V),this.setFramebuffer(O),T(this.gl,Y),this.setFramebuffer(z),Y.callback=null,Y.isFramebuffer=!1,this},canvasToTexture:function(O,B,V,b){V===void 0&&(V=!1),b===void 0&&(b=!1);var X=this.gl,K=X.NEAREST,Q=X.NEAREST,U=O.width,W=O.height,F=X.CLAMP_TO_EDGE,G=h(U,W);return!V&&G&&(F=X.REPEAT),this.config.antialias&&(K=G&&this.mipmapFilter?this.mipmapFilter:X.LINEAR,Q=X.LINEAR),B?(B.update(O,U,W,b,F,F,K,Q,B.format),B):this.createTexture2D(0,K,Q,F,F,X.RGBA,O,U,W,!0,!1,b)},createCanvasTexture:function(O,B,V){return B===void 0&&(B=!1),V===void 0&&(V=!1),this.canvasToTexture(O,null,B,V)},updateCanvasTexture:function(O,B,V,b){return V===void 0&&(V=!1),b===void 0&&(b=!1),this.canvasToTexture(O,B,b,V)},videoToTexture:function(O,B,V,b){V===void 0&&(V=!1),b===void 0&&(b=!1);var X=this.gl,K=X.NEAREST,Q=X.NEAREST,U=O.videoWidth,W=O.videoHeight,F=X.CLAMP_TO_EDGE,G=h(U,W);return!V&&G&&(F=X.REPEAT),this.config.antialias&&(K=G&&this.mipmapFilter?this.mipmapFilter:X.LINEAR,Q=X.LINEAR),B?(B.update(O,U,W,b,F,F,K,Q,B.format),B):this.createTexture2D(0,K,Q,F,F,X.RGBA,O,U,W,!0,!0,b)},createVideoTexture:function(O,B,V){return B===void 0&&(B=!1),V===void 0&&(V=!1),this.videoToTexture(O,null,B,V)},updateVideoTexture:function(O,B,V,b){return V===void 0&&(V=!1),b===void 0&&(b=!1),this.videoToTexture(O,B,b,V)},createUint8ArrayTexture:function(O,B,V){var b=this.gl,X=b.NEAREST,K=b.NEAREST,Q=b.CLAMP_TO_EDGE,U=h(B,V);return U&&(Q=b.REPEAT),this.createTexture2D(0,X,K,Q,Q,b.RGBA,O,B,V)},setTextureFilter:function(O,B){var V=this.gl,b=B===0?V.LINEAR:V.NEAREST;V.activeTexture(V.TEXTURE0);var X=V.getParameter(V.TEXTURE_BINDING_2D);return V.bindTexture(V.TEXTURE_2D,O.webGLTexture),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MIN_FILTER,b),V.texParameteri(V.TEXTURE_2D,V.TEXTURE_MAG_FILTER,b),O.minFilter=b,O.magFilter=b,X&&V.bindTexture(V.TEXTURE_2D,X),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);var O=function(B){B.destroy()};o(this.glAttribLocationWrappers,O),o(this.glBufferWrappers,O),o(this.glFramebufferWrappers,O),o(this.glProgramWrappers,O),o(this.glTextureWrappers,O),o(this.glUniformLocationWrappers,O),this.maskTarget.destroy(),this.maskSource.destroy(),this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});v.exports=w},38683:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95428),a=t(95540),r=t(14500),s=new o({initialize:function(n,h,i,l,f){this.pipeline=n,this.name=h,this.renderer=n.renderer,this.gl=this.renderer.gl,this.fragSrc=l,this.vertSrc=i,this.program=this.renderer.createProgram(i,l),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(f),this.createUniforms()},createAttributes:function(e){var n=0,h=0,i=[];this.vertexComponentCount=0;for(var l=0;l<e.length;l++){var f=e[l],u=f.name,d=a(f,"size",1),p=a(f,"type",r.FLOAT),m=p.enum,T=p.size,y=!!f.normalized;i.push({name:u,size:d,type:m,normalized:y,offset:h,enabled:!1,location:-1}),T===4?n+=d:n++,h+=d*T}this.vertexSize=h,this.vertexComponentCount=n,this.attributes=i},bind:function(e,n){return e===void 0&&(e=!1),n===void 0&&(n=!1),n&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){e===void 0&&(e=!1);for(var n=this.gl,h=this.renderer,i=this.vertexSize,l=this.attributes,f=this.program,u=0;u<l.length;u++){var d=l[u],p=d.size,m=d.type,T=d.offset,y=d.enabled,S=d.location,C=!!d.normalized;if(e){S!==-1&&h.deleteAttribLocation(S);var R=this.renderer.createAttribLocation(f,d.name);R.webGLAttribLocation>=0?(n.enableVertexAttribArray(R.webGLAttribLocation),n.vertexAttribPointer(R.webGLAttribLocation,p,m,C,i,T),d.enabled=!0,d.location=R):R.webGLAttribLocation!==-1&&n.disableVertexAttribArray(R.webGLAttribLocation)}else y?n.vertexAttribPointer(S.webGLAttribLocation,p,m,C,i,T):!y&&S!==-1&&S.webGLAttribLocation>-1&&(n.disableVertexAttribArray(S.webGLAttribLocation),d.location=-1)}return this},createUniforms:function(){var e=this.gl,n=this.program,h=this.uniforms,i,l,f,u=e.getProgramParameter(n.webGLProgram,e.ACTIVE_UNIFORMS);for(i=0;i<u;i++){var d=e.getActiveUniform(n.webGLProgram,i);if(d){l=d.name,f=this.renderer.createUniformLocation(n,l),f!==null&&(h[l]={name:l,location:f,setter:null,value1:null,value2:null,value3:null,value4:null});var p=l.indexOf("[");p>0&&(l=l.substr(0,p),h.hasOwnProperty(l)||(f=this.renderer.createUniformLocation(n,l),f!==null&&(h[l]={name:l,location:f,setter:null,value1:null,value2:null,value3:null,value4:null})))}}return this},syncUniforms:function(){var e=this.gl;this.renderer.setProgram(this.program);for(var n in this.uniforms){var h=this.uniforms[n];h.setter&&h.setter.call(e,h.location.webGLUniformLocation,h.value1,h.value2,h.value3,h.value4)}},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var n=this.uniforms[e];return n&&(n.value1=null,n.value2=null,n.value3=null,n.value4=null),this},setUniform1:function(e,n,h,i){var l=this.uniforms[n];return l?((i||l.value1!==h)&&(l.setter||(l.setter=e),l.value1=h,this.renderer.setProgram(this.program),e.call(this.gl,l.location.webGLUniformLocation,h),this.pipeline.currentShader=this),this):this},setUniform2:function(e,n,h,i,l){var f=this.uniforms[n];return f?((l||f.value1!==h||f.value2!==i)&&(f.setter||(f.setter=e),f.value1=h,f.value2=i,this.renderer.setProgram(this.program),e.call(this.gl,f.location.webGLUniformLocation,h,i),this.pipeline.currentShader=this),this):this},setUniform3:function(e,n,h,i,l,f){var u=this.uniforms[n];return u?((f||u.value1!==h||u.value2!==i||u.value3!==l)&&(u.setter||(u.setter=e),u.value1=h,u.value2=i,u.value3=l,this.renderer.setProgram(this.program),e.call(this.gl,u.location.webGLUniformLocation,h,i,l),this.pipeline.currentShader=this),this):this},setUniform4:function(e,n,h,i,l,f,u){var d=this.uniforms[n];return d?((u||d.value1!==h||d.value2!==i||d.value3!==l||d.value4!==f)&&(d.setter||(d.setter=e),d.value1=h,d.value2=i,d.value3=l,d.value4=f,this.renderer.setProgram(this.program),e.call(this.gl,d.location.webGLUniformLocation,h,i,l,f),this.pipeline.currentShader=this),this):this},setBoolean:function(e,n){return this.setUniform1(this.gl.uniform1i,e,Number(n))},set1f:function(e,n){return this.setUniform1(this.gl.uniform1f,e,n)},set2f:function(e,n,h){return this.setUniform2(this.gl.uniform2f,e,n,h)},set3f:function(e,n,h,i){return this.setUniform3(this.gl.uniform3f,e,n,h,i)},set4f:function(e,n,h,i,l){return this.setUniform4(this.gl.uniform4f,e,n,h,i,l)},set1fv:function(e,n){return this.setUniform1(this.gl.uniform1fv,e,n,!0)},set2fv:function(e,n){return this.setUniform1(this.gl.uniform2fv,e,n,!0)},set3fv:function(e,n){return this.setUniform1(this.gl.uniform3fv,e,n,!0)},set4fv:function(e,n){return this.setUniform1(this.gl.uniform4fv,e,n,!0)},set1iv:function(e,n){return this.setUniform1(this.gl.uniform1iv,e,n,!0)},set2iv:function(e,n){return this.setUniform1(this.gl.uniform2iv,e,n,!0)},set3iv:function(e,n){return this.setUniform1(this.gl.uniform3iv,e,n,!0)},set4iv:function(e,n){return this.setUniform1(this.gl.uniform4iv,e,n,!0)},set1i:function(e,n){return this.setUniform1(this.gl.uniform1i,e,n)},set2i:function(e,n,h){return this.setUniform2(this.gl.uniform2i,e,n,h)},set3i:function(e,n,h,i){return this.setUniform3(this.gl.uniform3i,e,n,h,i)},set4i:function(e,n,h,i,l){return this.setUniform4(this.gl.uniform4i,e,n,h,i,l)},setMatrix2fv:function(e,n,h){return this.setUniform2(this.gl.uniformMatrix2fv,e,n,h,!0)},setMatrix3fv:function(e,n,h){return this.setUniform2(this.gl.uniformMatrix3fv,e,n,h,!0)},setMatrix4fv:function(e,n,h){return this.setUniform2(this.gl.uniformMatrix4fv,e,n,h,!0)},createProgram:function(e,n){return e===void 0&&(e=this.vertSrc),n===void 0&&(n=this.fragSrc),this.program&&this.renderer.deleteProgram(this.program),this.vertSrc=e,this.fragSrc=n,this.program=this.renderer.createProgram(e,n),this.createUniforms(),this.rebind()},destroy:function(){var e=this.renderer;g(this.uniforms,function(n){e.deleteUniformLocation(n.location)}),this.uniforms=null,g(this.attributes,function(n){e.deleteAttribLocation(n.location)}),this.attributes=null,e.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null}});v.exports=s},14500:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}};v.exports=E},4159:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(14500),g=t(79291),a={PipelineManager:t(7530),Pipelines:t(96615),RenderTarget:t(32302),Utils:t(70554),WebGLPipeline:t(29100),WebGLRenderer:t(74797),WebGLShader:t(38683),Wrappers:t(9503)};a=g(!1,a,o),v.exports=a},31302:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(78908),r=t(85191),s=t(14500),e=t(29100),n=new o({Extends:e,initialize:function(i){i.fragShader=g(i,"fragShader",a),i.vertShader=g(i,"vertShader",r),i.batchSize=g(i,"batchSize",1),i.vertices=g(i,"vertices",[-1,1,-1,-7,7,1]),i.attributes=g(i,"attributes",[{name:"inPosition",size:2,type:s.FLOAT}]),e.call(this,i)},boot:function(){e.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(h,i){e.prototype.resize.call(this,h,i),this.set2f("uResolution",h,i)},beginMask:function(h,i,l){this.renderer.beginBitmapMask(h,l)},endMask:function(h,i,l){var f=this.gl,u=this.renderer,d=h.bitmapMask;d&&f&&(u.drawBitmapMask(d,i,this),l&&this.set2f("uResolution",l.width,l.height),this.set1i("uInvertMaskAlpha",h.invertAlpha),f.drawArrays(this.topology,0,3),l&&this.set2f("uResolution",this.width,this.height),f.bindTexture(f.TEXTURE_2D,null))}});v.exports=n},92651:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(58918),a=t(14811),r=t(95540),s=t(43558),e=t(89350),n=t(70554),h=new o({Extends:s,initialize:function(l){l.shaders=[n.setGlowQuality(e.FXGlowFrag,l.game),e.FXShadowFrag,e.FXPixelateFrag,e.FXVignetteFrag,e.FXShineFrag,e.FXBlurLowFrag,e.FXBlurMedFrag,e.FXBlurHighFrag,e.FXGradientFrag,e.FXBloomFrag,e.ColorMatrixFrag,e.FXCircleFrag,e.FXBarrelFrag,e.FXDisplacementFrag,e.FXWipeFrag,e.FXBokehFrag],s.call(this,l);var f=this.game;this.glow=new g.Glow(f),this.shadow=new g.Shadow(f),this.pixelate=new g.Pixelate(f),this.vignette=new g.Vignette(f),this.shine=new g.Shine(f),this.gradient=new g.Gradient(f),this.circle=new g.Circle(f),this.barrel=new g.Barrel(f),this.wipe=new g.Wipe(f),this.bokeh=new g.Bokeh(f);var u=[];u[a.GLOW]=this.onGlow,u[a.SHADOW]=this.onShadow,u[a.PIXELATE]=this.onPixelate,u[a.VIGNETTE]=this.onVignette,u[a.SHINE]=this.onShine,u[a.BLUR]=this.onBlur,u[a.GRADIENT]=this.onGradient,u[a.BLOOM]=this.onBloom,u[a.COLOR_MATRIX]=this.onColorMatrix,u[a.CIRCLE]=this.onCircle,u[a.BARREL]=this.onBarrel,u[a.DISPLACEMENT]=this.onDisplacement,u[a.WIPE]=this.onWipe,u[a.BOKEH]=this.onBokeh,this.fxHandlers=u,this.source,this.target,this.swap},onDraw:function(i,l,f){this.source=i,this.target=l,this.swap=f;var u=i.width,d=i.height,p=this.tempSprite,m=this.fxHandlers;if(p&&p.preFX)for(var T=p.preFX.list,y=0;y<T.length;y++){var S=T[y];S.active&&m[S.type].call(this,S,u,d)}this.drawToGame(this.source)},runDraw:function(){var i=this.source,l=this.target;this.copy(i,l),this.source=l,this.target=i},onGlow:function(i,l,f){var u=this.shaders[a.GLOW];this.setShader(u),this.glow.onPreRender(i,u,l,f),this.runDraw()},onShadow:function(i){var l=this.shaders[a.SHADOW];this.setShader(l),this.shadow.onPreRender(i,l),this.runDraw()},onPixelate:function(i,l,f){var u=this.shaders[a.PIXELATE];this.setShader(u),this.pixelate.onPreRender(i,u,l,f),this.runDraw()},onVignette:function(i){var l=this.shaders[a.VIGNETTE];this.setShader(l),this.vignette.onPreRender(i,l),this.runDraw()},onShine:function(i,l,f){var u=this.shaders[a.SHINE];this.setShader(u),this.shine.onPreRender(i,u,l,f),this.runDraw()},onBlur:function(i,l,f){var u=r(i,"quality"),d=this.shaders[a.BLUR+u];this.setShader(d),this.set1i("uMainSampler",0),this.set2f("resolution",l,f),this.set1f("strength",r(i,"strength")),this.set3fv("color",r(i,"glcolor"));for(var p=r(i,"x"),m=r(i,"y"),T=r(i,"steps"),y=0;y<T;y++)this.set2f("offset",p,0),this.runDraw(),this.set2f("offset",0,m),this.runDraw()},onGradient:function(i){var l=this.shaders[a.GRADIENT];this.setShader(l),this.gradient.onPreRender(i,l),this.runDraw()},onBloom:function(i,l,f){var u=this.shaders[a.BLOOM];this.copySprite(this.source,this.swap),this.setShader(u),this.set1i("uMainSampler",0),this.set1f("strength",r(i,"blurStrength")),this.set3fv("color",r(i,"glcolor"));for(var d=2/l*r(i,"offsetX"),p=2/f*r(i,"offsetY"),m=r(i,"steps"),T=0;T<m;T++)this.set2f("offset",d,0),this.runDraw(),this.set2f("offset",0,p),this.runDraw();this.blendFrames(this.swap,this.source,this.target,r(i,"strength")),this.copySprite(this.target,this.source)},onColorMatrix:function(i){this.setShader(this.colorMatrixShader),this.set1fv("uColorMatrix",i.getData()),this.set1f("uAlpha",i.alpha),this.runDraw()},onCircle:function(i,l,f){var u=this.shaders[a.CIRCLE];this.setShader(u),this.circle.onPreRender(i,u,l,f),this.runDraw()},onBarrel:function(i){var l=this.shaders[a.BARREL];this.setShader(l),this.barrel.onPreRender(i,l),this.runDraw()},onDisplacement:function(i){this.setShader(this.shaders[a.DISPLACEMENT]),this.set1i("uDisplacementSampler",1),this.set2f("amount",i.x,i.y),this.bindTexture(i.glTexture,1),this.runDraw()},onWipe:function(i){var l=this.shaders[a.WIPE];this.setShader(l),this.wipe.onPreRender(i,l),this.runDraw()},onBokeh:function(i,l,f){var u=this.shaders[a.BOKEH];this.setShader(u),this.bokeh.onPreRender(i,u,l,f),this.runDraw()},destroy:function(){return this.glow.destroy(),this.shadow.destroy(),this.pixelate.destroy(),this.vignette.destroy(),this.shine.destroy(),this.gradient.destroy(),this.circle.destroy(),this.barrel.destroy(),this.wipe.destroy(),this.bokeh.destroy(),this.fxHandlers=null,this.source=null,this.target=null,this.swap=null,s.prototype.destroy.call(this),this}});v.exports=h},96569:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(31063),r=t(57516),s=t(61340),e=t(26099),n=t(29100),h=new o({Extends:r,initialize:function(l){var f=g(l,"fragShader",a);l.fragShader=f.replace("%LIGHT_COUNT%",l.game.renderer.config.maxLights),r.call(this,l),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.currentNormalMap,this.lightsActive=!0,this.tempVec2=new e,this._tempMatrix=new s,this._tempMatrix2=new s},boot:function(){n.prototype.boot.call(this)},onRender:function(i,l){var f=i.sys.lights;if(this.lightsActive=!1,!(!f||!f.active)){var u=f.getLights(l),d=u.length;this.lightsActive=!0;var p,m=this.renderer,T=m.height,y=l.matrix,S=this.tempVec2;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",l.x,l.y,l.rotation,l.zoom),this.set3f("uAmbientLightColor",f.ambientColor.r,f.ambientColor.g,f.ambientColor.b),this.set1i("uLightCount",d),p=0;p<d;p++){var C=u[p].light,R=C.color,I="uLights["+p+"].";y.transformPoint(C.x,C.y,S),this.set2f(I+"position",S.x-l.scrollX*C.scrollFactorX*l.zoom,T-(S.y-l.scrollY*C.scrollFactorY*l.zoom)),this.set3f(I+"color",R.r,R.g,R.b),this.set1f(I+"intensity",C.intensity),this.set1f(I+"radius",C.radius)}this.currentNormalMapRotation=null}},setNormalMapRotation:function(i){if(i!==this.currentNormalMapRotation||this.vertexCount===0){this.vertexCount>0&&this.flush();var l=this.inverseRotationMatrix;if(i){var f=-i,u=Math.cos(f),d=Math.sin(f);l[1]=d,l[3]=-d,l[0]=l[4]=u}else l[0]=l[4]=1,l[1]=l[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,l),this.currentNormalMapRotation=i}},setTexture2D:function(i,l){var f=this.renderer;i===void 0&&(i=f.whiteTexture);var u=this.getNormalMap(l);this.isNewNormalMap(i,u)&&(this.flush(),this.createBatch(i),this.addTextureToBatch(u),this.currentNormalMap=u);var d=0;if(l&&l.parentContainer){var p=l.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);d=p.rotationNormalized}else l&&(d=l.rotation);return this.setNormalMapRotation(d),0},setGameObject:function(i,l){l===void 0&&(l=i.frame);var f=l.glTexture,u=this.getNormalMap(i);if(this.isNewNormalMap(f,u)&&(this.flush(),this.createBatch(f),this.addTextureToBatch(u),this.currentNormalMap=u),i.parentContainer){var d=i.getWorldTransformMatrix(this._tempMatrix,this._tempMatrix2);this.setNormalMapRotation(d.rotationNormalized)}else this.setNormalMapRotation(i.rotation);return 0},isNewNormalMap:function(i,l){return this.currentTexture!==i||this.currentNormalMap!==l},getNormalMap:function(i){var l;if(i)i.displayTexture?l=i.displayTexture.dataSource[i.displayFrame.sourceIndex]:i.texture?l=i.texture.dataSource[i.frame.sourceIndex]:i.tileset&&(Array.isArray(i.tileset)?l=i.tileset[0].image.dataSource[0]:l=i.tileset.image.dataSource[0]);else return this.renderer.normalTexture;return l?l.glTexture:this.renderer.normalTexture},batchSprite:function(i,l,f){this.lightsActive&&r.prototype.batchSprite.call(this,i,l,f)},batchTexture:function(i,l,f,u,d,p,m,T,y,S,C,R,I,L,w,O,B,V,b,X,K,Q,U,W,F,G,z,Y,$,j,Z,q){this.lightsActive&&r.prototype.batchTexture.call(this,i,l,f,u,d,p,m,T,y,S,C,R,I,L,w,O,B,V,b,X,K,Q,U,W,F,G,z,Y,$,j,Z,q)},batchTextureFrame:function(i,l,f,u,d,p,m){this.lightsActive&&r.prototype.batchTextureFrame.call(this,i,l,f,u,d,p,m)}});v.exports=h},56527:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(57516),r=t(45561),s=t(60722),e=t(14500),n=t(29100),h=new o({Extends:a,initialize:function(l){l.fragShader=g(l,"fragShader",r),l.vertShader=g(l,"vertShader",s),l.attributes=g(l,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),l.forceZero=!0,l.resizeUniform="uResolution",a.call(this,l)},boot:function(){n.prototype.boot.call(this);var i=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",i.width,i.height),this.set1i("uRoundPixels",i.config.roundPixels)}});v.exports=h},57516:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Felipe Alfonso <@bitnenfer>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(94811),a=t(95540),r=t(98840),s=t(44667),e=t(61340),n=t(70554),h=t(14500),i=t(29100),l=new o({Extends:i,initialize:function(u){var d=u.game.renderer,p=a(u,"fragShader",r);u.fragShader=n.parseFragmentShaderMaxTextures(p,d.maxTextures),u.vertShader=a(u,"vertShader",s),u.attributes=a(u,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),u.resizeUniform="uResolution",i.call(this,u),this._tempMatrix1=new e,this._tempMatrix2=new e,this._tempMatrix3=new e,this.calcMatrix=new e,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this);var f=this.renderer;this.set1iv("uMainSampler",f.textureIndexes),this.set2f("uResolution",f.width,f.height),this.set1i("uRoundPixels",f.config.roundPixels)},batchSprite:function(f,u,d){this.manager.set(this,f);var p=this._tempMatrix1,m=this._tempMatrix2,T=this._tempMatrix3,y=f.frame,S=y.glTexture,C=y.u0,R=y.v0,I=y.u1,L=y.v1,w=y.x,O=y.y,B=y.cutWidth,V=y.cutHeight,b=y.customPivot,X=f.displayOriginX,K=f.displayOriginY,Q=-X+w,U=-K+O;if(f.isCropped){var W=f._crop;(W.flipX!==f.flipX||W.flipY!==f.flipY)&&y.updateCropUVs(W,f.flipX,f.flipY),C=W.u0,R=W.v0,I=W.u1,L=W.v1,B=W.width,V=W.height,w=W.x,O=W.y,Q=-X+w,U=-K+O}var F=1,G=1;f.flipX&&(b||(Q+=-y.realWidth+X*2),F=-1),f.flipY&&(b||(U+=-y.realHeight+K*2),G=-1);var z=f.x,Y=f.y;m.applyITRS(z,Y,f.rotation,f.scaleX*F,f.scaleY*G),p.copyFrom(u.matrix),d?(p.multiplyWithOffset(d,-u.scrollX*f.scrollFactorX,-u.scrollY*f.scrollFactorY),m.e=z,m.f=Y):(m.e-=u.scrollX*f.scrollFactorX,m.f-=u.scrollY*f.scrollFactorY),p.multiply(m,T);var $=T.setQuad(Q,U,Q+B,U+V),j=n.getTintAppendFloatAlpha,Z=u.alpha,q=j(f.tintTopLeft,Z*f._alphaTL),_=j(f.tintTopRight,Z*f._alphaTR),tt=j(f.tintBottomLeft,Z*f._alphaBL),nt=j(f.tintBottomRight,Z*f._alphaBR);this.shouldFlush(6)&&this.flush();var at=this.setGameObject(f,y);this.manager.preBatch(f),this.currentShader.set1i("uRoundPixels",u.roundPixels),this.batchQuad(f,$[0],$[1],$[2],$[3],$[4],$[5],$[6],$[7],C,R,I,L,q,_,tt,nt,f.tintFill,S,at),this.manager.postBatch(f)},batchTexture:function(f,u,d,p,m,T,y,S,C,R,I,L,w,O,B,V,b,X,K,Q,U,W,F,G,z,Y,$,j,Z,q,_,tt,nt){nt===void 0&&(nt=!1),this.manager.set(this,f);var at=this._tempMatrix1,st=this._tempMatrix2,lt=this._tempMatrix3,vt=X/d+$,mt=K/p+j,pt=(X+Q)/d+$,ot=(K+U)/p+j,ct=y,ft=S,Et=-V,St=-b;if(f.isCropped){var It=f._crop,Mt=It.width,wt=It.height;ct=Mt,ft=wt,y=Mt,S=wt,X=It.x,K=It.y;var Rt=X,zt=K;L&&(Rt=Q-It.x-Mt),w&&(zt=U-It.y-wt),vt=Rt/d+$,mt=zt/p+j,pt=(Rt+Mt)/d+$,ot=(zt+wt)/p+j,Et=-V+X,St=-b+K}w=w^(!_&&u.isRenderTexture?1:0),L&&(ct*=-1,Et+=y),w&&(ft*=-1,St+=S),st.applyITRS(m,T,I,C,R),at.copyFrom(Z.matrix),q?(at.multiplyWithOffset(q,-Z.scrollX*O,-Z.scrollY*B),st.e=m,st.f=T):(st.e-=Z.scrollX*O,st.f-=Z.scrollY*B),at.multiply(st,lt);var Bt=lt.setQuad(Et,St,Et+ct,St+ft);tt==null&&(tt=this.setTexture2D(u)),f&&!nt&&this.manager.preBatch(f),this.currentShader.set1i("uRoundPixels",Z.roundPixels),this.batchQuad(f,Bt[0],Bt[1],Bt[2],Bt[3],Bt[4],Bt[5],Bt[6],Bt[7],vt,mt,pt,ot,W,F,G,z,Y,u,tt),f&&!nt&&this.manager.postBatch(f)},batchTextureFrame:function(f,u,d,p,m,T,y){this.manager.set(this);var S=this._tempMatrix1.copyFrom(T),C=this._tempMatrix2;y?S.multiply(y,C):C=S;var R=C.setQuad(u,d,u+f.width,d+f.height),I=this.setTexture2D(f.source.glTexture);p=n.getTintAppendFloatAlpha(p,m),this.batchQuad(null,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7],f.u0,f.v0,f.u1,f.v1,p,p,p,p,0,f.glTexture,I)},batchFillRect:function(f,u,d,p,m,T){this.renderer.pipelines.set(this);var y=this.calcMatrix;T&&T.multiply(m,y);var S=y.setQuad(f,u,f+d,u+p),C=this.fillTint;this.batchQuad(null,S[0],S[1],S[2],S[3],S[4],S[5],S[6],S[7],0,0,1,1,C.TL,C.TR,C.BL,C.BR,2)},batchFillTriangle:function(f,u,d,p,m,T,y,S){this.renderer.pipelines.set(this);var C=this.calcMatrix;S&&S.multiply(y,C);var R=C.getX(f,u),I=C.getY(f,u),L=C.getX(d,p),w=C.getY(d,p),O=C.getX(m,T),B=C.getY(m,T),V=this.fillTint;this.currentShader.set1i("uRoundPixels",!1),this.batchTri(null,R,I,L,w,O,B,0,0,1,1,V.TL,V.TR,V.BL,2)},batchStrokeTriangle:function(f,u,d,p,m,T,y,S,C){var R=this.tempTriangle;R[0].x=f,R[0].y=u,R[0].width=y,R[1].x=d,R[1].y=p,R[1].width=y,R[2].x=m,R[2].y=T,R[2].width=y,R[3].x=f,R[3].y=u,R[3].width=y,this.batchStrokePath(R,y,!1,S,C)},batchFillPath:function(f,u,d){this.renderer.pipelines.set(this);var p=this.calcMatrix;d&&d.multiply(u,p);for(var m=f.length,T=this.polygonCache,y,S,C=this.fillTint.TL,R=this.fillTint.TR,I=this.fillTint.BL,L=0;L<m;++L)S=f[L],T.push(S.x,S.y);y=g(T),m=y.length,this.currentShader.set1i("uRoundPixels",!1);for(var w=0;w<m;w+=3){var O=y[w+0]*2,B=y[w+1]*2,V=y[w+2]*2,b=T[O+0],X=T[O+1],K=T[B+0],Q=T[B+1],U=T[V+0],W=T[V+1],F=p.getX(b,X),G=p.getY(b,X),z=p.getX(K,Q),Y=p.getY(K,Q),$=p.getX(U,W),j=p.getY(U,W);this.batchTri(null,F,G,z,Y,$,j,0,0,1,1,C,R,I,2)}T.length=0},batchStrokePath:function(f,u,d,p,m){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var T=f.length-1,y=0;y<T;y++){var S=f[y],C=f[y+1];this.batchLine(S.x,S.y,C.x,C.y,S.width/2,C.width/2,u,y,!d&&y===T-1,p,m)}},batchLine:function(f,u,d,p,m,T,y,S,C,R,I){this.renderer.pipelines.set(this);var L=this.calcMatrix;I&&I.multiply(R,L);var w=d-f,O=p-u,B=Math.sqrt(w*w+O*O);if(B!==0){var V=m*(p-u)/B,b=m*(f-d)/B,X=T*(p-u)/B,K=T*(f-d)/B,Q=d-X,U=p-K,W=f-V,F=u-b,G=d+X,z=p+K,Y=f+V,$=u+b,j=L.getX(Q,U),Z=L.getY(Q,U),q=L.getX(W,F),_=L.getY(W,F),tt=L.getX(G,z),nt=L.getY(G,z),at=L.getX(Y,$),st=L.getY(Y,$),lt=this.strokeTint,vt=lt.TL,mt=lt.TR,pt=lt.BL,ot=lt.BR;if(this.currentShader.set1i("uRoundPixels",!1),this.batchQuad(null,at,st,q,_,j,Z,tt,nt,0,0,1,1,vt,mt,pt,ot,2),!(y<=2)){var ct=this.prevQuad,ft=this.firstQuad;S>0&&ct[4]?this.batchQuad(null,at,st,q,_,ct[0],ct[1],ct[2],ct[3],0,0,1,1,vt,mt,pt,ot,2):(ft[0]=at,ft[1]=st,ft[2]=q,ft[3]=_,ft[4]=1),C&&ft[4]?this.batchQuad(null,j,Z,tt,nt,ft[0],ft[1],ft[2],ft[3],0,0,1,1,vt,mt,pt,ot,2):(ct[0]=j,ct[1]=Z,ct[2]=tt,ct[3]=nt,ct[4]=1)}}},destroy:function(){return this._tempMatrix1.destroy(),this._tempMatrix2.destroy(),this._tempMatrix3.destroy(),this._tempMatrix1=null,this._tempMatrix1=null,this._tempMatrix1=null,i.prototype.destroy.call(this),this}});v.exports=l},43439:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(4127),r=t(89924),s=t(29100),e=new o({Extends:s,initialize:function(h){h.vertShader=g(h,"vertShader",r),h.fragShader=g(h,"fragShader",a),h.attributes=g(h,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),s.call(this,h)},onRender:function(n,h){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",h.zoom)},batchPointLight:function(n,h,i,l,f,u,d,p,m,T,y,S){var C=n.color,R=n.intensity,I=n.radius,L=n.attenuation,w=C.r*R,O=C.g*R,B=C.b*R,V=h.alpha*n.alpha;this.shouldFlush(6)&&this.flush(),this.currentBatch||this.setTexture2D(),this.batchLightVert(i,l,y,S,I,L,w,O,B,V),this.batchLightVert(f,u,y,S,I,L,w,O,B,V),this.batchLightVert(d,p,y,S,I,L,w,O,B,V),this.batchLightVert(i,l,y,S,I,L,w,O,B,V),this.batchLightVert(d,p,y,S,I,L,w,O,B,V),this.batchLightVert(m,T,y,S,I,L,w,O,B,V),this.currentBatch.count=this.vertexCount-this.currentBatch.start},batchLightVert:function(n,h,i,l,f,u,d,p,m,T){var y=this.vertexViewF32,S=this.vertexCount*this.currentShader.vertexComponentCount-1;y[++S]=n,y[++S]=h,y[++S]=i,y[++S]=l,y[++S]=f,y[++S]=u,y[++S]=d,y[++S]=p,y[++S]=m,y[++S]=T,this.vertexCount++}});v.exports=e},84057:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89422),a=t(95540),r=t(27681),s=t(49627),e=t(29100),n=new o({Extends:e,initialize:function(i){i.renderTarget=a(i,"renderTarget",1),i.fragShader=a(i,"fragShader",r),i.vertShader=a(i,"vertShader",s),i.attributes=a(i,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),i.batchSize=1,i.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],e.call(this,i),this.isPostFX=!0,this.gameObject,this.controller,this.colorMatrix=new g,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines)},bootFX:function(){e.prototype.boot.call(this);var h=this.manager.UTILITY_PIPELINE;this.fullFrame1=h.fullFrame1,this.fullFrame2=h.fullFrame2,this.halfFrame1=h.halfFrame1,this.halfFrame2=h.halfFrame2;var i=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",i.width,i.height),this.set1i("uRoundPixels",i.config.roundPixels);for(var l=this.renderTargets,f=0;f<l.length;f++)l[f].autoResize=!0},postBatch:function(h){return this.hasBooted||(this.bootFX(),this.currentRenderTarget&&this.currentRenderTarget.bind()),this.onDraw(this.currentRenderTarget),this.onPostBatch(h),this},onDraw:function(h){this.bindAndDraw(h)},getController:function(h){return h!==void 0?h:this.controller?this.controller:this},copySprite:function(h,i,l){l===void 0&&(l=!1);var f=this.gl;f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,h.texture.webGLTexture);var u=f.getParameter(f.FRAMEBUFFER_BINDING);f.bindFramebuffer(f.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,i.texture.webGLTexture,0),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),l&&(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,u))},copyFrame:function(h,i,l,f,u){this.manager.copyFrame(h,i,l,f,u)},copyToGame:function(h){this.manager.copyToGame(h)},drawFrame:function(h,i,l){this.manager.drawFrame(h,i,l,this.colorMatrix)},blendFrames:function(h,i,l,f,u){this.manager.blendFrames(h,i,l,f,u)},blendFramesAdditive:function(h,i,l,f,u){this.manager.blendFramesAdditive(h,i,l,f,u)},clearFrame:function(h,i){this.manager.clearFrame(h,i)},blitFrame:function(h,i,l,f,u,d){this.manager.blitFrame(h,i,l,f,u,d)},copyFrameRect:function(h,i,l,f,u,d,p,m){this.manager.copyFrameRect(h,i,l,f,u,d,p,m)},bindAndDraw:function(h,i,l,f,u){l===void 0&&(l=!0),f===void 0&&(f=!0);var d=this.gl,p=this.renderer;this.bind(u),this.set1i("uMainSampler",0),i?(d.viewport(0,0,i.width,i.height),d.bindFramebuffer(d.FRAMEBUFFER,i.framebuffer.webGLFramebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,i.texture.webGLTexture,0),l&&(f?d.clearColor(0,0,0,0):d.clearColor(0,0,0,1),d.clear(d.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1),p.currentFramebuffer||d.viewport(0,0,p.width,p.height)),p.restoreStencilMask(),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,h.texture.webGLTexture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6),i&&(d.bindTexture(d.TEXTURE_2D,null),d.bindFramebuffer(d.FRAMEBUFFER,p.currentFramebuffer.webGLFramebuffer))},destroy:function(){return this.controller&&this.controller.destroy(),this.gameObject=null,this.controller=null,this.colorMatrix=null,this.fullFrame1=null,this.fullFrame2=null,this.halfFrame1=null,this.halfFrame2=null,this.manager.removePostPipeline(this),e.prototype.destroy.call(this),this}});v.exports=n},43558:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(67502),a=t(83419),r=t(96293),s=t(95540),e=t(57516),n=t(27681),h=t(87841),i=t(32302),l=t(45561),f=t(60722),u=t(29100),d=new a({Extends:e,initialize:function(m){var T=s(m,"fragShader",n),y=s(m,"vertShader",f),S=s(m,"drawShader",n),C=[{name:"DrawSprite",fragShader:l,vertShader:f},{name:"CopySprite",fragShader:T,vertShader:y},{name:"DrawGame",fragShader:S,vertShader:f},{name:"ColorMatrix",fragShader:r}],R=s(m,"shaders",[]);m.shaders=C.concat(R),m.vertShader||(m.vertShader=y),m.batchSize=1,e.call(this,m),this.isPreFX=!0,this.customMainSampler=null,this.drawSpriteShader,this.copyShader,this.gameShader,this.colorMatrixShader,this.quadVertexData,this.quadVertexBuffer,this.quadVertexViewF32,this.spriteBounds=new h,this.targetBounds=new h,this.fsTarget,this.tempSprite,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){u.prototype.boot.call(this);var p=this.shaders,m=this.renderer;this.drawSpriteShader=p[0],this.copyShader=p[1],this.gameShader=p[2],this.colorMatrixShader=p[3],this.fsTarget=new i(m,m.width,m.height,1,0,!0,!0),this.renderTargets=this.manager.renderTargets.concat(this.fsTarget);var T=new ArrayBuffer(168);this.quadVertexData=T,this.quadVertexViewF32=new Float32Array(T),this.quadVertexBuffer=m.createVertexBuffer(T,this.gl.STATIC_DRAW),this.onResize(m.width,m.height),this.currentShader=this.copyShader,this.set2f("uResolution",m.width,m.height),this.set1i("uRoundPixels",m.config.roundPixels)},onResize:function(p,m){var T=this.quadVertexViewF32;T[1]=m,T[22]=m,T[14]=p,T[28]=p,T[35]=p,T[36]=m},batchQuad:function(p,m,T,y,S,C,R,I,L,w,O,B,V,b,X,K,Q,U,W){var F=Math.min(m,y,C,I),G=Math.min(T,S,R,L),z=Math.max(m,y,C,I),Y=Math.max(T,S,R,L),$=z-F,j=Y-G,Z=this.spriteBounds.setTo(F,G,$,j),q=p?p.preFX.padding:0,_=$+q*2,tt=j+q*2,nt=Math.abs(Math.max(_,tt)),at=this.manager.getRenderTarget(nt),st=this.targetBounds.setTo(0,0,at.width,at.height);g(st,Z.centerX,Z.centerY),this.tempSprite=p;var lt=this.gl,vt=this.renderer;vt.clearStencilMask(),this.setShader(this.drawSpriteShader),this.set1i("uMainSampler",0),this.set2f("uResolution",vt.width,vt.height),this.set1i("uRoundPixels",vt.config.roundPixels),this.flipProjectionMatrix(!0),p&&(this.onDrawSprite(p,at),p.preFX.onFX(this));var mt=this.fsTarget;return this.flush(),lt.viewport(0,0,vt.width,vt.height),lt.bindFramebuffer(lt.FRAMEBUFFER,mt.framebuffer.webGLFramebuffer),lt.framebufferTexture2D(lt.FRAMEBUFFER,lt.COLOR_ATTACHMENT0,lt.TEXTURE_2D,mt.texture.webGLTexture,0),lt.clearColor(0,0,0,0),lt.clear(lt.COLOR_BUFFER_BIT),this.setTexture2D(W),this.batchVert(m,T,w,O,0,U,b),this.batchVert(y,S,w,V,0,U,K),this.batchVert(C,R,B,V,0,U,Q),this.batchVert(m,T,w,O,0,U,b),this.batchVert(C,R,B,V,0,U,Q),this.batchVert(I,L,B,O,0,U,X),this.flush(),this.flipProjectionMatrix(!1),lt.activeTexture(lt.TEXTURE0),lt.bindTexture(lt.TEXTURE_2D,at.texture.webGLTexture),lt.copyTexSubImage2D(lt.TEXTURE_2D,0,0,0,st.x,st.y,st.width,st.height),lt.bindFramebuffer(lt.FRAMEBUFFER,null),lt.bindTexture(lt.TEXTURE_2D,null),this.onBatch(p),this.currentShader=this.copyShader,this.onDraw(at,this.manager.getSwapRenderTarget(),this.manager.getAltSwapRenderTarget()),!0},onDrawSprite:function(){},onCopySprite:function(){},copySprite:function(p,m,T,y,S,C,R){T===void 0&&(T=!0),y===void 0&&(y=!0),S===void 0&&(S=!1),R===void 0&&(R=this.copyShader);var I=this.gl,L=this.tempSprite;C&&(R=this.colorMatrixShader),this.currentShader=R;var w=this.setVertexBuffer(this.quadVertexBuffer);R.bind(w,!1);var O=this.renderer;if(this.set1i("uMainSampler",0),this.set2f("uResolution",O.width,O.height),this.set1i("uRoundPixels",O.config.roundPixels),L.preFX.onFXCopy(this),this.onCopySprite(p,m,L),C&&(this.set1fv("uColorMatrix",C.getData()),this.set1f("uAlpha",C.alpha)),I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,p.texture.webGLTexture),p.height>m.height)I.viewport(0,0,p.width,p.height),this.setTargetUVs(p,m);else{var B=m.height-p.height;I.viewport(0,B,p.width,p.height),this.resetUVs()}if(I.bindFramebuffer(I.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,m.texture.webGLTexture,0),T&&(I.clearColor(0,0,0,+!y),I.clear(I.COLOR_BUFFER_BIT)),S){var V=this.renderer.currentBlendMode;this.renderer.setBlendMode(o.ERASE)}I.bufferData(I.ARRAY_BUFFER,this.quadVertexData,I.STATIC_DRAW),I.drawArrays(I.TRIANGLES,0,6),S&&this.renderer.setBlendMode(V),I.bindFramebuffer(I.FRAMEBUFFER,null)},copy:function(p,m){var T=this.gl;this.set1i("uMainSampler",0),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,p.texture.webGLTexture),T.viewport(0,0,p.width,p.height),this.setUVs(0,0,0,1,1,1,1,0),T.bindFramebuffer(T.FRAMEBUFFER,m.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,m.texture.webGLTexture,0),T.clearColor(0,0,0,0),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.quadVertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null)},blendFrames:function(p,m,T,y,S){this.manager.blendFrames(p,m,T,y,S)},blendFramesAdditive:function(p,m,T,y,S){this.manager.blendFramesAdditive(p,m,T,y,S)},drawToGame:function(p){this.currentShader=null,this.setShader(this.copyShader),this.bindAndDraw(p)},copyToGame:function(p){this.currentShader=null,this.setShader(this.gameShader),this.bindAndDraw(p)},bindAndDraw:function(p){var m=this.gl,T=this.renderer;this.set1i("uMainSampler",0),this.customMainSampler?this.setTexture2D(this.customMainSampler):this.setTexture2D(p.texture);var y=this._tempMatrix1.loadIdentity(),S=this.targetBounds.x,C=this.targetBounds.y,R=S+p.width,I=C+p.height,L=y.getX(S,C),w=y.getX(S,I),O=y.getX(R,I),B=y.getX(R,C),V=y.getY(S,C),b=y.getY(S,I),X=y.getY(R,I),K=y.getY(R,C),Q=16777215;this.batchVert(L,V,0,0,0,0,Q),this.batchVert(w,b,0,1,0,0,Q),this.batchVert(O,X,1,1,0,0,Q),this.batchVert(L,V,0,0,0,0,Q),this.batchVert(O,X,1,1,0,0,Q),this.batchVert(B,K,1,0,0,0,Q),T.restoreFramebuffer(!1,!0),T.currentFramebuffer||m.viewport(0,0,T.width,T.height),T.restoreStencilMask(),this.flush(),this.tempSprite=null},onDraw:function(p){this.drawToGame(p)},setUVs:function(p,m,T,y,S,C,R,I){var L=this.quadVertexViewF32;L[2]=p,L[3]=m,L[9]=T,L[10]=y,L[16]=S,L[17]=C,L[23]=p,L[24]=m,L[30]=S,L[31]=C,L[37]=R,L[38]=I},setTargetUVs:function(p,m){var T=m.height/p.height;T>.5?T=.5-(T-.5):T=.5+(.5-T),this.setUVs(0,T,0,1+T,1,1+T,1,T)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)},destroy:function(){return this.renderer.deleteBuffer(this.quadVertexBuffer),this.drawSpriteShader=null,this.copyShader=null,this.gameShader=null,this.colorMatrixShader=null,this.quadVertexData=null,this.quadVertexBuffer=null,this.quadVertexViewF32=null,this.fsTarget=null,this.tempSprite=null,e.prototype.destroy.call(this),this}});v.exports=d},81041:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(57516),r=new o({Extends:a,initialize:function(e){e.topology=5,e.batchSize=g(e,"batchSize",256),a.call(this,e)}});v.exports=r},12385:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(57516),r=t(45561),s=t(60722),e=t(29100),n=new o({Extends:a,initialize:function(i){i.fragShader=g(i,"fragShader",r),i.vertShader=g(i,"vertShader",s),i.forceZero=!0,a.call(this,i)},boot:function(){e.prototype.boot.call(this);var h=this.renderer;this.set1i("uMainSampler",0),this.set2f("uResolution",h.width,h.height),this.set1i("uRoundPixels",h.config.roundPixels)}});v.exports=n},7589:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35407),g=t(10312),a=t(83419),r=t(89422),s=t(96293),e=t(36682),n=t(95540),h=t(48247),i=t(49627),l=t(29100),f=new a({Extends:l,initialize:function(d){d.renderTarget=n(d,"renderTarget",[{scale:1,autoResize:!0},{scale:1,autoResize:!0},{scale:.5,autoResize:!0},{scale:.5,autoResize:!0}]),d.vertShader=n(d,"vertShader",i),d.shaders=n(d,"shaders",[{name:"Copy",fragShader:e},{name:"AddBlend",fragShader:o},{name:"LinearBlend",fragShader:h},{name:"ColorMatrix",fragShader:s}]),d.attributes=n(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],d.batchSize=1,l.call(this,d),this.colorMatrix=new r,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){l.prototype.boot.call(this);var u=this.shaders,d=this.renderTargets;this.copyShader=u[0],this.addShader=u[1],this.linearShader=u[2],this.colorMatrixShader=u[3],this.fullFrame1=d[0],this.fullFrame2=d[1],this.halfFrame1=d[2],this.halfFrame2=d[3]},copyFrame:function(u,d,p,m,T){p===void 0&&(p=1),m===void 0&&(m=!0),T===void 0&&(T=!0);var y=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,u.texture.webGLTexture),d?(y.viewport(0,0,d.width,d.height),y.bindFramebuffer(y.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,d.texture.webGLTexture,0)):y.viewport(0,0,u.width,u.height),m&&(T?y.clearColor(0,0,0,0):y.clearColor(0,0,0,1),y.clear(y.COLOR_BUFFER_BIT)),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blitFrame:function(u,d,p,m,T,y,S){p===void 0&&(p=1),m===void 0&&(m=!0),T===void 0&&(T=!0),y===void 0&&(y=!1),S===void 0&&(S=!1);var C=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),C.activeTexture(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,u.texture.webGLTexture),u.height>d.height)C.viewport(0,0,u.width,u.height),this.setTargetUVs(u,d);else{var R=d.height-u.height;C.viewport(0,R,u.width,u.height)}if(C.bindFramebuffer(C.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,d.texture.webGLTexture,0),m&&(T?C.clearColor(0,0,0,0):C.clearColor(0,0,0,1),C.clear(C.COLOR_BUFFER_BIT)),y){var I=this.renderer.currentBlendMode;this.renderer.setBlendMode(g.ERASE)}S&&this.flipY(),C.bufferData(C.ARRAY_BUFFER,this.vertexData,C.STATIC_DRAW),C.drawArrays(C.TRIANGLES,0,6),y&&this.renderer.setBlendMode(I),C.bindFramebuffer(C.FRAMEBUFFER,null),C.bindTexture(C.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(u,d,p,m,T,y,S,C){S===void 0&&(S=!0),C===void 0&&(C=!0);var R=this.gl;R.bindFramebuffer(R.FRAMEBUFFER,u.framebuffer.webGLFramebuffer),R.framebufferTexture2D(R.FRAMEBUFFER,R.COLOR_ATTACHMENT0,R.TEXTURE_2D,u.texture.webGLTexture,0),S&&(C?R.clearColor(0,0,0,0):R.clearColor(0,0,0,1),R.clear(R.COLOR_BUFFER_BIT)),R.activeTexture(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,d.texture.webGLTexture),R.copyTexSubImage2D(R.TEXTURE_2D,0,0,0,p,m,T,y),R.bindFramebuffer(R.FRAMEBUFFER,null),R.bindTexture(R.TEXTURE_2D,null)},copyToGame:function(u){var d=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),d.activeTexture(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,u.texture.webGLTexture),d.bufferData(d.ARRAY_BUFFER,this.vertexData,d.STATIC_DRAW),d.drawArrays(d.TRIANGLES,0,6)},drawFrame:function(u,d,p,m){p===void 0&&(p=!0),m===void 0&&(m=this.colorMatrix);var T=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",m.getData()),this.set1f("uAlpha",m.alpha),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,u.texture.webGLTexture),d?(T.viewport(0,0,d.width,d.height),T.bindFramebuffer(T.FRAMEBUFFER,d.framebuffer.webGLFramebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,d.texture.webGLTexture,0)):T.viewport(0,0,u.width,u.height),p?T.clearColor(0,0,0,0):T.clearColor(0,0,0,1),T.clear(T.COLOR_BUFFER_BIT),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blendFrames:function(u,d,p,m,T,y){m===void 0&&(m=1),T===void 0&&(T=!0),y===void 0&&(y=this.linearShader);var S=this.gl;this.setShader(y),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",m),S.activeTexture(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,u.texture.webGLTexture),S.activeTexture(S.TEXTURE1),S.bindTexture(S.TEXTURE_2D,d.texture.webGLTexture),p?(S.bindFramebuffer(S.FRAMEBUFFER,p.framebuffer.webGLFramebuffer),S.framebufferTexture2D(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,p.texture.webGLTexture,0),S.viewport(0,0,p.width,p.height)):S.viewport(0,0,u.width,u.height),T?S.clearColor(0,0,0,0):S.clearColor(0,0,0,1),S.clear(S.COLOR_BUFFER_BIT),S.bufferData(S.ARRAY_BUFFER,this.vertexData,S.STATIC_DRAW),S.drawArrays(S.TRIANGLES,0,6),S.bindFramebuffer(S.FRAMEBUFFER,null),S.bindTexture(S.TEXTURE_2D,null)},blendFramesAdditive:function(u,d,p,m,T){this.blendFrames(u,d,p,m,T,this.addShader)},clearFrame:function(u,d){d===void 0&&(d=!0);var p=this.gl;p.viewport(0,0,u.width,u.height),p.bindFramebuffer(p.FRAMEBUFFER,u.framebuffer.webGLFramebuffer),d?p.clearColor(0,0,0,0):p.clearColor(0,0,0,1),p.clear(p.COLOR_BUFFER_BIT);var m=this.renderer.currentFramebuffer;p.bindFramebuffer(p.FRAMEBUFFER,m.webGLFramebuffer)},setUVs:function(u,d,p,m,T,y,S,C){var R=this.vertexViewF32;R[2]=u,R[3]=d,R[6]=p,R[7]=m,R[10]=T,R[11]=y,R[14]=u,R[15]=d,R[18]=T,R[19]=y,R[22]=S,R[23]=C},setTargetUVs:function(u,d){var p=d.height/u.height;p>.5?p=.5-(p-.5):p=.5+(.5-p),this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});v.exports=f},36060:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline",MOBILE_PIPELINE:"MobilePipeline",FX_PIPELINE:"FxPipeline"};v.exports=E},84817:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelineafterflush"},36712:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelinebeforeflush"},40285:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelinebind"},65918:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelineboot"},92852:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelinedestroy"},56072:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelinerebind"},57566:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pipelineresize"},77085:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AFTER_FLUSH:t(84817),BEFORE_FLUSH:t(36712),BIND:t(40285),BOOT:t(65918),DESTROY:t(92852),REBIND:t(56072),RESIZE:t(57566)}},54812:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(99155),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(s,e){s=this.getController(s),this.set1f("amount",s.amount,e)}});v.exports=r},67329:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(24400),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.steps=4,this.offsetX=1,this.offsetY=1,this.blurStrength=1,this.strength=1,this.glcolor=[1,1,1]},onPreRender:function(s){s=this.getController(s),this.set1f("strength",s.blurStrength),this.set3fv("color",s.glcolor)},onDraw:function(s){var e=this.getController(),n=this.fullFrame1,h=this.fullFrame2;this.copyFrame(s,h);for(var i=2/s.width*e.offsetX,l=2/s.height*e.offsetY,f=0;f<e.steps;f++)this.set2f("offset",i,0),this.copySprite(s,n),this.set2f("offset",0,l),this.copySprite(n,s);this.blendFrames(h,s,n,e.strength),this.copyToGame(n)}});v.exports=r},8861:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(41514),a=t(51078),r=t(94328),s=t(84057),e=new o({Extends:s,initialize:function(h){s.call(this,{game:h,shaders:[{name:"Gaussian5",fragShader:g},{name:"Gaussian9",fragShader:a},{name:"Gaussian13",fragShader:r}]}),this.activeShader=this.shaders[0],this.x=2,this.y=2,this.steps=4,this.strength=1,this.glcolor=[1,1,1]},setQualityLow:function(){return this.activeShader=this.shaders[0],this},setQualityMedium:function(){return this.activeShader=this.shaders[1],this},setQualityHigh:function(){return this.activeShader=this.shaders[2],this},onDraw:function(n){var h=this.getController(),i=this.gl,l=this.fullFrame1,f=i.getParameter(i.FRAMEBUFFER_BINDING);this.bind(this.shaders[h.quality]),i.activeTexture(i.TEXTURE0),i.viewport(0,0,n.width,n.height),this.set1i("uMainSampler",0),this.set2f("resolution",n.width,n.height),this.set1f("strength",h.strength),this.set3fv("color",h.glcolor);for(var u=0;u<h.steps;u++)this.set2f("offset",h.x,0),this.copySprite(n,l),this.set2f("offset",0,h.y),this.copySprite(l,n);i.bindFramebuffer(i.FRAMEBUFFER,f),i.bindTexture(i.TEXTURE_2D,null),this.copyToGame(n)}});v.exports=e},51051:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(90610),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.isTiltShift=!1,this.strength=1,this.blurX=1,this.blurY=1,this.radius=.5,this.amount=1,this.contrast=.2},onPreRender:function(s,e,n,h){s=this.getController(s),this.set1f("radius",s.radius,e),this.set1f("amount",s.amount,e),this.set1f("contrast",s.contrast,e),this.set1f("strength",s.strength,e),this.set2f("blur",s.blurX,s.blurY,e),this.setBoolean("isTiltShift",s.isTiltShift,e),n&&h&&this.set2f("resolution",n,h,e)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});v.exports=r},89428:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(91899),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.scale=1,this.feather=.005,this.thickness=8,this.glcolor=[1,.2,.7],this.glcolor2=[1,0,0,.4]},onPreRender:function(s,e,n,h){s=this.getController(s),this.set1f("scale",s.scale,e),this.set1f("feather",s.feather,e),this.set1f("thickness",s.thickness,e),this.set3fv("color",s.glcolor,e),this.set4fv("backgroundColor",s.glcolor2,e),n&&h&&this.set2f("resolution",n,h,e)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});v.exports=r},88904:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(84057),a=new o({Extends:g,initialize:function(s){g.call(this,{game:s})},onDraw:function(r){var s=this.fullFrame1;this.controller?this.manager.drawFrame(r,s,!0,this.controller):this.drawFrame(r,s),this.copyToGame(s)}});v.exports=a},63563:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(47838),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.x=.005,this.y=.005,this.glTexture},onBoot:function(){this.setTexture("__WHITE")},setTexture:function(s){var e=this.game.textures.getFrame(s);e&&(this.glTexture=e.glTexture)},onDraw:function(s){var e=this.getController(),n=this.fullFrame1;this.bind(),this.set1i("uMainSampler",0),this.set1i("uDisplacementSampler",1),this.set2f("amount",e.x,e.y),this.bindTexture(e.glTexture,1),this.copySprite(s,n),this.copyToGame(n)}});v.exports=r},94045:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=t(98656),r=t(84057),s=t(70554),e=new o({Extends:r,initialize:function(h,i){var l=g(i,"quality",.1),f=g(i,"distance",10);r.call(this,{game:h,fragShader:s.setGlowQuality(a,h,l,f)}),this.outerStrength=4,this.innerStrength=0,this.knockout=!1,this.glcolor=[1,1,1,1]},onPreRender:function(n,h,i,l){n=this.getController(n),this.set1f("outerStrength",n.outerStrength,h),this.set1f("innerStrength",n.innerStrength,h),this.set4fv("glowColor",n.glcolor,h),this.setBoolean("knockout",n.knockout,h),i&&l&&this.set2f("resolution",i,l,h)},onDraw:function(n){this.set2f("resolution",n.width,n.height),this.bindAndDraw(n)}});v.exports=e},74088:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(70463),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.alpha=.2,this.size=0,this.fromX=0,this.fromY=0,this.toX=0,this.toY=1,this.glcolor1=[255,0,0],this.glcolor2=[0,255,0]},onPreRender:function(s,e){s=this.getController(s),this.set1f("alpha",s.alpha,e),this.set1i("size",s.size,e),this.set3fv("color1",s.glcolor1,e),this.set3fv("color2",s.glcolor2,e),this.set2f("positionFrom",s.fromX,s.fromY,e),this.set2f("positionTo",s.toX,s.toY,e)}});v.exports=r},99636:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50831),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.amount=1},onPreRender:function(s,e,n,h){s=this.getController(s),this.set1f("amount",s.amount,e),n&&h&&this.set2f("resolution",n,h,e)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});v.exports=r},34700:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(92595),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.x=0,this.y=0,this.decay=.1,this.power=1,this.glcolor=[0,0,0,1],this.samples=6,this.intensity=1},onPreRender:function(s,e){s=this.getController(s);var n=s.samples;this.set1i("samples",n,e),this.set1f("intensity",s.intensity,e),this.set1f("decay",s.decay,e),this.set1f("power",s.power/n,e),this.set2f("lightPosition",s.x,s.y,e),this.set4fv("color",s.glcolor,e)}});v.exports=r},91157:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(72464),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.speed=.5,this.lineWidth=.5,this.gradient=3,this.reveal=!1},onPreRender:function(s,e,n,h){s=this.getController(s),this.setTime("time",e),this.set1f("speed",s.speed,e),this.set1f("lineWidth",s.lineWidth,e),this.set1f("gradient",s.gradient,e),this.setBoolean("reveal",s.reveal,e),n&&h&&this.set2f("resolution",n,h,e)},onDraw:function(s){this.set2f("resolution",s.width,s.height),this.bindAndDraw(s)}});v.exports=r},27797:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(39249),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.x=.5,this.y=.5,this.radius=.5,this.strength=.5},onPreRender:function(s,e){s=this.getController(s),this.set1f("radius",s.radius,e),this.set1f("strength",s.strength,e),this.set2f("position",s.x,s.y,e)}});v.exports=r},67603:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(2878),a=t(84057),r=new o({Extends:a,initialize:function(e){a.call(this,{game:e,fragShader:g}),this.progress=0,this.wipeWidth=.1,this.direction=0,this.axis=0,this.reveal=!1},onPreRender:function(s,e){s=this.getController(s);var n=s.progress,h=s.wipeWidth,i=s.direction,l=s.axis;this.set4f("config",n,h,i,l,e),this.setBoolean("reveal",s.reveal,e)}});v.exports=r},58918:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={Barrel:t(54812),Bloom:t(67329),Blur:t(8861),Bokeh:t(51051),Circle:t(89428),ColorMatrix:t(88904),Displacement:t(63563),Glow:t(94045),Gradient:t(74088),Pixelate:t(99636),Shadow:t(34700),Shine:t(91157),Vignette:t(27797),Wipe:t(67603)};v.exports=o},96615:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(36060),g=t(79291),a={FX:t(58918),BitmapMaskPipeline:t(31302),Events:t(77085),FXPipeline:t(92651),LightPipeline:t(96569),MobilePipeline:t(56527),MultiPipeline:t(57516),PointLightPipeline:t(43439),PostFXPipeline:t(84057),PreFXPipeline:t(43558),RopePipeline:t(81041),SinglePipeline:t(12385),UtilityPipeline:t(7589)};a=g(!1,a,o),v.exports=a},35407:v=>{v.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = frame1 + frame2 * uStrength;","}"].join(`
`)},78908:v=>{v.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","precision mediump float;","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    if (!uInvertMaskAlpha)","    {","        mainColor *= maskColor.a;","    }","    else","    {","        mainColor *= (1.0 - maskColor.a);","    }","    gl_FragColor = mainColor;","}"].join(`
`)},85191:v=>{v.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","precision mediump float;","attribute vec2 inPosition;","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}"].join(`
`)},96293:v=>{v.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","varying vec2 outTexCoord;","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","        return;","    }","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","    vec4 result;","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","    rgb *= result.a;","    gl_FragColor = vec4(rgb, result.a);","}"].join(`
`)},36682:v=>{v.exports=["#define SHADER_NAME PHASER_COPY_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float uBrightness;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}"].join(`
`)},99155:v=>{v.exports=["#define SHADER_NAME BARREL_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float amount;","varying vec2 outTexCoord;","vec2 Distort(vec2 p)","{","    float theta  = atan(p.y, p.x);","    float radius = length(p);","    radius = pow(radius, amount);","    p.x = radius * cos(theta);","    p.y = radius * sin(theta);","    return 0.5 * (p + 1.0);","}","void main()","{","    vec2 xy = 2.0 * outTexCoord - 1.0;","    vec2 texCoord = outTexCoord;","    if (length(xy) < 1.0)","    {","        texCoord = Distort(xy);","    }","    gl_FragColor = texture2D(uMainSampler, texCoord);","}"].join(`
`)},24400:v=>{v.exports=["#define SHADER_NAME BLOOM_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec4 sum = texture2D(uMainSampler, outTexCoord) * 0.204164 * strength;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord - offset * 1.407333) * 0.304005;","    sum = sum + texture2D(uMainSampler, outTexCoord + offset * 3.294215) * 0.093913;","    gl_FragColor = (sum + texture2D(uMainSampler, outTexCoord - offset * 3.294215) * 0.093913) * vec4(color, 1);","}"].join(`
`)},94328:v=>{v.exports=["#define SHADER_NAME BLUR_HIGH_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.411764705882353) * offset * strength;","    vec2 off2 = vec2(3.2941176470588234) * offset * strength;","    vec2 off3 = vec2(5.176470588235294) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.1964825501511404;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.2969069646728344;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.09447039785044732;","    col += texture2D(uMainSampler, uv + (off3 / resolution)) * 0.010381362401148057;","    col += texture2D(uMainSampler, uv - (off3 / resolution)) * 0.010381362401148057;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},41514:v=>{v.exports=["#define SHADER_NAME BLUR_LOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 offset = vec2(1.333) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.29411764705882354;","    col += texture2D(uMainSampler, uv + (offset / resolution)) * 0.35294117647058826;","    col += texture2D(uMainSampler, uv - (offset / resolution)) * 0.35294117647058826;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},51078:v=>{v.exports=["#define SHADER_NAME BLUR_MED_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec2 offset;","uniform float strength;","uniform vec3 color;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 col = vec4(0.0);","    vec2 off1 = vec2(1.3846153846) * offset * strength;","    vec2 off2 = vec2(3.2307692308) * offset * strength;","    col += texture2D(uMainSampler, uv) * 0.2270270270;","    col += texture2D(uMainSampler, uv + (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv - (off1 / resolution)) * 0.3162162162;","    col += texture2D(uMainSampler, uv + (off2 / resolution)) * 0.0702702703;","    col += texture2D(uMainSampler, uv - (off2 / resolution)) * 0.0702702703;","    gl_FragColor = col * vec4(color, 1.0);","}"].join(`
`)},90610:v=>{v.exports=["#define SHADER_NAME BOKEH_FS","precision mediump float;","#define ITERATIONS 100.0","#define ONEOVER_ITR 1.0 / ITERATIONS","#define PI 3.141596","#define GOLDEN_ANGLE 2.39996323","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float radius;","uniform float amount;","uniform float contrast;","uniform bool isTiltShift;","uniform float strength;","uniform vec2 blur;","varying vec2 outTexCoord;","vec2 Sample (in float theta, inout float r)","{","    r += 1.0 / r;","    return (r - 1.0) * vec2(cos(theta), sin(theta)) * 0.06;","}","vec3 Bokeh (sampler2D tex, vec2 uv, float radius)","{","    vec3 acc = vec3(0.0);","    vec3 div = vec3(0.0);","    vec2 pixel = vec2(resolution.y / resolution.x, 1.0) * radius * .025;","    float r = 1.0;","    for (float j = 0.0; j < GOLDEN_ANGLE * ITERATIONS; j += GOLDEN_ANGLE)","    {","        vec3 col = texture2D(tex, uv + pixel * Sample(j, r)).xyz;","        col = contrast > 0.0 ? col * col * (1.0 + contrast) : col;","        vec3 bokeh = vec3(0.5) + pow(col, vec3(10.0)) * amount;","        acc += col * bokeh;","        div += bokeh;","    }","    return acc / div;","}","void main ()","{","    float shift = 1.0;","    if (isTiltShift)","    {","        vec2 uv = vec2(gl_FragCoord.xy / resolution + vec2(-0.5, -0.5)) * 2.0;","        float centerStrength = 1.0;","        shift = length(uv * blur * strength) * centerStrength;","    }","    gl_FragColor = vec4(Bokeh(uMainSampler, outTexCoord * vec2(1.0, 1.0), radius * shift), 0.0);","}"].join(`
`)},91899:v=>{v.exports=["#define SHADER_NAME CIRCLE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform vec3 color;","uniform vec4 backgroundColor;","uniform float thickness;","uniform float scale;","uniform float feather;","varying vec2 outTexCoord;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 position = (gl_FragCoord.xy / resolution.xy) * 2.0 - 1.0;","    float aspectRatio = resolution.x / resolution.y;","    position.x *= aspectRatio;","    float grad = length(position);","    float outer = aspectRatio;","    float inner = outer - (thickness * 2.0 / resolution.y);","    if (aspectRatio >= 1.0)","    {","        float f = 2.0 + (resolution.y / resolution.x);","        outer = 1.0;","        inner = 1.0 - (thickness * f / resolution.x);","    }","    outer *= scale;","    inner *= scale;","    float circle = smoothstep(outer, outer - 0.01, grad);","    float ring = circle - smoothstep(inner, inner - feather, grad);","    texture = mix(backgroundColor * backgroundColor.a, texture, texture.a);","    texture = (texture * (circle - ring));","    gl_FragColor = vec4(texture.rgb + (ring * color), texture.a);","}"].join(`
`)},47838:v=>{v.exports=["#define SHADER_NAME DISPLACEMENT_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform sampler2D uDisplacementSampler;","uniform vec2 amount;","varying vec2 outTexCoord;","void main ()","{","    vec2 disp = (-vec2(0.5, 0.5) + texture2D(uDisplacementSampler, outTexCoord).rr) * amount;","    gl_FragColor = texture2D(uMainSampler, outTexCoord + disp).rgba;","}"].join(`
`)},98656:v=>{v.exports=["#define SHADER_NAME GLOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform float outerStrength;","uniform float innerStrength;","uniform vec2 resolution;","uniform vec4 glowColor;","uniform bool knockout;","const float PI = 3.14159265358979323846264;","const float DIST = __DIST__;","const float SIZE = min(__SIZE__, PI * 2.0);","const float STEP = ceil(PI * 2.0 / SIZE);","const float MAX_ALPHA = STEP * DIST * (DIST + 1.0) / 2.0;","void main ()","{","    vec2 px = vec2(1.0 / resolution.x, 1.0 / resolution.y);","    float totalAlpha = 0.0;","    vec2 direction;","    vec2 displaced;","    vec4 color;","    for (float angle = 0.0; angle < PI * 2.0; angle += SIZE)","    {","        direction = vec2(cos(angle), sin(angle)) * px;","        for (float curDistance = 0.0; curDistance < DIST; curDistance++)","        {","            displaced = outTexCoord + direction * (curDistance + 1.0);","            color = texture2D(uMainSampler, displaced);","            totalAlpha += (DIST - curDistance) * color.a;","        }","    }","    color = texture2D(uMainSampler, outTexCoord);","    float alphaRatio = (totalAlpha / MAX_ALPHA);","    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * color.a;","    float innerGlowStrength = min(1.0, innerGlowAlpha);","    vec4 innerColor = mix(color, glowColor, innerGlowStrength);","    float outerGlowAlpha = alphaRatio * outerStrength * (1.0 - color.a);","    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);","    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;","    if (knockout)","    {","        float resultAlpha = outerGlowAlpha + innerGlowAlpha;","        gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);","    }","    else","    {","        gl_FragColor = innerColor + outerGlowColor;","    }","}"].join(`
`)},70463:v=>{v.exports=["#define SHADER_NAME GRADIENT_FS","#define SRGB_TO_LINEAR(c) pow((c), vec3(2.2))","#define LINEAR_TO_SRGB(c) pow((c), vec3(1.0 / 2.2))","#define SRGB(r, g, b) SRGB_TO_LINEAR(vec3(float(r), float(g), float(b)) / 255.0)","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 positionFrom;","uniform vec2 positionTo;","uniform vec3 color1;","uniform vec3 color2;","uniform float alpha;","uniform int size;","varying vec2 outTexCoord;","float gradientNoise(in vec2 uv)","{","    const vec3 magic = vec3(0.06711056, 0.00583715, 52.9829189);","    return fract(magic.z * fract(dot(uv, magic.xy)));","}","float stepped (in float s, in float scale, in int steps)","{","    return steps > 0 ? floor( s / ((1.0 * scale) / float(steps))) * 1.0 / float(steps - 1) : s;","}","void main ()","{","    vec2 a = positionFrom;","    vec2 b = positionTo;","    vec2 ba = b - a;","    float d = dot(outTexCoord - a, ba) / dot(ba, ba);","    float t = size > 0 ? stepped(d, 1.0, size) : d;","    t = smoothstep(0.0, 1.0, clamp(t, 0.0, 1.0));","    vec3 color = mix(SRGB(color1.r, color1.g, color1.b), SRGB(color2.r, color2.g, color2.b), t);","    color = LINEAR_TO_SRGB(color);","    color += (1.0 / 255.0) * gradientNoise(outTexCoord) - (0.5 / 255.0);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = vec4(mix(color.rgb, texture.rgb, alpha), 1.0) * texture.a;","}"].join(`
`)},50831:v=>{v.exports=["#define SHADER_NAME PIXELATE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform float amount;","varying vec2 outTexCoord;","void main ()","{","    float pixelSize = floor(2.0 + amount);","    vec2 center = pixelSize * floor(outTexCoord * resolution / pixelSize) + pixelSize * vec2(0.5, 0.5);","    vec2 corner1 = center + pixelSize * vec2(-0.5, -0.5);","    vec2 corner2 = center + pixelSize * vec2(+0.5, -0.5);","    vec2 corner3 = center + pixelSize * vec2(+0.5, +0.5);","    vec2 corner4 = center + pixelSize * vec2(-0.5, +0.5);","    vec4 pixel = 0.4 * texture2D(uMainSampler, center / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner1 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner2 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner3 / resolution);","    pixel += 0.15 * texture2D(uMainSampler, corner4 / resolution);","    gl_FragColor = pixel;","}"].join(`
`)},92595:v=>{v.exports=["#define SHADER_NAME SHADOW_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","uniform vec2 lightPosition;","uniform vec4 color;","uniform float decay;","uniform float power;","uniform float intensity;","uniform int samples;","const int MAX = 12;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec2 pc = (lightPosition - outTexCoord) * intensity;","    float shadow = 0.0;","    float limit = max(float(MAX), float(samples));","    for (int i = 0; i < MAX; ++i)","    {","        if (i >= samples)","        {","            break;","        }","        shadow += texture2D(uMainSampler, outTexCoord + float(i) * decay / limit * pc).a * power;","    }","    float mask = 1.0 - texture.a;","    gl_FragColor = mix(texture, color, shadow * mask);","}"].join(`
`)},72464:v=>{v.exports=["#define SHADER_NAME SHINE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec2 resolution;","uniform bool reveal;","uniform float speed;","uniform float time;","uniform float lineWidth;","uniform float gradient;","varying vec2 outTexCoord;","void main ()","{","	vec2 uv = gl_FragCoord.xy / resolution.xy;","    vec4 tex = texture2D(uMainSampler, outTexCoord);","    vec4 col1 = vec4(0.3, 0.0, 0.0, 1.0);","    vec4 col2 = vec4(0.85, 0.85, 0.85, 1.0);","    uv.x = uv.x - mod(time * speed, 2.0) + 0.5;","    float y = uv.x * gradient;","    float s = smoothstep(y - lineWidth, y, uv.y) - smoothstep(y, y + lineWidth, uv.y);","    gl_FragColor = (((s * col1) + (s * col2)) * tex);","    if (!reveal)","    {","        gl_FragColor += tex;","    }","}"].join(`
`)},39249:v=>{v.exports=["#define SHADER_NAME VIGNETTE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform float radius;","uniform float strength;","uniform vec2 position;","varying vec2 outTexCoord;","void main ()","{","    vec4 col = vec4(1.0);","    float d = length(outTexCoord - position);","    if (d <= radius)","    {","        float g = d / radius;","        g = sin(g * 3.14 * strength);","    	col = vec4(g * g * g);","    }","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    gl_FragColor = texture * (1.0 - col);","}"].join(`
`)},2878:v=>{v.exports=["#define SHADER_NAME WIPE_FS","precision mediump float;","uniform sampler2D uMainSampler;","uniform vec4 config;","uniform bool reveal;","varying vec2 outTexCoord;","void main ()","{","    vec2 uv = outTexCoord;","    vec4 color0;","    vec4 color1;","    if (reveal)","    {","        color0 = vec4(0);","        color1 = texture2D(uMainSampler, uv);","    }","    else","    {","        color0 = texture2D(uMainSampler, uv);","        color1 = vec4(0);","    }","    float distance = config.x;","    float width = config.y;","    float direction = config.z;","    float axis = uv.x;","    if (config.w == 1.0)","    {","        axis = uv.y;","    }","    float adjust = mix(width, -width, distance);","    float value = smoothstep(distance - width, distance + width, abs(direction - axis) + adjust);","    gl_FragColor = mix(color1, color0, value);","}"].join(`
`)},31063:v=>{v.exports=["#define SHADER_NAME PHASER_LIGHT_FS","precision mediump float;","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","const int kMaxLights = %LIGHT_COUNT%;","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","uniform int uLightCount;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","    for (int index = 0; index < kMaxLights; ++index)","    {","        if (index < uLightCount)","        {","            Light light = uLights[index];","            vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","            vec3 lightNormal = normalize(lightDir);","            float distToSurf = length(lightDir) * uCamera.w;","            float diffuseFactor = max(dot(normal, lightNormal), 0.0);","            float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","            float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","            vec3 diffuse = light.color * diffuseFactor;","            finalColor += (attenuation * diffuse) * light.intensity;","        }","    }","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}"].join(`
`)},48247:v=>{v.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","precision mediump float;","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","varying vec2 outTexCoord;","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}"].join(`
`)},41214:v=>{v.exports=["#define SHADER_NAME PHASER_MESH_FS","precision mediump float;","uniform vec3 uLightPosition;","uniform vec3 uLightAmbient;","uniform vec3 uLightDiffuse;","uniform vec3 uLightSpecular;","uniform vec3 uFogColor;","uniform float uFogNear;","uniform float uFogFar;","uniform vec3 uMaterialAmbient;","uniform vec3 uMaterialDiffuse;","uniform vec3 uMaterialSpecular;","uniform float uMaterialShine;","uniform vec3 uCameraPosition;","uniform sampler2D uTexture;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main (void)","{","    vec4 color = texture2D(uTexture, vTextureCoord);","    vec3 ambient = uLightAmbient * uMaterialAmbient;","    vec3 norm = normalize(vNormal);","    vec3 lightDir = normalize(uLightPosition - vPosition);","    float diff = max(dot(norm, lightDir), 0.0);","    vec3 diffuse = uLightDiffuse * (diff * uMaterialDiffuse);","    vec3 viewDir = normalize(uCameraPosition - vPosition);","    vec3 reflectDir = reflect(-lightDir, norm);","    float spec = pow(max(dot(viewDir, reflectDir), 0.0), uMaterialShine);","    vec3 specular = uLightSpecular * (spec * uMaterialSpecular);","    vec3 result = (ambient + diffuse + specular) * color.rgb;","    float depth = gl_FragCoord.z / gl_FragCoord.w;","    float fogFactor = smoothstep(uFogNear, uFogFar, depth);","    gl_FragColor.rgb = mix(result.rgb, uFogColor, fogFactor);","    gl_FragColor.a = color.a;","}"].join(`
`)},39653:v=>{v.exports=["#define SHADER_NAME PHASER_MESH_VS","precision mediump float;","attribute vec3 aVertexPosition;","attribute vec3 aVertexNormal;","attribute vec2 aTextureCoord;","uniform mat4 uViewProjectionMatrix;","uniform mat4 uModelMatrix;","uniform mat4 uNormalMatrix;","varying vec2 vTextureCoord;","varying vec3 vNormal;","varying vec3 vPosition;","void main ()","{","    vTextureCoord = aTextureCoord;","    vPosition = vec3(uModelMatrix * vec4(aVertexPosition, 1.0));","    vNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));","    gl_Position = uViewProjectionMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);","}"].join(`
`)},62143:v=>{v.exports=["#define SHADER_NAME PHASER_MOBILE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},47940:v=>{v.exports=["#define SHADER_NAME PHASER_MOBILE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},98840:v=>{v.exports=["#define SHADER_NAME PHASER_MULTI_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler[%count%];","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture;","    %forloop%","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},44667:v=>{v.exports=["#define SHADER_NAME PHASER_MULTI_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},4127:v=>{v.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","precision mediump float;","uniform vec2 uResolution;","uniform float uCameraZoom;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","    float distToSurf = length(center - gl_FragCoord.xy);","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}"].join(`
`)},89924:v=>{v.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}"].join(`
`)},27681:v=>{v.exports=["#define SHADER_NAME PHASER_POSTFX_FS","precision mediump float;","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}"].join(`
`)},49627:v=>{v.exports=["#define SHADER_NAME PHASER_QUAD_VS","precision mediump float;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","varying vec2 outFragCoord;","varying vec2 outTexCoord;","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","    gl_Position = vec4(inPosition, 0, 1);","}"].join(`
`)},45561:v=>{v.exports=["#define SHADER_NAME PHASER_SINGLE_FS","#ifdef GL_FRAGMENT_PRECISION_HIGH","precision highp float;","#else","precision mediump float;","#endif","uniform sampler2D uMainSampler;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","    vec4 color = texture * texel;","    if (outTintEffect == 1.0)","    {","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        color = texel;","    }","    gl_FragColor = color;","}"].join(`
`)},60722:v=>{v.exports=["#define SHADER_NAME PHASER_SINGLE_VS","precision mediump float;","uniform mat4 uProjectionMatrix;","uniform int uRoundPixels;","uniform vec2 uResolution;","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","    if (uRoundPixels == 1)","    {","        gl_Position.xy = floor(((gl_Position.xy + 1.0) * 0.5 * uResolution) + 0.5) / uResolution * 2.0 - 1.0;","    }","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}"].join(`
`)},89350:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AddBlendFrag:t(35407),BitmapMaskFrag:t(78908),BitmapMaskVert:t(85191),ColorMatrixFrag:t(96293),CopyFrag:t(36682),FXBarrelFrag:t(99155),FXBloomFrag:t(24400),FXBlurHighFrag:t(94328),FXBlurLowFrag:t(41514),FXBlurMedFrag:t(51078),FXBokehFrag:t(90610),FXCircleFrag:t(91899),FXDisplacementFrag:t(47838),FXGlowFrag:t(98656),FXGradientFrag:t(70463),FXPixelateFrag:t(50831),FXShadowFrag:t(92595),FXShineFrag:t(72464),FXVignetteFrag:t(39249),FXWipeFrag:t(2878),LightFrag:t(31063),LinearBlendFrag:t(48247),MeshFrag:t(41214),MeshVert:t(39653),MobileFrag:t(62143),MobileVert:t(47940),MultiFrag:t(98840),MultiVert:t(44667),PointLightFrag:t(4127),PointLightVert:t(89924),PostFXFrag:t(27681),QuadVert:t(49627),SingleFrag:t(45561),SingleVert:t(60722)}},93567:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e){this.webGLAttribLocation=-1,this.gl=r,this.program=s,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLAttribLocation=-1;return}var a=this.gl;a.isContextLost()||(this.webGLAttribLocation=a.getAttribLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLAttribLocation=-1}});v.exports=g},26128:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n){this.webGLBuffer=null,this.gl=r,this.initialDataOrSize=s,this.bufferType=e,this.bufferUsage=n,this.createResource()},createResource:function(){if(this.initialDataOrSize!==null){var a=this.gl;if(!a.isContextLost()){var r=this.bufferType,s=a.createBuffer();this.webGLBuffer=s,a.bindBuffer(r,this.webGLBuffer),a.bufferData(r,this.initialDataOrSize,this.bufferUsage),a.bindBuffer(r,null)}}},destroy:function(){var a=this.gl;a.isContextLost()||a.deleteBuffer(this.webGLBuffer),this.webGLBuffer=null,this.initialDataOrSize=null,this.gl=null}});v.exports=g},84387:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g={36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"},a=new o({initialize:function(s,e,n,h,i){this.webGLFramebuffer=null,this.gl=s,this.width=e,this.height=n,this.renderTexture=h,this.addDepthStencilBuffer=!!i,this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){var s=this.renderTexture,e=0,n=r.createFramebuffer();if(this.webGLFramebuffer=n,r.bindFramebuffer(r.FRAMEBUFFER,n),s.isRenderTexture=!0,s.isAlphaPremultiplied=!1,r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s.webGLTexture,0),e=r.checkFramebufferStatus(r.FRAMEBUFFER),e!==r.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+(g[e]||e));if(this.addDepthStencilBuffer){var h=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,h),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,this.width,this.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,h)}r.bindFramebuffer(r.FRAMEBUFFER,null)}},destroy:function(){if(this.webGLFramebuffer!==null){var r=this.gl;if(!r.isContextLost()){r.bindFramebuffer(r.FRAMEBUFFER,this.webGLFramebuffer);var s=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);s!==null&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0),r.deleteTexture(s));var e=r.getFramebufferAttachmentParameter(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);e!==null&&r.deleteRenderbuffer(e),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(this.webGLFramebuffer)}this.renderTexture=null,this.webGLFramebuffer=null,this.gl=null}}});v.exports=a},1482:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e){this.webGLProgram=null,this.gl=r,this.vertexSource=s,this.fragmentSource=e,this.createResource()},createResource:function(){var a=this.gl;if(!a.isContextLost()){var r=a.createProgram(),s=a.createShader(a.VERTEX_SHADER),e=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(s,this.vertexSource),a.shaderSource(e,this.fragmentSource),a.compileShader(s),a.compileShader(e);var n=`Shader failed:
`;if(!a.getShaderParameter(s,a.COMPILE_STATUS))throw new Error("Vertex "+n+a.getShaderInfoLog(s));if(!a.getShaderParameter(e,a.COMPILE_STATUS))throw new Error("Fragment "+n+a.getShaderInfoLog(e));if(a.attachShader(r,s),a.attachShader(r,e),a.linkProgram(r),!a.getProgramParameter(r,a.LINK_STATUS))throw new Error("Link "+n+a.getProgramInfoLog(r));a.useProgram(r),this.webGLProgram=r}},destroy:function(){this.webGLProgram&&(this.gl.isContextLost()||this.gl.deleteProgram(this.webGLProgram),this.webGLProgram=null,this.gl=null)}});v.exports=g},82751:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50030),a=new o({initialize:function(s,e,n,h,i,l,f,u,d,p,m,T,y){this.webGLTexture=null,this.isRenderTexture=!1,this.gl=s,this.mipLevel=e,this.minFilter=n,this.magFilter=h,this.wrapT=i,this.wrapS=l,this.format=f,this.pixels=u,this.width=d,this.height=p,this.pma=m??!0,this.forceSize=!!T,this.flipY=!!y,this.__SPECTOR_Metadata={},this.createResource()},createResource:function(){var r=this.gl;if(!r.isContextLost()){if(this.pixels instanceof a){this.webGLTexture=this.pixels.webGLTexture;return}var s=r.createTexture();s.__SPECTOR_Metadata=this.__SPECTOR_Metadata,this.webGLTexture=s,this._processTexture()}},update:function(r,s,e,n,h,i,l,f,u){if(!(s===0||e===0)){this.pixels=r,this.width=s,this.height=e,this.flipY=n,this.wrapS=h,this.wrapT=i,this.minFilter=l,this.magFilter=f,this.format=u;var d=this.gl;d.isContextLost()||this._processTexture()}},_processTexture:function(){var r=this.gl;r.activeTexture(r.TEXTURE0);var s=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,this.webGLTexture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.minFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.magFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.wrapT),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.pma),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,this.flipY);var e=this.pixels,n=this.mipLevel,h=this.width,i=this.height,l=this.format,f=!1;if(e==null)r.texImage2D(r.TEXTURE_2D,n,l,h,i,0,l,r.UNSIGNED_BYTE,null),f=g(h,i);else if(e.compressed){h=e.width,i=e.height,f=e.generateMipmap;for(var u=0;u<e.mipmaps.length;u++)r.compressedTexImage2D(r.TEXTURE_2D,u,e.internalFormat,e.mipmaps[u].width,e.mipmaps[u].height,0,e.mipmaps[u].data)}else e instanceof Uint8Array?(r.texImage2D(r.TEXTURE_2D,n,l,h,i,0,l,r.UNSIGNED_BYTE,e),f=g(h,i)):(this.forceSize||(h=e.width,i=e.height),r.texImage2D(r.TEXTURE_2D,n,l,l,r.UNSIGNED_BYTE,e),f=g(h,i));f&&r.generateMipmap(r.TEXTURE_2D),s?r.bindTexture(r.TEXTURE_2D,s):r.bindTexture(r.TEXTURE_2D,null)},spectorMetadata:{get:function(){return this.__SPECTOR_Metadata},set:function(r){this.__SPECTOR_Metadata=r,this.gl.isContextLost()||(this.webGLTexture.__SPECTOR_Metadata=r)}},destroy:function(){this.webGLTexture!==null&&(this.gl.isContextLost()||this.pixels instanceof a||this.gl.deleteTexture(this.webGLTexture),this.pixels=null,this.webGLTexture=null,this.gl=null)}});v.exports=a},57183:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e){this.webGLUniformLocation=null,this.gl=r,this.program=s,this.name=e,this.createResource()},createResource:function(){if(this.program.webGLProgram===null){this.webGLUniformLocation=null;return}var a=this.gl;a.isContextLost()||(this.webGLUniformLocation=a.getUniformLocation(this.program.webGLProgram,this.name))},destroy:function(){this.gl=null,this.program=null,this.name=null,this.webGLUniformLocation=null}});v.exports=g},9503:(v,E,t)=>{/**
 * @author       Benjamin D. Richards <benjamindrichards@gmail.com>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={WebGLAttribLocationWrapper:t(93567),WebGLBufferWrapper:t(26128),WebGLProgramWrapper:t(1482),WebGLTextureWrapper:t(82751),WebGLFramebufferWrapper:t(84387),WebGLUniformLocationWrapper:t(57183)};v.exports=o},76531:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(13560),g=t(83419),a=t(50792),r=t(97480),s=t(8443),e=t(57811),n=t(74403),h=t(45818),i=t(29747),l=t(87841),f=t(86555),u=t(56583),d=t(26099),p=t(38058),m=new g({Extends:a,initialize:function(y){a.call(this),this.game=y,this.canvas,this.canvasBounds=new l,this.parent=null,this.parentIsWindow=!1,this.parentSize=new f,this.gameSize=new f,this.baseSize=new f,this.displaySize=new f,this.scaleMode=o.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new d(1,1),this.autoRound=!1,this.autoCenter=o.CENTER.NO_CENTER,this.orientation=o.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.domlisteners={orientationChange:i,windowResize:i,fullScreenChange:i,fullScreenError:i}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(s.BOOT,this.boot,this)},boot:function(){var T=this.game;this.canvas=T.canvas,this.fullscreen=T.device.fullscreen,this.scaleMode!==o.SCALE_MODE.RESIZE&&this.scaleMode!==o.SCALE_MODE.EXPAND&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===o.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),T.events.on(s.PRE_STEP,this.step,this),T.events.once(s.READY,this.refresh,this),T.events.once(s.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(T){this.getParent(T),this.getParentBounds();var y=T.width,S=T.height,C=T.scaleMode,R=T.zoom,I=T.autoRound;if(typeof y=="string")if(y.substr(-1)!=="%")y=parseInt(y,10);else{var L=this.parentSize.width;L===0&&(L=window.innerWidth);var w=parseInt(y,10)/100;y=Math.floor(L*w)}if(typeof S=="string")if(S.substr(-1)!=="%")S=parseInt(S,10);else{var O=this.parentSize.height;O===0&&(O=window.innerHeight);var B=parseInt(S,10)/100;S=Math.floor(O*B)}this.scaleMode=C,this.autoRound=I,this.autoCenter=T.autoCenter,this.resizeInterval=T.resizeInterval,I&&(y=Math.floor(y),S=Math.floor(S)),this.gameSize.setSize(y,S),R===o.ZOOM.MAX_ZOOM&&(R=this.getMaxZoom()),this.zoom=R,R!==1&&(this._resetZoom=!0),this.baseSize.setSize(y,S),I&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),T.minWidth>0&&this.displaySize.setMin(T.minWidth*R,T.minHeight*R),T.maxWidth>0&&this.displaySize.setMax(T.maxWidth*R,T.maxHeight*R),this.displaySize.setSize(y,S),(T.snapWidth>0||T.snapHeight>0)&&this.displaySize.setSnap(T.snapWidth,T.snapHeight),this.orientation=h(y,S)},getParent:function(T){var y=T.parent;if(y!==null){if(this.parent=n(y),this.parentIsWindow=this.parent===document.body,T.expandParent&&T.scaleMode!==o.SCALE_MODE.NONE){var S=this.parent.getBoundingClientRect();(this.parentIsWindow||S.height===0)&&(document.documentElement.style.height="100%",document.body.style.height="100%",S=this.parent.getBoundingClientRect(),!this.parentIsWindow&&S.height===0&&(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}T.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=n(T.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var T=this.parentSize,y=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(y.height=e(!0));var S=y.width,C=y.height;if(T.width!==S||T.height!==C)return T.setSize(S,C),!0;if(this.canvas){var R=this.canvasBounds,I=this.canvas.getBoundingClientRect();if(I.x!==R.x||I.y!==R.y)return!0}return!1},lockOrientation:function(T){var y=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return y?y.call(screen,T):!1},setParentSize:function(T,y){return this.parentSize.setSize(T,y),this.refresh()},setGameSize:function(T,y){var S=this.autoRound;S&&(T=Math.floor(T),y=Math.floor(y));var C=this.width,R=this.height;return this.gameSize.resize(T,y),this.baseSize.resize(T,y),S&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(T/y),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(C,R)},resize:function(T,y){var S=this.zoom,C=this.autoRound;C&&(T=Math.floor(T),y=Math.floor(y));var R=this.width,I=this.height;this.gameSize.resize(T,y),this.baseSize.resize(T,y),C&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(T*S,y*S),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var L=this.canvas.style,w=T*S,O=y*S;return C&&(w=Math.floor(w),O=Math.floor(O)),(w!==T||O!==y)&&(L.width=w+"px",L.height=O+"px"),this.refresh(R,I)},setZoom:function(T){return this.zoom=T,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},setSnap:function(T,y){return T===void 0&&(T=0),y===void 0&&(y=T),this.displaySize.setSnap(T,y),this.refresh()},refresh:function(T,y){T===void 0&&(T=this.width),y===void 0&&(y=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var S=this.game.domContainer;if(S){this.baseSize.setCSS(S);var C=this.canvas.style,R=S.style;R.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",R.marginLeft=C.marginLeft,R.marginTop=C.marginTop}return this.emit(r.RESIZE,this.gameSize,this.baseSize,this.displaySize,T,y),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var T=h(this.width,this.height);T!==this.orientation&&(this.orientation=T,this.emit(r.ORIENTATION_CHANGE,T))}},updateScale:function(){var T=this.canvas.style,y=this.gameSize.width,S=this.gameSize.height,C,R,I=this.zoom,L=this.autoRound;if(this.scaleMode===o.SCALE_MODE.NONE)this.displaySize.setSize(y*I,S*I),C=this.displaySize.width,R=this.displaySize.height,L&&(C=Math.floor(C),R=Math.floor(R)),this._resetZoom&&(T.width=C+"px",T.height=R+"px",this._resetZoom=!1);else if(this.scaleMode===o.SCALE_MODE.RESIZE)this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),C=this.displaySize.width,R=this.displaySize.height,L&&(C=Math.floor(C),R=Math.floor(R)),this.canvas.width=C,this.canvas.height=R;else if(this.scaleMode===o.SCALE_MODE.EXPAND){this.displaySize.setSize(this.parentSize.width,this.parentSize.height),C=this.displaySize.width,R=this.displaySize.height,L&&(C=Math.floor(C),R=Math.floor(R)),T.width=C+"px",T.height=R+"px";var w=this.parentSize.width/this.gameSize.width,O=this.parentSize.height/this.gameSize.height;w<O?this.baseSize.setSize(this.gameSize.width,this.parentSize.height/w):this.baseSize.setSize(this.displaySize.width/O,this.gameSize.height),C=this.baseSize.width,R=this.baseSize.height,L&&(C=Math.floor(C),R=Math.floor(R)),this.canvas.width=C,this.canvas.height=R}else this.displaySize.setSize(this.parentSize.width,this.parentSize.height),C=this.displaySize.width,R=this.displaySize.height,L&&(C=Math.floor(C),R=Math.floor(R)),T.width=C+"px",T.height=R+"px";this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var T=u(this.parentSize.width,this.gameSize.width,0,!0),y=u(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(T,y),1)},updateCenter:function(){var T=this.autoCenter;if(T!==o.CENTER.NO_CENTER){var y=this.canvas,S=y.style,C=y.getBoundingClientRect(),R=C.width,I=C.height,L=Math.floor((this.parentSize.width-R)/2),w=Math.floor((this.parentSize.height-I)/2);T===o.CENTER.CENTER_HORIZONTALLY?w=0:T===o.CENTER.CENTER_VERTICALLY&&(L=0),S.marginLeft=L+"px",S.marginTop=w+"px"}},updateBounds:function(){var T=this.canvasBounds,y=this.canvas.getBoundingClientRect();T.x=y.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),T.y=y.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),T.width=y.width,T.height=y.height},transformX:function(T){return(T-this.canvasBounds.left)*this.displayScale.x},transformY:function(T){return(T-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(T){T===void 0&&(T={navigationUI:"hide"});var y=this.fullscreen;if(!y.available){this.emit(r.FULLSCREEN_UNSUPPORTED);return}if(!y.active){var S=this.getFullscreenTarget();y.keyboard?S[y.request](Element.ALLOW_KEYBOARD_INPUT):S[y.request](T)}},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(r.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(T){this.removeFullscreenTarget(),this.emit(r.FULLSCREEN_FAILED,T)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var T=document.createElement("div");T.style.margin="0",T.style.padding="0",T.style.width="100%",T.style.height="100%",this.fullscreenTarget=T,this._createdFullscreenTarget=!0}if(this._createdFullscreenTarget){var y=this.canvas.parentNode;y.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)}return this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var T=this.fullscreenTarget;if(T&&T.parentNode){var y=T.parentNode;y.insertBefore(this.canvas,T),y.removeChild(T)}}},stopFullscreen:function(){var T=this.fullscreen;if(!T.available)return this.emit(r.FULLSCREEN_UNSUPPORTED),!1;T.active&&document[T.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(r.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(T){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(T)},startListeners:function(){var T=this,y=this.domlisteners;if(y.orientationChange=function(){T.updateBounds(),T._checkOrientation=!0,T.dirty=!0,T.refresh()},y.windowResize=function(){T.updateBounds(),T.dirty=!0},window.addEventListener("orientationchange",y.orientationChange,!1),window.addEventListener("resize",y.windowResize,!1),this.fullscreen.available){y.fullScreenChange=function(C){return T.onFullScreenChange(C)},y.fullScreenError=function(C){return T.onFullScreenError(C)};var S=["webkit","moz",""];S.forEach(function(C){document.addEventListener(C+"fullscreenchange",y.fullScreenChange,!1),document.addEventListener(C+"fullscreenerror",y.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",y.fullScreenChange,!1),document.addEventListener("MSFullscreenError",y.fullScreenError,!1)}},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},getViewPort:function(T,y){T instanceof p||(y=T,T=void 0),y===void 0&&(y=new l);var S=this.baseSize,C=this.parentSize,R=this.canvasBounds,I=this.displayScale,L=R.x>=0?0:-(R.x*I.x),w=R.y>=0?0:-(R.y*I.y),O;C.width>=R.width?O=S.width:O=S.width-(R.width-C.width)*I.x;var B;return C.height>=R.height?B=S.height:B=S.height-(R.height-C.height)*I.y,y.setTo(L,w,O,B),T&&(y.width/=T.zoomX,y.height/=T.zoomY,y.centerX=T.centerX+T.scrollX,y.centerY=T.centerY+T.scrollY),y},step:function(T,y){this.parent&&(this._lastCheck+=y,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var T=this.domlisteners;window.removeEventListener("orientationchange",T.orientationChange,!1),window.removeEventListener("resize",T.windowResize,!1);var y=["webkit","moz",""];y.forEach(function(S){document.removeEventListener(S+"fullscreenchange",T.fullScreenChange,!1),document.removeEventListener(S+"fullscreenerror",T.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",T.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",T.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===o.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===o.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});v.exports=m},64743:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},39218:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},81050:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5,EXPAND:6}},80805:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},13560:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={CENTER:t(64743),ORIENTATION:t(39218),SCALE_MODE:t(81050),ZOOM:t(80805)};v.exports=o},56139:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="enterfullscreen"},2336:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="fullscreenfailed"},47412:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="fullscreenunsupported"},51452:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="leavefullscreen"},20666:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="orientationchange"},47945:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resize"},97480:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ENTER_FULLSCREEN:t(56139),FULLSCREEN_FAILED:t(2336),FULLSCREEN_UNSUPPORTED:t(47412),LEAVE_FULLSCREEN:t(51452),ORIENTATION_CHANGE:t(20666),RESIZE:t(47945)}},93364:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(13560),a={Center:t(64743),Events:t(97480),Orientation:t(39218),ScaleManager:t(76531),ScaleModes:t(81050),Zoom:t(80805)};a=o(!1,a,g.CENTER),a=o(!1,a,g.ORIENTATION),a=o(!1,a,g.SCALE_MODE),a=o(!1,a,g.ZOOM),v.exports=a},27397:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=t(35355),a=function(r){var s=r.game.config.defaultPhysicsSystem,e=o(r.settings,"physics",!1);if(!(!s&&!e)){var n=[];if(s&&n.push(g(s+"Physics")),e)for(var h in e)h=g(h.concat("Physics")),n.indexOf(h)===-1&&n.push(h);return n}};v.exports=a},52106:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a){var r=a.plugins.getDefaultScenePlugins(),s=o(a.settings,"plugins",!1);return Array.isArray(s)?s:r||[]};v.exports=g},87033:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"};v.exports=E},97482:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(2368),a=new o({initialize:function(s){this.sys=new g(this,s),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});v.exports=a},60903:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89993),a=t(44594),r=t(8443),s=t(35154),e=t(54899),n=t(29747),h=t(97482),i=t(2368),l=new o({initialize:function(u,d){if(this.game=u,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,this.systemScene,d){Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++)this._pending.push({key:"default",scene:d[p],autoStart:p===0,data:{}})}u.events.once(r.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){this.systemScene=this.createSceneFromInstance("__SYSTEM",new h),this.game.events.emit(r.SYSTEM_READY,this.systemScene,this);var f,u,d,p;for(f=0;f<this._pending.length;f++){u=this._pending[f],d=u.key,p=u.scene;var m;p instanceof h?m=this.createSceneFromInstance(d,p):typeof p=="object"?m=this.createSceneFromObject(d,p):typeof p=="function"&&(m=this.createSceneFromFunction(d,p)),d=m.sys.settings.key,this.keys[d]=m,this.scenes.push(m),this._data[d]&&(m.sys.settings.data=this._data[d].data,this._data[d].autoStart&&(u.autoStart=!0)),(u.autoStart||m.sys.settings.active)&&this._start.push(d)}for(this._pending.length=0,this._data={},this.isBooted=!0,f=0;f<this._start.length;f++)u=this._start[f],this.start(u);this._start.length=0}},processQueue:function(){var f=this._pending.length,u=this._queue.length;if(!(f===0&&u===0)){var d,p;if(f){for(d=0;d<f;d++)p=this._pending[d],this.add(p.key,p.scene,p.autoStart,p.data);for(d=0;d<this._start.length;d++)p=this._start[d],this.start(p);this._start.length=0,this._pending.length=0}for(d=0;d<this._queue.length;d++)p=this._queue[d],this[p.op](p.keyA,p.keyB);this._queue.length=0}},add:function(f,u,d,p){if(d===void 0&&(d=!1),p===void 0&&(p={}),this.isProcessing||!this.isBooted)return this._pending.push({key:f,scene:u,autoStart:d,data:p}),this.isBooted||(this._data[f]={data:p}),null;f=this.getKey(f,u);var m;return u instanceof h?m=this.createSceneFromInstance(f,u):typeof u=="object"?(u.key=f,m=this.createSceneFromObject(f,u)):typeof u=="function"&&(m=this.createSceneFromFunction(f,u)),m.sys.settings.data=p,f=m.sys.settings.key,this.keys[f]=m,this.scenes.push(m),(d||m.sys.settings.active)&&(this._pending.length?this._start.push(f):this.start(f)),m},remove:function(f){if(this.isProcessing)this._queue.push({op:"remove",keyA:f,keyB:null});else{var u=this.getScene(f);if(!u||u.sys.isTransitioning())return this;var d=this.scenes.indexOf(u),p=u.sys.settings.key;d>-1&&(delete this.keys[p],this.scenes.splice(d,1),this._start.indexOf(p)>-1&&(d=this._start.indexOf(p),this._start.splice(d,1)),u.sys.destroy())}return this},bootScene:function(f){var u=f.sys,d=u.settings;u.sceneUpdate=n,f.init&&(f.init.call(f,d.data),d.status=g.INIT,d.isTransition&&u.events.emit(a.TRANSITION_INIT,d.transitionFrom,d.transitionDuration));var p;u.load&&(p=u.load,p.reset()),p&&f.preload?(f.preload.call(f),d.status=g.LOADING,p.once(e.COMPLETE,this.loadComplete,this),p.start()):this.create(f)},loadComplete:function(f){this.game.sound&&this.game.sound.onBlurPausedSounds&&this.game.sound.unlock(),this.create(f.scene)},payloadComplete:function(f){this.bootScene(f.scene)},update:function(f,u){this.processQueue(),this.isProcessing=!0;for(var d=this.scenes.length-1;d>=0;d--){var p=this.scenes[d].sys;p.settings.status>g.START&&p.settings.status<=g.RUNNING&&p.step(f,u),p.scenePlugin&&p.scenePlugin._target&&p.scenePlugin.step(f,u)}},render:function(f){for(var u=0;u<this.scenes.length;u++){var d=this.scenes[u].sys;d.settings.visible&&d.settings.status>=g.LOADING&&d.settings.status<g.SLEEPING&&d.render(f)}this.isProcessing=!1},create:function(f){var u=f.sys,d=u.settings;f.create&&(d.status=g.CREATING,f.create.call(f,d.data),d.status===g.DESTROYED)||(d.isTransition&&u.events.emit(a.TRANSITION_START,d.transitionFrom,d.transitionDuration),f.update&&(u.sceneUpdate=f.update),d.status=g.RUNNING,u.events.emit(a.CREATE,f))},createSceneFromFunction:function(f,u){var d=new u;if(d instanceof h){var p=d.sys.settings.key;if(p!==""&&(f=p),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return this.createSceneFromInstance(f,d)}else return d.sys=new i(d),d.sys.settings.key=f,d.sys.init(this.game),d},createSceneFromInstance:function(f,u){var d=u.sys.settings.key;return d===""&&(u.sys.settings.key=f),u.sys.init(this.game),u},createSceneFromObject:function(f,u){var d=new h(u),p=d.sys.settings.key;p!==""?f=p:d.sys.settings.key=f,d.sys.init(this.game);for(var m=["init","preload","create","update","render"],T=0;T<m.length;T++){var y=s(u,m[T],null);y&&(d[m[T]]=y)}if(u.hasOwnProperty("extend")){for(var S in u.extend)if(u.extend.hasOwnProperty(S)){var C=u.extend[S];S==="data"&&d.hasOwnProperty("data")&&typeof C=="object"?d.data.merge(C):S!=="sys"&&(d[S]=C)}}return d},getKey:function(f,u){if(f||(f="default"),typeof u=="function")return f;if(u instanceof h?f=u.sys.settings.key:typeof u=="object"&&u.hasOwnProperty("key")&&(f=u.key),this.keys.hasOwnProperty(f))throw new Error("Cannot add a Scene with duplicate key: "+f);return f},getScenes:function(f,u){f===void 0&&(f=!0),u===void 0&&(u=!1);for(var d=[],p=this.scenes,m=0;m<p.length;m++){var T=p[m];T&&(!f||f&&T.sys.isActive())&&d.push(T)}return u?d.reverse():d},getScene:function(f){if(typeof f=="string"){if(this.keys[f])return this.keys[f]}else for(var u=0;u<this.scenes.length;u++)if(f===this.scenes[u])return f;return null},isActive:function(f){var u=this.getScene(f);return u?u.sys.isActive():null},isPaused:function(f){var u=this.getScene(f);return u?u.sys.isPaused():null},isVisible:function(f){var u=this.getScene(f);return u?u.sys.isVisible():null},isSleeping:function(f){var u=this.getScene(f);return u?u.sys.isSleeping():null},pause:function(f,u){var d=this.getScene(f);return d&&d.sys.pause(u),this},resume:function(f,u){var d=this.getScene(f);return d&&d.sys.resume(u),this},sleep:function(f,u){var d=this.getScene(f);return d&&!d.sys.isTransitioning()&&d.sys.sleep(u),this},wake:function(f,u){var d=this.getScene(f);return d&&d.sys.wake(u),this},run:function(f,u){var d=this.getScene(f);if(!d){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===f){this.queueOp("start",f,u);break}return this}d.sys.isSleeping()?d.sys.wake(u):d.sys.isPaused()?d.sys.resume(u):this.start(f,u)},start:function(f,u){if(!this.isBooted)return this._data[f]={autoStart:!0,data:u},this;var d=this.getScene(f);if(!d)return console.warn("Scene not found for key: "+f),this;var p=d.sys,m=p.settings.status;if(m>=g.START&&m<=g.CREATING)return this;if(m>=g.RUNNING&&m<=g.SLEEPING)p.shutdown(),p.sceneUpdate=n,p.start(u);else{p.sceneUpdate=n,p.start(u);var T;if(p.load&&(T=p.load),T&&p.settings.hasOwnProperty("pack")&&(T.reset(),T.addPack({payload:p.settings.pack})))return p.settings.status=g.LOADING,T.once(e.COMPLETE,this.payloadComplete,this),T.start(),this}return this.bootScene(d),this},stop:function(f,u){var d=this.getScene(f);if(d&&!d.sys.isTransitioning()&&d.sys.settings.status!==g.SHUTDOWN){var p=d.sys.load;p&&(p.off(e.COMPLETE,this.loadComplete,this),p.off(e.COMPLETE,this.payloadComplete,this)),d.sys.shutdown(u)}return this},switch:function(f,u){var d=this.getScene(f),p=this.getScene(u);return d&&p&&d!==p&&(this.sleep(f),this.isSleeping(u)?this.wake(u):this.start(u)),this},getAt:function(f){return this.scenes[f]},getIndex:function(f){var u=this.getScene(f);return this.scenes.indexOf(u)},bringToTop:function(f){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:f,keyB:null});else{var u=this.getIndex(f);if(u!==-1&&u<this.scenes.length){var d=this.getScene(f);this.scenes.splice(u,1),this.scenes.push(d)}}return this},sendToBack:function(f){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:f,keyB:null});else{var u=this.getIndex(f);if(u!==-1&&u>0){var d=this.getScene(f);this.scenes.splice(u,1),this.scenes.unshift(d)}}return this},moveDown:function(f){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:f,keyB:null});else{var u=this.getIndex(f);if(u>0){var d=u-1,p=this.getScene(f),m=this.getAt(d);this.scenes[u]=m,this.scenes[d]=p}}return this},moveUp:function(f){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:f,keyB:null});else{var u=this.getIndex(f);if(u<this.scenes.length-1){var d=u+1,p=this.getScene(f),m=this.getAt(d);this.scenes[u]=m,this.scenes[d]=p}}return this},moveAbove:function(f,u){if(f===u)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:f,keyB:u});else{var d=this.getIndex(f),p=this.getIndex(u);if(d!==-1&&p!==-1&&p<d){var m=this.getAt(p);this.scenes.splice(p,1),this.scenes.splice(d+(p>d),0,m)}}return this},moveBelow:function(f,u){if(f===u)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:f,keyB:u});else{var d=this.getIndex(f),p=this.getIndex(u);if(d!==-1&&p!==-1&&p>d){var m=this.getAt(p);this.scenes.splice(p,1),d===0?this.scenes.unshift(m):this.scenes.splice(d-(p<d),0,m)}}return this},queueOp:function(f,u,d){return this._queue.push({op:f,keyA:u,keyB:d}),this},swapPosition:function(f,u){if(f===u)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:f,keyB:u});else{var d=this.getIndex(f),p=this.getIndex(u);if(d!==p&&d!==-1&&p!==-1){var m=this.getAt(d);this.scenes[d]=this.scenes[p],this.scenes[p]=m}}return this},dump:function(){for(var f=[],u=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],d=0;d<this.scenes.length;d++){var p=this.scenes[d].sys,m=p.settings.visible&&(p.settings.status===g.RUNNING||p.settings.status===g.PAUSED)?"[*] ":"[-] ";m+=p.settings.key+" ("+u[p.settings.status]+")",f.push(m)}console.log(f.join(`
`))},destroy:function(){for(var f=0;f<this.scenes.length;f++){var u=this.scenes[f].sys;u.destroy()}this.systemScene.sys.destroy(),this.update=n,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null,this.systemScene=null}});v.exports=l},52209:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(44594),r=t(95540),s=t(37277),e=new g({initialize:function(h){this.scene=h,this.systems=h.sys,this.settings=h.sys.settings,this.key=h.sys.settings.key,this.manager=h.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,h.sys.events.once(a.BOOT,this.boot,this),h.sys.events.on(a.START,this.pluginStart,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(a.SHUTDOWN,this.shutdown,this)},start:function(n,h){return n===void 0&&(n=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",n,h),this},restart:function(n){var h=this.key;return this.manager.queueOp("stop",h),this.manager.queueOp("start",h,n),this},transition:function(n){n===void 0&&(n={});var h=r(n,"target",!1),i=this.manager.getScene(h);if(!h||!this.checkValidTransition(i))return!1;var l=r(n,"duration",1e3);this._elapsed=0,this._target=i,this._duration=l,this._willSleep=r(n,"sleep",!1),this._willRemove=r(n,"remove",!1);var f=r(n,"onUpdate",null);f&&(this._onUpdate=f,this._onUpdateScope=r(n,"onUpdateScope",this.scene));var u=r(n,"allowInput",!1);this.settings.transitionAllowInput=u;var d=i.sys.settings;d.isTransition=!0,d.transitionFrom=this.scene,d.transitionDuration=l,d.transitionAllowInput=u,r(n,"moveAbove",!1)?this.manager.moveAbove(this.key,h):r(n,"moveBelow",!1)&&this.manager.moveBelow(this.key,h),i.sys.isSleeping()?i.sys.wake(r(n,"data")):this.manager.start(h,r(n,"data"));var p=r(n,"onStart",null),m=r(n,"onStartScope",this.scene);return p&&p.call(m,this.scene,i,l),this.systems.events.emit(a.TRANSITION_OUT,i,l),!0},checkValidTransition:function(n){return!(!n||n.sys.isActive()||n.sys.isTransitioning()||n===this.scene||this.systems.isTransitioning())},step:function(n,h){this._elapsed+=h,this.transitionProgress=o(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var n=this._target.sys,h=this._target.sys.settings;n.events.emit(a.TRANSITION_COMPLETE,this.scene),h.isTransition=!1,h.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(n,h,i,l){return this.manager.add(n,h,i,l)},launch:function(n,h){return n&&n!==this.key&&this.manager.queueOp("start",n,h),this},run:function(n,h){return n&&n!==this.key&&this.manager.queueOp("run",n,h),this},pause:function(n,h){return n===void 0&&(n=this.key),this.manager.queueOp("pause",n,h),this},resume:function(n,h){return n===void 0&&(n=this.key),this.manager.queueOp("resume",n,h),this},sleep:function(n,h){return n===void 0&&(n=this.key),this.manager.queueOp("sleep",n,h),this},wake:function(n,h){return n===void 0&&(n=this.key),this.manager.queueOp("wake",n,h),this},switch:function(n){return n!==this.key&&this.manager.queueOp("switch",this.key,n),this},stop:function(n,h){return n===void 0&&(n=this.key),this.manager.queueOp("stop",n,h),this},setActive:function(n,h,i){h===void 0&&(h=this.key);var l=this.manager.getScene(h);return l&&l.sys.setActive(n,i),this},setVisible:function(n,h){h===void 0&&(h=this.key);var i=this.manager.getScene(h);return i&&i.sys.setVisible(n),this},isSleeping:function(n){return n===void 0&&(n=this.key),this.manager.isSleeping(n)},isActive:function(n){return n===void 0&&(n=this.key),this.manager.isActive(n)},isPaused:function(n){return n===void 0&&(n=this.key),this.manager.isPaused(n)},isVisible:function(n){return n===void 0&&(n=this.key),this.manager.isVisible(n)},swapPosition:function(n,h){return h===void 0&&(h=this.key),n!==h&&this.manager.swapPosition(n,h),this},moveAbove:function(n,h){return h===void 0&&(h=this.key),n!==h&&this.manager.moveAbove(n,h),this},moveBelow:function(n,h){return h===void 0&&(h=this.key),n!==h&&this.manager.moveBelow(n,h),this},remove:function(n){return n===void 0&&(n=this.key),this.manager.remove(n),this},moveUp:function(n){return n===void 0&&(n=this.key),this.manager.moveUp(n),this},moveDown:function(n){return n===void 0&&(n=this.key),this.manager.moveDown(n),this},bringToTop:function(n){return n===void 0&&(n=this.key),this.manager.bringToTop(n),this},sendToBack:function(n){return n===void 0&&(n=this.key),this.manager.sendToBack(n),this},get:function(n){return this.manager.getScene(n)},getStatus:function(n){var h=this.manager.getScene(n);if(h)return h.sys.getStatus()},getIndex:function(n){return n===void 0&&(n=this.key),this.manager.getIndex(n)},shutdown:function(){var n=this.systems.events;n.off(a.SHUTDOWN,this.shutdown,this),n.off(a.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});s.register("ScenePlugin",e,"scenePlugin"),v.exports=e},55681:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89993),g=t(35154),a=t(46975),r=t(87033),s={create:function(e){return typeof e=="string"?e={key:e}:e===void 0&&(e={}),{status:o.PENDING,key:g(e,"key",""),active:g(e,"active",!1),visible:g(e,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:g(e,"pack",!1),cameras:g(e,"cameras",null),map:g(e,"map",a(r,g(e,"mapAdd",{}))),physics:g(e,"physics",{}),loader:g(e,"loader",{}),plugins:g(e,"plugins",!1),input:g(e,"input",{})}}};v.exports=s},2368:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(89993),a=t(42363),r=t(44594),s=t(27397),e=t(52106),n=t(29747),h=t(55681),i=new o({initialize:function(f,u){this.scene=f,this.game,this.renderer,this.config=u,this.settings=h.create(u),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=n},init:function(l){this.settings.status=g.INIT,this.sceneUpdate=n,this.game=l,this.renderer=l.renderer,this.canvas=l.canvas,this.context=l.context;var f=l.plugins;this.plugins=f,f.addToScene(this,a.Global,[a.CoreScene,e(this),s(this)]),this.events.emit(r.BOOT,this),this.settings.isBooted=!0},step:function(l,f){var u=this.events;u.emit(r.PRE_UPDATE,l,f),u.emit(r.UPDATE,l,f),this.sceneUpdate.call(this.scene,l,f),u.emit(r.POST_UPDATE,l,f)},render:function(l){var f=this.displayList;f.depthSort(),this.events.emit(r.PRE_RENDER,l),this.cameras.render(l,f),this.events.emit(r.RENDER,l)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(l){var f=this.settings,u=this.getStatus();return u!==g.CREATING&&u!==g.RUNNING?console.warn("Cannot pause non-running Scene",f.key):this.settings.active&&(f.status=g.PAUSED,f.active=!1,this.events.emit(r.PAUSE,this,l)),this},resume:function(l){var f=this.events,u=this.settings;return this.settings.active||(u.status=g.RUNNING,u.active=!0,f.emit(r.RESUME,this,l)),this},sleep:function(l){var f=this.settings,u=this.getStatus();return u!==g.CREATING&&u!==g.RUNNING?console.warn("Cannot sleep non-running Scene",f.key):(f.status=g.SLEEPING,f.active=!1,f.visible=!1,this.events.emit(r.SLEEP,this,l)),this},wake:function(l){var f=this.events,u=this.settings;return u.status=g.RUNNING,u.active=!0,u.visible=!0,f.emit(r.WAKE,this,l),u.isTransition&&f.emit(r.TRANSITION_WAKE,u.transitionFrom,u.transitionDuration),this},getData:function(){return this.settings.data},getStatus:function(){return this.settings.status},canInput:function(){var l=this.settings.status;return l>g.PENDING&&l<=g.RUNNING},isSleeping:function(){return this.settings.status===g.SLEEPING},isActive:function(){return this.settings.status===g.RUNNING},isPaused:function(){return this.settings.status===g.PAUSED},isTransitioning:function(){return this.settings.isTransition||this.scenePlugin._target!==null},isTransitionOut:function(){return this.scenePlugin._target!==null&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(l){return this.settings.visible=l,this},setActive:function(l,f){return l?this.resume(f):this.pause(f)},start:function(l){var f=this.events,u=this.settings;l&&(u.data=l),u.status=g.START,u.active=!0,u.visible=!0,f.emit(r.START,this),f.emit(r.READY,this,l)},shutdown:function(l){var f=this.events,u=this.settings;f.off(r.TRANSITION_INIT),f.off(r.TRANSITION_START),f.off(r.TRANSITION_COMPLETE),f.off(r.TRANSITION_OUT),u.status=g.SHUTDOWN,u.active=!1,u.visible=!1,f.emit(r.SHUTDOWN,this,l)},destroy:function(){var l=this.events,f=this.settings;f.status=g.DESTROYED,f.active=!1,f.visible=!1,l.emit(r.DESTROY,this),l.removeAllListeners();for(var u=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],d=0;d<u.length;d++)this[u[d]]=null}});v.exports=i},89993:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9};v.exports=E},69830:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="addedtoscene"},7919:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="boot"},46763:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="create"},11763:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="destroy"},71555:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pause"},36735:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="postupdate"},3809:v=>{/**
 * @author       samme
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="prerender"},90716:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="preupdate"},58262:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="ready"},91633:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="removedfromscene"},10319:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="render"},87132:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resume"},81961:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="shutdown"},90194:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="sleep"},6265:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="start"},33178:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="transitioncomplete"},43063:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="transitioninit"},11259:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="transitionout"},61611:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="transitionstart"},45209:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="transitionwake"},22966:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="update"},21747:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="wake"},44594:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ADDED_TO_SCENE:t(69830),BOOT:t(7919),CREATE:t(46763),DESTROY:t(11763),PAUSE:t(71555),POST_UPDATE:t(36735),PRE_RENDER:t(3809),PRE_UPDATE:t(90716),READY:t(58262),REMOVED_FROM_SCENE:t(91633),RENDER:t(10319),RESUME:t(87132),SHUTDOWN:t(81961),SLEEP:t(90194),START:t(6265),TRANSITION_COMPLETE:t(33178),TRANSITION_INIT:t(43063),TRANSITION_OUT:t(11259),TRANSITION_START:t(61611),TRANSITION_WAKE:t(45209),UPDATE:t(22966),WAKE:t(21747)}},62194:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89993),g=t(79291),a={Events:t(44594),GetPhysicsPlugins:t(27397),GetScenePlugins:t(52106),SceneManager:t(60903),ScenePlugin:t(52209),Settings:t(55681),Systems:t(2368)};a=g(!1,a,o),v.exports=a},30341:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(14463),r=t(79291),s=t(29747),e=new o({Extends:g,initialize:function(h,i,l){g.call(this),this.manager=h,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=r(this.config,l),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(console.error("addMarker "+n.name+" already exists in Sound"),!1):(n=r(!0,{name:"",start:0,duration:this.totalDuration-(n.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},n),this.markers[n.name]=n,!0)},updateMarker:function(n){return!n||!n.name||typeof n.name!="string"?!1:this.markers[n.name]?(this.markers[n.name]=r(!0,this.markers[n.name],n),!0):(console.warn("Audio Marker: "+n.name+" missing in Sound: "+this.key),!1)},removeMarker:function(n){var h=this.markers[n];return h?(this.markers[n]=null,h):null},play:function(n,h){if(n===void 0&&(n=""),typeof n=="object"&&(h=n,n=""),typeof n!="string")return!1;if(!n)this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;else{if(!this.markers[n])return console.warn("Marker: "+n+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[n],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}return this.resetConfig(),this.currentConfig=r(this.currentConfig,h),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return this.isPaused||!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!this.isPaused||this.isPlaying?!1:(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!this.isPaused&&!this.isPlaying?!1:(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:s,calculateRate:function(){var n=1.0005777895065548,h=this.currentConfig.detune+this.manager.detune,i=Math.pow(n,h);this.totalRate=this.currentConfig.rate*this.manager.rate*i},destroy:function(){this.pendingRemove||(this.stop(),this.emit(a.DESTROY,this),this.removeAllListeners(),this.pendingRemove=!0,this.manager=null,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});v.exports=e},85034:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(41786),a=t(50792),r=t(14463),s=t(8443),e=t(46710),n=t(58731),h=t(29747),i=t(26099),l=new o({Extends:a,initialize:function(u){a.call(this),this.game=u,this.jsonCache=u.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,this.gameLostFocus=!1,this.listenerPosition=new i,u.events.on(s.BLUR,this.onGameBlur,this),u.events.on(s.FOCUS,this.onGameFocus,this),u.events.on(s.PRE_STEP,this.update,this),u.events.once(s.DESTROY,this.destroy,this)},add:h,addAudioSprite:function(f,u){u===void 0&&(u={});var d=this.add(f,u);d.spritemap=this.jsonCache.get(f).spritemap;for(var p in d.spritemap)if(d.spritemap.hasOwnProperty(p)){var m=g(u),T=d.spritemap[p];m.loop=T.hasOwnProperty("loop")?T.loop:!1,d.addMarker({name:p,start:T.start,duration:T.end-T.start,config:m})}return d},get:function(f){return n(this.sounds,"key",f)},getAll:function(f){return f?e(this.sounds,"key",f):e(this.sounds)},getAllPlaying:function(){return e(this.sounds,"isPlaying",!0)},play:function(f,u){var d=this.add(f);return d.once(r.COMPLETE,d.destroy,d),u?u.name?(d.addMarker(u),d.play(u.name)):d.play(u):d.play()},playAudioSprite:function(f,u,d){var p=this.addAudioSprite(f);return p.once(r.COMPLETE,p.destroy,p),p.play(u,d)},remove:function(f){var u=this.sounds.indexOf(f);return u!==-1?(f.destroy(),this.sounds.splice(u,1),!0):!1},removeAll:function(){this.sounds.forEach(function(f){f.destroy()}),this.sounds.length=0},removeByKey:function(f){for(var u=0,d=this.sounds.length-1;d>=0;d--){var p=this.sounds[d];p.key===f&&(p.destroy(),this.sounds.splice(d,1),u++)}return u},pauseAll:function(){this.forEachActiveSound(function(f){f.pause()}),this.emit(r.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(f){f.resume()}),this.emit(r.RESUME_ALL,this)},setListenerPosition:h,stopAll:function(){this.forEachActiveSound(function(f){f.stop()}),this.emit(r.STOP_ALL,this)},stopByKey:function(f){var u=0;return this.getAll(f).forEach(function(d){d.stop()&&u++}),u},unlock:h,onBlur:h,onFocus:h,onGameBlur:function(){this.gameLostFocus=!0,this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.gameLostFocus=!1,this.pauseOnBlur&&this.onFocus()},update:function(f,u){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(r.UNLOCKED,this));for(var d=this.sounds.length-1;d>=0;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(p){p.update(f,u)})},destroy:function(){this.game.events.off(s.BLUR,this.onGameBlur,this),this.game.events.off(s.FOCUS,this.onGameFocus,this),this.game.events.off(s.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.listenerPosition=null,this.game=null},forEachActiveSound:function(f,u){var d=this;this.sounds.forEach(function(p,m){p&&!p.pendingRemove&&f.call(u||d,p,m,d.sounds)})},setRate:function(f){return this.rate=f,this},rate:{get:function(){return this._rate},set:function(f){this._rate=f,this.forEachActiveSound(function(u){u.calculateRate()}),this.emit(r.GLOBAL_RATE,this,f)}},setDetune:function(f){return this.detune=f,this},detune:{get:function(){return this._detune},set:function(f){this._detune=f,this.forEachActiveSound(function(u){u.calculateRate()}),this.emit(r.GLOBAL_DETUNE,this,f)}}});v.exports=l},14747:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33684),g=t(25960),a=t(57490),r={create:function(s){var e=s.config.audio,n=s.device.audio;return e.noAudio||!n.webAudio&&!n.audioData?new g(s):n.webAudio&&!e.disableWebAudio?new a(s):new o(s)}};v.exports=r},19723:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="complete"},98882:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="decodedall"},57506:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="decoded"},73146:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="destroy"},11305:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="detune"},40577:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="detune"},30333:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="mute"},20394:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="rate"},21802:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="volume"},1299:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="looped"},99190:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="loop"},97125:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="mute"},89259:v=>{/**
 * @author       pi-kei
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pan"},79986:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pauseall"},17586:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pause"},19618:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="play"},42306:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="rate"},10387:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resumeall"},48959:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resume"},9960:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="seek"},19180:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="stopall"},98328:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="stop"},50401:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="unlocked"},52498:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="volume"},14463:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={COMPLETE:t(19723),DECODED:t(57506),DECODED_ALL:t(98882),DESTROY:t(73146),DETUNE:t(11305),GLOBAL_DETUNE:t(40577),GLOBAL_MUTE:t(30333),GLOBAL_RATE:t(20394),GLOBAL_VOLUME:t(21802),LOOP:t(99190),LOOPED:t(1299),MUTE:t(97125),PAN:t(89259),PAUSE_ALL:t(79986),PAUSE:t(17586),PLAY:t(19618),RATE:t(42306),RESUME_ALL:t(10387),RESUME:t(48959),SEEK:t(9960),STOP_ALL:t(19180),STOP:t(98328),UNLOCKED:t(50401),VOLUME:t(52498)}},64895:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30341),g=t(83419),a=t(14463),r=t(45319),s=new g({Extends:o,initialize:function(n,h,i){if(i===void 0&&(i={}),this.tags=n.game.cache.audio.get(h),!this.tags)throw new Error('No cached audio asset with key "'+h);this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,o.call(this,n,h,i)},play:function(e,n){return this.manager.isLocked(this,"play",[e,n])||!o.prototype.play.call(this,e,n)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.PLAY,this),!0)},pause:function(){return this.manager.isLocked(this,"pause")||this.startTime>0||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.isLocked(this,"resume")||this.startTime>0||!o.prototype.resume.call(this)||!this.pickAndPlayAudioTag()?!1:(this.emit(a.RESUME,this),!0)},stop:function(){return this.manager.isLocked(this,"stop")||!o.prototype.stop.call(this)?!1:(this.stopAndReleaseAudioTag(),this.emit(a.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var e=this.currentConfig.seek,n=this.currentConfig.delay,h=(this.currentMarker?this.currentMarker.start:0)+e;return this.previousTime=h,this.audio.currentTime=h,this.applyConfig(),n===0?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+n*1e3,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var e=0;e<this.tags.length;e++){var n=this.tags[e];if(n.dataset.used==="false")return n.dataset.used="true",this.audio=n,!0}if(!this.manager.override)return!1;var h=[];this.manager.forEachActiveSound(function(l){l.key===this.key&&l.audio&&h.push(l)},this),h.sort(function(l,f){return l.loop===f.loop?f.seek/f.duration-l.seek/l.duration:l.loop?1:-1});var i=h[0];return this.audio=i.audio,i.reset(),i.audio=null,i.startTime=0,i.previousTime=0,!0},playCatchPromise:function(){var e=this.audio.play();e&&e.catch(function(n){console.warn(n)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){o.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(e){if(this.isPlaying){if(this.startTime>0){this.startTime<e-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,e-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());return}var n=this.currentMarker?this.currentMarker.start:0,h=n+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=h-this.manager.loopEndOffset?(this.audio.currentTime=n+Math.max(0,i-h),i=this.audio.currentTime):i<n&&(this.audio.currentTime+=n,i=this.audio.currentTime),i<this.previousTime&&this.emit(a.LOOPED,this);else if(i>=h){this.reset(),this.stopAndReleaseAudioTag(),this.emit(a.COMPLETE,this);return}this.previousTime=i}},destroy:function(){o.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=r(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){o.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(e){this.currentConfig.mute=e,!this.manager.isLocked(this,"mute",e)&&(this.updateMute(),this.emit(a.MUTE,this,e))}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.currentConfig.volume},set:function(e){this.currentConfig.volume=e,!this.manager.isLocked(this,"volume",e)&&(this.updateVolume(),this.emit(a.VOLUME,this,e))}},setVolume:function(e){return this.volume=e,this},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,!this.manager.isLocked(this,a.RATE,e)&&(this.calculateRate(),this.emit(a.RATE,this,e))}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,!this.manager.isLocked(this,a.DETUNE,e)&&(this.calculateRate(),this.emit(a.DETUNE,this,e))}},setDetune:function(e){return this.detune=e,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.isLocked(this,"seek",e)||this.startTime>0||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.isPlaying?(this.previousTime=e,this.audio.currentTime=e):this.isPaused&&(this.currentConfig.seek=e),this.emit(a.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,!this.manager.isLocked(this,"loop",e)&&(this.audio&&(this.audio.loop=e),this.emit(a.LOOP,this,e))}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.currentConfig.pan},set:function(e){this.currentConfig.pan=e,this.emit(a.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});v.exports=s},33684:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85034),g=t(83419),a=t(14463),r=t(64895),s=new g({Extends:o,initialize:function(n){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,o.call(this,n)},add:function(e,n){var h=new r(this,e,n);return this.sounds.push(h),h},unlock:function(){this.locked=!1;var e=this;if(this.game.cache.audio.entries.each(function(l,f){for(var u=0;u<f.length;u++)if(f[u].dataset.locked==="true")return e.locked=!0,!1;return!0}),!!this.locked){var n=!1,h=function(){n=!0},i=function(){if(n){n=!1;return}document.body.removeEventListener("touchmove",h),document.body.removeEventListener("touchend",i);var l=[];if(e.game.cache.audio.entries.each(function(u,d){for(var p=0;p<d.length;p++){var m=d[p];m.dataset.locked==="true"&&l.push(m)}return!0}),l.length!==0){var f=l[l.length-1];f.oncanplaythrough=function(){f.oncanplaythrough=null,l.forEach(function(u){u.dataset.locked="false"}),e.unlocked=!0},l.forEach(function(u){u.load()})}};this.once(a.UNLOCKED,function(){for(this.forEachActiveSound(function(f){f.currentMarker===null&&f.duration===0&&(f.duration=f.tags[0].duration),f.totalDuration=f.tags[0].duration});this.lockedActionsQueue.length;){var l=this.lockedActionsQueue.shift();l.sound[l.prop].apply?l.sound[l.prop].apply(l.sound,l.value||[]):l.sound[l.prop]=l.value}},this),document.body.addEventListener("touchmove",h,!1),document.body.addEventListener("touchend",i,!1)}},onBlur:function(){this.forEachActiveSound(function(e){e.isPlaying&&(this.onBlurPausedSounds.push(e),e.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(e){e.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){o.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(e,n,h){return e.tags[0].dataset.locked==="true"?(this.lockedActionsQueue.push({sound:e,prop:n,value:h}),!0):!1},setMute:function(e){return this.mute=e,this},mute:{get:function(){return this._mute},set:function(e){this._mute=e,this.forEachActiveSound(function(n){n.updateMute()}),this.emit(a.GLOBAL_MUTE,this,e)}},setVolume:function(e){return this.volume=e,this},volume:{get:function(){return this._volume},set:function(e){this._volume=e,this.forEachActiveSound(function(n){n.updateVolume()}),this.emit(a.GLOBAL_VOLUME,this,e)}}});v.exports=s},23717:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={SoundManagerCreator:t(14747),Events:t(14463),BaseSound:t(30341),BaseSoundManager:t(85034),WebAudioSound:t(71741),WebAudioSoundManager:t(57490),HTML5AudioSound:t(64895),HTML5AudioSoundManager:t(33684),NoAudioSound:t(4603),NoAudioSoundManager:t(25960)}},4603:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30341),g=t(83419),a=t(50792),r=t(79291),s=t(29747),e=function(){return!1},n=function(){return null},h=function(){return this},i=new g({Extends:a,initialize:function(f,u,d){d===void 0&&(d={}),a.call(this),this.manager=f,this.key=u,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},d),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:e,updateMarker:e,removeMarker:n,play:e,pause:e,resume:e,stop:e,setMute:h,setVolume:h,setRate:h,setDetune:h,setSeek:h,setLoop:h,setPan:h,applyConfig:n,resetConfig:n,update:s,calculateRate:n,destroy:function(){o.prototype.destroy.call(this)}});v.exports=i},25960:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85034),g=t(83419),a=t(50792),r=t(4603),s=t(29747),e=new g({Extends:a,initialize:function(h){a.call(this),this.game=h,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(n,h){var i=new r(this,n,h);return this.sounds.push(i),i},addAudioSprite:function(n,h){var i=this.add(n,h);return i.spritemap={},i},get:function(n){return o.prototype.get.call(this,n)},getAll:function(n){return o.prototype.getAll.call(this,n)},play:function(n,h){return!1},playAudioSprite:function(n,h,i){return!1},remove:function(n){return o.prototype.remove.call(this,n)},removeAll:function(){return o.prototype.removeAll.call(this)},removeByKey:function(n){return o.prototype.removeByKey.call(this,n)},stopByKey:function(n){return o.prototype.stopByKey.call(this,n)},onBlur:s,onFocus:s,onGameBlur:s,onGameFocus:s,pauseAll:s,resumeAll:s,stopAll:s,update:s,setRate:s,setDetune:s,setMute:s,setVolume:s,unlock:s,forEachActiveSound:function(n,h){o.prototype.forEachActiveSound.call(this,n,h)},destroy:function(){o.prototype.destroy.call(this)}});v.exports=e},71741:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30341),g=t(83419),a=t(14463),r=t(95540),s=new g({Extends:o,initialize:function(n,h,i){if(i===void 0&&(i={}),this.audioBuffer=n.game.cache.audio.get(h),!this.audioBuffer)throw new Error('Audio key "'+h+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=n.context.createGain(),this.volumeNode=n.context.createGain(),this.pannerNode=null,this.spatialNode=null,this.spatialSource=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),n.context.createPanner&&(this.spatialNode=n.context.createPanner(),this.volumeNode.connect(this.spatialNode)),n.context.createStereoPanner?(this.pannerNode=n.context.createStereoPanner(),n.context.createPanner?this.spatialNode.connect(this.pannerNode):this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(n.destination)):n.context.createPanner?this.spatialNode.connect(n.destination):this.volumeNode.connect(n.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,o.call(this,n,h,i)},play:function(e,n){return o.prototype.play.call(this,e,n)?(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(a.PLAY,this),!0):!1},pause:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.pause.call(this)?!1:(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(a.PAUSE,this),!0)},resume:function(){return this.manager.context.currentTime<this.startTime||!o.prototype.resume.call(this)?!1:(this.createAndStartBufferSource(),this.emit(a.RESUME,this),!0)},stop:function(){return o.prototype.stop.call(this)?(this.stopAndRemoveBufferSource(),this.emit(a.STOP,this),!0):!1},createAndStartBufferSource:function(){var e=this.currentConfig.seek,n=this.currentConfig.delay,h=this.manager.context.currentTime+n,i=(this.currentMarker?this.currentMarker.start:0)+e,l=this.duration-e;this.playTime=h-e,this.startTime=h,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,h),Math.max(0,i),Math.max(0,l)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),n=this.currentMarker?this.currentMarker.start:0,h=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,n),Math.max(0,h))},createBufferSource:function(){var e=this,n=this.manager.context.createBufferSource();return n.buffer=this.audioBuffer,n.connect(this.muteNode),n.onended=function(h){h.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},n},stopAndRemoveBufferSource:function(){if(this.source){var e=this.source;this.source=null,e.stop(),e.disconnect()}this.playTime=0,this.startTime=0,this.hasEnded=!1,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1});var e=this.currentConfig.source;if(e&&this.manager.context.createPanner){var n=this.spatialNode;n.panningModel=r(e,"panningModel","equalpower"),n.distanceModel=r(e,"distanceModel","inverse"),n.orientationX.value=r(e,"orientationX",0),n.orientationY.value=r(e,"orientationY",0),n.orientationZ.value=r(e,"orientationZ",-1),n.refDistance=r(e,"refDistance",1),n.maxDistance=r(e,"maxDistance",1e4),n.rolloffFactor=r(e,"rolloffFactor",1),n.coneInnerAngle=r(e,"coneInnerAngle",360),n.coneOuterAngle=r(e,"coneOuterAngle",0),n.coneOuterGain=r(e,"coneOuterGain",0),this.spatialSource=r(e,"follow",null),this.spatialSource||(n.positionX.value=r(e,"x",0),n.positionY.value=r(e,"y",0),n.positionZ.value=r(e,"z",0))}o.prototype.applyConfig.call(this)},x:{get:function(){return this.spatialNode?this.spatialNode.positionX:0},set:function(e){this.spatialNode&&(this.spatialNode.positionX.value=e)}},y:{get:function(){return this.spatialNode?this.spatialNode.positionY:0},set:function(e){this.spatialNode&&(this.spatialNode.positionY.value=e)}},update:function(){if(this.isPlaying&&this.spatialSource){var e=r(this.spatialSource,"x",null),n=r(this.spatialSource,"y",null);e&&e!==this._spatialx&&(this._spatialx=this.spatialNode.positionX.value=e),n&&n!==this._spatialy&&(this._spatialy=this.spatialNode.positionY.value=n)}this.hasEnded?(o.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(a.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(a.LOOPED,this))},destroy:function(){this.pendingRemove||(o.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.spatialNode&&(this.spatialNode.disconnect(),this.spatialNode=null,this.spatialSource=null),this.rateUpdates.length=0,this.rateUpdates=null)},calculateRate:function(){o.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&typeof this.totalRate=="number"&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,n=0;n<this.rateUpdates.length;n++){var h=0;n<this.rateUpdates.length-1?h=this.rateUpdates[n+1].time:h=this.manager.context.currentTime-this.playTime,e+=(h-this.rateUpdates[n].time)*this.rateUpdates[n].rate}return e},getLoopTime:function(){for(var e=0,n=0;n<this.rateUpdates.length-1;n++)e+=(this.rateUpdates[n+1].time-this.rateUpdates[n].time)*this.rateUpdates[n].rate;var h=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+h.time+(this.duration-e)/h.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(a.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(a.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return this.muteNode.gain.value===0},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(a.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(a.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(a.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(a.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(a.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});v.exports=s},57490:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Pavle Goloskokovic <pgoloskokovic@gmail.com> (http://prunegames.com)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(53134),g=t(85034),a=t(83419),r=t(14463),s=t(8443),e=t(71741),n=t(95540),h=new a({Extends:g,initialize:function(l){this.context=this.createAudioContext(l),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked=this.context.state==="suspended"&&("ontouchstart"in window||"onclick"in window),g.call(this,l),this.locked&&l.isBooted?this.unlock():l.events.once(s.BOOT,this.unlock,this)},createAudioContext:function(i){var l=i.config.audio;if(l.context)return l.context.resume(),l.context;if(window.hasOwnProperty("AudioContext"))return new AudioContext;if(window.hasOwnProperty("webkitAudioContext"))return new window.webkitAudioContext},setAudioContext:function(i){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=i,this.masterMuteNode=i.createGain(),this.masterVolumeNode=i.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(i.destination),this.destination=this.masterMuteNode,this},add:function(i,l){var f=new e(this,i,l);return this.sounds.push(f),f},decodeAudio:function(i,l){var f;Array.isArray(i)?f=i:f=[{key:i,data:l}];for(var u=this.game.cache.audio,d=f.length,p=0;p<f.length;p++){var m=f[p],T=m.key,y=m.data;typeof y=="string"&&(y=o(y));var S=(function(R,I){u.add(R,I),this.emit(r.DECODED,R),d--,d===0&&this.emit(r.DECODED_ALL)}).bind(this,T),C=(function(R,I){console.error("Error decoding audio: "+R+" - ",I?I.message:""),d--,d===0&&this.emit(r.DECODED_ALL)}).bind(this,T);this.context.decodeAudioData(y,S,C)}},setListenerPosition:function(i,l){return i===void 0&&(i=this.game.scale.width/2),l===void 0&&(l=this.game.scale.height/2),this.listenerPosition.set(i,l),this},unlock:function(){var i=this,l=document.body,f=function u(){if(i.context&&l){var d=l.removeEventListener.bind(l);i.context.resume().then(function(){d("touchstart",u),d("touchend",u),d("click",u),d("keydown",u),i.unlocked=!0},function(){d("touchstart",u),d("touchend",u),d("click",u),d("keydown",u)})}};l&&(l.addEventListener("touchstart",f,!1),l.addEventListener("touchend",f,!1),l.addEventListener("click",f,!1),l.addEventListener("keydown",f,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var i=this.context;i&&!this.locked&&(i.state==="suspended"||i.state==="interrupted")&&i.resume()},update:function(i,l){var f=this.context.listener;if(f&&f.positionX!==void 0){var u=n(this.listenerPosition,"x",null),d=n(this.listenerPosition,"y",null);u&&u!==this._spatialx&&(this._spatialx=f.positionX.value=u),d&&d!==this._spatialy&&(this._spatialy=f.positionY.value=d)}g.prototype.update.call(this,i,l),this.gameLostFocus||this.onFocus()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var i=this;this.context.close().then(function(){i.context=null})}g.prototype.destroy.call(this)},setMute:function(i){return this.mute=i,this},mute:{get:function(){return this.masterMuteNode.gain.value===0},set:function(i){this.masterMuteNode.gain.setValueAtTime(i?0:1,0),this.emit(r.GLOBAL_MUTE,this,i)}},setVolume:function(i){return this.volume=i,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(i){this.masterVolumeNode.gain.setValueAtTime(i,0),this.emit(r.GLOBAL_VOLUME,this,i)}}});v.exports=h},73162:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37105),g=t(83419),a=t(29747),r=t(19186),s=new g({initialize:function(n){this.parent=n,this.list=[],this.position=0,this.addCallback=a,this.removeCallback=a,this._sortKey=""},add:function(e,n){return n?o.Add(this.list,e):o.Add(this.list,e,0,this.addCallback,this)},addAt:function(e,n,h){return h?o.AddAt(this.list,e,n):o.AddAt(this.list,e,n,0,this.addCallback,this)},getAt:function(e){return this.list[e]},getIndex:function(e){return this.list.indexOf(e)},sort:function(e,n){return e?(n===void 0&&(n=function(h,i){return h[e]-i[e]}),r(this.list,n),this):this},getByName:function(e){return o.GetFirst(this.list,"name",e)},getRandom:function(e,n){return o.GetRandom(this.list,e,n)},getFirst:function(e,n,h,i){return o.GetFirst(this.list,e,n,h,i)},getAll:function(e,n,h,i){return o.GetAll(this.list,e,n,h,i)},count:function(e,n){return o.CountAllMatching(this.list,e,n)},swap:function(e,n){o.Swap(this.list,e,n)},moveTo:function(e,n){return o.MoveTo(this.list,e,n)},moveAbove:function(e,n){return o.MoveAbove(this.list,e,n)},moveBelow:function(e,n){return o.MoveBelow(this.list,e,n)},remove:function(e,n){return n?o.Remove(this.list,e):o.Remove(this.list,e,this.removeCallback,this)},removeAt:function(e,n){return n?o.RemoveAt(this.list,e):o.RemoveAt(this.list,e,this.removeCallback,this)},removeBetween:function(e,n,h){return h?o.RemoveBetween(this.list,e,n):o.RemoveBetween(this.list,e,n,this.removeCallback,this)},removeAll:function(e){for(var n=this.list.length;n--;)this.remove(this.list[n],e);return this},bringToTop:function(e){return o.BringToTop(this.list,e)},sendToBack:function(e){return o.SendToBack(this.list,e)},moveUp:function(e){return o.MoveUp(this.list,e),e},moveDown:function(e){return o.MoveDown(this.list,e),e},reverse:function(){return this.list.reverse(),this},shuffle:function(){return o.Shuffle(this.list),this},replace:function(e,n){return o.Replace(this.list,e,n)},exists:function(e){return this.list.indexOf(e)>-1},setAll:function(e,n,h,i){return o.SetAll(this.list,e,n,h,i),this},each:function(e,n){for(var h=[null],i=2;i<arguments.length;i++)h.push(arguments[i]);for(i=0;i<this.list.length;i++)h[0]=this.list[i],e.apply(n,h)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});v.exports=s},90330:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r){this.entries={},this.size=0,this.setAll(r)},setAll:function(a){if(Array.isArray(a))for(var r=0;r<a.length;r++)this.set(a[r][0],a[r][1]);return this},set:function(a,r){return this.has(a)||this.size++,this.entries[a]=r,this},get:function(a){if(this.has(a))return this.entries[a]},getArray:function(){var a=[],r=this.entries;for(var s in r)a.push(r[s]);return a},has:function(a){return this.entries.hasOwnProperty(a)},delete:function(a){return this.has(a)&&(delete this.entries[a],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(a){delete this.entries[a]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var a=[],r=this.entries;for(var s in r)a.push(r[s]);return a},dump:function(){var a=this.entries;console.group("Map");for(var r in a)console.log(r,a[r]);console.groupEnd()},each:function(a){var r=this.entries;for(var s in r)if(a(s,r[s])===!1)break;return this},contains:function(a){var r=this.entries;for(var s in r)if(r[s]===a)return!0;return!1},merge:function(a,r){r===void 0&&(r=!1);var s=this.entries,e=a.entries;for(var n in e)s.hasOwnProperty(n)&&r?s[n]=e[n]:this.set(n,e[n]);return this}});v.exports=g},25774:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(82348),r=new o({Extends:g,initialize:function(){g.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},isActive:function(s){return this._active.indexOf(s)>-1},isPending:function(s){return this._toProcess>0&&this._pending.indexOf(s)>-1},isDestroying:function(s){return this._destroy.indexOf(s)>-1},add:function(s){return this.checkQueue&&this.isActive(s)&&!this.isDestroying(s)||this.isPending(s)||(this._pending.push(s),this._toProcess++),s},remove:function(s){if(this.isPending(s)){var e=this._pending,n=e.indexOf(s);n!==-1&&e.splice(n,1)}else this.isActive(s)&&(this._destroy.push(s),this._toProcess++);return s},removeAll:function(){for(var s=this._active,e=this._destroy,n=s.length;n--;)e.push(s[n]),this._toProcess++;return this},update:function(){if(this._toProcess===0)return this._active;var s=this._destroy,e=this._active,n,h;for(n=0;n<s.length;n++){h=s[n];var i=e.indexOf(h);i!==-1&&(e.splice(i,1),this.emit(a.PROCESS_QUEUE_REMOVE,h))}for(s.length=0,s=this._pending,n=0;n<s.length;n++)h=s[n],(!this.checkQueue||this.checkQueue&&e.indexOf(h)===-1)&&(e.push(h),this.emit(a.PROCESS_QUEUE_ADD,h));return s.length=0,this._toProcess=0,e},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});v.exports=r},59542:(v,E,t)=>{/**
 * @author       Vladimir Agafonkin
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(43886);function g(y){if(!(this instanceof g))return new g(y);this._maxEntries=Math.max(4,y||9),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}g.prototype={all:function(){return this._all(this.data,[])},search:function(y){var S=this.data,C=[],R=this.toBBox;if(!p(y,S))return C;for(var I=[],L,w,O,B;S;){for(L=0,w=S.children.length;L<w;L++)O=S.children[L],B=S.leaf?R(O):O,p(y,B)&&(S.leaf?C.push(O):d(y,B)?this._all(O,C):I.push(O));S=I.pop()}return C},collides:function(y){var S=this.data,C=this.toBBox;if(!p(y,S))return!1;for(var R=[],I,L,w,O;S;){for(I=0,L=S.children.length;I<L;I++)if(w=S.children[I],O=S.leaf?C(w):w,p(y,O)){if(S.leaf||d(y,O))return!0;R.push(w)}S=R.pop()}return!1},load:function(y){if(!(y&&y.length))return this;if(y.length<this._minEntries){for(var S=0,C=y.length;S<C;S++)this.insert(y[S]);return this}var R=this._build(y.slice(),0,y.length-1,0);if(!this.data.children.length)this.data=R;else if(this.data.height===R.height)this._splitRoot(this.data,R);else{if(this.data.height<R.height){var I=this.data;this.data=R,R=I}this._insert(R,this.data.height-R.height-1,!0)}return this},insert:function(y){return y&&this._insert(y,this.data.height-1),this},clear:function(){return this.data=m([]),this},remove:function(y,S){if(!y)return this;for(var C=this.data,R=this.toBBox(y),I=[],L=[],w,O,B,V;C||I.length;){if(C||(C=I.pop(),O=I[I.length-1],w=L.pop(),V=!0),C.leaf&&(B=a(y,C.children,S),B!==-1))return C.children.splice(B,1),I.push(C),this._condense(I),this;!V&&!C.leaf&&d(C,R)?(I.push(C),L.push(w),w=0,O=C,C=C.children[0]):O?(w++,C=O.children[w],V=!1):C=null}return this},toBBox:function(y){return y},compareMinX:n,compareMinY:h,toJSON:function(){return this.data},fromJSON:function(y){return this.data=y,this},_all:function(y,S){for(var C=[];y;)y.leaf?S.push.apply(S,y.children):C.push.apply(C,y.children),y=C.pop();return S},_build:function(y,S,C,R){var I=C-S+1,L=this._maxEntries,w;if(I<=L)return w=m(y.slice(S,C+1)),r(w,this.toBBox),w;R||(R=Math.ceil(Math.log(I)/Math.log(L)),L=Math.ceil(I/Math.pow(L,R-1))),w=m([]),w.leaf=!1,w.height=R;var O=Math.ceil(I/L),B=O*Math.ceil(Math.sqrt(L)),V,b,X,K;for(T(y,S,C,B,this.compareMinX),V=S;V<=C;V+=B)for(X=Math.min(V+B-1,C),T(y,V,X,O,this.compareMinY),b=V;b<=X;b+=O)K=Math.min(b+O-1,X),w.children.push(this._build(y,b,K,R-1));return r(w,this.toBBox),w},_chooseSubtree:function(y,S,C,R){for(var I,L,w,O,B,V,b,X;R.push(S),!(S.leaf||R.length-1===C);){for(b=X=1/0,I=0,L=S.children.length;I<L;I++)w=S.children[I],B=i(w),V=f(y,w)-B,V<X?(X=V,b=B<b?B:b,O=w):V===X&&B<b&&(b=B,O=w);S=O||S.children[0]}return S},_insert:function(y,S,C){var R=this.toBBox,I=C?y:R(y),L=[],w=this._chooseSubtree(I,this.data,S,L);for(w.children.push(y),e(w,I);S>=0&&L[S].children.length>this._maxEntries;)this._split(L,S),S--;this._adjustParentBBoxes(I,L,S)},_split:function(y,S){var C=y[S],R=C.children.length,I=this._minEntries;this._chooseSplitAxis(C,I,R);var L=this._chooseSplitIndex(C,I,R),w=m(C.children.splice(L,C.children.length-L));w.height=C.height,w.leaf=C.leaf,r(C,this.toBBox),r(w,this.toBBox),S?y[S-1].children.push(w):this._splitRoot(C,w)},_splitRoot:function(y,S){this.data=m([y,S]),this.data.height=y.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},_chooseSplitIndex:function(y,S,C){var R,I,L,w,O,B,V,b;for(B=V=1/0,R=S;R<=C-S;R++)I=s(y,0,R,this.toBBox),L=s(y,R,C,this.toBBox),w=u(I,L),O=i(I)+i(L),w<B?(B=w,b=R,V=O<V?O:V):w===B&&O<V&&(V=O,b=R);return b},_chooseSplitAxis:function(y,S,C){var R=y.leaf?this.compareMinX:n,I=y.leaf?this.compareMinY:h,L=this._allDistMargin(y,S,C,R),w=this._allDistMargin(y,S,C,I);L<w&&y.children.sort(R)},_allDistMargin:function(y,S,C,R){y.children.sort(R);var I=this.toBBox,L=s(y,0,S,I),w=s(y,C-S,C,I),O=l(L)+l(w),B,V;for(B=S;B<C-S;B++)V=y.children[B],e(L,y.leaf?I(V):V),O+=l(L);for(B=C-S-1;B>=S;B--)V=y.children[B],e(w,y.leaf?I(V):V),O+=l(w);return O},_adjustParentBBoxes:function(y,S,C){for(var R=C;R>=0;R--)e(S[R],y)},_condense:function(y){for(var S=y.length-1,C;S>=0;S--)y[S].children.length===0?S>0?(C=y[S-1].children,C.splice(C.indexOf(y[S]),1)):this.clear():r(y[S],this.toBBox)},compareMinX:function(y,S){return y.left-S.left},compareMinY:function(y,S){return y.top-S.top},toBBox:function(y){return{minX:y.left,minY:y.top,maxX:y.right,maxY:y.bottom}}};function a(y,S,C){if(!C)return S.indexOf(y);for(var R=0;R<S.length;R++)if(C(y,S[R]))return R;return-1}function r(y,S){s(y,0,y.children.length,S,y)}function s(y,S,C,R,I){I||(I=m(null)),I.minX=1/0,I.minY=1/0,I.maxX=-1/0,I.maxY=-1/0;for(var L=S,w;L<C;L++)w=y.children[L],e(I,y.leaf?R(w):w);return I}function e(y,S){return y.minX=Math.min(y.minX,S.minX),y.minY=Math.min(y.minY,S.minY),y.maxX=Math.max(y.maxX,S.maxX),y.maxY=Math.max(y.maxY,S.maxY),y}function n(y,S){return y.minX-S.minX}function h(y,S){return y.minY-S.minY}function i(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function l(y){return y.maxX-y.minX+(y.maxY-y.minY)}function f(y,S){return(Math.max(S.maxX,y.maxX)-Math.min(S.minX,y.minX))*(Math.max(S.maxY,y.maxY)-Math.min(S.minY,y.minY))}function u(y,S){var C=Math.max(y.minX,S.minX),R=Math.max(y.minY,S.minY),I=Math.min(y.maxX,S.maxX),L=Math.min(y.maxY,S.maxY);return Math.max(0,I-C)*Math.max(0,L-R)}function d(y,S){return y.minX<=S.minX&&y.minY<=S.minY&&S.maxX<=y.maxX&&S.maxY<=y.maxY}function p(y,S){return S.minX<=y.maxX&&S.minY<=y.maxY&&S.maxX>=y.minX&&S.maxY>=y.minY}function m(y){return{children:y,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function T(y,S,C,R,I){for(var L=[S,C],w;L.length;)C=L.pop(),S=L.pop(),!(C-S<=R)&&(w=S+Math.ceil((C-S)/R/2)*R,o(y,w,S,C,I),L.push(S,w,w,C))}v.exports=g},35072:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r){if(this.entries=[],Array.isArray(r))for(var s=0;s<r.length;s++)this.set(r[s])},set:function(a){return this.entries.indexOf(a)===-1&&this.entries.push(a),this},get:function(a,r){for(var s=0;s<this.entries.length;s++){var e=this.entries[s];if(e[a]===r)return e}},getArray:function(){return this.entries.slice(0)},delete:function(a){var r=this.entries.indexOf(a);return r>-1&&this.entries.splice(r,1),this},dump:function(){console.group("Set");for(var a=0;a<this.entries.length;a++){var r=this.entries[a];console.log(r)}console.groupEnd()},each:function(a,r){var s,e=this.entries.slice(),n=e.length;if(r)for(s=0;s<n&&a.call(r,e[s],s)!==!1;s++);else for(s=0;s<n&&a(e[s],s)!==!1;s++);return this},iterate:function(a,r){var s,e=this.entries.length;if(r)for(s=0;s<e&&a.call(r,this.entries[s],s)!==!1;s++);else for(s=0;s<e&&a(this.entries[s],s)!==!1;s++);return this},iterateLocal:function(a){var r,s=[];for(r=1;r<arguments.length;r++)s.push(arguments[r]);var e=this.entries.length;for(r=0;r<e;r++){var n=this.entries[r];n[a].apply(n,s)}return this},clear:function(){return this.entries.length=0,this},contains:function(a){return this.entries.indexOf(a)>-1},union:function(a){var r=new g;return a.entries.forEach(function(s){r.set(s)}),this.entries.forEach(function(s){r.set(s)}),r},intersect:function(a){var r=new g;return this.entries.forEach(function(s){a.contains(s)&&r.set(s)}),r},difference:function(a){var r=new g;return this.entries.forEach(function(s){a.contains(s)||r.set(s)}),r},size:{get:function(){return this.entries.length},set:function(a){return a<this.entries.length?this.entries.length=a:this.entries.length}}});v.exports=g},86555:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45319),g=t(83419),a=t(56583),r=t(26099),s=new g({initialize:function(n,h,i,l){n===void 0&&(n=0),h===void 0&&(h=n),i===void 0&&(i=0),l===void 0&&(l=null),this._width=n,this._height=h,this._parent=l,this.aspectMode=i,this.aspectRatio=h===0?1:n/h,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new r},setAspectMode:function(e){return e===void 0&&(e=0),this.aspectMode=e,this.setSize(this._width,this._height)},setSnap:function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.snapTo.set(e,n),this.setSize(this._width,this._height)},setParent:function(e){return this._parent=e,this.setSize(this._width,this._height)},setMin:function(e,n){return e===void 0&&(e=0),n===void 0&&(n=e),this.minWidth=o(e,0,this.maxWidth),this.minHeight=o(n,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(e,n){return e===void 0&&(e=Number.MAX_VALUE),n===void 0&&(n=e),this.maxWidth=o(e,this.minWidth,Number.MAX_VALUE),this.maxHeight=o(n,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(e,n){switch(e===void 0&&(e=0),n===void 0&&(n=e),this.aspectMode){case s.NONE:this._width=this.getNewWidth(a(e,this.snapTo.x)),this._height=this.getNewHeight(a(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height;break;case s.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(a(e,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case s.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(a(n,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case s.FIT:this.constrain(e,n,!0);break;case s.ENVELOP:this.constrain(e,n,!1);break}return this},setAspectRatio:function(e){return this.aspectRatio=e,this.setSize(this._width,this._height)},resize:function(e,n){return this._width=this.getNewWidth(a(e,this.snapTo.x)),this._height=this.getNewHeight(a(n,this.snapTo.y)),this.aspectRatio=this._height===0?1:this._width/this._height,this},getNewWidth:function(e,n){return n===void 0&&(n=!0),e=o(e,this.minWidth,this.maxWidth),n&&this._parent&&e>this._parent.width&&(e=Math.max(this.minWidth,this._parent.width)),e},getNewHeight:function(e,n){return n===void 0&&(n=!0),e=o(e,this.minHeight,this.maxHeight),n&&this._parent&&e>this._parent.height&&(e=Math.max(this.minHeight,this._parent.height)),e},constrain:function(e,n,h){e===void 0&&(e=0),n===void 0&&(n=e),h===void 0&&(h=!0),e=this.getNewWidth(e),n=this.getNewHeight(n);var i=this.snapTo,l=n===0?1:e/n;return h&&this.aspectRatio>l||!h&&this.aspectRatio<l?(e=a(e,i.x),n=e/this.aspectRatio,i.y>0&&(n=a(n,i.y),e=n*this.aspectRatio)):(h&&this.aspectRatio<l||!h&&this.aspectRatio>l)&&(n=a(n,i.y),e=n*this.aspectRatio,i.x>0&&(e=a(e,i.x),n=e*(1/this.aspectRatio))),this._width=e,this._height=n,this},fitTo:function(e,n){return this.constrain(e,n,!0)},envelop:function(e,n){return this.constrain(e,n,!1)},setWidth:function(e){return this.setSize(e,this._height)},setHeight:function(e){return this.setSize(this._width,e)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(e){e&&e.style&&(e.style.width=this._width+"px",e.style.height=this._height+"px")},copy:function(e){return e.setAspectMode(this.aspectMode),e.aspectRatio=this.aspectRatio,e.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(e){this.setSize(e,this._height)}},height:{get:function(){return this._height},set:function(e){this.setSize(this._width,e)}}});s.NONE=0,s.WIDTH_CONTROLS_HEIGHT=1,s.HEIGHT_CONTROLS_WIDTH=2,s.FIT=3,s.ENVELOP=4,v.exports=s},15238:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="add"},56187:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="remove"},82348:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={PROCESS_QUEUE_ADD:t(15238),PROCESS_QUEUE_REMOVE:t(56187)}},41392:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Events:t(82348),List:t(73162),Map:t(90330),ProcessQueue:t(25774),RTree:t(59542),Set:t(35072),Size:t(86555)}},57382:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45319),a=t(40987),r=t(8054),s=t(50030),e=t(79237),n=new o({Extends:e,initialize:function(i,l,f,u,d){e.call(this,i,l,f,u,d),this.add("__BASE",0,0,0,u,d),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d",{willReadFrequently:!0}),this.width=u,this.height=d,this.imageData=this.context.getImageData(0,0,u,d),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===r.WEBGL&&this.refresh(),this},draw:function(h,i,l,f){return f===void 0&&(f=!0),this.context.drawImage(l,h,i),f&&this.update(),this},drawFrame:function(h,i,l,f,u){l===void 0&&(l=0),f===void 0&&(f=0),u===void 0&&(u=!0);var d=this.manager.getFrame(h,i);if(d){var p=d.canvasData,m=d.cutWidth,T=d.cutHeight,y=d.source.resolution;this.context.drawImage(d.source.image,p.x,p.y,m,T,l,f,m/y,T/y),u&&this.update()}return this},setPixel:function(h,i,l,f,u,d){d===void 0&&(d=255),h=Math.abs(Math.floor(h)),i=Math.abs(Math.floor(i));var p=this.getIndex(h,i);if(p>-1){var m=this.context.getImageData(h,i,1,1);m.data[0]=l,m.data[1]=f,m.data[2]=u,m.data[3]=d,this.context.putImageData(m,h,i)}return this},putData:function(h,i,l,f,u,d,p){return f===void 0&&(f=0),u===void 0&&(u=0),d===void 0&&(d=h.width),p===void 0&&(p=h.height),this.context.putImageData(h,i,l,f,u,d,p),this},getData:function(h,i,l,f){h=g(Math.floor(h),0,this.width-1),i=g(Math.floor(i),0,this.height-1),l=g(l,1,this.width-h),f=g(f,1,this.height-i);var u=this.context.getImageData(h,i,l,f);return u},getPixel:function(h,i,l){l||(l=new a);var f=this.getIndex(h,i);if(f>-1){var u=this.data,d=u[f+0],p=u[f+1],m=u[f+2],T=u[f+3];l.setTo(d,p,m,T)}return l},getPixels:function(h,i,l,f){h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=this.width),f===void 0&&(f=l),h=Math.abs(Math.round(h)),i=Math.abs(Math.round(i));for(var u=g(h,0,this.width),d=g(h+l,0,this.width),p=g(i,0,this.height),m=g(i+f,0,this.height),T=new a,y=[],S=p;S<m;S++){for(var C=[],R=u;R<d;R++)T=this.getPixel(R,S,T),C.push({x:R,y:S,color:T.color,alpha:T.alphaGL});y.push(C)}return y},getIndex:function(h,i){return h=Math.abs(Math.round(h)),i=Math.abs(Math.round(i)),h<this.width&&i<this.height?(h+i*this.width)*4:-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(h,i,l,f,u){return h===void 0&&(h=0),i===void 0&&(i=0),l===void 0&&(l=this.width),f===void 0&&(f=this.height),u===void 0&&(u=!0),this.context.clearRect(h,i,l,f),u&&this.update(),this},setSize:function(h,i){return i===void 0&&(i=h),(h!==this.width||i!==this.height)&&(this.canvas.width=h,this.canvas.height=i,this._source.width=h,this._source.height=i,this._source.isPowerOf2=s(h,i),this.frames.__BASE.setSize(h,i,0,0),this.width=h,this.height=i,this.refresh()),this},destroy:function(){e.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});v.exports=n},81320:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(10312),g=t(71911),a=t(27919),r=t(83419),s=t(8054),e=t(4327),n=t(95540),h=t(36060),i=t(32302),l=t(79237),f=t(70554),u=new r({Extends:l,initialize:function(p,m,T,y){T===void 0&&(T=256),y===void 0&&(y=256),this.type="DynamicTexture";var S=p.game.renderer,C=S&&S.type===s.CANVAS,R=C?a.create2D(this,T,y):[this];l.call(this,p,m,R,T,y),this.add("__BASE",0,0,0,T,y),this.renderer=S,this.width=-1,this.height=-1,this.isDrawing=!1,this.canvas=C?R:null,this.context=C?R.getContext("2d",{willReadFrequently:!0}):null,this.dirty=!1,this.isSpriteTexture=!0,this._eraseMode=!1,this.camera=new g(0,0,T,y).setScene(p.game.scene.systemScene,!1),this.renderTarget=C?null:new i(S,T,y,1,0,!1,!0,!0,!1),this.pipeline=C?null:S.pipelines.get(h.SINGLE_PIPELINE),this.setSize(T,y)},setSize:function(d,p){p===void 0&&(p=d);var m=this.get(),T=m.source;if(d!==this.width||p!==this.height){this.canvas&&(this.canvas.width=d,this.canvas.height=p);var y=this.renderTarget;y&&(y.willResize(d,p)&&y.resize(d,p),y.texture!==T.glTexture&&this.renderer.deleteTexture(T.glTexture),this.setFromRenderTarget()),this.camera.setSize(d,p),T.width=d,T.height=p,m.setSize(d,p),this.width=d,this.height=p}else{var S=this.getSourceImage();m.cutX+d>S.width&&(d=S.width-m.cutX),m.cutY+p>S.height&&(p=S.height-m.cutY),m.setSize(d,p,m.cutX,m.cutY)}return this},setFromRenderTarget:function(){var d=this.get(),p=d.source,m=this.renderTarget;return p.isRenderTexture=!0,p.isGLTexture=!0,p.glTexture=m.texture,this},setIsSpriteTexture:function(d){return this.isSpriteTexture=d,this},fill:function(d,p,m,T,y,S){var C=this.camera,R=this.renderer;p===void 0&&(p=1),m===void 0&&(m=0),T===void 0&&(T=0),y===void 0&&(y=this.width),S===void 0&&(S=this.height);var I=d>>16&255,L=d>>8&255,w=d&255,O=this.renderTarget;if(C.preRender(),O){O.bind(!0);var B=this.pipeline.manager.set(this.pipeline),V=R.width/O.width,b=R.height/O.height,X=O.height-(T+S);B.drawFillRect(m*V,X*b,y*V,S*b,f.getTintFromFloats(w/255,L/255,I/255,1),p),O.unbind(!0)}else{var K=this.context;R.setContext(K),K.globalCompositeOperation="source-over",K.fillStyle="rgba("+I+","+L+","+w+","+p+")",K.fillRect(m,T,y,S),R.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var d=this.context,p=this.renderTarget;p?p.clear():d&&(d.save(),d.setTransform(1,0,0,1,0,0),d.clearRect(0,0,this.width,this.height),d.restore()),this.dirty=!1}return this},stamp:function(d,p,m,T,y){m===void 0&&(m=0),T===void 0&&(T=0);var S=n(y,"alpha",1),C=n(y,"tint",16777215),R=n(y,"angle",0),I=n(y,"rotation",0),L=n(y,"scale",1),w=n(y,"scaleX",L),O=n(y,"scaleY",L),B=n(y,"originX",.5),V=n(y,"originY",.5),b=n(y,"blendMode",0),X=n(y,"erase",!1),K=n(y,"skipBatch",!1),Q=this.manager.resetStamp(S,C);return Q.setAngle(0),R!==0?Q.setAngle(R):I!==0&&Q.setRotation(I),Q.setScale(w,O),Q.setTexture(d,p),Q.setOrigin(B,V),Q.setBlendMode(b),X&&(this._eraseMode=!0),K?this.batchGameObject(Q,m,T):this.draw(Q,m,T),X&&(this._eraseMode=!1),this},erase:function(d,p,m){return this._eraseMode=!0,this.draw(d,p,m),this._eraseMode=!1,this},draw:function(d,p,m,T,y){return this.beginDraw(),this.batchDraw(d,p,m,T,y),this.endDraw(),this},drawFrame:function(d,p,m,T,y,S){return this.beginDraw(),this.batchDrawFrame(d,p,m,T,y,S),this.endDraw(),this},repeat:function(d,p,m,T,y,S,C,R,I){if(m===void 0&&(m=0),T===void 0&&(T=0),y===void 0&&(y=this.width),S===void 0&&(S=this.height),C===void 0&&(C=1),R===void 0&&(R=16777215),I===void 0&&(I=!1),d instanceof e?p=d:p=this.manager.getFrame(d,p),!p)return this;var L=this.manager.resetStamp(C,R);L.setFrame(p),L.setOrigin(0);var w=p.width,O=p.height;y=Math.floor(y),S=Math.floor(S);var B=Math.ceil(y/w),V=Math.ceil(S/O),b=B*w-y,X=V*O-S;b>0&&(b=w-b),X>0&&(X=O-X),m<0&&(B+=Math.ceil(Math.abs(m)/w)),T<0&&(V+=Math.ceil(Math.abs(T)/O));var K=m,Q=T,U=!1,W=this.manager.stampCrop.setTo(0,0,w,O);I||this.beginDraw();for(var F=0;F<V;F++){if(Q+O<0){Q+=O;continue}for(var G=0;G<B;G++){if(U=!1,K+w<0){K+=w;continue}else K<0&&(U=!0,W.width=w+K,W.x=w-W.width);Q<0&&(U=!0,W.height=O+Q,W.y=O-W.height),b>0&&G===B-1&&(U=!0,W.width=b),X>0&&F===V-1&&(U=!0,W.height=X),U&&L.setCrop(W),this.batchGameObject(L,K,Q),L.isCropped=!1,W.setTo(0,0,w,O),K+=w}K=m,Q+=O}return I||this.endDraw(),this},beginDraw:function(){if(!this.isDrawing){var d=this.camera,p=this.renderer,m=this.renderTarget;d.preRender(),m?p.beginCapture(m.width,m.height):p.setContext(this.context),this.isDrawing=!0}return this},batchDraw:function(d,p,m,T,y){return Array.isArray(d)||(d=[d]),this.batchList(d,p,m,T,y),this},batchDrawFrame:function(d,p,m,T,y,S){m===void 0&&(m=0),T===void 0&&(T=0),y===void 0&&(y=1),S===void 0&&(S=16777215);var C=this.manager.getFrame(d,p);return C&&(this.renderTarget?this.pipeline.batchTextureFrame(C,m,T,S,y,this.camera.matrix,null):this.batchTextureFrame(C,m,T,y,S)),this},endDraw:function(d){if(d===void 0&&(d=this._eraseMode),this.isDrawing){var p=this.renderer,m=this.renderTarget;if(m){var T=p.endCapture(),y=p.pipelines.setUtility();y.blitFrame(T,m,1,!1,!1,d,this.isSpriteTexture),p.resetScissor(),p.resetViewport()}else p.setContext();this.dirty=!0,this.isDrawing=!1}return this},batchList:function(d,p,m,T,y){var S=d.length;if(S!==0)for(var C=0;C<S;C++){var R=d[C];!R||R===this||(R.renderWebGL||R.renderCanvas?this.batchGameObject(R,p,m):R.isParent||R.list?this.batchGroup(R.getChildren(),p,m):typeof R=="string"?this.batchTextureFrameKey(R,null,p,m,T,y):R instanceof e?this.batchTextureFrame(R,p,m,T,y):Array.isArray(R)&&this.batchList(R,p,m,T,y))}},batchGroup:function(d,p,m){p===void 0&&(p=0),m===void 0&&(m=0);for(var T=0;T<d.length;T++){var y=d[T];y.willRender(this.camera)&&this.batchGameObject(y,y.x+p,y.y+m)}},batchGameObject:function(d,p,m){p===void 0&&(p=d.x),m===void 0&&(m=d.y);var T=d.x,y=d.y,S=this.camera,C=this.renderer,R=this._eraseMode,I=d.mask;if(d.setPosition(p,m),this.canvas){if(R){var L=d.blendMode;d.blendMode=o.ERASE}I&&I.preRenderCanvas(C,d,S),d.renderCanvas(C,d,S,null),I&&I.postRenderCanvas(C,d,S),R&&(d.blendMode=L)}else C&&(I&&I.preRenderWebGL(C,d,S),R||C.setBlendMode(d.blendMode),d.renderWebGL(C,d,S),I&&I.postRenderWebGL(C,S,this.renderTarget));d.setPosition(T,y)},batchTextureFrameKey:function(d,p,m,T,y,S){var C=this.manager.getFrame(d,p);C&&this.batchTextureFrame(C,m,T,y,S)},batchTextureFrame:function(d,p,m,T,y){p===void 0&&(p=0),m===void 0&&(m=0),T===void 0&&(T=1),y===void 0&&(y=16777215);var S=this.camera.matrix,C=this.renderTarget;if(C)this.pipeline.batchTextureFrame(d,p,m,y,T,S,null);else{var R=this.context,I=d.canvasData,L=d.source.image;R.save(),R.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",R.globalAlpha=T,S.setToContext(R),I.width>0&&I.height>0&&R.drawImage(L,I.x,I.y,I.width,I.height,p,m,I.width,I.height),R.restore()}},snapshotArea:function(d,p,m,T,y,S,C){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,y,!1,d,p,m,T,S,C):this.renderer.snapshotCanvas(this.canvas,y,!1,d,p,m,T,S,C),this},snapshot:function(d,p,m){return this.snapshotArea(0,0,this.width,this.height,d,p,m)},snapshotPixel:function(d,p,m){return this.snapshotArea(d,p,1,1,m,"pixel")},getWebGLTexture:function(){if(this.renderTarget)return this.renderTarget.texture},renderWebGL:function(d,p,m,T){var y=this.manager.resetStamp();y.setTexture(this),y.setOrigin(0),y.renderWebGL(d,y,m,T)},renderCanvas:function(){},destroy:function(){var d=this.manager.stamp;d&&d.texture===this&&this.manager.resetStamp(),l.prototype.destroy.call(this),a.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.renderer=null}});v.exports=u},4327:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(45319),a=t(79291),r=new o({initialize:function(e,n,h,i,l,f,u){this.texture=e,this.name=n,this.source=e.source[h],this.sourceIndex=h,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0},is3Slice:!1,scale9:!1,scale9Borders:{x:0,y:0,w:0,h:0}},this.setSize(f,u,i,l)},setSize:function(s,e,n,h){n===void 0&&(n=0),h===void 0&&(h=0),this.cutX=n,this.cutY=h,this.cutWidth=s,this.cutHeight=e,this.width=s,this.height=e,this.halfWidth=Math.floor(s*.5),this.halfHeight=Math.floor(e*.5),this.centerX=Math.floor(s/2),this.centerY=Math.floor(e/2);var i=this.data,l=i.cut;l.x=n,l.y=h,l.w=s,l.h=e,l.r=n+s,l.b=h+e,i.sourceSize.w=s,i.sourceSize.h=e,i.spriteSourceSize.w=s,i.spriteSourceSize.h=e,i.radius=.5*Math.sqrt(s*s+e*e);var f=i.drawImage;return f.x=n,f.y=h,f.width=s,f.height=e,this.updateUVs()},setTrim:function(s,e,n,h,i,l){var f=this.data,u=f.spriteSourceSize;return f.trim=!0,f.sourceSize.w=s,f.sourceSize.h=e,u.x=n,u.y=h,u.w=i,u.h=l,u.r=n+i,u.b=h+l,this.x=n,this.y=h,this.width=i,this.height=l,this.halfWidth=i*.5,this.halfHeight=l*.5,this.centerX=Math.floor(i/2),this.centerY=Math.floor(l/2),this.updateUVs()},setScale9:function(s,e,n,h){var i=this.data;return i.scale9=!0,i.is3Slice=e===0&&h===this.height,i.scale9Borders.x=s,i.scale9Borders.y=e,i.scale9Borders.w=n,i.scale9Borders.h=h,this},setCropUVs:function(s,e,n,h,i,l,f){var u=this.cutX,d=this.cutY,p=this.cutWidth,m=this.cutHeight,T=this.realWidth,y=this.realHeight;e=g(e,0,T),n=g(n,0,y),h=g(h,0,T-e),i=g(i,0,y-n);var S=u+e,C=d+n,R=h,I=i,L=this.data;if(L.trim){var w=L.spriteSourceSize;h=g(h,0,p-e),i=g(i,0,m-n);var O=e+h,B=n+i,V=!(w.r<e||w.b<n||w.x>O||w.y>B);if(V){var b=Math.max(w.x,e),X=Math.max(w.y,n),K=Math.min(w.r,O)-b,Q=Math.min(w.b,B)-X;R=K,I=Q,l?S=u+(p-(b-w.x)-K):S=u+(b-w.x),f?C=d+(m-(X-w.y)-Q):C=d+(X-w.y),e=b,n=X,h=K,i=Q}else S=0,C=0,R=0,I=0}else l&&(S=u+(p-e-h)),f&&(C=d+(m-n-i));var U=this.source.width,W=this.source.height;return s.u0=Math.max(0,S/U),s.v0=Math.max(0,C/W),s.u1=Math.min(1,(S+R)/U),s.v1=Math.min(1,(C+I)/W),s.x=e,s.y=n,s.cx=S,s.cy=C,s.cw=R,s.ch=I,s.width=h,s.height=i,s.flipX=l,s.flipY=f,s},updateCropUVs:function(s,e,n){return this.setCropUVs(s,s.x,s.y,s.width,s.height,e,n)},setUVs:function(s,e,n,h,i,l){var f=this.data.drawImage;return f.width=s,f.height=e,this.u0=n,this.v0=h,this.u1=i,this.v1=l,this},updateUVs:function(){var s=this.cutX,e=this.cutY,n=this.cutWidth,h=this.cutHeight,i=this.data.drawImage;i.width=n,i.height=h;var l=this.source.width,f=this.source.height;return this.u0=s/l,this.v0=e/f,this.u1=(s+n)/l,this.v1=(e+h)/f,this},updateUVsInverted:function(){var s=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/s,this.v0=this.cutY/e,this.u1=this.cutX/s,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var s=new r(this.texture,this.name,this.sourceIndex);return s.cutX=this.cutX,s.cutY=this.cutY,s.cutWidth=this.cutWidth,s.cutHeight=this.cutHeight,s.x=this.x,s.y=this.y,s.width=this.width,s.height=this.height,s.halfWidth=this.halfWidth,s.halfHeight=this.halfHeight,s.centerX=this.centerX,s.centerY=this.centerY,s.rotated=this.rotated,s.data=a(!0,s.data,this.data),s.updateUVs(),s},destroy:function(){this.texture=null,this.source=null,this.customData=null,this.data=null},glTexture:{get:function(){return this.source.glTexture}},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},scale9:{get:function(){return this.data.scale9}},is3Slice:{get:function(){return this.data.is3Slice}},canvasData:{get:function(){return this.data.drawImage}}});v.exports=r},79237:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(4327),a=t(11876),r='Texture "%s" has no frame "%s"',s=new o({initialize:function(n,h,i,l,f){Array.isArray(i)||(i=[i]),this.manager=n,this.key=h,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var u=0;u<i.length;u++)this.source.push(new a(this,i[u],l,f))},add:function(e,n,h,i,l,f){if(this.has(e))return null;var u=new g(this,e,n,h,i,l,f);return this.frames[e]=u,this.firstFrame==="__BASE"&&(this.firstFrame=e),this.frameTotal++,u},remove:function(e){if(this.has(e)){var n=this.get(e);return n.destroy(),delete this.frames[e],!0}return!1},has:function(e){return this.frames.hasOwnProperty(e)},get:function(e){e||(e=this.firstFrame);var n=this.frames[e];return n||(console.warn(r,this.key,e),n=this.frames[this.firstFrame]),n},getTextureSourceIndex:function(e){for(var n=0;n<this.source.length;n++)if(this.source[n]===e)return n;return-1},getFramesFromTextureSource:function(e,n){n===void 0&&(n=!1);var h=[];for(var i in this.frames)if(!(i==="__BASE"&&!n)){var l=this.frames[i];l.sourceIndex===e&&h.push(l)}return h},getFrameBounds:function(e){e===void 0&&(e=0);for(var n=this.getFramesFromTextureSource(e),h=1/0,i=1/0,l=0,f=0,u=0;u<n.length;u++){var d=n[u];d.cutX<h&&(h=d.cutX),d.cutY<i&&(i=d.cutY),d.cutX+d.cutWidth>l&&(l=d.cutX+d.cutWidth),d.cutY+d.cutHeight>f&&(f=d.cutY+d.cutHeight)}return{x:h,y:i,width:l-h,height:f-i}},getFrameNames:function(e){e===void 0&&(e=!1);var n=Object.keys(this.frames);if(!e){var h=n.indexOf("__BASE");h!==-1&&n.splice(h,1)}return n},getSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var n=this.frames[e];return n?n.source.image:(console.warn(r,this.key,e),this.frames.__BASE.source.image)},getDataSourceImage:function(e){(e==null||this.frameTotal===1)&&(e="__BASE");var n=this.frames[e],h;return n?h=n.sourceIndex:(console.warn(r,this.key,e),h=this.frames.__BASE.sourceIndex),this.dataSource[h].image},setDataSource:function(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var h=this.source[n];this.dataSource.push(new a(this,e[n],h.width,h.height))}},setFilter:function(e){var n;for(n=0;n<this.source.length;n++)this.source[n].setFilter(e);for(n=0;n<this.dataSource.length;n++)this.dataSource[n].setFilter(e)},destroy:function(){var e,n=this.source,h=this.dataSource;for(e=0;e<n.length;e++)n[e]&&n[e].destroy();for(e=0;e<h.length;e++)h[e]&&h[e].destroy();for(var i in this.frames){var l=this.frames[i];l&&l.destroy()}this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key),this.manager=null}});v.exports=s},17130:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(57382),a=t(83419),r=t(40987),s=t(8054),e=t(81320),n=t(50792),h=t(69442),i=t(4327),l=t(8443),f=t(99584),u=t(35154),d=t(88571),p=t(41212),m=t(61309),T=t(87841),y=t(79237),S=new a({Extends:n,initialize:function(R){n.call(this),this.game=R,this.name="TextureManager",this.list={},this._tempCanvas=o.create2D(this),this._tempContext=this._tempCanvas.getContext("2d",{willReadFrequently:!0}),this._pending=0,this.stamp,this.stampCrop=new T,this.silentWarnings=!1,R.events.once(l.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(h.LOAD,this.updatePending,this),this.on(h.ERROR,this.updatePending,this);var C=this.game.config;this.addBase64("__DEFAULT",C.defaultImage),this.addBase64("__MISSING",C.missingImage),this.addBase64("__WHITE",C.whiteImage),this.game.renderer&&this.game.renderer.gl&&this.addUint8Array("__NORMAL",new Uint8Array([127,127,255,255]),1,1),this.game.events.once(l.DESTROY,this.destroy,this),this.game.events.once(l.SYSTEM_READY,function(R){this.stamp=new d(R).setOrigin(0)},this)},updatePending:function(){this._pending--,this._pending===0&&(this.off(h.LOAD),this.off(h.ERROR),this.emit(h.READY))},checkKey:function(C){return this.exists(C)?(this.silentWarnings||console.error("Texture key already in use: "+C),!1):!0},remove:function(C){if(typeof C=="string")if(this.exists(C))C=this.get(C);else return this.silentWarnings||console.warn("No texture found matching key: "+C),this;var R=C.key;return this.list.hasOwnProperty(R)&&(C.destroy(),this.emit(h.REMOVE,R),this.emit(h.REMOVE_KEY+R)),this},removeKey:function(C){return this.list.hasOwnProperty(C)&&delete this.list[C],this},addBase64:function(C,R){if(this.checkKey(C)){var I=this,L=new Image;L.onerror=function(){I.emit(h.ERROR,C)},L.onload=function(){var w=I.create(C,L);m.Image(w,0),I.emit(h.ADD,C,w),I.emit(h.ADD_KEY+C,w),I.emit(h.LOAD,C,w)},L.src=R}return this},getBase64:function(C,R,I,L){I===void 0&&(I="image/png"),L===void 0&&(L=.92);var w="",O=this.getFrame(C,R);if(O&&(O.source.isRenderTexture||O.source.isGLTexture))this.silentWarnings||console.warn("Cannot getBase64 from WebGL Texture");else if(O){var B=O.canvasData,V=o.create2D(this,B.width,B.height),b=V.getContext("2d",{willReadFrequently:!0});B.width>0&&B.height>0&&b.drawImage(O.source.image,B.x,B.y,B.width,B.height,0,0,B.width,B.height),w=V.toDataURL(I,L),o.remove(V)}return w},addImage:function(C,R,I){var L=null;return this.checkKey(C)&&(L=this.create(C,R),m.Image(L,0),I&&L.setDataSource(I),this.emit(h.ADD,C,L),this.emit(h.ADD_KEY+C,L)),L},addGLTexture:function(C,R){var I=null;if(this.checkKey(C)){var L=R.width,w=R.height;I=this.create(C,R,L,w),I.add("__BASE",0,0,0,L,w),this.emit(h.ADD,C,I),this.emit(h.ADD_KEY+C,I)}return I},addCompressedTexture:function(C,R,I){var L=null;if(this.checkKey(C)){if(L=this.create(C,R),L.add("__BASE",0,0,0,R.width,R.height),I){var w=function(B,V,b){Array.isArray(b.textures)||Array.isArray(b.frames)?m.JSONArray(B,V,b):m.JSONHash(B,V,b)};if(Array.isArray(I))for(var O=0;O<I.length;O++)w(L,O,I[O]);else w(L,0,I)}this.emit(h.ADD,C,L),this.emit(h.ADD_KEY+C,L)}return L},addRenderTexture:function(C,R){var I=null;return this.checkKey(C)&&(I=this.create(C,R),I.add("__BASE",0,0,0,R.width,R.height),this.emit(h.ADD,C,I),this.emit(h.ADD_KEY+C,I)),I},generate:function(C,R){if(this.checkKey(C)){var I=o.create(this,1,1);return R.canvas=I,f(R),this.addCanvas(C,I)}else return null},createCanvas:function(C,R,I){if(R===void 0&&(R=256),I===void 0&&(I=256),this.checkKey(C)){var L=o.create(this,R,I,s.CANVAS,!0);return this.addCanvas(C,L)}return null},addCanvas:function(C,R,I){I===void 0&&(I=!1);var L=null;return I?L=new g(this,C,R,R.width,R.height):this.checkKey(C)&&(L=new g(this,C,R,R.width,R.height),this.list[C]=L,this.emit(h.ADD,C,L),this.emit(h.ADD_KEY+C,L)),L},addDynamicTexture:function(C,R,I){var L=null;return typeof C=="string"&&!this.exists(C)?L=new e(this,C,R,I):(L=C,C=L.key),this.checkKey(C)?(this.list[C]=L,this.emit(h.ADD,C,L),this.emit(h.ADD_KEY+C,L)):L=null,L},addAtlas:function(C,R,I,L){return Array.isArray(I.textures)||Array.isArray(I.frames)?this.addAtlasJSONArray(C,R,I,L):this.addAtlasJSONHash(C,R,I,L)},addAtlasJSONArray:function(C,R,I,L){var w=null;if(R instanceof y?(C=R.key,w=R):this.checkKey(C)&&(w=this.create(C,R)),w){if(Array.isArray(I))for(var O=I.length===1,B=0;B<w.source.length;B++){var V=O?I[0]:I[B];m.JSONArray(w,B,V)}else m.JSONArray(w,0,I);L&&w.setDataSource(L),this.emit(h.ADD,C,w),this.emit(h.ADD_KEY+C,w)}return w},addAtlasJSONHash:function(C,R,I,L){var w=null;if(R instanceof y?(C=R.key,w=R):this.checkKey(C)&&(w=this.create(C,R)),w){if(Array.isArray(I))for(var O=0;O<I.length;O++)m.JSONHash(w,O,I[O]);else m.JSONHash(w,0,I);L&&w.setDataSource(L),this.emit(h.ADD,C,w),this.emit(h.ADD_KEY+C,w)}return w},addAtlasXML:function(C,R,I,L){var w=null;return R instanceof y?(C=R.key,w=R):this.checkKey(C)&&(w=this.create(C,R)),w&&(m.AtlasXML(w,0,I),L&&w.setDataSource(L),this.emit(h.ADD,C,w),this.emit(h.ADD_KEY+C,w)),w},addUnityAtlas:function(C,R,I,L){var w=null;return R instanceof y?(C=R.key,w=R):this.checkKey(C)&&(w=this.create(C,R)),w&&(m.UnityYAML(w,0,I),L&&w.setDataSource(L),this.emit(h.ADD,C,w),this.emit(h.ADD_KEY+C,w)),w},addSpriteSheet:function(C,R,I,L){var w=null;if(R instanceof y?(C=R.key,w=R):this.checkKey(C)&&(w=this.create(C,R)),w){var O=w.source[0].width,B=w.source[0].height;m.SpriteSheet(w,0,0,0,O,B,I),L&&w.setDataSource(L),this.emit(h.ADD,C,w),this.emit(h.ADD_KEY+C,w)}return w},addSpriteSheetFromAtlas:function(C,R){if(!this.checkKey(C))return null;var I=u(R,"atlas",null),L=u(R,"frame",null);if(!(!I||!L)){var w=this.get(I),O=w.get(L);if(O){var B=O.source.image;B||(B=O.source.glTexture);var V=this.create(C,B);return O.trimmed?m.SpriteSheetFromAtlas(V,O,R):m.SpriteSheet(V,0,O.cutX,O.cutY,O.cutWidth,O.cutHeight,R),this.emit(h.ADD,C,V),this.emit(h.ADD_KEY+C,V),V}}},addUint8Array:function(C,R,I,L){if(!this.checkKey(C)||R.length/4!==I*L)return null;var w=this.create(C,R,I,L);return w.add("__BASE",0,0,0,I,L),this.emit(h.ADD,C,w),this.emit(h.ADD_KEY+C,w),w},create:function(C,R,I,L){var w=null;return this.checkKey(C)&&(w=new y(this,C,R,I,L),this.list[C]=w),w},exists:function(C){return this.list.hasOwnProperty(C)},get:function(C){return C===void 0&&(C="__DEFAULT"),this.list[C]?this.list[C]:C instanceof y?C:C instanceof i?C.texture:this.list.__MISSING},cloneFrame:function(C,R){if(this.list[C])return this.list[C].get(R).clone()},getFrame:function(C,R){if(this.list[C])return this.list[C].get(R)},parseFrame:function(C){if(C){if(typeof C=="string")return this.getFrame(C);if(Array.isArray(C)&&C.length===2)return this.getFrame(C[0],C[1]);if(p(C))return this.getFrame(C.key,C.frame);if(C instanceof y)return C.get();if(C instanceof i)return C}else return},getTextureKeys:function(){var C=[];for(var R in this.list)R!=="__DEFAULT"&&R!=="__MISSING"&&R!=="__WHITE"&&R!=="__NORMAL"&&C.push(R);return C},getPixel:function(C,R,I,L){var w=this.getFrame(I,L);if(w){C-=w.x,R-=w.y;var O=w.data.cut;if(C+=O.x,R+=O.y,C>=O.x&&C<O.r&&R>=O.y&&R<O.b){var B=this._tempContext;B.clearRect(0,0,1,1),B.drawImage(w.source.image,C,R,1,1,0,0,1,1);var V=B.getImageData(0,0,1,1);return new r(V.data[0],V.data[1],V.data[2],V.data[3])}}return null},getPixelAlpha:function(C,R,I,L){var w=this.getFrame(I,L);if(w){C-=w.x,R-=w.y;var O=w.data.cut;if(C+=O.x,R+=O.y,C>=O.x&&C<O.r&&R>=O.y&&R<O.b){var B=this._tempContext;B.clearRect(0,0,1,1),B.drawImage(w.source.image,C,R,1,1,0,0,1,1);var V=B.getImageData(0,0,1,1);return V.data[3]}}return null},setTexture:function(C,R,I){return this.list[R]&&(C.texture=this.list[R],C.frame=C.texture.get(I)),C},renameTexture:function(C,R){var I=this.get(C);return I&&C!==R?(I.key=R,this.list[R]=I,delete this.list[C],!0):!1},each:function(C,R){for(var I=[null],L=1;L<arguments.length;L++)I.push(arguments[L]);for(var w in this.list)I[0]=this.list[w],C.apply(R,I)},resetStamp:function(C,R){C===void 0&&(C=1),R===void 0&&(R=16777215);var I=this.stamp;return I.setCrop(),I.setPosition(0),I.setAngle(0),I.setScale(1),I.setAlpha(C),I.setTint(R),I.setTexture("__WHITE"),I},destroy:function(){for(var C in this.list)this.list[C].destroy();this.list={},this.stamp.destroy(),this.game=null,this.stamp=null,o.remove(this._tempCanvas)}});v.exports=S},11876:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(27919),g=t(83419),a=t(50030),r=t(29795),s=t(82751),e=new g({initialize:function(h,i,l,f,u){u===void 0&&(u=!1);var d=h.manager.game;this.renderer=d.renderer,this.texture=h,this.source=i,this.image=i.compressed?null:i,this.compressionAlgorithm=i.compressed?i.format:null,this.resolution=1,this.width=l||i.naturalWidth||i.videoWidth||i.width||0,this.height=f||i.naturalHeight||i.videoHeight||i.height||0,this.scaleMode=r.DEFAULT,this.isCanvas=i instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&i instanceof HTMLVideoElement,this.isRenderTexture=i.type==="RenderTexture"||i.type==="DynamicTexture",this.isGLTexture=i instanceof s,this.isPowerOf2=a(this.width,this.height),this.glTexture=null,this.flipY=u,this.init(d)},init:function(n){var h=this.renderer;if(h){var i=this.source;if(h.gl){var l=this.image,f=this.flipY,u=this.width,d=this.height,p=this.scaleMode;this.isCanvas?this.glTexture=h.createCanvasTexture(l,!1,f):this.isVideo?this.glTexture=h.createVideoTexture(l,!1,f):this.isRenderTexture?this.glTexture=h.createTextureFromSource(null,u,d,p):this.isGLTexture?this.glTexture=i:this.compressionAlgorithm?this.glTexture=h.createTextureFromSource(i,void 0,void 0,p):i instanceof Uint8Array?this.glTexture=h.createUint8ArrayTexture(i,u,d,p):this.glTexture=h.createTextureFromSource(l,u,d,p)}else this.isRenderTexture&&(this.image=i.canvas)}n.config.antialias||this.setFilter(1)},setFilter:function(n){this.renderer&&this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,n),this.scaleMode=n},setFlipY:function(n){return n===void 0&&(n=!0),n===this.flipY?this:(this.flipY=n,this.update(),this)},update:function(){var n=this.renderer,h=this.image,i=this.flipY,l=n.gl;l&&this.isCanvas?n.updateCanvasTexture(h,this.glTexture,i):l&&this.isVideo&&n.updateVideoTexture(h,this.glTexture,i)},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture),this.isCanvas&&o.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});v.exports=e},19673:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={LINEAR:0,NEAREST:1};v.exports=E},44538:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="addtexture"},63486:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="addtexture-"},94851:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="onerror"},29099:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="onload"},8678:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="ready"},86415:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="removetexture"},30879:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="removetexture-"},69442:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ADD:t(44538),ADD_KEY:t(63486),ERROR:t(94851),LOAD:t(29099),READY:t(8678),REMOVE:t(86415),REMOVE_KEY:t(30879)}},27458:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(19673),a={CanvasTexture:t(57382),DynamicTexture:t(81320),Events:t(69442),FilterMode:g,Frame:t(4327),Parsers:t(61309),Texture:t(79237),TextureManager:t(17130),TextureSource:t(11876)};a=o(!1,a,g),v.exports=a},89905:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(!g.getElementsByTagName("TextureAtlas")){console.warn("Invalid Texture Atlas XML given");return}var a=t.source[o];t.add("__BASE",o,0,0,a.width,a.height);for(var r=g.getElementsByTagName("SubTexture"),s,e=0;e<r.length;e++){var n=r[e].attributes,h=n.name.value,i=parseInt(n.x.value,10),l=parseInt(n.y.value,10),f=parseInt(n.width.value,10),u=parseInt(n.height.value,10);if(s=t.add(h,o,i,l,f,u),n.frameX){var d=Math.abs(parseInt(n.frameX.value,10)),p=Math.abs(parseInt(n.frameY.value,10)),m=parseInt(n.frameWidth.value,10),T=parseInt(n.frameHeight.value,10);s.setTrim(f,u,d,p,m,T)}}return t};v.exports=E},72893:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.source[o];return t.add("__BASE",o,0,0,g.width,g.height),t};v.exports=E},4832:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.source[o];return t.add("__BASE",o,0,0,g.width,g.height),t};v.exports=E},78566:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,r,s){if(!s.frames&&!s.textures){console.warn("Invalid Texture Atlas JSON Array");return}var e=a.source[r];a.add("__BASE",r,0,0,e.width,e.height);for(var n=Array.isArray(s.textures)?s.textures[r].frames:s.frames,h,i=0;i<n.length;i++){var l=n[i];if(h=a.add(l.filename,r,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!h){console.warn("Invalid atlas json, frame already exists: "+l.filename);continue}l.trimmed&&h.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(h.rotated=!0,h.updateUVsInverted());var f=l.anchor||l.pivot;f&&(h.customPivot=!0,h.pivotX=f.x,h.pivotY=f.y),l.scale9Borders&&h.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),h.customData=o(l)}for(var u in s)u!=="frames"&&(Array.isArray(s[u])?a.customData[u]=s[u].slice(0):a.customData[u]=s[u]);return a};v.exports=g},39711:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,r,s){if(!s.frames){console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object");return}var e=a.source[r];a.add("__BASE",r,0,0,e.width,e.height);var n=s.frames,h;for(var i in n)if(n.hasOwnProperty(i)){var l=n[i];if(h=a.add(i,r,l.frame.x,l.frame.y,l.frame.w,l.frame.h),!h){console.warn("Invalid atlas json, frame already exists: "+i);continue}l.trimmed&&h.setTrim(l.sourceSize.w,l.sourceSize.h,l.spriteSourceSize.x,l.spriteSourceSize.y,l.spriteSourceSize.w,l.spriteSourceSize.h),l.rotated&&(h.rotated=!0,h.updateUVsInverted());var f=l.anchor||l.pivot;f&&(h.customPivot=!0,h.pivotX=f.x,h.pivotY=f.y),l.scale9Borders&&h.setScale9(l.scale9Borders.x,l.scale9Borders.y,l.scale9Borders.w,l.scale9Borders.h),h.customData=o(l)}for(var u in s)u!=="frames"&&(Array.isArray(s[u])?a.customData[u]=s[u].slice(0):a.customData[u]=s[u]);return a};v.exports=g},31403:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=[171,75,84,88,32,49,49,187,13,10,26,10],g,a=new Uint8Array(t,0,12);for(g=0;g<a.length;g++)if(a[g]!==o[g]){console.warn("KTXParser - Invalid file format");return}var r=Uint32Array.BYTES_PER_ELEMENT,s=new DataView(t,12,13*r),e=s.getUint32(0,!0)===67305985,n=s.getUint32(1*r,e);if(n!==0){console.warn("KTXParser - Only compressed formats supported");return}var h=s.getUint32(4*r,e),i=s.getUint32(6*r,e),l=s.getUint32(7*r,e),f=Math.max(1,s.getUint32(11*r,e)),u=s.getUint32(12*r,e),d=new Array(f),p=12+13*4+u,m=i,T=l;for(g=0;g<f;g++){var y=new Int32Array(t,p,1)[0];p+=4,d[g]={data:new Uint8Array(t,p,y),width:m,height:T},m=Math.max(1,m>>1),T=Math.max(1,T>>1),p+=y}return{mipmaps:d,width:i,height:l,internalFormat:h,compressed:!0,generateMipmap:!1}};v.exports=E},82038:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(R,I,L,w,O,B,V){return V===void 0&&(V=16),Math.floor((R+L)/O)*Math.floor((I+w)/B)*V}function t(R,I){return R=Math.max(R,16),I=Math.max(I,8),R*I/4}function o(R,I){return R=Math.max(R,8),I=Math.max(I,8),R*I/2}function g(R,I){return Math.ceil(R/4)*Math.ceil(I/4)*16}function a(R,I){return E(R,I,3,3,4,4,8)}function r(R,I){return E(R,I,3,3,4,4)}function s(R,I){return E(R,I,4,3,5,4)}function e(R,I){return E(R,I,4,4,5,5)}function n(R,I){return E(R,I,5,4,6,5)}function h(R,I){return E(R,I,5,5,6,6)}function i(R,I){return E(R,I,7,4,8,5)}function l(R,I){return E(R,I,7,5,8,6)}function f(R,I){return E(R,I,7,7,8,8)}function u(R,I){return E(R,I,9,4,10,5)}function d(R,I){return E(R,I,9,5,10,6)}function p(R,I){return E(R,I,9,7,10,8)}function m(R,I){return E(R,I,9,9,10,10)}function T(R,I){return E(R,I,11,9,12,10)}function y(R,I){return E(R,I,11,11,12,12)}var S={0:{sizeFunc:t,glFormat:[35841]},1:{sizeFunc:t,glFormat:[35843]},2:{sizeFunc:o,glFormat:[35840]},3:{sizeFunc:o,glFormat:[35842]},6:{sizeFunc:a,glFormat:[36196]},7:{sizeFunc:a,glFormat:[33776,35916]},8:{sizeFunc:r,glFormat:[33777,35917]},9:{sizeFunc:r,glFormat:[33778,35918]},11:{sizeFunc:r,glFormat:[33779,35919]},14:{sizeFunc:g,glFormat:[36494,36495]},15:{sizeFunc:g,glFormat:[36492,36493]},22:{sizeFunc:a,glFormat:[37492,37493]},23:{sizeFunc:r,glFormat:[37496,37497]},24:{sizeFunc:a,glFormat:[37494,37495]},25:{sizeFunc:a,glFormat:[37488]},26:{sizeFunc:r,glFormat:[37490]},27:{sizeFunc:r,glFormat:[37808,37840]},28:{sizeFunc:s,glFormat:[37809,37841]},29:{sizeFunc:e,glFormat:[37810,37842]},30:{sizeFunc:n,glFormat:[37811,37843]},31:{sizeFunc:h,glFormat:[37812,37844]},32:{sizeFunc:i,glFormat:[37813,37845]},33:{sizeFunc:l,glFormat:[37814,37846]},34:{sizeFunc:f,glFormat:[37815,37847]},35:{sizeFunc:u,glFormat:[37816,37848]},36:{sizeFunc:d,glFormat:[37817,37849]},37:{sizeFunc:p,glFormat:[37818,37850]},38:{sizeFunc:m,glFormat:[37819,37851]},39:{sizeFunc:T,glFormat:[37820,37852]},40:{sizeFunc:y,glFormat:[37821,37853]}},C=function(R){for(var I=new Uint32Array(R,0,13),L=I[0],w=L===55727696,O=w?I[2]:I[3],B=I[4],V=S[O].glFormat[B],b=S[O].sizeFunc,X=I[11],K=I[7],Q=I[6],U=52+I[12],W=new Uint8Array(R,U),F=new Array(X),G=0,z=K,Y=Q,$=0;$<X;$++){var j=b(z,Y);F[$]={data:new Uint8Array(W.buffer,W.byteOffset+G,j),width:z,height:Y},z=Math.max(1,z>>1),Y=Math.max(1,Y>>1),G+=j}return{mipmaps:F,width:K,height:Q,internalFormat:V,compressed:!0,generateMipmap:!1}};v.exports=C},75549:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,r,s,e,n,h,i){var l=o(i,"frameWidth",null),f=o(i,"frameHeight",l);if(l===null)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var u=a.source[r];a.add("__BASE",r,0,0,u.width,u.height);var d=o(i,"startFrame",0),p=o(i,"endFrame",-1),m=o(i,"margin",0),T=o(i,"spacing",0),y=Math.floor((n-m+T)/(l+T)),S=Math.floor((h-m+T)/(f+T)),C=y*S;C===0&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",a.key),(d>C||d<-C)&&(d=0),d<0&&(d=C+d),(p===-1||p>C||p<d)&&(p=C);for(var R=m,I=m,L=0,w=0,O=0,B=0;B<C;B++){L=0,w=0;var V=R+l,b=I+f;V>n&&(L=V-n),b>h&&(w=b-h),B>=d&&B<=p&&(a.add(O,r,s+R,e+I,l-L,f-w),O++),R+=l+T,R+l>n&&(R=m,I+=f+T)}return a};v.exports=g},47534:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,r,s){var e=o(s,"frameWidth",null),n=o(s,"frameHeight",e);if(!e)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var h=a.source[0];a.add("__BASE",0,0,0,h.width,h.height),o(s,"startFrame",0),o(s,"endFrame",-1);for(var i=o(s,"margin",0),l=o(s,"spacing",0),f=r.cutX,u=r.cutY,d=r.cutWidth,p=r.cutHeight,m=r.realWidth,T=r.realHeight,y=Math.floor((m-i+l)/(e+l)),S=Math.floor((T-i+l)/(n+l)),C=r.x,R=e-C,I=e-(m-d-C),L=r.y,w=n-L,O=n-(T-p-L),B,V=i,b=i,X=0,K=0,Q=0;Q<S;Q++){for(var U=Q===0,W=Q===S-1,F=0;F<y;F++){var G=F===0,z=F===y-1;if(B=a.add(X,K,f+V,u+b,e,n),G||U||z||W){var Y=G?C:0,$=U?L:0,j=0,Z=0;G&&(j+=e-R),z&&(j+=e-I),U&&(Z+=n-w),W&&(Z+=n-O);var q=e-j,_=n-Z;B.cutWidth=q,B.cutHeight=_,B.setTrim(e,n,Y,$,q,_)}V+=l,G?V+=R:z?V+=I:V+=e,X++}V=i,b+=l,U?b+=w:W?b+=O:b+=n}return a};v.exports=g},86147:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=0,t=function(g,a,r,s){var e=E-s.y-s.height;g.add(r,a,s.x,e,s.width,s.height)},o=function(g,a,r){var s=g.source[a];g.add("__BASE",a,0,0,s.width,s.height),E=s.height;for(var e=r.split(`
`),n=/^[ ]*(- )*(\w+)+[: ]+(.*)/,h="",i="",l={x:0,y:0,width:0,height:0},f=0;f<e.length;f++){var u=e[f].match(n);if(u){var d=u[1]==="- ",p=u[2],m=u[3];if(d&&(i!==h&&(t(g,a,i,l),h=i),l={x:0,y:0,width:0,height:0}),p==="name"){i=m;continue}switch(p){case"x":case"y":case"width":case"height":l[p]=parseInt(m,10);break}}}return i!==h&&t(g,a,i,l),g};v.exports=o},55222:(v,E,t)=>{/**
 * @author       Ben Richards <benjamindrichards@gmail.com>
 * @copyright    2024 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(50030),g=function(h){for(var i=h.mipmaps,l=1;l<i.length;l++){var f=i[l].width,u=i[l].height;if(!o(f,u))return console.warn("Mip level "+l+" is not a power-of-two size: "+f+"x"+u),!1}var d=n[h.internalFormat];return d?d(h):(console.warn("No format checker found for internal format "+h.internalFormat+". Assuming valid."),!0)};function a(h){for(var i=h.mipmaps,l=0;l<i.length;l++){var f=i[l].width,u=i[l].height;if((f<<l)%4!==0||(u<<l)%4!==0)return console.warn("BPTC, RGTC, and S3TC dimensions must be a multiple of 4 pixels, and each successive mip level must be half the size of the previous level, rounded down. Mip level "+l+" is "+f+"x"+u),!1}return!0}function r(){return!0}function s(h){var i=h.mipmaps,l=i[0];return o(l.width,l.height)?!0:(console.warn("PVRTC base dimensions must be power of two. Base level is "+l.width+"x"+l.height),!1)}function e(h){var i=h.mipmaps,l=i[0];return l.width%4!==0||l.height%4!==0?(console.warn("S3TC SRGB base dimensions must be a multiple of 4 pixels. Base level is "+l.width+"x"+l.height+" pixels"),!1):!0}var n={37488:r,37489:r,37490:r,37491:r,37492:r,37493:r,37494:r,37495:r,37496:r,37497:r,36196:r,37808:r,37809:r,37810:r,37811:r,37812:r,37813:r,37814:r,37815:r,37816:r,37817:r,37818:r,37819:r,37820:r,37821:r,37840:r,37841:r,37842:r,37843:r,37844:r,37845:r,37846:r,37847:r,37848:r,37849:r,37850:r,37851:r,37852:r,37853:r,36492:a,36493:a,36494:a,36495:a,36283:a,36284:a,36285:a,36286:a,35840:s,35841:s,35842:s,35843:s,33776:a,33777:a,33778:a,33779:a,35916:e,35917:e,35918:e,35919:e};v.exports=g},61309:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AtlasXML:t(89905),Canvas:t(72893),Image:t(4832),JSONArray:t(78566),JSONHash:t(39711),KTXParser:t(31403),PVRParser:t(82038),SpriteSheet:t(75549),SpriteSheetFromAtlas:t(47534),UnityYAML:t(86147)}},80341:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},16536:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r,s,e,n,h,i,l){(e===void 0||e<=0)&&(e=32),(n===void 0||n<=0)&&(n=32),h===void 0&&(h=0),i===void 0&&(i=0),this.name=r,this.firstgid=s|0,this.imageWidth=e|0,this.imageHeight=n|0,this.imageMargin=h|0,this.imageSpacing=i|0,this.properties=l||{},this.images=[],this.total=0},containsImageIndex:function(a){return a>=this.firstgid&&a<this.firstgid+this.total},addImage:function(a,r){return this.images.push({gid:a,image:r}),this.total++,this}});v.exports=g},27462:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2021 Photon Storm Ltd.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=new o({initialize:function(r){if(this.gids=[],r!==void 0)for(var s=0;s<r.length;++s)for(var e=r[s],n=0;n<e.total;++n)this.gids[e.firstgid+n]=e;this._gids=this.gids},enabled:{get:function(){return!!this.gids},set:function(a){this.gids=a?this._gids:void 0}},getTypeIncludingTile:function(a){if(a.type!==void 0&&a.type!=="")return a.type;if(!(!this.gids||a.gid===void 0)){var r=this.gids[a.gid];if(r){var s=r.getTileData(a.gid);if(s)return s.type}}},setTextureAndFrame:function(a,r,s,e){if(r===null&&this.gids&&e.gid!==void 0){var n=this.gids[e.gid];n&&(r===null&&n.image!==void 0&&(r=n.image.key),s===null&&(s=e.gid-n.firstgid),a.scene.textures.getFrame(r,s)||(r=null,s=null))}a.setTexture(r,s)},setPropertiesFromTiledObject:function(a,r){if(this.gids!==void 0&&r.gid!==void 0){var s=this.gids[r.gid];s!==void 0&&this.setFromJSON(a,s.getTileProperties(r.gid))}this.setFromJSON(a,r.properties)},setFromJSON:function(a,r){if(r){if(Array.isArray(r)){for(var s=0;s<r.length;s++){var e=r[s];a[e.name]!==void 0?a[e.name]=e.value:a.setData(e.name,e.value)}return}for(var n in r)a[n]!==void 0?a[n]=r[n]:a.setData(n,r[n])}}});v.exports=g},31989:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(87010),a=t(46177),r=t(49075),s=function(e,n,h,i,l,f,u,d){h===void 0&&(h=32),i===void 0&&(i=32),l===void 0&&(l=10),f===void 0&&(f=10),d===void 0&&(d=!1);var p=null;if(Array.isArray(u)){var m=n!==void 0?n:"map";p=a(m,o.ARRAY_2D,u,h,i,d)}else if(n!==void 0){var T=e.cache.tilemap.get(n);T?p=a(n,T.format,T.data,h,i,d):console.warn("No map data found for key "+n)}return p===null&&(p=new g({tileWidth:h,tileHeight:i,width:l,height:f})),new r(e,p)};v.exports=s},23029:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(31401),a=t(91907),r=t(62644),s=t(93232),e=new o({Mixins:[g.AlphaSingle,g.Flip,g.Visible],initialize:function(h,i,l,f,u,d,p,m){this.layer=h,this.index=i,this.x=l,this.y=f,this.width=u,this.height=d,this.right,this.bottom,this.baseWidth=p!==void 0?p:u,this.baseHeight=m!==void 0?m:d,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.tintFill=!1,this.physics={}},containsPoint:function(n,h){return!(n<this.pixelX||h<this.pixelY||n>this.right||h>this.bottom)},copy:function(n){return this.index=n.index,this.alpha=n.alpha,this.properties=r(n.properties),this.visible=n.visible,this.setFlip(n.flipX,n.flipY),this.tint=n.tint,this.rotation=n.rotation,this.collideUp=n.collideUp,this.collideDown=n.collideDown,this.collideLeft=n.collideLeft,this.collideRight=n.collideRight,this.collisionCallback=n.collisionCallback,this.collisionCallbackContext=n.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(n){var h=this.tilemapLayer;if(h){var i=h.tileToWorldXY(this.x,this.y,void 0,n);return i.x}return this.x*this.baseWidth},getRight:function(n){var h=this.tilemapLayer;return h?this.getLeft(n)+this.width*h.scaleX:this.getLeft(n)+this.width},getTop:function(n){var h=this.tilemapLayer;if(h){var i=h.tileToWorldXY(this.x,this.y,void 0,n);return i.y}return this.y*this.baseWidth-(this.height-this.baseHeight)},getBottom:function(n){var h=this.tilemapLayer;return h?this.getTop(n)+this.height*h.scaleY:this.getTop(n)+this.height},getBounds:function(n,h){return h===void 0&&(h=new s),h.x=this.getLeft(n),h.y=this.getTop(n),h.width=this.getRight(n)-h.x,h.height=this.getBottom(n)-h.y,h},getCenterX:function(n){return(this.getLeft(n)+this.getRight(n))/2},getCenterY:function(n){return(this.getTop(n)+this.getBottom(n))/2},intersects:function(n,h,i,l){return!(i<=this.pixelX||l<=this.pixelY||n>=this.right||h>=this.bottom)},isInteresting:function(n,h){return n&&h?this.canCollide||this.hasInterestingFace:n?this.collides:h?this.hasInterestingFace:!1},resetCollision:function(n){if(n===void 0&&(n=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,n){var h=this.tilemapLayer;h&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(n,h,i,l,f){if(h===void 0&&(h=n),i===void 0&&(i=n),l===void 0&&(l=n),f===void 0&&(f=!0),this.collideLeft=n,this.collideRight=h,this.collideUp=i,this.collideDown=l,this.faceLeft=n,this.faceRight=h,this.faceTop=i,this.faceBottom=l,f){var u=this.tilemapLayer;u&&this.tilemapLayer.calculateFacesAt(this.x,this.y)}return this},setCollisionCallback:function(n,h){return n===null?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=n,this.collisionCallbackContext=h),this},setSize:function(n,h,i,l){return n!==void 0&&(this.width=n),h!==void 0&&(this.height=h),i!==void 0&&(this.baseWidth=i),l!==void 0&&(this.baseHeight=l),this.updatePixelXY(),this},updatePixelXY:function(){var n=this.layer.orientation;if(n===a.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(n===a.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(n===a.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(n===a.HEXAGONAL){var h=this.layer.staggerAxis,i=this.layer.staggerIndex,l=this.layer.hexSideLength,f,u;h==="y"?(u=(this.baseHeight-l)/2+l,i==="odd"?this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2):this.pixelX=this.x*this.baseWidth-this.y%2*(this.baseWidth/2),this.pixelY=this.y*u):h==="x"&&(f=(this.baseWidth-l)/2+l,this.pixelX=this.x*f,i==="odd"?this.pixelY=this.y*this.baseHeight+this.x%2*(this.baseHeight/2):this.pixelY=this.y*this.baseHeight-this.x%2*(this.baseHeight/2))}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback!==void 0}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var n=this.layer.tilemapLayer;if(n){var h=n.gidMap[this.index];if(h)return h}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var n=this.tilemapLayer;return n?n.tilemap:null}}});v.exports=e},49075:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(84101),g=t(83419),a=t(39506),r=t(80341),s=t(95540),e=t(14977),n=t(27462),h=t(91907),i=t(36305),l=t(19133),f=t(68287),u=t(23029),d=t(81086),p=t(20442),m=t(33629),T=new g({initialize:function(S,C){this.scene=S,this.tileWidth=C.tileWidth,this.tileHeight=C.tileHeight,this.width=C.width,this.height=C.height,this.orientation=C.orientation,this.renderOrder=C.renderOrder,this.format=C.format,this.version=C.version,this.properties=C.properties,this.widthInPixels=C.widthInPixels,this.heightInPixels=C.heightInPixels,this.imageCollections=C.imageCollections,this.images=C.images,this.layers=C.layers,this.tiles=C.tiles,this.tilesets=C.tilesets,this.objects=C.objects,this.currentLayerIndex=0,this.hexSideLength=C.hexSideLength;var R=this.orientation;this._convert={WorldToTileXY:d.GetWorldToTileXYFunction(R),WorldToTileX:d.GetWorldToTileXFunction(R),WorldToTileY:d.GetWorldToTileYFunction(R),TileToWorldXY:d.GetTileToWorldXYFunction(R),TileToWorldX:d.GetTileToWorldXFunction(R),TileToWorldY:d.GetTileToWorldYFunction(R),GetTileCorners:d.GetTileCornersFunction(R)}},setRenderOrder:function(y){var S=["right-down","left-down","right-up","left-up"];return typeof y=="number"&&(y=S[y]),S.indexOf(y)>-1&&(this.renderOrder=y),this},addTilesetImage:function(y,S,C,R,I,L,w,O){if(y===void 0)return null;S==null&&(S=y);var B=this.scene.sys.textures;if(!B.exists(S))return console.warn('Texture key "%s" not found',S),null;var V=B.get(S),b=this.getTilesetIndex(y);if(b===null&&this.format===r.TILED_JSON)return console.warn('Tilemap has no tileset "%s". Its tilesets are %o',y,this.tilesets),null;var X=this.tilesets[b];return X?(X.setTileSize(C,R),X.setSpacing(I,L),X.setImage(V),X):(C===void 0&&(C=this.tileWidth),R===void 0&&(R=this.tileHeight),I===void 0&&(I=0),L===void 0&&(L=0),w===void 0&&(w=0),O===void 0&&(O={x:0,y:0}),X=new m(y,w,C,R,I,L,void 0,void 0,O),X.setImage(V),this.tilesets.push(X),this.tiles=o(this),X)},copy:function(y,S,C,R,I,L,w,O){return O=this.getLayer(O),O!==null?(d.Copy(y,S,C,R,I,L,w,O),this):null},createBlankLayer:function(y,S,C,R,I,L,w,O){C===void 0&&(C=0),R===void 0&&(R=0),I===void 0&&(I=this.width),L===void 0&&(L=this.height),w===void 0&&(w=this.tileWidth),O===void 0&&(O=this.tileHeight);var B=this.getLayerIndex(y);if(B!==null)return console.warn("Invalid Tilemap Layer ID: "+y),null;for(var V=new e({name:y,tileWidth:w,tileHeight:O,width:I,height:L,orientation:this.orientation}),b,X=0;X<L;X++){b=[];for(var K=0;K<I;K++)b.push(new u(V,-1,K,X,w,O,this.tileWidth,this.tileHeight));V.data.push(b)}this.layers.push(V),this.currentLayerIndex=this.layers.length-1;var Q=new p(this.scene,this,this.currentLayerIndex,S,C,R);return Q.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(Q),Q},createLayer:function(y,S,C,R){var I=this.getLayerIndex(y);if(I===null)return console.warn("Invalid Tilemap Layer ID: "+y),typeof y=="string"&&console.warn("Valid tilelayer names: %o",this.getTileLayerNames()),null;var L=this.layers[I];if(L.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+y),null;this.currentLayerIndex=I,C===void 0&&(C=L.x),R===void 0&&(R=L.y);var w=new p(this.scene,this,I,S,C,R);return w.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(w),w},createFromObjects:function(y,S,C){C===void 0&&(C=!0);var R=[],I=this.getObjectLayer(y);if(!I)return console.warn("createFromObjects: Invalid objectLayerName given: "+y),R;var L=new n(C?this.tilesets:void 0);Array.isArray(S)||(S=[S]);for(var w=I.objects,O=0;O<S.length;O++){var B=S[O],V=s(B,"id",null),b=s(B,"gid",null),X=s(B,"name",null),K=s(B,"type",null);L.enabled=!s(B,"ignoreTileset",null);for(var Q,U=[],W=0;W<w.length;W++)Q=w[W],(V===null&&b===null&&X===null&&K===null||V!==null&&Q.id===V||b!==null&&Q.gid===b||X!==null&&Q.name===X||K!==null&&L.getTypeIncludingTile(Q)===K)&&U.push(Q);for(var F=s(B,"classType",f),G=s(B,"scene",this.scene),z=s(B,"container",null),Y=s(B,"key",null),$=s(B,"frame",null),j=0;j<U.length;j++){Q=U[j];var Z=new F(G);if(Z.setName(Q.name),Z.setPosition(Q.x,Q.y),L.setTextureAndFrame(Z,Y,$,Q),Q.width&&(Z.displayWidth=Q.width),Q.height&&(Z.displayHeight=Q.height),this.orientation===h.ISOMETRIC){var q=this.tileWidth/this.tileHeight,_={x:Z.x-Z.y,y:(Z.x+Z.y)/q};Z.x=_.x,Z.y=_.y}var tt={x:Z.originX*Q.width,y:(Z.originY-(Q.gid?1:0))*Q.height};if(Q.rotation){var nt=a(Q.rotation);i(tt,nt),Z.rotation=nt}Z.x+=tt.x,Z.y+=tt.y,(Q.flippedHorizontal!==void 0||Q.flippedVertical!==void 0)&&Z.setFlip(Q.flippedHorizontal,Q.flippedVertical),Q.visible||(Z.visible=!1),L.setPropertiesFromTiledObject(Z,Q),z?z.add(Z):G.add.existing(Z),R.push(Z)}}return R},createFromTiles:function(y,S,C,R,I,L){return L=this.getLayer(L),L===null?null:d.CreateFromTiles(y,S,C,R,I,L)},fill:function(y,S,C,R,I,L,w){return L===void 0&&(L=!0),w=this.getLayer(w),w===null?null:(d.Fill(y,S,C,R,I,L,w),this)},filterObjects:function(y,S,C){if(typeof y=="string"){var R=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+R),null}return y.objects.filter(S,C)},filterTiles:function(y,S,C,R,I,L,w,O){return O=this.getLayer(O),O===null?null:d.FilterTiles(y,S,C,R,I,L,w,O)},findByIndex:function(y,S,C,R){return R=this.getLayer(R),R===null?null:d.FindByIndex(y,S,C,R)},findObject:function(y,S,C){if(typeof y=="string"){var R=y;if(y=this.getObjectLayer(y),!y)return console.warn("No object layer found with the name: "+R),null}return y.objects.find(S,C)||null},findTile:function(y,S,C,R,I,L,w,O){return O=this.getLayer(O),O===null?null:d.FindTile(y,S,C,R,I,L,w,O)},forEachTile:function(y,S,C,R,I,L,w,O){return O=this.getLayer(O),O===null?null:(d.ForEachTile(y,S,C,R,I,L,w,O),this)},getImageIndex:function(y){return this.getIndex(this.images,y)},getImageLayerNames:function(){return!this.images||!Array.isArray(this.images)?[]:this.images.map(function(y){return y.name})},getIndex:function(y,S){for(var C=0;C<y.length;C++)if(y[C].name===S)return C;return null},getLayer:function(y){var S=this.getLayerIndex(y);return S!==null?this.layers[S]:null},getObjectLayer:function(y){var S=this.getIndex(this.objects,y);return S!==null?this.objects[S]:null},getObjectLayerNames:function(){return!this.objects||!Array.isArray(this.objects)?[]:this.objects.map(function(y){return y.name})},getLayerIndex:function(y){return y===void 0?this.currentLayerIndex:typeof y=="string"?this.getLayerIndexByName(y):typeof y=="number"&&y<this.layers.length?y:y instanceof p&&y.tilemap===this?y.layerIndex:null},getLayerIndexByName:function(y){return this.getIndex(this.layers,y)},getTileAt:function(y,S,C,R){return R=this.getLayer(R),R===null?null:d.GetTileAt(y,S,C,R)},getTileAtWorldXY:function(y,S,C,R,I){return I=this.getLayer(I),I===null?null:d.GetTileAtWorldXY(y,S,C,R,I)},getTileLayerNames:function(){return!this.layers||!Array.isArray(this.layers)?[]:this.layers.map(function(y){return y.name})},getTilesWithin:function(y,S,C,R,I,L){return L=this.getLayer(L),L===null?null:d.GetTilesWithin(y,S,C,R,I,L)},getTilesWithinShape:function(y,S,C,R){return R=this.getLayer(R),R===null?null:d.GetTilesWithinShape(y,S,C,R)},getTilesWithinWorldXY:function(y,S,C,R,I,L,w){return w=this.getLayer(w),w===null?null:d.GetTilesWithinWorldXY(y,S,C,R,I,L,w)},getTileset:function(y){var S=this.getIndex(this.tilesets,y);return S!==null?this.tilesets[S]:null},getTilesetIndex:function(y){return this.getIndex(this.tilesets,y)},hasTileAt:function(y,S,C){return C=this.getLayer(C),C===null?null:d.HasTileAt(y,S,C)},hasTileAtWorldXY:function(y,S,C,R){return R=this.getLayer(R),R===null?null:d.HasTileAtWorldXY(y,S,C,R)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(y){this.setLayer(y)}},putTileAt:function(y,S,C,R,I){return R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:d.PutTileAt(y,S,C,R,I)},putTileAtWorldXY:function(y,S,C,R,I,L){return R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:d.PutTileAtWorldXY(y,S,C,R,I,L)},putTilesAt:function(y,S,C,R,I){return R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(d.PutTilesAt(y,S,C,R,I),this)},randomize:function(y,S,C,R,I,L){return L=this.getLayer(L),L===null?null:(d.Randomize(y,S,C,R,I,L),this)},calculateFacesAt:function(y,S,C){return C=this.getLayer(C),C===null?null:(d.CalculateFacesAt(y,S,C),this)},calculateFacesWithin:function(y,S,C,R,I){return I=this.getLayer(I),I===null?null:(d.CalculateFacesWithin(y,S,C,R,I),this)},removeLayer:function(y){var S=this.getLayerIndex(y);if(S!==null){l(this.layers,S);for(var C=S;C<this.layers.length;C++)this.layers[C].tilemapLayer&&this.layers[C].tilemapLayer.layerIndex--;return this.currentLayerIndex===S&&(this.currentLayerIndex=0),this}else return null},destroyLayer:function(y){var S=this.getLayerIndex(y);return S!==null?(y=this.layers[S],y.tilemapLayer.destroy(),l(this.layers,S),this.currentLayerIndex===S&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var y=this.layers,S=0;S<y.length;S++)y[S].tilemapLayer&&y[S].tilemapLayer.destroy(!1);return y.length=0,this.currentLayerIndex=0,this},removeTile:function(y,S,C){S===void 0&&(S=-1),C===void 0&&(C=!0);var R=[];Array.isArray(y)||(y=[y]);for(var I=0;I<y.length;I++){var L=y[I];R.push(this.removeTileAt(L.x,L.y,!0,C,L.tilemapLayer)),S>-1&&this.putTileAt(S,L.x,L.y,C,L.tilemapLayer)}return R},removeTileAt:function(y,S,C,R,I){return C===void 0&&(C=!0),R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:d.RemoveTileAt(y,S,C,R,I)},removeTileAtWorldXY:function(y,S,C,R,I,L){return C===void 0&&(C=!0),R===void 0&&(R=!0),L=this.getLayer(L),L===null?null:d.RemoveTileAtWorldXY(y,S,C,R,I,L)},renderDebug:function(y,S,C){return C=this.getLayer(C),C===null?null:(this.orientation===h.ORTHOGONAL&&d.RenderDebug(y,S,C),this)},renderDebugFull:function(y,S){for(var C=this.layers,R=0;R<C.length;R++)d.RenderDebug(y,S,C[R]);return this},replaceByIndex:function(y,S,C,R,I,L,w){return w=this.getLayer(w),w===null?null:(d.ReplaceByIndex(y,S,C,R,I,L,w),this)},setCollision:function(y,S,C,R,I){return S===void 0&&(S=!0),C===void 0&&(C=!0),I===void 0&&(I=!0),R=this.getLayer(R),R===null?null:(d.SetCollision(y,S,C,R,I),this)},setCollisionBetween:function(y,S,C,R,I){return C===void 0&&(C=!0),R===void 0&&(R=!0),I=this.getLayer(I),I===null?null:(d.SetCollisionBetween(y,S,C,R,I),this)},setCollisionByProperty:function(y,S,C,R){return S===void 0&&(S=!0),C===void 0&&(C=!0),R=this.getLayer(R),R===null?null:(d.SetCollisionByProperty(y,S,C,R),this)},setCollisionByExclusion:function(y,S,C,R){return S===void 0&&(S=!0),C===void 0&&(C=!0),R=this.getLayer(R),R===null?null:(d.SetCollisionByExclusion(y,S,C,R),this)},setCollisionFromCollisionGroup:function(y,S,C){return y===void 0&&(y=!0),S===void 0&&(S=!0),C=this.getLayer(C),C===null?null:(d.SetCollisionFromCollisionGroup(y,S,C),this)},setTileIndexCallback:function(y,S,C,R){return R=this.getLayer(R),R===null?null:(d.SetTileIndexCallback(y,S,C,R),this)},setTileLocationCallback:function(y,S,C,R,I,L,w){return w=this.getLayer(w),w===null?null:(d.SetTileLocationCallback(y,S,C,R,I,L,w),this)},setLayer:function(y){var S=this.getLayerIndex(y);return S!==null&&(this.currentLayerIndex=S),this},setBaseTileSize:function(y,S){this.tileWidth=y,this.tileHeight=S,this.widthInPixels=this.width*y,this.heightInPixels=this.height*S;for(var C=0;C<this.layers.length;C++){this.layers[C].baseTileWidth=y,this.layers[C].baseTileHeight=S;for(var R=this.layers[C].data,I=this.layers[C].width,L=this.layers[C].height,w=0;w<L;w++)for(var O=0;O<I;O++){var B=R[w][O];B!==null&&B.setSize(void 0,void 0,y,S)}}return this},setLayerTileSize:function(y,S,C){if(C=this.getLayer(C),C===null)return this;C.tileWidth=y,C.tileHeight=S;for(var R=C.data,I=C.width,L=C.height,w=0;w<L;w++)for(var O=0;O<I;O++){var B=R[w][O];B!==null&&B.setSize(y,S)}return this},shuffle:function(y,S,C,R,I){return I=this.getLayer(I),I===null?null:(d.Shuffle(y,S,C,R,I),this)},swapByIndex:function(y,S,C,R,I,L,w){return w=this.getLayer(w),w===null?null:(d.SwapByIndex(y,S,C,R,I,L,w),this)},tileToWorldX:function(y,S,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldX(y,S,C)},tileToWorldY:function(y,S,C){return C=this.getLayer(C),C===null?null:this._convert.TileToWorldY(y,S,C)},tileToWorldXY:function(y,S,C,R,I){return I=this.getLayer(I),I===null?null:this._convert.TileToWorldXY(y,S,C,R,I)},getTileCorners:function(y,S,C,R){return R=this.getLayer(R),R===null?null:this._convert.GetTileCorners(y,S,C,R)},weightedRandomize:function(y,S,C,R,I,L){return L=this.getLayer(L),L===null?null:(d.WeightedRandomize(S,C,R,I,y,L),this)},worldToTileX:function(y,S,C,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileX(y,S,C,R)},worldToTileY:function(y,S,C,R){return R=this.getLayer(R),R===null?null:this._convert.WorldToTileY(y,S,C,R)},worldToTileXY:function(y,S,C,R,I,L){return L=this.getLayer(L),L===null?null:this._convert.WorldToTileXY(y,S,C,R,I,L)},destroy:function(){this.removeAllLayers(),this.tiles.length=0,this.tilesets.length=0,this.objects.length=0,this.scene=null}});v.exports=T},45939:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(44603),g=t(31989);o.register("tilemap",function(a){var r=a!==void 0?a:{};return g(this.scene,r.key,r.tileWidth,r.tileHeight,r.width,r.height,r.data,r.insertNull)})},46029:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(39429),g=t(31989);o.register("tilemap",function(a,r,s,e,n,h,i){return a===null&&(a=void 0),r===null&&(r=void 0),s===null&&(s=void 0),e===null&&(e=void 0),n===null&&(n=void 0),g(this.scene,a,r,s,e,n,h,i)})},20442:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(78389),a=t(31401),r=t(95643),s=t(81086),e=t(19218),n=t(26099),h=new o({Extends:r,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.PostPipeline,a.Transform,a.Visible,a.ScrollFactor,g,e],initialize:function(l,f,u,d,p,m){r.call(this,l,"TilemapLayer"),this.isTilemap=!0,this.tilemap=f,this.layerIndex=u,this.layer=f.layers[u],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=s.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.tempVec=new n,this.collisionCategory=1,this.collisionMask=1,this.setTilesets(d),this.setAlpha(this.layer.alpha),this.setPosition(p,m),this.setOrigin(0,0),this.setSize(f.tileWidth*this.layer.width,f.tileHeight*this.layer.height),this.initPipeline(),this.initPostPipeline(!1)},setTilesets:function(i){var l=[],f=[],u=this.tilemap;Array.isArray(i)||(i=[i]);for(var d=0;d<i.length;d++){var p=i[d];if(typeof p=="string"&&(p=u.getTileset(p)),p){f.push(p);for(var m=p.firstgid,T=0;T<p.total;T++)l[m+T]=p}}this.gidMap=l,this.tileset=f},setRenderOrder:function(i){var l=["right-down","left-down","right-up","left-up"];return typeof i=="string"&&(i=l.indexOf(i)),i>=0&&i<4&&(this._renderOrder=i),this},calculateFacesAt:function(i,l){return s.CalculateFacesAt(i,l,this.layer),this},calculateFacesWithin:function(i,l,f,u){return s.CalculateFacesWithin(i,l,f,u,this.layer),this},createFromTiles:function(i,l,f,u,d){return s.CreateFromTiles(i,l,f,u,d,this.layer)},cull:function(i){return this.cullCallback(this.layer,i,this.culledTiles,this._renderOrder)},copy:function(i,l,f,u,d,p,m){return s.Copy(i,l,f,u,d,p,m,this.layer),this},fill:function(i,l,f,u,d,p){return s.Fill(i,l,f,u,d,p,this.layer),this},filterTiles:function(i,l,f,u,d,p,m){return s.FilterTiles(i,l,f,u,d,p,m,this.layer)},findByIndex:function(i,l,f){return s.FindByIndex(i,l,f,this.layer)},findTile:function(i,l,f,u,d,p,m){return s.FindTile(i,l,f,u,d,p,m,this.layer)},forEachTile:function(i,l,f,u,d,p,m){return s.ForEachTile(i,l,f,u,d,p,m,this.layer),this},setTint:function(i,l,f,u,d,p){i===void 0&&(i=16777215);var m=function(T){T.tint=i,T.tintFill=!1};return this.forEachTile(m,this,l,f,u,d,p)},setTintFill:function(i,l,f,u,d,p){i===void 0&&(i=16777215);var m=function(T){T.tint=i,T.tintFill=!0};return this.forEachTile(m,this,l,f,u,d,p)},getTileAt:function(i,l,f){return s.GetTileAt(i,l,f,this.layer)},getTileAtWorldXY:function(i,l,f,u){return s.GetTileAtWorldXY(i,l,f,u,this.layer)},getIsoTileAtWorldXY:function(i,l,f,u,d){f===void 0&&(f=!0);var p=this.tempVec;return s.IsometricWorldToTileXY(i,l,!0,p,d,this.layer,f),this.getTileAt(p.x,p.y,u)},getTilesWithin:function(i,l,f,u,d){return s.GetTilesWithin(i,l,f,u,d,this.layer)},getTilesWithinShape:function(i,l,f){return s.GetTilesWithinShape(i,l,f,this.layer)},getTilesWithinWorldXY:function(i,l,f,u,d,p){return s.GetTilesWithinWorldXY(i,l,f,u,d,p,this.layer)},hasTileAt:function(i,l){return s.HasTileAt(i,l,this.layer)},hasTileAtWorldXY:function(i,l,f){return s.HasTileAtWorldXY(i,l,f,this.layer)},putTileAt:function(i,l,f,u){return s.PutTileAt(i,l,f,u,this.layer)},putTileAtWorldXY:function(i,l,f,u,d){return s.PutTileAtWorldXY(i,l,f,u,d,this.layer)},putTilesAt:function(i,l,f,u){return s.PutTilesAt(i,l,f,u,this.layer),this},randomize:function(i,l,f,u,d){return s.Randomize(i,l,f,u,d,this.layer),this},removeTileAt:function(i,l,f,u){return s.RemoveTileAt(i,l,f,u,this.layer)},removeTileAtWorldXY:function(i,l,f,u,d){return s.RemoveTileAtWorldXY(i,l,f,u,d,this.layer)},renderDebug:function(i,l){return s.RenderDebug(i,l,this.layer),this},replaceByIndex:function(i,l,f,u,d,p){return s.ReplaceByIndex(i,l,f,u,d,p,this.layer),this},setSkipCull:function(i){return i===void 0&&(i=!0),this.skipCull=i,this},setCullPadding:function(i,l){return i===void 0&&(i=1),l===void 0&&(l=1),this.cullPaddingX=i,this.cullPaddingY=l,this},setCollision:function(i,l,f,u){return s.SetCollision(i,l,f,this.layer,u),this},setCollisionBetween:function(i,l,f,u){return s.SetCollisionBetween(i,l,f,u,this.layer),this},setCollisionByProperty:function(i,l,f){return s.SetCollisionByProperty(i,l,f,this.layer),this},setCollisionByExclusion:function(i,l,f){return s.SetCollisionByExclusion(i,l,f,this.layer),this},setCollisionFromCollisionGroup:function(i,l){return s.SetCollisionFromCollisionGroup(i,l,this.layer),this},setTileIndexCallback:function(i,l,f){return s.SetTileIndexCallback(i,l,f,this.layer),this},setTileLocationCallback:function(i,l,f,u,d,p){return s.SetTileLocationCallback(i,l,f,u,d,p,this.layer),this},shuffle:function(i,l,f,u){return s.Shuffle(i,l,f,u,this.layer),this},swapByIndex:function(i,l,f,u,d,p){return s.SwapByIndex(i,l,f,u,d,p,this.layer),this},tileToWorldX:function(i,l){return this.tilemap.tileToWorldX(i,l,this)},tileToWorldY:function(i,l){return this.tilemap.tileToWorldY(i,l,this)},tileToWorldXY:function(i,l,f,u){return this.tilemap.tileToWorldXY(i,l,f,u,this)},getTileCorners:function(i,l,f){return this.tilemap.getTileCorners(i,l,f,this)},weightedRandomize:function(i,l,f,u,d){return s.WeightedRandomize(l,f,u,d,i,this.layer),this},worldToTileX:function(i,l,f){return this.tilemap.worldToTileX(i,l,f,this)},worldToTileY:function(i,l,f){return this.tilemap.worldToTileY(i,l,f,this)},worldToTileXY:function(i,l,f,u,d){return this.tilemap.worldToTileXY(i,l,f,u,d,this)},destroy:function(i){i===void 0&&(i=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),i&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],r.prototype.destroy.call(this))}});v.exports=h},16153:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61340),g=new o,a=new o,r=new o,s=function(e,n,h,i){var l=n.cull(h),f=l.length,u=h.alpha*n.alpha;if(!(f===0||u<=0)){var d=g,p=a,m=r;p.applyITRS(n.x,n.y,n.rotation,n.scaleX,n.scaleY),d.copyFrom(h.matrix);var T=e.currentContext,y=n.gidMap;T.save(),i?(d.multiplyWithOffset(i,-h.scrollX*n.scrollFactorX,-h.scrollY*n.scrollFactorY),p.e=n.x,p.f=n.y,d.multiply(p,m),m.copyToContext(T)):(p.e-=h.scrollX*n.scrollFactorX,p.f-=h.scrollY*n.scrollFactorY,p.copyToContext(T)),(!e.antialias||n.scaleX>1||n.scaleY>1)&&(T.imageSmoothingEnabled=!1);for(var S=0;S<f;S++){var C=l[S],R=y[C.index];if(R){var I=R.image.getSourceImage(),L=R.getTileTextureCoordinates(C.index),w=R.tileWidth,O=R.tileHeight;if(!(L===null||w===0||O===0)){var B=w*.5,V=O*.5;L.x+=R.tileOffset.x,L.y+=R.tileOffset.y,T.save(),T.translate(C.pixelX+B,C.pixelY+V),C.rotation!==0&&T.rotate(C.rotation),(C.flipX||C.flipY)&&T.scale(C.flipX?-1:1,C.flipY?-1:1),T.globalAlpha=u*C.alpha,T.drawImage(I,L.x,L.y,w,O,-B,-V,w,O),T.restore()}}}T.restore()}};v.exports=s},19218:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(29747),g=o,a=o;g=t(99558),a=t(16153),v.exports={renderWebGL:g,renderCanvas:a}},99558:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70554),g=function(a,r,s){var e=r.cull(s),n=e.length,h=s.alpha*r.alpha;if(!(n===0||h<=0)){var i=r.gidMap,l=a.pipelines.set(r.pipeline,r),f=o.getTintAppendFloatAlpha,u=r.scrollFactorX,d=r.scrollFactorY,p=r.x,m=r.y,T=r.scaleX,y=r.scaleY;a.pipelines.preBatch(r);for(var S=0;S<n;S++){var C=e[S],R=i[C.index];if(R){var I=R.getTileTextureCoordinates(C.index),L=R.tileWidth,w=R.tileHeight;if(!(!I||L===0||w===0)){var O=L*.5,B=w*.5,V=R.glTexture,b=l.setTexture2D(V,r),X=L,K=w,Q=I.x,U=I.y,W=R.tileOffset.x,F=R.tileOffset.y,G=f(C.tint,h*C.alpha);l.batchTexture(r,V,V.width,V.height,p+C.pixelX*T+(O*T-W),m+C.pixelY*y+(B*y-F),L,w,T,y,C.rotation,C.flipX,C.flipY,u,d,O,B,Q,U,X,K,G,G,G,G,C.tintFill,0,0,s,null,!0,b,!0)}}}a.pipelines.postBatch(r)}};v.exports=g},33629:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(26099),a=new o({initialize:function(s,e,n,h,i,l,f,u,d){(n===void 0||n<=0)&&(n=32),(h===void 0||h<=0)&&(h=32),i===void 0&&(i=0),l===void 0&&(l=0),f===void 0&&(f={}),u===void 0&&(u={}),this.name=s,this.firstgid=e,this.tileWidth=n,this.tileHeight=h,this.tileMargin=i,this.tileSpacing=l,this.tileProperties=f,this.tileData=u,this.tileOffset=new g,d!==void 0&&this.tileOffset.set(d.x,d.y),this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(r){return this.containsTileIndex(r)?this.tileProperties[r-this.firstgid]:null},getTileData:function(r){return this.containsTileIndex(r)?this.tileData[r-this.firstgid]:null},getTileCollisionGroup:function(r){var s=this.getTileData(r);return s&&s.objectgroup?s.objectgroup:null},containsTileIndex:function(r){return r>=this.firstgid&&r<this.firstgid+this.total},getTileTextureCoordinates:function(r){return this.containsTileIndex(r)?this.texCoordinates[r-this.firstgid]:null},setImage:function(r){this.image=r;var s=r.get(),e=r.getFrameBounds();return this.glTexture=s.source.glTexture,s.width>e.width||s.height>e.height?this.updateTileData(s.width,s.height):this.updateTileData(e.width,e.height,e.x,e.y),this},setTileSize:function(r,s){return r!==void 0&&(this.tileWidth=r),s!==void 0&&(this.tileHeight=s),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(r,s){return r!==void 0&&(this.tileMargin=r),s!==void 0&&(this.tileSpacing=s),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(r,s,e,n){e===void 0&&(e=0),n===void 0&&(n=0);var h=(s-this.tileMargin*2+this.tileSpacing)/(this.tileHeight+this.tileSpacing),i=(r-this.tileMargin*2+this.tileSpacing)/(this.tileWidth+this.tileSpacing);(h%1!==0||i%1!==0)&&console.warn("Image tile area not tile size multiple in: "+this.name),h=Math.floor(h),i=Math.floor(i),this.rows=h,this.columns=i,this.total=h*i,this.texCoordinates.length=0;for(var l=this.tileMargin+e,f=this.tileMargin+n,u=0;u<this.rows;u++){for(var d=0;d<this.columns;d++)this.texCoordinates.push({x:l,y:f}),l+=this.tileWidth+this.tileSpacing;l=this.tileMargin+e,f+=this.tileHeight+this.tileSpacing}return this}});v.exports=a},72023:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7423),g=function(a,r,s){var e=o(a,r,!0,s),n=o(a,r-1,!0,s),h=o(a,r+1,!0,s),i=o(a-1,r,!0,s),l=o(a+1,r,!0,s),f=e&&e.collides;return f&&(e.faceTop=!0,e.faceBottom=!0,e.faceLeft=!0,e.faceRight=!0),n&&n.collides&&(f&&(e.faceTop=!1),n.faceBottom=!f),h&&h.collides&&(f&&(e.faceBottom=!1),h.faceTop=!f),i&&i.collides&&(f&&(e.faceLeft=!1),i.faceRight=!f),l&&l.collides&&(f&&(e.faceRight=!1),l.faceLeft=!f),e&&!e.collides&&e.resetFaces(),e};v.exports=g},42573:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7423),g=t(7386),a=function(r,s,e,n,h){for(var i=null,l=null,f=null,u=null,d=g(r,s,e,n,null,h),p=0;p<d.length;p++){var m=d[p];m&&(m.collides?(i=o(m.x,m.y-1,!0,h),l=o(m.x,m.y+1,!0,h),f=o(m.x-1,m.y,!0,h),u=o(m.x+1,m.y,!0,h),m.faceTop=!(i&&i.collides),m.faceBottom=!(l&&l.collides),m.faceLeft=!(f&&f.collides),m.faceRight=!(u&&u.collides)):m.resetFaces())}};v.exports=a},33528:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=new o,a=function(r,s,e,n){var h=e.tilemapLayer,i=h.cullPaddingX,l=h.cullPaddingY,f=h.tilemap.tileToWorldXY(r,s,g,n,h);return f.x>n.worldView.x+h.scaleX*e.tileWidth*(-i-.5)&&f.x<n.worldView.right+h.scaleX*e.tileWidth*(i-.5)&&f.y>n.worldView.y+h.scaleY*e.tileHeight*(-l-1)&&f.y<n.worldView.bottom+h.scaleY*e.tileHeight*(l-.5)};v.exports=a},1785:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42573),g=t(7386),a=t(62991),r=t(23029),s=function(e,n,h,i,l,f,u,d){u===void 0&&(u=!0);var p=g(e,n,h,i,null,d),m=[];p.forEach(function(L){var w=new r(L.layer,L.index,L.x,L.y,L.width,L.height,L.baseWidth,L.baseHeight);w.copy(L),m.push(w)});for(var T=l-e,y=f-n,S=0;S<m.length;S++){var C=m[S],R=C.x+T,I=C.y+y;a(R,I,d)&&d.data[I][R]&&(C.x=R,C.y=I,C.updatePixelXY(),d.data[I][R]=C)}u&&o(l-1,f-1,h+2,i+2,d),p.length=0,m.length=0};v.exports=s},78419:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62644),g=t(7386),a=t(27987),r=function(s,e,n,h,i,l){n||(n={}),Array.isArray(s)||(s=[s]);var f=l.tilemapLayer;h||(h=f.scene),i||(i=h.cameras.main);var u=l.width,d=l.height,p=g(0,0,u,d,null,l),m=[],T,y=function(I,L,w){for(var O=0;O<w.length;O++){var B=w[O];I.hasOwnProperty(B)||(I[B]=L[B])}};for(T=0;T<p.length;T++){var S=p[T],C=o(n);if(s.indexOf(S.index)!==-1){var R=f.tileToWorldXY(S.x,S.y,void 0,i,l);C.x=R.x,C.y=R.y,y(C,S,["rotation","flipX","flipY","alpha","visible","tint"]),C.hasOwnProperty("origin")||(C.x+=S.width*.5,C.y+=S.height*.5),C.hasOwnProperty("useSpriteSheet")&&(C.key=S.tileset.image,C.frame=S.index-1),m.push(h.make.sprite(C))}}if(Array.isArray(e))for(T=0;T<s.length;T++)a(s[T],e[T],0,0,u,d,l);else if(e!==null)for(T=0;T<s.length;T++)a(s[T],e,0,0,u,d,l);return m};v.exports=r},19545:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(87841),g=t(63448),a=t(56583),r=new o,s=function(e,n){var h=e.tilemapLayer.tilemap,i=e.tilemapLayer,l=Math.floor(h.tileWidth*i.scaleX),f=Math.floor(h.tileHeight*i.scaleY),u=a(n.worldView.x-i.x,l,0,!0)-i.cullPaddingX,d=g(n.worldView.right-i.x,l,0,!0)+i.cullPaddingX,p=a(n.worldView.y-i.y,f,0,!0)-i.cullPaddingY,m=g(n.worldView.bottom-i.y,f,0,!0)+i.cullPaddingY;return r.setTo(u,p,d-u,m-p)};v.exports=s},30003:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19545),g=t(32483),a=function(r,s,e,n){e===void 0&&(e=[]),n===void 0&&(n=0),e.length=0;var h=r.tilemapLayer,i=o(r,s);return(h.skipCull||h.scrollFactorX!==1||h.scrollFactorY!==1)&&(i.left=0,i.right=r.width,i.top=0,i.bottom=r.height),g(r,i,n,e),e};v.exports=a},35137:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(42573),a=t(20576),r=function(s,e,n,h,i,l,f){for(var u=f.collideIndexes.indexOf(s)!==-1,d=o(e,n,h,i,null,f),p=0;p<d.length;p++)d[p].index=s,a(d[p],u);l&&g(e-1,n-1,h+2,i+2,f)};v.exports=r},40253:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,r,s,e,n,h,i,l){var f=o(s,e,n,h,i,l);return f.filter(a,r)};v.exports=g},52692:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o===void 0&&(o=0),g===void 0&&(g=!1);var r=0,s,e,n;if(g){for(e=a.height-1;e>=0;e--)for(s=a.width-1;s>=0;s--)if(n=a.data[e][s],n&&n.index===t){if(r===o)return n;r+=1}}else for(e=0;e<a.height;e++)for(s=0;s<a.width;s++)if(n=a.data[e][s],n&&n.index===t){if(r===o)return n;r+=1}return null};v.exports=E},66151:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,r,s,e,n,h,i,l){var f=o(s,e,n,h,i,l);return f.find(a,r)||null};v.exports=g},97560:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,r,s,e,n,h,i,l){var f=o(s,e,n,h,i,l);f.forEach(a,r)};v.exports=g},43305:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(30003),a=t(9474),r=t(14018),s=t(29747),e=t(54503),n=function(h){return h===o.ORTHOGONAL?g:h===o.HEXAGONAL?a:h===o.STAGGERED?e:h===o.ISOMETRIC?r:s};v.exports=n},7423:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62991),g=function(a,r,s,e){if(s===void 0&&(s=!1),o(a,r,e)){var n=e.data[r][a]||null;return n?n.index===-1?s?n:null:n:null}else return null};v.exports=g},60540:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7423),g=t(26099),a=new g,r=function(s,e,n,h,i){return i.tilemapLayer.worldToTileXY(s,e,!0,a,h),o(a.x,a.y,n,i)};v.exports=r},55826:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e){var n=e.baseTileWidth,h=e.baseTileHeight,i=e.tilemapLayer,l=0,f=0;i&&(s||(s=i.scene.cameras.main),l=i.x+s.scrollX*(1-i.scrollFactorX),f=i.y+s.scrollY*(1-i.scrollFactorY),n*=i.scaleX,h*=i.scaleY);var u=l+a*n,d=f+r*h;return[new o(u,d),new o(u+n,d),new o(u+n,d+h),new o(u,d+h)]};v.exports=g},11758:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(27229),a=t(29747),r=t(55826),s=function(e){return e===o.ORTHOGONAL?r:e===o.ISOMETRIC?a:e===o.HEXAGONAL?g:(e===o.STAGGERED,a)};v.exports=s},39167:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(29747),a=t(97281),r=function(s){return s===o.ORTHOGONAL?a:g};v.exports=r},62e3:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(19951),a=t(14127),r=t(29747),s=t(97202),e=t(70326),n=function(h){return h===o.ORTHOGONAL?e:h===o.ISOMETRIC?a:h===o.HEXAGONAL?g:h===o.STAGGERED?s:r};v.exports=n},5984:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(29747),a=t(28054),r=t(29650),s=function(e){return e===o.ORTHOGONAL?r:e===o.STAGGERED?a:g};v.exports=s},7386:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,r,s,e,n,h){a===void 0&&(a=0),r===void 0&&(r=0),s===void 0&&(s=h.width),e===void 0&&(e=h.height),n||(n={});var i=o(n,"isNotEmpty",!1),l=o(n,"isColliding",!1),f=o(n,"hasInterestingFace",!1);a<0&&(s+=a,a=0),r<0&&(e+=r,r=0),a+s>h.width&&(s=Math.max(h.width-a,0)),r+e>h.height&&(e=Math.max(h.height-r,0));for(var u=[],d=r;d<r+e;d++)for(var p=a;p<a+s;p++){var m=h.data[d][p];if(m!==null){if(i&&m.index===-1||l&&!m.collides||f&&!m.hasInterestingFace)continue;u.push(m)}}return u};v.exports=g},91141:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(55738),g=t(7386),a=t(91865),r=t(29747),s=t(26099),e=function(f,u){return a.RectangleToTriangle(u,f)},n=new s,h=new s,i=new s,l=function(f,u,d,p){if(f===void 0)return[];var m=r;f instanceof o.Circle?m=a.CircleToRectangle:f instanceof o.Rectangle?m=a.RectangleToRectangle:f instanceof o.Triangle?m=e:f instanceof o.Line&&(m=a.LineToRectangle),p.tilemapLayer.worldToTileXY(f.left,f.top,!0,h,d);var T=h.x,y=h.y;p.tilemapLayer.worldToTileXY(f.right,f.bottom,!1,i,d);var S=Math.ceil(i.x),C=Math.ceil(i.y),R=Math.max(S-T,1),I=Math.max(C-y,1),L=g(T,y,R,I,u,p),w=p.tileWidth,O=p.tileHeight;p.tilemapLayer&&(w*=p.tilemapLayer.scaleX,O*=p.tilemapLayer.scaleY);for(var B=[],V=new o.Rectangle(0,0,w,O),b=0;b<L.length;b++){var X=L[b];p.tilemapLayer.tileToWorldXY(X.x,X.y,n,d),V.x=n.x,V.y=n.y,m(f,V)&&B.push(X)}return B};v.exports=l},96523:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(26099),a=new g,r=new g,s=function(e,n,h,i,l,f,u){var d=u.tilemapLayer.tilemap._convert.WorldToTileXY;d(e,n,!0,a,f,u);var p=a.x,m=a.y;d(e+h,n+i,!1,r,f,u);var T=Math.ceil(r.x),y=Math.ceil(r.y);return o(p,m,T-p,y-m,l,u)};v.exports=s},96113:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(20242),a=t(10095),r=function(s){return s===o.ORTHOGONAL?a:g};v.exports=r},16926:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(86625),a=t(96897),r=t(29747),s=t(15108),e=t(85896),n=function(h){return h===o.ORTHOGONAL?e:h===o.ISOMETRIC?a:h===o.HEXAGONAL?g:h===o.STAGGERED?s:r};v.exports=n},55762:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=t(20242),a=t(51900),r=t(63288),s=function(e){return e===o.ORTHOGONAL?r:e===o.STAGGERED?a:g};v.exports=s},45091:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62991),g=function(a,r,s){if(o(a,r,s)){var e=s.data[r][a];return e!==null&&e.index>-1}else return!1};v.exports=g},24152:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(45091),g=t(26099),a=new g,r=function(s,e,n,h){h.tilemapLayer.worldToTileXY(s,e,!0,a,n);var i=a.x,l=a.y;return o(i,l,h)};v.exports=r},90454:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63448),g=t(56583),a=function(r,s){var e=r.tilemapLayer.tilemap,n=r.tilemapLayer,h=Math.floor(e.tileWidth*n.scaleX),i=Math.floor(e.tileHeight*n.scaleY),l=r.hexSideLength,f,u,d,p;if(r.staggerAxis==="y"){var m=(i-l)/2+l;f=g(s.worldView.x-n.x,h,0,!0)-n.cullPaddingX,u=o(s.worldView.right-n.x,h,0,!0)+n.cullPaddingX,d=g(s.worldView.y-n.y,m,0,!0)-n.cullPaddingY,p=o(s.worldView.bottom-n.y,m,0,!0)+n.cullPaddingY}else{var T=(h-l)/2+l;f=g(s.worldView.x-n.x,T,0,!0)-n.cullPaddingX,u=o(s.worldView.right-n.x,T,0,!0)+n.cullPaddingX,d=g(s.worldView.y-n.y,i,0,!0)-n.cullPaddingY,p=o(s.worldView.bottom-n.y,i,0,!0)+n.cullPaddingY}return{left:f,right:u,top:d,bottom:p}};v.exports=a},9474:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(90454),g=t(32483),a=function(r,s,e,n){e===void 0&&(e=[]),n===void 0&&(n=0),e.length=0;var h=r.tilemapLayer,i=o(r,s);return h.skipCull&&h.scrollFactorX===1&&h.scrollFactorY===1&&(i.left=0,i.right=r.width,i.top=0,i.bottom=r.height),g(r,i,n,e),e};v.exports=a},27229:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19951),g=t(26099),a=new g,r=function(s,e,n,h){var i=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer;f&&(i*=f.scaleX,l*=f.scaleY);var u=o(s,e,a,n,h),d=[],p=.5773502691896257,m,T;h.staggerAxis==="y"?(m=p*i,T=l/2):(m=i/2,T=p*l);for(var y=0;y<6;y++){var S=2*Math.PI*(.5-y)/6;d.push(new g(u.x+m*Math.cos(S),u.y+T*Math.sin(S)))}return d};v.exports=r},19951:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n){s||(s=new o);var h=n.baseTileWidth,i=n.baseTileHeight,l=n.tilemapLayer,f=0,u=0;l&&(e||(e=l.scene.cameras.main),f=l.x+e.scrollX*(1-l.scrollFactorX),u=l.y+e.scrollY*(1-l.scrollFactorY),h*=l.scaleX,i*=l.scaleY);var d=h/2,p=i/2,m,T;return n.staggerAxis==="y"?(m=f+h*a+h,T=u+1.5*r*p+p,r%2===0&&(this.staggerIndex==="odd"?m-=d:m+=d)):this.staggerAxis==="x"&&this.staggerIndex==="odd"&&(m=f+1.5*a*d+d,T=u+i*a+i,a%2===0&&(this.staggerIndex==="odd"?T-=p:T+=p)),s.set(m,T)};v.exports=g},86625:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n,h){e||(e=new o);var i=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer;f&&(n||(n=f.scene.cameras.main),a=a-(f.x+n.scrollX*(1-f.scrollFactorX)),r=r-(f.y+n.scrollY*(1-f.scrollFactorY)),i*=f.scaleX,l*=f.scaleY);var u=.5773502691896257,d=-.3333333333333333,p=0,m=.6666666666666666,T=i/2,y=l/2,S,C,R,I,L;h.staggerAxis==="y"?(S=(a-T)/(u*i),C=(r-y)/y,R=u*S+d*C,I=p*S+m*C):(S=(a-T)/T,C=(r-y)/(u*l),R=d*S+u*C,I=m*S+p*C),L=-R-I;var w=Math.round(R),O=Math.round(I),B=Math.round(L),V=Math.abs(w-R),b=Math.abs(O-I),X=Math.abs(B-L);V>b&&V>X?w=-O-B:b>X&&(O=-w-B);var K,Q=O;return h.staggerIndex==="odd"?K=Q%2===0?O/2+w:O/2+w-.5:K=Q%2===0?O/2+w:O/2+w+.5,e.set(K,Q)};v.exports=g},62991:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t>=0&&t<g.width&&o>=0&&o<g.height};v.exports=E},14018:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33528),g=function(a,r,s,e){s===void 0&&(s=[]),e===void 0&&(e=0),s.length=0;var n=a.tilemapLayer,h=a.data,i=a.width,l=a.height,f=n.skipCull,u=0,d=i,p=0,m=l,T,y,S;if(e===0)for(y=p;y<m;y++)for(T=u;T<d;T++)S=h[y][T],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!f&&!o(T,y,a,r)||s.push(S));else if(e===1)for(y=p;y<m;y++)for(T=d;T>=u;T--)S=h[y][T],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!f&&!o(T,y,a,r)||s.push(S));else if(e===2)for(y=m;y>=p;y--)for(T=u;T<d;T++)S=h[y][T],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!f&&!o(T,y,a,r)||s.push(S));else if(e===3)for(y=m;y>=p;y--)for(T=d;T>=u;T--)S=h[y][T],!(!S||S.index===-1||!S.visible||S.alpha===0)&&(!f&&!o(T,y,a,r)||s.push(S));return n.tilesDrawn=s.length,n.tilesTotal=i*l,s};v.exports=g},14127:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n){s||(s=new o);var h=n.baseTileWidth,i=n.baseTileHeight,l=n.tilemapLayer,f=0,u=0;l&&(e||(e=l.scene.cameras.main),f=l.x+e.scrollX*(1-l.scrollFactorX),h*=l.scaleX,u=l.y+e.scrollY*(1-l.scrollFactorY),i*=l.scaleY);var d=f+(a-r)*(h/2),p=u+(a+r)*(i/2);return s.set(d,p)};v.exports=g},96897:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n,h,i){e||(e=new o);var l=h.baseTileWidth,f=h.baseTileHeight,u=h.tilemapLayer;u&&(n||(n=u.scene.cameras.main),r=r-(u.y+n.scrollY*(1-u.scrollFactorY)),f*=u.scaleY,a=a-(u.x+n.scrollX*(1-u.scrollFactorX)),l*=u.scaleX);var d=l/2,p=f/2;a=a-d,i||(r=r-f);var m=.5*(a/d+r/p),T=.5*(-a/d+r/p);return s&&(m=Math.floor(m),T=Math.floor(T)),e.set(m,T)};v.exports=g},71558:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23029),g=t(62991),a=t(72023),r=t(20576),s=function(e,n,h,i,l){if(i===void 0&&(i=!0),!g(n,h,l))return null;var f,u=l.data[h][n],d=u&&u.collides;e instanceof o?(l.data[h][n]===null&&(l.data[h][n]=new o(l,e.index,n,h,l.tileWidth,l.tileHeight)),l.data[h][n].copy(e)):(f=e,l.data[h][n]===null?l.data[h][n]=new o(l,f,n,h,l.tileWidth,l.tileHeight):l.data[h][n].index=f);var p=l.data[h][n],m=l.collideIndexes.indexOf(p.index)!==-1;if(f=e instanceof o?e.index:e,f===-1)p.width=l.tileWidth,p.height=l.tileHeight;else{var T=l.tilemapLayer.tilemap,y=T.tiles,S=y[f][2],C=T.tilesets[S];p.width=C.tileWidth,p.height=C.tileHeight}return r(p,m),i&&d!==p.collides&&a(n,h,l),p};v.exports=s},26303:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(71558),g=t(26099),a=new g,r=function(s,e,n,h,i,l){return l.tilemapLayer.worldToTileXY(e,n,!0,a,i,l),o(s,a.x,a.y,h,l)};v.exports=r},14051:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(42573),g=t(71558),a=function(r,s,e,n,h){if(n===void 0&&(n=!0),!Array.isArray(r))return null;Array.isArray(r[0])||(r=[r]);for(var i=r.length,l=r[0].length,f=0;f<i;f++)for(var u=0;u<l;u++){var d=r[f][u];g(d,s+u,e+f,!1,h)}n&&o(s-1,e-1,l+2,i+2,h)};v.exports=a},77389:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(26546),a=function(r,s,e,n,h,i){var l,f=o(r,s,e,n,{},i);if(!h)for(h=[],l=0;l<f.length;l++)h.indexOf(f[l].index)===-1&&h.push(f[l].index);for(l=0;l<f.length;l++)f[l].index=g(h)};v.exports=a},63557:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(23029),g=t(62991),a=t(72023),r=function(s,e,n,h,i){if(n===void 0&&(n=!0),h===void 0&&(h=!0),!g(s,e,i))return null;var l=i.data[e][s];if(l)i.data[e][s]=n?null:new o(i,-1,s,e,i.tileWidth,i.tileHeight);else return null;return h&&l&&l.collides&&a(s,e,i),l};v.exports=r},94178:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63557),g=t(26099),a=new g,r=function(s,e,n,h,i,l){return l.tilemapLayer.worldToTileXY(s,e,!0,a,i,l),o(a.x,a.y,n,h,l)};v.exports=r},15533:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(3956),a=new g(105,210,231,150),r=new g(243,134,48,200),s=new g(40,39,37,150),e=function(n,h,i){h===void 0&&(h={});var l=h.tileColor!==void 0?h.tileColor:a,f=h.collidingTileColor!==void 0?h.collidingTileColor:r,u=h.faceColor!==void 0?h.faceColor:s,d=o(0,0,i.width,i.height,null,i);n.translateCanvas(i.tilemapLayer.x,i.tilemapLayer.y),n.scaleCanvas(i.tilemapLayer.scaleX,i.tilemapLayer.scaleY);for(var p=0;p<d.length;p++){var m=d[p],T=m.width,y=m.height,S=m.pixelX,C=m.pixelY,R=m.collides?f:l;R!==null&&(n.fillStyle(R.color,R.alpha/255),n.fillRect(S,C,T,y)),S+=1,C+=1,T-=2,y-=2,u!==null&&(n.lineStyle(1,u.color,u.alpha/255),m.faceTop&&n.lineBetween(S,C,S+T,C),m.faceRight&&n.lineBetween(S+T,C,S+T,C+y),m.faceBottom&&n.lineBetween(S,C+y,S+T,C+y),m.faceLeft&&n.lineBetween(S,C,S,C+y))}};v.exports=e},27987:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,r,s,e,n,h,i){for(var l=o(s,e,n,h,null,i),f=0;f<l.length;f++)l[f]&&l[f].index===a&&(l[f].index=r)};v.exports=g},32483:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=t.data,s=t.width,e=t.height,n=t.tilemapLayer,h=Math.max(0,o.left),i=Math.min(s,o.right),l=Math.max(0,o.top),f=Math.min(e,o.bottom),u,d,p;if(g===0)for(d=l;d<f;d++)for(u=h;r[d]&&u<i;u++)p=r[d][u],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);else if(g===1)for(d=l;d<f;d++)for(u=i;r[d]&&u>=h;u--)p=r[d][u],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);else if(g===2)for(d=f;d>=l;d--)for(u=h;r[d]&&u<i;u++)p=r[d][u],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);else if(g===3)for(d=f;d>=l;d--)for(u=i;r[d]&&u>=h;u--)p=r[d][u],!(!p||p.index===-1||!p.visible||p.alpha===0)&&a.push(p);return n.tilesDrawn=a.length,n.tilesTotal=s*e,a};v.exports=E},57068:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(9589),r=function(s,e,n,h,i){e===void 0&&(e=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),Array.isArray(s)||(s=[s]);for(var l=0;l<s.length;l++)a(s[l],e,h);if(i)for(var f=0;f<h.height;f++)for(var u=0;u<h.width;u++){var d=h.data[f][u];d&&s.indexOf(d.index)!==-1&&o(d,e)}n&&g(0,0,h.width,h.height,h)};v.exports=r},37266:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(9589),r=function(s,e,n,h,i,l){if(n===void 0&&(n=!0),h===void 0&&(h=!0),l===void 0&&(l=!0),!(s>e)){for(var f=s;f<=e;f++)a(f,n,i);if(l)for(var u=0;u<i.height;u++)for(var d=0;d<i.width;d++){var p=i.data[u][d];p&&p.index>=s&&p.index<=e&&o(p,n)}h&&g(0,0,i.width,i.height,i)}};v.exports=r},75661:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(9589),r=function(s,e,n,h){e===void 0&&(e=!0),n===void 0&&(n=!0),Array.isArray(s)||(s=[s]);for(var i=0;i<h.height;i++)for(var l=0;l<h.width;l++){var f=h.data[i][l];f&&s.indexOf(f.index)===-1&&(o(f,e),a(f.index,e,h))}n&&g(0,0,h.width,h.height,h)};v.exports=r},64740:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=t(97022),r=function(s,e,n,h){e===void 0&&(e=!0),n===void 0&&(n=!0);for(var i=0;i<h.height;i++)for(var l=0;l<h.width;l++){var f=h.data[i][l];if(f){for(var u in s)if(a(f.properties,u)){var d=s[u];Array.isArray(d)||(d=[d]);for(var p=0;p<d.length;p++)f.properties[u]===d[p]&&o(f,e)}}}n&&g(0,0,h.width,h.height,h)};v.exports=r},63307:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(20576),g=t(42573),a=function(r,s,e){r===void 0&&(r=!0),s===void 0&&(s=!0);for(var n=0;n<e.height;n++)for(var h=0;h<e.width;h++){var i=e.data[n][h];if(i){var l=i.getCollisionGroup();l&&l.objects&&l.objects.length>0&&o(i,r)}}s&&g(0,0,e.width,e.height,e)};v.exports=a},9589:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=g.collideIndexes.indexOf(t);o&&a===-1?g.collideIndexes.push(t):!o&&a!==-1&&g.collideIndexes.splice(a,1)};v.exports=E},20576:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)};v.exports=E},79583:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){if(typeof t=="number")a.callbacks[t]=o!==null?{callback:o,callbackContext:g}:void 0;else for(var r=0,s=t.length;r<s;r++)a.callbacks[t[r]]=o!==null?{callback:o,callbackContext:g}:void 0};v.exports=E},93254:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,r,s,e,n,h,i){for(var l=o(a,r,s,e,null,i),f=0;f<l.length;f++)l[f].setCollisionCallback(n,h)};v.exports=g},32903:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(33680),a=function(r,s,e,n,h){var i=o(r,s,e,n,null,h),l=i.map(function(u){return u.index});g(l);for(var f=0;f<i.length;f++)i[f].index=l[f]};v.exports=a},61325:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(63448),g=t(56583),a=function(r,s){var e=r.tilemapLayer.tilemap,n=r.tilemapLayer,h=Math.floor(e.tileWidth*n.scaleX),i=Math.floor(e.tileHeight*n.scaleY),l=g(s.worldView.x-n.x,h,0,!0)-n.cullPaddingX,f=o(s.worldView.right-n.x,h,0,!0)+n.cullPaddingX,u=g(s.worldView.y-n.y,i/2,0,!0)-n.cullPaddingY,d=o(s.worldView.bottom-n.y,i/2,0,!0)+n.cullPaddingY;return{left:l,right:f,top:u,bottom:d}};v.exports=a},54503:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(61325),g=t(32483),a=function(r,s,e,n){e===void 0&&(e=[]),n===void 0&&(n=0),e.length=0;var h=r.tilemapLayer,i=o(r,s);return h.skipCull&&h.scrollFactorX===1&&h.scrollFactorY===1&&(i.left=0,i.right=r.width,i.top=0,i.bottom=r.height),g(r,i,n,e),e};v.exports=a},97202:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n){s||(s=new o);var h=n.baseTileWidth,i=n.baseTileHeight,l=n.tilemapLayer,f=0,u=0;l&&(e||(e=l.scene.cameras.main),f=l.x+e.scrollX*(1-l.scrollFactorX),h*=l.scaleX,u=l.y+e.scrollY*(1-l.scrollFactorY),i*=l.scaleY);var d=f+a*h+r%2*(h/2),p=u+r*(i/2);return s.set(d,p)};v.exports=g},28054:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=g.baseTileHeight,r=g.tilemapLayer,s=0;return r&&(o===void 0&&(o=r.scene.cameras.main),s=r.y+o.scrollY*(1-r.scrollFactorY),a*=r.scaleY),s+t*(a/2)+a};v.exports=E},15108:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n,h){e||(e=new o);var i=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer;f&&(n||(n=f.scene.cameras.main),r=r-(f.y+n.scrollY*(1-f.scrollFactorY)),l*=f.scaleY,a=a-(f.x+n.scrollX*(1-f.scrollFactorX)),i*=f.scaleX);var u=s?Math.floor(r/(l/2)):r/(l/2),d=s?Math.floor((a+u%2*.5*i)/i):(a+u%2*.5*i)/i;return e.set(d,u)};v.exports=g},51900:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=a.baseTileHeight,s=a.tilemapLayer;return s&&(g||(g=s.scene.cameras.main),t=t-(s.y+g.scrollY*(1-s.scrollFactorY)),r*=s.scaleY),o?Math.floor(t/(r/2)):t/(r/2)};v.exports=E},86560:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=function(a,r,s,e,n,h,i){for(var l=o(s,e,n,h,null,i),f=0;f<l.length;f++)l[f]&&(l[f].index===a?l[f].index=r:l[f].index===r&&(l[f].index=a))};v.exports=g},97281:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=g.baseTileWidth,r=g.tilemapLayer,s=0;return r&&(o||(o=r.scene.cameras.main),s=r.x+o.scrollX*(1-r.scrollFactorX),a*=r.scaleX),s+t*a};v.exports=E},70326:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97281),g=t(29650),a=t(26099),r=function(s,e,n,h,i){return n||(n=new a(0,0)),n.x=o(s,h,i),n.y=g(e,h,i),n};v.exports=r},29650:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=g.baseTileHeight,r=g.tilemapLayer,s=0;return r&&(o||(o=r.scene.cameras.main),s=r.y+o.scrollY*(1-r.scrollFactorY),a*=r.scaleY),s+t*a};v.exports=E},77366:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(7386),g=t(75508),a=function(r,s,e,n,h,i){if(h){var l,f=o(r,s,e,n,null,i),u=0;for(l=0;l<h.length;l++)u+=h[l].weight;if(!(u<=0))for(l=0;l<f.length;l++){for(var d=g.RND.frac()*u,p=0,m=-1,T=0;T<h.length;T++)if(p+=h[T].weight,d<=p){var y=h[T].index;m=Array.isArray(y)?y[Math.floor(g.RND.frac()*y.length)]:y;break}f[l].index=m}}};v.exports=a},10095:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85896),g=t(26099),a=new g,r=function(s,e,n,h){return o(s,0,e,a,n,h),a.x};v.exports=r},85896:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(26099),g=function(a,r,s,e,n,h){s===void 0&&(s=!0),e||(e=new o);var i=h.baseTileWidth,l=h.baseTileHeight,f=h.tilemapLayer;f&&(n||(n=f.scene.cameras.main),a=a-(f.x+n.scrollX*(1-f.scrollFactorX)),r=r-(f.y+n.scrollY*(1-f.scrollFactorY)),i*=f.scaleX,l*=f.scaleY);var u=a/i,d=r/l;return s&&(u=Math.floor(u),d=Math.floor(d)),e.set(u,d)};v.exports=g},63288:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(85896),g=t(26099),a=new g,r=function(s,e,n,h){return o(0,s,e,a,n,h),a.y};v.exports=r},81086:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CalculateFacesAt:t(72023),CalculateFacesWithin:t(42573),CheckIsoBounds:t(33528),Copy:t(1785),CreateFromTiles:t(78419),CullBounds:t(19545),CullTiles:t(30003),Fill:t(35137),FilterTiles:t(40253),FindByIndex:t(52692),FindTile:t(66151),ForEachTile:t(97560),GetCullTilesFunction:t(43305),GetTileAt:t(7423),GetTileAtWorldXY:t(60540),GetTileCorners:t(55826),GetTileCornersFunction:t(11758),GetTilesWithin:t(7386),GetTilesWithinShape:t(91141),GetTilesWithinWorldXY:t(96523),GetTileToWorldXFunction:t(39167),GetTileToWorldXYFunction:t(62e3),GetTileToWorldYFunction:t(5984),GetWorldToTileXFunction:t(96113),GetWorldToTileXYFunction:t(16926),GetWorldToTileYFunction:t(55762),HasTileAt:t(45091),HasTileAtWorldXY:t(24152),HexagonalCullBounds:t(90454),HexagonalCullTiles:t(9474),HexagonalGetTileCorners:t(27229),HexagonalTileToWorldXY:t(19951),HexagonalWorldToTileXY:t(86625),IsInLayerBounds:t(62991),IsometricCullTiles:t(14018),IsometricTileToWorldXY:t(14127),IsometricWorldToTileXY:t(96897),PutTileAt:t(71558),PutTileAtWorldXY:t(26303),PutTilesAt:t(14051),Randomize:t(77389),RemoveTileAt:t(63557),RemoveTileAtWorldXY:t(94178),RenderDebug:t(15533),ReplaceByIndex:t(27987),RunCull:t(32483),SetCollision:t(57068),SetCollisionBetween:t(37266),SetCollisionByExclusion:t(75661),SetCollisionByProperty:t(64740),SetCollisionFromCollisionGroup:t(63307),SetLayerCollisionIndex:t(9589),SetTileCollision:t(20576),SetTileIndexCallback:t(79583),SetTileLocationCallback:t(93254),Shuffle:t(32903),StaggeredCullBounds:t(61325),StaggeredCullTiles:t(54503),StaggeredTileToWorldXY:t(97202),StaggeredTileToWorldY:t(28054),StaggeredWorldToTileXY:t(15108),StaggeredWorldToTileY:t(51900),SwapByIndex:t(86560),TileToWorldX:t(97281),TileToWorldXY:t(70326),TileToWorldY:t(29650),WeightedRandomize:t(77366),WorldToTileX:t(10095),WorldToTileXY:t(85896),WorldToTileY:t(63288)}},91907:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},21829:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={ORIENTATION:t(91907)};v.exports=o},62501:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=t(21829),a={Components:t(81086),Parsers:t(57442),Formats:t(80341),ImageCollection:t(16536),ParseToTilemap:t(31989),Tile:t(23029),Tilemap:t(49075),TilemapCreator:t(45939),TilemapFactory:t(46029),Tileset:t(33629),TilemapLayer:t(20442),Orientation:t(91907),LayerData:t(14977),MapData:t(87010),ObjectLayer:t(48700)};a=o(!1,a,g.ORIENTATION),v.exports=a},14977:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(91907),a=t(95540),r=new o({initialize:function(e){e===void 0&&(e={}),this.name=a(e,"name","layer"),this.id=a(e,"id",0),this.x=a(e,"x",0),this.y=a(e,"y",0),this.width=a(e,"width",0),this.height=a(e,"height",0),this.tileWidth=a(e,"tileWidth",0),this.tileHeight=a(e,"tileHeight",0),this.baseTileWidth=a(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=a(e,"baseTileHeight",this.tileHeight),this.orientation=a(e,"orientation",g.ORTHOGONAL),this.widthInPixels=a(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=a(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=a(e,"alpha",1),this.visible=a(e,"visible",!0),this.properties=a(e,"properties",[]),this.indexes=a(e,"indexes",[]),this.collideIndexes=a(e,"collideIndexes",[]),this.callbacks=a(e,"callbacks",[]),this.bodies=a(e,"bodies",[]),this.data=a(e,"data",[]),this.tilemapLayer=a(e,"tilemapLayer",null),this.hexSideLength=a(e,"hexSideLength",0),this.staggerAxis=a(e,"staggerAxis","y"),this.staggerIndex=a(e,"staggerIndex","odd")}});v.exports=r},87010:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(91907),a=t(95540),r=new o({initialize:function(e){e===void 0&&(e={}),this.name=a(e,"name","map"),this.width=a(e,"width",0),this.height=a(e,"height",0),this.infinite=a(e,"infinite",!1),this.tileWidth=a(e,"tileWidth",0),this.tileHeight=a(e,"tileHeight",0),this.widthInPixels=a(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=a(e,"heightInPixels",this.height*this.tileHeight),this.format=a(e,"format",null),this.orientation=a(e,"orientation",g.ORTHOGONAL),this.renderOrder=a(e,"renderOrder","right-down"),this.version=a(e,"version","1"),this.properties=a(e,"properties",{}),this.layers=a(e,"layers",[]),this.images=a(e,"images",[]),this.objects=a(e,"objects",[]),Array.isArray(this.objects)||(this.objects=[]),this.collision=a(e,"collision",{}),this.tilesets=a(e,"tilesets",[]),this.imageCollections=a(e,"imageCollections",[]),this.tiles=a(e,"tiles",[]),this.hexSideLength=a(e,"hexSideLength",0),this.staggerAxis=a(e,"staggerAxis","y"),this.staggerIndex=a(e,"staggerIndex","odd")}});v.exports=r},48700:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=new o({initialize:function(s){s===void 0&&(s={}),this.name=g(s,"name","object layer"),this.id=g(s,"id",0),this.opacity=g(s,"opacity",1),this.properties=g(s,"properties",{}),this.propertyTypes=g(s,"propertytypes",{}),this.type=g(s,"type","objectgroup"),this.visible=g(s,"visible",!0),this.objects=g(s,"objects",[]),Array.isArray(this.objects)||(this.objects=[])}});v.exports=a},6641:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(91907),g=function(a){return a=a.toLowerCase(),a==="isometric"?o.ISOMETRIC:a==="staggered"?o.STAGGERED:a==="hexagonal"?o.HEXAGONAL:o.ORTHOGONAL};v.exports=g},46177:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(2342),a=t(82593),r=t(46594),s=t(87021),e=function(n,h,i,l,f,u){var d;switch(h){case o.ARRAY_2D:d=g(n,i,l,f,u);break;case o.CSV:d=a(n,i,l,f,u);break;case o.TILED_JSON:d=r(n,i,u);break;case o.WELTMEISTER:d=s(n,i,u);break;default:console.warn("Unrecognized tilemap data format: "+h),d=null}return d};v.exports=e},2342:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(14977),a=t(87010),r=t(23029),s=function(e,n,h,i,l){for(var f=new g({tileWidth:h,tileHeight:i}),u=new a({name:e,tileWidth:h,tileHeight:i,format:o.ARRAY_2D,layers:[f]}),d=[],p=n.length,m=0,T=0;T<n.length;T++){d[T]=[];for(var y=n[T],S=0;S<y.length;S++){var C=parseInt(y[S],10);isNaN(C)||C===-1?d[T][S]=l?null:new r(f,-1,S,T,h,i):d[T][S]=new r(f,C,S,T,h,i)}m===0&&(m=y.length)}return u.width=f.width=m,u.height=f.height=p,u.widthInPixels=f.widthInPixels=m*h,u.heightInPixels=f.heightInPixels=p*i,f.data=d,u};v.exports=s},82593:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(2342),a=function(r,s,e,n,h){var i=s.trim().split(`
`).map(function(f){return f.split(",")}),l=g(r,i,e,n,h);return l.format=o.CSV,l};v.exports=a},6656:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(14977),g=t(23029),a=function(r,s){for(var e=[],n=0;n<r.layer.length;n++){for(var h=r.layer[n],i=new o({name:h.name,width:h.width,height:h.height,tileWidth:h.tilesize,tileHeight:h.tilesize,visible:h.visible===1}),l=[],f=[],u=0;u<h.data.length;u++){for(var d=0;d<h.data[u].length;d++){var p=h.data[u][d]-1,m;p>-1?m=new g(i,p,d,u,h.tilesize,h.tilesize):m=s?null:new g(i,-1,d,u,h.tilesize,h.tilesize),l.push(m)}f.push(l),l=[]}i.data=f,e.push(i)}return e};v.exports=a},96483:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33629),g=function(a){for(var r=[],s=[],e=0;e<a.layer.length;e++){var n=a.layer[e],h=n.tilesetName;h!==""&&s.indexOf(h)===-1&&(s.push(h),r.push(new o(h,0,n.tilesize,n.tilesize,0,0)))}return r};v.exports=g},87021:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(80341),g=t(87010),a=t(6656),r=t(96483),s=function(e,n,h){if(n.layer.length===0)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var i=0,l=0,f=0;f<n.layer.length;f++)n.layer[f].width>i&&(i=n.layer[f].width),n.layer[f].height>l&&(l=n.layer[f].height);var u=new g({width:i,height:l,name:e,tileWidth:n.layer[0].tilesize,tileHeight:n.layer[0].tilesize,format:o.WELTMEISTER});return u.layers=a(n,h),u.tilesets=r(n),u};v.exports=s},52833:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ParseTileLayers:t(6656),ParseTilesets:t(96483),ParseWeltmeister:t(87021)}},57442:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={FromOrientationString:t(6641),Parse:t(46177),Parse2DArray:t(2342),ParseCSV:t(82593),Impact:t(52833),Tiled:t(96761)}},51233:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(79291),g=function(a){for(var r,s,e,n,h,i=0;i<a.layers.length;i++){r=a.layers[i],n=null;for(var l=0;l<r.data.length;l++){h=r.data[l];for(var f=0;f<h.length;f++)s=h[f],!(s===null||s.index<0)&&(e=a.tiles[s.index][2],n=a.tilesets[e],s.width=n.tileWidth,s.height=n.tileHeight,n.tileProperties&&n.tileProperties[s.index-n.firstgid]&&(s.properties=o(s.properties,n.tileProperties[s.index-n.firstgid])))}}};v.exports=g},41868:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){for(var o=window.atob(t),g=o.length,a=new Array(g/4),r=0;r<g;r+=4)a[r/4]=(o.charCodeAt(r)|o.charCodeAt(r+1)<<8|o.charCodeAt(r+2)<<16|o.charCodeAt(r+3)<<24)>>>0;return a};v.exports=E},84101:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33629),g=function(a){var r,s,e=[];for(r=0;r<a.imageCollections.length;r++)for(var n=a.imageCollections[r],h=n.images,i=0;i<h.length;i++){var l=h[i];s=new o(l.image,l.gid,n.imageWidth,n.imageHeight,0,0),s.updateTileData(n.imageWidth,n.imageHeight),a.tilesets.push(s)}for(r=0;r<a.tilesets.length;r++){s=a.tilesets[r];for(var f=s.tileMargin,u=s.tileMargin,d=0,p=0,m=0,T=s.firstgid;T<s.firstgid+s.total&&(e[T]=[f,u,r],f+=s.tileWidth+s.tileSpacing,d++,!(d===s.total||(p++,p===s.columns&&(f=s.tileMargin,u+=s.tileHeight+s.tileSpacing,p=0,m++,m===s.rows))));T++);}return e};v.exports=g},79677:(v,E,t)=>{/**
 * @author       Seth Berrier <berriers@uwstout.edu>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=function(a,r,s){if(!r)return{i:0,layers:a.layers,name:"",opacity:1,visible:!0,x:0,y:0};var e=r.x+o(r,"startx",0)*a.tilewidth+o(r,"offsetx",0),n=r.y+o(r,"starty",0)*a.tileheight+o(r,"offsety",0);return{i:0,layers:r.layers,name:s.name+r.name+"/",opacity:s.opacity*r.opacity,visible:s.visible&&r.visible,x:s.x+e,y:s.y+n}};v.exports=g},29920:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=2147483648,t=1073741824,o=536870912,g=function(a){var r=!!(a&E),s=!!(a&t),e=!!(a&o);a=a&~(E|t|o);var n=0,h=!1;return r&&s&&e?(n=Math.PI/2,h=!0):r&&s&&!e?(n=Math.PI,h=!1):r&&!s&&e?(n=Math.PI/2,h=!1):r&&!s&&!e?(n=0,h=!0):!r&&s&&e?(n=3*Math.PI/2,h=!1):!r&&s&&!e?(n=Math.PI,h=!0):!r&&!s&&e?(n=3*Math.PI/2,h=!0):!r&&!s&&!e&&(n=0,h=!1),{gid:a,flippedHorizontal:r,flippedVertical:s,flippedAntiDiagonal:e,rotation:n,flipped:h}};v.exports=g},12635:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=t(79677),a=function(r){for(var s=[],e=[],n=g(r);n.i<n.layers.length||e.length>0;){if(n.i>=n.layers.length){if(e.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}n=e.pop();continue}var h=n.layers[n.i];if(n.i++,h.type!=="imagelayer"){if(h.type==="group"){var i=g(r,h,n);e.push(n),n=i}continue}var l=o(h,"offsetx",0)+o(h,"startx",0),f=o(h,"offsety",0)+o(h,"starty",0);s.push({name:n.name+h.name,image:h.image,x:n.x+l+h.x,y:n.y+f+h.y,alpha:n.opacity*h.opacity,visible:n.visible&&h.visible,properties:o(h,"properties",{})})}return s};v.exports=a},46594:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(51233),g=t(84101),a=t(91907),r=t(62644),s=t(80341),e=t(6641),n=t(87010),h=t(12635),i=t(22611),l=t(28200),f=t(24619),u=function(d,p,m){var T=r(p),y=new n({width:T.width,height:T.height,name:d,tileWidth:T.tilewidth,tileHeight:T.tileheight,orientation:e(T.orientation),format:s.TILED_JSON,version:T.version,properties:T.properties,renderOrder:T.renderorder,infinite:T.infinite});y.orientation===a.HEXAGONAL&&(y.hexSideLength=T.hexsidelength,y.staggerAxis=T.staggeraxis,y.staggerIndex=T.staggerindex),y.layers=l(T,m),y.images=h(T);var S=f(T);return y.tilesets=S.tilesets,y.imageCollections=S.imageCollections,y.objects=i(T),y.tiles=g(y),o(y),y};v.exports=u},52205:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(18254),g=t(29920),a=function(e){return{x:e.x,y:e.y}},r=["id","name","type","rotation","properties","visible","x","y","width","height"],s=function(e,n,h){n===void 0&&(n=0),h===void 0&&(h=0);var i=o(e,r);if(i.x+=n,i.y+=h,e.gid){var l=g(e.gid);i.gid=l.gid,i.flippedHorizontal=l.flippedHorizontal,i.flippedVertical=l.flippedVertical,i.flippedAntiDiagonal=l.flippedAntiDiagonal}else e.polyline?i.polyline=e.polyline.map(a):e.polygon?i.polygon=e.polygon.map(a):e.ellipse?i.ellipse=e.ellipse:e.text?i.text=e.text:e.point?i.point=!0:i.rectangle=!0;return i};v.exports=s},22611:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95540),g=t(52205),a=t(48700),r=t(79677),s=function(e){for(var n=[],h=[],i=r(e);i.i<i.layers.length||h.length>0;){if(i.i>=i.layers.length){if(h.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}i=h.pop();continue}var l=i.layers[i.i];if(i.i++,l.opacity*=i.opacity,l.visible=i.visible&&l.visible,l.type!=="objectgroup"){if(l.type==="group"){var f=r(e,l,i);h.push(i),i=f}continue}l.name=i.name+l.name;for(var u=i.x+o(l,"startx",0)+o(l,"offsetx",0),d=i.y+o(l,"starty",0)+o(l,"offsety",0),p=[],m=0;m<l.objects.length;m++){var T=g(l.objects[m],u,d);p.push(T)}var y=new a(l);y.objects=p,n.push(y)}return n};v.exports=s},28200:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41868),g=t(91907),a=t(79677),r=t(6641),s=t(95540),e=t(14977),n=t(29920),h=t(23029),i=function(l,f){for(var u=s(l,"infinite",!1),d=[],p=[],m=a(l);m.i<m.layers.length||p.length>0;){if(m.i>=m.layers.length){if(p.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}m=p.pop();continue}var T=m.layers[m.i];if(m.i++,T.type!=="tilelayer"){if(T.type==="group"){var y=a(l,T,m);p.push(m),m=y}continue}if(T.compression){console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+T.name+"'");continue}else if(T.encoding&&T.encoding==="base64"){if(T.chunks)for(var S=0;S<T.chunks.length;S++)T.chunks[S].data=o(T.chunks[S].data);T.data&&(T.data=o(T.data)),delete T.encoding}var C,R,I,L,w=[],O=0;if(u){var B=s(T,"startx",0)+T.x,V=s(T,"starty",0)+T.y;C=new e({name:m.name+T.name,id:T.id,x:m.x+s(T,"offsetx",0)+B*l.tilewidth,y:m.y+s(T,"offsety",0)+V*l.tileheight,width:T.width,height:T.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:m.opacity*T.opacity,visible:m.visible&&T.visible,properties:s(T,"properties",[]),orientation:r(l.orientation)}),C.orientation===g.HEXAGONAL&&(C.hexSideLength=l.hexsidelength,C.staggerAxis=l.staggeraxis,C.staggerIndex=l.staggerindex);for(var b=0;b<T.height;b++){w[b]=[null];for(var X=0;X<T.width;X++)w[b][X]=null}for(b=0,Z=T.chunks.length;b<Z;b++)for(var K=T.chunks[b],Q=K.x-B,U=K.y-V,W=0,F=0,G=K.data.length;F<G;F++){var z=O+Q,Y=W+U;R=n(K.data[F]),R.gid>0?(I=new h(C,R.gid,z,Y,l.tilewidth,l.tileheight),I.rotation=R.rotation,I.flipX=R.flipped,w[Y][z]=I):(L=f?null:new h(C,-1,z,Y,l.tilewidth,l.tileheight),w[Y][z]=L),O++,O===K.width&&(W++,O=0)}}else{C=new e({name:m.name+T.name,id:T.id,x:m.x+s(T,"offsetx",0)+T.x,y:m.y+s(T,"offsety",0)+T.y,width:T.width,height:T.height,tileWidth:l.tilewidth,tileHeight:l.tileheight,alpha:m.opacity*T.opacity,visible:m.visible&&T.visible,properties:s(T,"properties",[]),orientation:r(l.orientation)}),C.orientation===g.HEXAGONAL&&(C.hexSideLength=l.hexsidelength,C.staggerAxis=l.staggeraxis,C.staggerIndex=l.staggerindex);for(var $=[],j=0,Z=T.data.length;j<Z;j++)R=n(T.data[j]),R.gid>0?(I=new h(C,R.gid,O,w.length,l.tilewidth,l.tileheight),I.rotation=R.rotation,I.flipX=R.flipped,$.push(I)):(L=f?null:new h(C,-1,O,w.length,l.tilewidth,l.tileheight),$.push(L)),O++,O===T.width&&(w.push($),O=0,$=[])}C.data=w,d.push(C)}return d};v.exports=i},24619:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(33629),g=t(16536),a=t(52205),r=t(57880),s=function(e){for(var n=[],h=[],i=null,l,f=0;f<e.tilesets.length;f++){var u=e.tilesets[f];if(u.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(u.image){var d=new o(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing,void 0,void 0,u.tileoffset);if(e.version>1){var p=void 0,m=void 0;if(Array.isArray(u.tiles)){p=p||{},m=m||{};for(var T=0;T<u.tiles.length;T++){var y=u.tiles[T];if(y.properties){var S={};y.properties.forEach(function(b){S[b.name]=b.value}),m[y.id]=S}if(y.objectgroup&&((p[y.id]||(p[y.id]={})).objectgroup=y.objectgroup,y.objectgroup.objects)){var C=y.objectgroup.objects.map(function(b){return a(b)});p[y.id].objectgroup.objects=C}y.animation&&((p[y.id]||(p[y.id]={})).animation=y.animation),y.type&&((p[y.id]||(p[y.id]={})).type=y.type)}}Array.isArray(u.wangsets)&&(p=p||{},m=m||{},r(u.wangsets,p)),p&&(d.tileData=p,d.tileProperties=m)}else if(u.tileproperties&&(d.tileProperties=u.tileproperties),u.tiles){d.tileData=u.tiles;for(l in d.tileData){var R=d.tileData[l].objectgroup;if(R&&R.objects){var I=R.objects.map(function(b){return a(b)});d.tileData[l].objectgroup.objects=I}}}d.updateTileData(u.imagewidth,u.imageheight),n.push(d)}else{var L=new g(u.name,u.firstgid,u.tilewidth,u.tileheight,u.margin,u.spacing,u.properties),w=0;for(T=0;T<u.tiles.length;T++){y=u.tiles[T];var O=y.image,B=parseInt(y.id,10),V=u.firstgid+B;L.addImage(V,O),w=Math.max(B,w)}L.maxId=w,h.push(L)}i&&(i.lastgid=u.firstgid-1),i=u}return{tilesets:n,imageCollections:h}};v.exports=s},57880:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){for(var g=0;g<t.length;g++){var a=t[g],r=g;if(a.name&&a.name!==""&&(r=a.name),Array.isArray(a.wangtiles)&&a.wangtiles.length>0){var s={},e={},n,h,i;if(Array.isArray(a.edgecolors))for(n=0;n<a.edgecolors.length;n++)i=1+n,h=a.edgecolors[n],h.name!==""&&(s[i]=h.name);if(Array.isArray(a.cornercolors))for(n=0;n<a.cornercolors.length;n++)i=1+n,h=a.cornercolors[n],h.name!==""&&(e[i]=h.name);if(Array.isArray(a.colors))for(n=0;n<a.colors.length;n++)h=a.colors[n],i=1+n,h.name!==""&&(s[i]=e[i]=h.name);for(var l=[s,e,s,e,s,e,s,e],f=0;f<a.wangtiles.length;f++){var u=a.wangtiles[f],d=o[u.tileid]||(o[u.tileid]={});d=d.wangid||(d.wangid={});for(var p=[],m=0;m<Math.min(l.length,u.wangid.length);m++){if(h=u.wangid[m],h===0){p.push(void 0);continue}var T=l[m][h];if(T!==void 0){p.push(T);continue}p.push(h)}d[r]=p}}}};v.exports=E},96761:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={AssignTileProperties:t(51233),Base64Decode:t(41868),BuildTilesetIndex:t(84101),CreateGroupLayer:t(79677),ParseGID:t(29920),ParseImageLayers:t(12635),ParseJSONTiled:t(46594),ParseObject:t(52205),ParseObjectLayers:t(22611),ParseTileLayers:t(28200),ParseTilesets:t(24619)}},33385:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(37277),a=t(44594),r=t(94880),s=t(72905),e=new o({initialize:function(h){this.scene=h,this.systems=h.sys,this.now=0,this.startTime=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],h.sys.events.once(a.BOOT,this.boot,this),h.sys.events.on(a.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){this.startTime=this.systems.game.loop.time;var n=this.systems.events;n.on(a.PRE_UPDATE,this.preUpdate,this),n.on(a.UPDATE,this.update,this),n.once(a.SHUTDOWN,this.shutdown,this)},addEvent:function(n){var h;return n instanceof r?(h=n,this.removeEvent(h),h.elapsed=h.startAt,h.hasDispatched=!1,h.repeatCount=h.repeat===-1||h.loop?999999999999:h.repeat):h=new r(n),this._pendingInsertion.push(h),h},delayedCall:function(n,h,i,l){return this.addEvent({delay:n,callback:h,args:i,callbackScope:l})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(n){Array.isArray(n)||(n=[n]);for(var h=0;h<n.length;h++){var i=n[h];s(this._pendingRemoval,i),s(this._pendingInsertion,i),s(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var n=this._pendingRemoval.length,h=this._pendingInsertion.length;if(!(n===0&&h===0)){var i,l;for(i=0;i<n;i++){l=this._pendingRemoval[i];var f=this._active.indexOf(l);f>-1&&this._active.splice(f,1),l.destroy()}for(i=0;i<h;i++)l=this._pendingInsertion[i],this._active.push(l);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(n,h){if(this.now=n,!this.paused){h*=this.timeScale;for(var i=0;i<this._active.length;i++){var l=this._active[i];if(!l.paused&&(l.elapsed+=h*l.timeScale,l.elapsed>=l.delay)){var f=l.elapsed-l.delay;if(l.elapsed=l.delay,!l.hasDispatched&&l.callback&&(l.hasDispatched=!0,l.callback.apply(l.callbackScope,l.args)),l.repeatCount>0){if(l.repeatCount--,f>=l.delay)for(;f>=l.delay&&l.repeatCount>0;)l.callback&&l.callback.apply(l.callbackScope,l.args),f-=l.delay,l.repeatCount--;l.elapsed=f,l.hasDispatched=!1}else l.hasDispatched&&this._pendingRemoval.push(l)}}}},shutdown:function(){var n;for(n=0;n<this._pendingInsertion.length;n++)this._pendingInsertion[n].destroy();for(n=0;n<this._active.length;n++)this._active[n].destroy();for(n=0;n<this._pendingRemoval.length;n++)this._pendingRemoval[n].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var h=this.systems.events;h.off(a.PRE_UPDATE,this.preUpdate,this),h.off(a.UPDATE,this.update,this),h.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});g.register("Clock",e,"time"),v.exports=e},96120:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(39429),r=t(95540),s=t(44594),e=t(89809),n=new o({Extends:g,initialize:function(i,l){g.call(this),this.scene=i,this.systems=i.sys,this.elapsed=0,this.paused=!0,this.complete=!1,this.totalComplete=0,this.loop=0,this.iteration=0,this.events=[];var f=this.systems.events;f.on(s.PRE_UPDATE,this.preUpdate,this),f.on(s.UPDATE,this.update,this),f.once(s.SHUTDOWN,this.destroy,this),l&&this.add(l)},preUpdate:function(h,i){this.paused||(this.elapsed+=i)},update:function(){if(!(this.paused||this.complete)){var h,i=this.events,l=!1,f=this.systems,u;for(h=0;h<i.length;h++){var d=i[h];if(!d.complete&&d.time<=this.elapsed){if(d.complete=!0,this.totalComplete++,u=d.target?d.target:this,d.if&&!d.if.call(u,d))continue;if(d.once&&(l=!0),d.set&&d.target)for(var p in d.set)d.target[p]=d.set[p];this.iteration&&d.repeat++,d.loop&&d.repeat&&d.loop.call(u),d.tween&&f.tweens.add(d.tween),d.sound&&(typeof d.sound=="string"?f.sound.play(d.sound):f.sound.play(d.sound.key,d.sound.config)),d.event&&this.emit(d.event,u),d.run&&d.run.call(u),d.stop&&this.stop()}}if(l)for(h=0;h<i.length;h++)i[h].complete&&i[h].once&&(i.splice(h,1),h--);this.totalComplete>=i.length&&(this.loop!==0&&(this.loop===-1||this.loop>this.iteration)?(this.iteration++,this.reset(!0)):this.complete=!0),this.complete&&this.emit(e.COMPLETE,this)}},play:function(h){return h===void 0&&(h=!0),this.paused=!1,this.complete=!1,this.totalComplete=0,h&&this.reset(),this},pause:function(){return this.paused=!0,this},repeat:function(h){return(h===void 0||h===!0)&&(h=-1),h===!1&&(h=0),this.loop=h,this},resume:function(){return this.paused=!1,this},stop:function(){return this.paused=!0,this.complete=!0,this},reset:function(h){h===void 0&&(h=!1),this.elapsed=0,h||(this.iteration=0);for(var i=0;i<this.events.length;i++)this.events[i].complete=!1,h||(this.events[i].repeat=0);return this.play(!1)},add:function(h){Array.isArray(h)||(h=[h]);var i=this.events,l=0;i.length>0&&(l=i[i.length-1].time);for(var f=0;f<h.length;f++){var u=h[f],d=r(u,"at",0),p=r(u,"in",null);p!==null&&(d=this.elapsed+p);var m=r(u,"from",null);m!==null&&(d=l+m),i.push({complete:!1,time:d,repeat:0,if:r(u,"if",null),run:r(u,"run",null),loop:r(u,"loop",null),event:r(u,"event",null),target:r(u,"target",null),set:r(u,"set",null),tween:r(u,"tween",null),sound:r(u,"sound",null),once:r(u,"once",!1),stop:r(u,"stop",!1)}),l=d}return this.complete=!1,this},clear:function(){return this.events=[],this.elapsed=0,this.paused=!0,this},isPlaying:function(){return!this.paused&&!this.complete},getProgress:function(){var h=Math.min(this.totalComplete,this.events.length);return h/this.events.length},destroy:function(){var h=this.systems.events;h.off(s.PRE_UPDATE,this.preUpdate,this),h.off(s.UPDATE,this.update,this),h.off(s.SHUTDOWN,this.destroy,this),this.scene=null,this.systems=null,this.events=[]}});a.register("timeline",function(h){return new n(this.scene,h)}),v.exports=n},94880:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(95540),a=new o({initialize:function(s){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(s)},reset:function(r){if(this.delay=g(r,"delay",0),this.repeat=g(r,"repeat",0),this.loop=g(r,"loop",!1),this.callback=g(r,"callback",void 0),this.callbackScope=g(r,"callbackScope",this),this.args=g(r,"args",[]),this.timeScale=g(r,"timeScale",1),this.startAt=g(r,"startAt",0),this.paused=g(r,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=this.repeat===-1||this.loop?999999999999:this.repeat,this.delay===0&&(this.repeat>0||this.loop))throw new Error("TimerEvent infinite loop created via zero delay");return this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var r=this.delay+this.delay*this.repeat,s=this.elapsed+this.delay*(this.repeat-this.repeatCount);return s/r}else return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return this.elapsed*.001},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return this.getRemaining()*.001},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return this.getOverallRemaining()*.001},remove:function(r){r===void 0&&(r=!1),this.elapsed=this.delay,this.hasDispatched=!r,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});v.exports=a},35945:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="complete"},89809:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={COMPLETE:t(35945)}},90291:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Clock:t(33385),Events:t(89809),Timeline:t(96120),TimerEvent:t(94880)}},40382:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(72905),g=t(83419),a=t(43491),r=t(88032),s=t(37277),e=t(44594),n=t(93109),h=t(86081),i=t(8357),l=t(43960),f=t(26012),u=new g({initialize:function(p){this.scene=p,this.events=p.sys.events,this.timeScale=1,this.paused=!1,this.processing=!1,this.tweens=[],this.time=0,this.startTime=0,this.nextTime=0,this.prevTime=0,this.maxLag=500,this.lagSkip=33,this.gap=1e3/240,this.events.once(e.BOOT,this.boot,this),this.events.on(e.START,this.start,this)},boot:function(){this.events.once(e.DESTROY,this.destroy,this)},start:function(){this.timeScale=1,this.paused=!1,this.startTime=Date.now(),this.prevTime=this.startTime,this.nextTime=this.gap,this.events.on(e.UPDATE,this.update,this),this.events.once(e.SHUTDOWN,this.shutdown,this)},create:function(d){Array.isArray(d)||(d=[d]);for(var p=[],m=0;m<d.length;m++){var T=d[m];T instanceof h||T instanceof l?p.push(T):Array.isArray(T.tweens)?p.push(f(this,T)):p.push(i(this,T))}return p.length===1?p[0]:p},add:function(d){var p=d,m=this.tweens;return p instanceof h||p instanceof l||(Array.isArray(p.tweens)?p=f(this,p):p=i(this,p)),m.push(p.reset()),p},addMultiple:function(d){for(var p,m=[],T=this.tweens,y=0;y<d.length;y++)p=d[y],p instanceof h||p instanceof l||(Array.isArray(p.tweens)?p=f(this,p):p=i(this,p)),T.push(p.reset()),m.push(p);return m},chain:function(d){var p=f(this,d);return this.tweens.push(p.init()),p},getChainedTweens:function(d){return d.getChainedTweens()},has:function(d){return this.tweens.indexOf(d)>-1},existing:function(d){return this.has(d)||this.tweens.push(d.reset()),this},addCounter:function(d){var p=r(this,d);return this.tweens.push(p.reset()),p},stagger:function(d,p){return n(d,p)},setLagSmooth:function(d,p){return d===void 0&&(d=1/1e-8),p===void 0&&(p=0),this.maxLag=d,this.lagSkip=Math.min(p,this.maxLag),this},setFps:function(d){return d===void 0&&(d=240),this.gap=1e3/d,this.nextTime=this.time*1e3+this.gap,this},getDelta:function(d){var p=Date.now()-this.prevTime;p>this.maxLag&&(this.startTime+=p-this.lagSkip),this.prevTime+=p;var m=this.prevTime-this.startTime,T=m-this.nextTime,y=m-this.time*1e3;return T>0||d?(m/=1e3,this.time=m,this.nextTime+=T+(T>=this.gap?4:this.gap-T)):y=0,y},tick:function(){return this.step(!0),this},update:function(){this.paused||this.step(!1)},step:function(d){d===void 0&&(d=!1);var p=this.getDelta(d);if(!(p<=0)){this.processing=!0;var m,T,y=[],S=this.tweens;for(m=0;m<S.length;m++)T=S[m],T.update(p)&&y.push(T);var C=y.length;if(C&&S.length>0){for(m=0;m<C;m++){T=y[m];var R=S.indexOf(T);R>-1&&(T.isPendingRemove()||T.isDestroyed())&&(S.splice(R,1),T.destroy())}y.length=0}this.processing=!1}},remove:function(d){return this.processing?d.setPendingRemoveState():(o(this.tweens,d),d.setRemovedState()),this},reset:function(d){return this.existing(d),d.seek(),d.setActiveState(),this},makeActive:function(d){return this.existing(d),d.setActiveState(),this},each:function(d,p){var m,T=[null];for(m=1;m<arguments.length;m++)T.push(arguments[m]);return this.tweens.forEach(function(y){T[0]=y,d.apply(p,T)}),this},getTweens:function(){return this.tweens.slice()},getTweensOf:function(d){var p=[],m=this.tweens;Array.isArray(d)?d=a(d):d=[d];for(var T=d.length,y=0;y<m.length;y++)for(var S=m[y],C=0;C<T;C++)!S.isDestroyed()&&S.hasTarget(d[C])&&p.push(S);return p},getGlobalTimeScale:function(){return this.timeScale},setGlobalTimeScale:function(d){return this.timeScale=d,this},isTweening:function(d){for(var p=this.tweens,m,T=0;T<p.length;T++)if(m=p[T],m.isPlaying()&&m.hasTarget(d))return!0;return!1},killAll:function(){for(var d=this.processing?this.getTweens():this.tweens,p=0;p<d.length;p++)d[p].destroy();return this.processing||(d.length=0),this},killTweensOf:function(d){for(var p=this.getTweensOf(d),m=0;m<p.length;m++)p[m].destroy();return this},pauseAll:function(){return this.paused=!0,this},resumeAll:function(){return this.paused=!1,this},shutdown:function(){this.killAll(),this.tweens=[],this.events.off(e.UPDATE,this.update,this),this.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(e.START,this.start,this),this.scene=null,this.events=null}});s.register("TweenManager",u,"tweens"),v.exports=u},57355:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){return t&&t.hasOwnProperty(o)?t[o]:g};v.exports=E},6113:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(62640),g=t(35355),a=function(r,s){var e=o.Power0;if(typeof r=="string")if(o.hasOwnProperty(r))e=o[r];else{var n="";if(r.indexOf(".")){n=r.substring(r.indexOf(".")+1);var h=n.toLowerCase();h==="in"?n="easeIn":h==="out"?n="easeOut":h==="inout"&&(n="easeInOut")}r=g(r.substring(0,r.indexOf(".")+1)+n),o.hasOwnProperty(r)&&(e=o[r])}else typeof r=="function"&&(e=r);if(!s)return e;var i=s.slice(0);return i.unshift(0),function(l){return i[0]=l,e.apply(this,i)}};v.exports=a},91389:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(89318),g=t(77259),a=t(28392),r={bezier:o,catmull:g,catmullrom:g,linear:a},s=function(e){if(e===null)return null;var n=r.linear;return typeof e=="string"?r.hasOwnProperty(e)&&(n=r[e]):typeof e=="function"&&(n=e),n};v.exports=s},55292:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a;if(t.hasOwnProperty(o)){var r=typeof t[o];r==="function"?a=function(s,e,n,h,i,l){return t[o](s,e,n,h,i,l)}:a=function(){return t[o]}}else typeof g=="function"?a=g:a=function(){return g};return a};v.exports=E},82985:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(81076),g=function(a){var r,s=[];if(a.hasOwnProperty("props"))for(r in a.props)r.substring(0,1)!=="_"&&s.push({key:r,value:a.props[r]});else for(r in a)o.indexOf(r)===-1&&r.substring(0,1)!=="_"&&s.push({key:r,value:a[r]});return s};v.exports=g},62329:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=function(a){var r=o(a,"targets",null);return r===null||(typeof r=="function"&&(r=r.call()),Array.isArray(r)||(r=[r])),r};v.exports=g},17777:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(30976),g=t(99472);function a(h){return!!h.getActive&&typeof h.getActive=="function"}function r(h){return!!h.getStart&&typeof h.getStart=="function"}function s(h){return!!h.getEnd&&typeof h.getEnd=="function"}function e(h){return r(h)||s(h)||a(h)}var n=function(h,i){var l,f=function(K,Q,U){return U},u=function(K,Q,U){return U},d=null,p=typeof i;if(p==="number")f=function(){return i};else if(Array.isArray(i))u=function(){return i[0]},f=function(){return i[i.length-1]};else if(p==="string"){var m=i.toLowerCase(),T=m.substring(0,6)==="random",y=m.substring(0,3)==="int";if(T||y){var S=m.indexOf("("),C=m.indexOf(")"),R=m.indexOf(",");if(S&&C&&R){var I=parseFloat(m.substring(S+1,R)),L=parseFloat(m.substring(R+1,C));T?f=function(){return g(I,L)}:f=function(){return o(I,L)}}else throw new Error("invalid random() format")}else{m=m[0];var w=parseFloat(i.substr(2));switch(m){case"+":f=function(K,Q,U){return U+w};break;case"-":f=function(K,Q,U){return U-w};break;case"*":f=function(K,Q,U){return U*w};break;case"/":f=function(K,Q,U){return U/w};break;default:f=function(){return parseFloat(i)}}}}else if(p==="function")f=i;else if(p==="object")if(e(i))a(i)&&(d=i.getActive),s(i)&&(f=i.getEnd),r(i)&&(u=i.getStart);else if(i.hasOwnProperty("value"))l=n(h,i.value);else{var O=i.hasOwnProperty("to"),B=i.hasOwnProperty("from"),V=i.hasOwnProperty("start");if(O&&(B||V)){if(l=n(h,i.to),V){var b=n(h,i.start);l.getActive=b.getEnd}if(B){var X=n(h,i.from);l.getStart=X.getEnd}}}return l||(l={getActive:d,getEnd:f,getStart:u}),l};v.exports=n},88032:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(69902),a=t(23568),r=t(57355),s=t(6113),e=t(55292),n=t(35154),h=t(17777),i=t(269),l=t(86081),f=function(u,d,p){if(d instanceof l)return d.parent=u,d;p===void 0?p=g:p=i(g,p);var m=n(d,"from",0),T=n(d,"to",1),y=[{value:m}],S=n(d,"delay",p.delay),C=n(d,"easeParams",p.easeParams),R=n(d,"ease",p.ease),I=h("value",T),L=new l(u,y),w=L.add(0,"value",I.getEnd,I.getStart,I.getActive,s(n(d,"ease",R),n(d,"easeParams",C)),e(d,"delay",S),n(d,"duration",p.duration),r(d,"yoyo",p.yoyo),n(d,"hold",p.hold),n(d,"repeat",p.repeat),n(d,"repeatDelay",p.repeatDelay),!1,!1);w.start=m,w.current=m,L.completeDelay=a(d,"completeDelay",0),L.loop=Math.round(a(d,"loop",0)),L.loopDelay=Math.round(a(d,"loopDelay",0)),L.paused=r(d,"paused",!1),L.persist=r(d,"persist",!1),L.callbackScope=n(d,"callbackScope",L);for(var O=o.TYPES,B=0;B<O.length;B++){var V=O[B],b=n(d,V,!1);if(b){var X=n(d,V+"Params",[]);L.setCallback(V,b,X)}}return L};v.exports=f},93109:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(6113),g=t(35154),a=t(36383),r=function(s,e){e===void 0&&(e={});var n,h=g(e,"start",0),i=g(e,"ease",null),l=g(e,"grid",null),f=g(e,"from",0),u=f==="first",d=f==="center",p=f==="last",m=typeof f=="number",T=Array.isArray(s),y=parseFloat(T?s[0]:s),S=T?parseFloat(s[1]):0,C=Math.max(y,S);if(T&&(h+=y),l){var R=l[0],I=l[1],L=0,w=0,O=0,B=0,V=[];p?(L=R-1,w=I-1):m?(L=f%R,w=Math.floor(f/R)):d&&(L=(R-1)/2,w=(I-1)/2);for(var b=a.MIN_SAFE_INTEGER,X=0;X<I;X++){V[X]=[];for(var K=0;K<R;K++){O=L-K,B=w-X;var Q=Math.sqrt(O*O+B*B);Q>b&&(b=Q),V[X][K]=Q}}}var U=i?o(i):null;return l?n=function(W,F,G,z){var Y=0,$=z%R,j=Math.floor(z/R);$>=0&&$<R&&j>=0&&j<I&&(Y=V[j][$]);var Z;if(T){var q=S-y;U?Z=Y/b*q*U(Y/b):Z=Y/b*q}else U?Z=Y*y*U(Y/b):Z=Y*y;return Z+h}:n=function(W,F,G,z,Y){Y--;var $;u?$=z:d?$=Math.abs(Y/2-z):p?$=Y-z:m&&($=Math.abs(f-z));var j;if(T){var Z;d?Z=(S-y)/Y*($*2):Z=(S-y)/Y*$,U?j=Z*U($/Y):j=Z}else U?j=Y*C*U($/Y):j=$*y;return j+h},n};v.exports=r},8357:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(69902),a=t(23568),r=t(57355),s=t(6113),e=t(91389),n=t(55292),h=t(82985),i=t(62329),l=t(35154),f=t(17777),u=t(269),d=t(86081),p=function(m,T,y){if(T instanceof d)return T.parent=m,T;y===void 0?y=g:y=u(g,y);var S=i(T);!S&&y.targets&&(S=y.targets);for(var C=h(T),R=l(T,"delay",y.delay),I=l(T,"duration",y.duration),L=l(T,"easeParams",y.easeParams),w=l(T,"ease",y.ease),O=l(T,"hold",y.hold),B=l(T,"repeat",y.repeat),V=l(T,"repeatDelay",y.repeatDelay),b=r(T,"yoyo",y.yoyo),X=r(T,"flipX",y.flipX),K=r(T,"flipY",y.flipY),Q=l(T,"interpolation",y.interpolation),U=function(tt,nt,at,st){if(at==="texture"){var lt=st,vt=void 0;Array.isArray(st)?(lt=st[0],vt=st[1]):st.hasOwnProperty("value")?(lt=st.value,Array.isArray(st.value)?(lt=st.value[0],vt=st.value[1]):typeof st.value=="string"&&(lt=st.value)):typeof st=="string"&&(lt=st),tt.addFrame(nt,lt,vt,n(st,"delay",R),l(st,"duration",I),l(st,"hold",O),l(st,"repeat",B),l(st,"repeatDelay",V),r(st,"flipX",X),r(st,"flipY",K))}else{var mt=f(at,st),pt=e(l(st,"interpolation",Q));tt.add(nt,at,mt.getEnd,mt.getStart,mt.getActive,s(l(st,"ease",w),l(st,"easeParams",L)),n(st,"delay",R),l(st,"duration",I),r(st,"yoyo",b),l(st,"hold",O),l(st,"repeat",B),l(st,"repeatDelay",V),r(st,"flipX",X),r(st,"flipY",K),pt,pt?st:null)}},W=new d(m,S),F=0;F<C.length;F++)for(var G=C[F].key,z=C[F].value,Y=0;Y<S.length;Y++)G==="scale"&&!S[Y].hasOwnProperty("scale")?(U(W,Y,"scaleX",z),U(W,Y,"scaleY",z)):U(W,Y,G,z);W.completeDelay=a(T,"completeDelay",0),W.loop=Math.round(a(T,"loop",0)),W.loopDelay=Math.round(a(T,"loopDelay",0)),W.paused=r(T,"paused",!1),W.persist=r(T,"persist",!1),W.callbackScope=l(T,"callbackScope",W);for(var $=o.TYPES,j=0;j<$.length;j++){var Z=$[j],q=l(T,Z,!1);if(q){var _=l(T,Z+"Params",[]);W.setCallback(Z,q,_)}}return W};v.exports=p},26012:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(23568),a=t(57355),r=t(62329),s=t(35154),e=t(8357),n=t(43960),h=function(i,l){if(l instanceof n)return l.parent=i,l;var f=new n(i);f.startDelay=s(l,"delay",0),f.completeDelay=g(l,"completeDelay",0),f.loop=Math.round(g(l,"loop",s(l,"repeat",0))),f.loopDelay=Math.round(g(l,"loopDelay",s(l,"repeatDelay",0))),f.paused=a(l,"paused",!1),f.persist=a(l,"persist",!1),f.callbackScope=s(l,"callbackScope",f);var u,d=o.TYPES;for(u=0;u<d.length;u++){var p=d[u],m=s(l,p,!1);if(m){var T=s(l,p+"Params",[]);f.setCallback(p,m,T)}}var y=s(l,"tweens",null);if(Array.isArray(y)){var S=[],C=r(l),R=void 0;for(C&&(R={targets:C}),u=0;u<y.length;u++)S.push(e(f,y[u],R));f.add(S)}return f};v.exports=h},30231:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={GetBoolean:t(57355),GetEaseFunction:t(6113),GetInterpolationFunction:t(91389),GetNewValue:t(55292),GetProps:t(82985),GetTargets:t(62329),GetValueOp:t(17777),NumberTweenBuilder:t(88032),StaggerBuilder:t(93109),TweenBuilder:t(8357)}},73685:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="active"},98540:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="complete"},67233:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="loop"},2859:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="pause"},98336:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="repeat"},25764:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="resume"},32193:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="start"},84371:v=>{/**
 * @author       samme
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="stop"},70766:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="update"},55659:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports="yoyo"},842:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={TWEEN_ACTIVE:t(73685),TWEEN_COMPLETE:t(98540),TWEEN_LOOP:t(67233),TWEEN_PAUSE:t(2859),TWEEN_RESUME:t(25764),TWEEN_REPEAT:t(98336),TWEEN_START:t(32193),TWEEN_STOP:t(84371),TWEEN_UPDATE:t(70766),TWEEN_YOYO:t(55659)}},43066:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o={States:t(86353),Builders:t(30231),Events:t(842),TweenManager:t(40382),Tween:t(86081),TweenData:t(48177),TweenFrameData:t(42220),BaseTween:t(70402),TweenChain:t(43960)};v.exports=o},70402:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(50792),a=t(842),r=t(86353),s=new o({Extends:g,initialize:function(n){g.call(this),this.parent=n,this.data=[],this.totalData=0,this.startDelay=0,this.hasStarted=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=r.PENDING,this.paused=!1,this.callbacks={onActive:null,onComplete:null,onLoop:null,onPause:null,onRepeat:null,onResume:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope,this.persist=!1},setTimeScale:function(e){return this.timeScale=e,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return!this.paused&&this.isActive()},isPaused:function(){return this.paused},pause:function(){return this.paused||(this.paused=!0,this.dispatchEvent(a.TWEEN_PAUSE,"onPause")),this},resume:function(){return this.paused&&(this.paused=!1,this.dispatchEvent(a.TWEEN_RESUME,"onResume")),this},makeActive:function(){this.parent.makeActive(this),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")},onCompleteHandler:function(){this.setPendingRemoveState(),this.dispatchEvent(a.TWEEN_COMPLETE,"onComplete")},complete:function(e){return e===void 0&&(e=0),e?(this.setCompleteDelayState(),this.countdown=e):this.onCompleteHandler(),this},completeAfterLoop:function(e){return e===void 0&&(e=0),this.loopCounter>e&&(this.loopCounter=e),this},remove:function(){return this.parent&&this.parent.remove(this),this},stop:function(){return this.parent&&!this.isRemoved()&&!this.isPendingRemove()&&!this.isDestroyed()&&(this.dispatchEvent(a.TWEEN_STOP,"onStop"),this.setPendingRemoveState()),this},updateLoopCountdown:function(e){this.countdown-=e,this.countdown<=0&&(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"))},updateStartCountdown:function(e){return this.countdown-=e,this.countdown<=0&&(this.hasStarted=!0,this.setActiveState(),this.dispatchEvent(a.TWEEN_START,"onStart"),e=0),e},updateCompleteDelay:function(e){this.countdown-=e,this.countdown<=0&&this.onCompleteHandler()},setCallback:function(e,n,h){return h===void 0&&(h=[]),this.callbacks.hasOwnProperty(e)&&(this.callbacks[e]={func:n,params:h}),this},setPendingState:function(){this.state=r.PENDING},setActiveState:function(){this.state=r.ACTIVE},setLoopDelayState:function(){this.state=r.LOOP_DELAY},setCompleteDelayState:function(){this.state=r.COMPLETE_DELAY},setStartDelayState:function(){this.state=r.START_DELAY,this.countdown=this.startDelay,this.hasStarted=!1},setPendingRemoveState:function(){this.state=r.PENDING_REMOVE},setRemovedState:function(){this.state=r.REMOVED},setFinishedState:function(){this.state=r.FINISHED},setDestroyedState:function(){this.state=r.DESTROYED},isPending:function(){return this.state===r.PENDING},isActive:function(){return this.state===r.ACTIVE},isLoopDelayed:function(){return this.state===r.LOOP_DELAY},isCompleteDelayed:function(){return this.state===r.COMPLETE_DELAY},isStartDelayed:function(){return this.state===r.START_DELAY},isPendingRemove:function(){return this.state===r.PENDING_REMOVE},isRemoved:function(){return this.state===r.REMOVED},isFinished:function(){return this.state===r.FINISHED},isDestroyed:function(){return this.state===r.DESTROYED},destroy:function(){this.data&&this.data.forEach(function(e){e.destroy()}),this.removeAllListeners(),this.callbacks=null,this.data=null,this.parent=null,this.setDestroyedState()}});s.TYPES=["onActive","onComplete","onLoop","onPause","onRepeat","onResume","onStart","onStop","onUpdate","onYoyo"],v.exports=s},95042:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(83419),g=t(842),a=t(86353),r=new o({initialize:function(e,n,h,i,l,f,u,d,p,m){this.tween=e,this.targetIndex=n,this.duration=i,this.totalDuration=0,this.delay=0,this.getDelay=h,this.yoyo=l,this.hold=f,this.repeat=u,this.repeatDelay=d,this.repeatCounter=0,this.flipX=p,this.flipY=m,this.progress=0,this.elapsed=0,this.state=0,this.isCountdown=!1},getTarget:function(){return this.tween.targets[this.targetIndex]},setTargetValue:function(s){s===void 0&&(s=this.current),this.tween.targets[this.targetIndex][this.key]=s},setCreatedState:function(){this.state=a.CREATED,this.isCountdown=!1},setDelayState:function(){this.state=a.DELAY,this.isCountdown=!0},setPendingRenderState:function(){this.state=a.PENDING_RENDER,this.isCountdown=!1},setPlayingForwardState:function(){this.state=a.PLAYING_FORWARD,this.isCountdown=!1},setPlayingBackwardState:function(){this.state=a.PLAYING_BACKWARD,this.isCountdown=!1},setHoldState:function(){this.state=a.HOLD_DELAY,this.isCountdown=!0},setRepeatState:function(){this.state=a.REPEAT_DELAY,this.isCountdown=!0},setCompleteState:function(){this.state=a.COMPLETE,this.isCountdown=!1},isCreated:function(){return this.state===a.CREATED},isDelayed:function(){return this.state===a.DELAY},isPendingRender:function(){return this.state===a.PENDING_RENDER},isPlayingForward:function(){return this.state===a.PLAYING_FORWARD},isPlayingBackward:function(){return this.state===a.PLAYING_BACKWARD},isHolding:function(){return this.state===a.HOLD_DELAY},isRepeating:function(){return this.state===a.REPEAT_DELAY},isComplete:function(){return this.state===a.COMPLETE},setStateFromEnd:function(s){this.yoyo?this.onRepeat(s,!0,!0):this.repeatCounter>0?this.onRepeat(s,!0,!1):this.setCompleteState()},setStateFromStart:function(s){this.repeatCounter>0?this.onRepeat(s,!1):this.setCompleteState()},reset:function(){var s=this.tween,e=s.totalTargets,n=this.targetIndex,h=s.targets[n],i=this.key;this.progress=0,this.elapsed=0,this.delay=this.getDelay(h,i,0,n,e,s),this.repeatCounter=this.repeat===-1?a.MAX:this.repeat,this.setPendingRenderState();var l=this.duration+this.hold;this.yoyo&&(l+=this.duration);var f=l+this.repeatDelay;this.totalDuration=this.delay+l,this.repeat===-1?(this.totalDuration+=f*a.MAX,s.isInfinite=!0):this.repeat>0&&(this.totalDuration+=f*this.repeat),this.totalDuration>s.duration&&(s.duration=this.totalDuration),this.delay<s.startDelay&&(s.startDelay=this.delay),this.delay>0&&(this.elapsed=this.delay,this.setDelayState())},onRepeat:function(s,e,n){var h=this.tween,i=h.totalTargets,l=this.targetIndex,f=h.targets[l],u=this.key,d=u!=="texture";if(this.elapsed=s,this.progress=s/this.duration,this.flipX&&f.toggleFlipX(),this.flipY&&f.toggleFlipY(),d&&(e||n)&&(this.start=this.getStartValue(f,u,this.start,l,i,h)),n){this.setPlayingBackwardState(),this.dispatchEvent(g.TWEEN_YOYO,"onYoyo");return}this.repeatCounter--,d&&(this.end=this.getEndValue(f,u,this.start,l,i,h)),this.repeatDelay>0?(this.elapsed=this.repeatDelay-s,d&&(this.current=this.start,f[u]=this.current),this.setRepeatState()):(this.setPlayingForwardState(),this.dispatchEvent(g.TWEEN_REPEAT,"onRepeat"))},destroy:function(){this.tween=null,this.getDelay=null,this.setCompleteState()}});v.exports=r},69902:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1,persist:!1,interpolation:null};v.exports=E},81076:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","interpolation","loop","loopDelay","onActive","onActiveParams","onComplete","onCompleteParams","onLoop","onLoopParams","onPause","onPauseParams","onRepeat","onRepeatParams","onResume","onResumeParams","onStart","onStartParams","onStop","onStopParams","onUpdate","onUpdateParams","onYoyo","onYoyoParams","paused","persist","props","repeat","repeatDelay","targets","yoyo"]},86081:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(70402),g=t(83419),a=t(842),r=t(44603),s=t(39429),e=t(36383),n=t(86353),h=t(48177),i=t(42220),l=new g({Extends:o,initialize:function(u,d){o.call(this,u),this.targets=d,this.totalTargets=d.length,this.isSeeking=!1,this.isInfinite=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0},add:function(f,u,d,p,m,T,y,S,C,R,I,L,w,O,B,V){var b=new h(this,f,u,d,p,m,T,y,S,C,R,I,L,w,O,B,V);return this.totalData=this.data.push(b),b},addFrame:function(f,u,d,p,m,T,y,S,C,R){var I=new i(this,f,u,d,p,m,T,y,S,C,R);return this.totalData=this.data.push(I),I},getValue:function(f){f===void 0&&(f=0);var u=null;return this.data&&(u=this.data[f].current),u},hasTarget:function(f){return this.targets&&this.targets.indexOf(f)!==-1},updateTo:function(f,u,d){if(d===void 0&&(d=!1),f!=="texture")for(var p=0;p<this.totalData;p++){var m=this.data[p];m.key===f&&(m.isPlayingForward()||m.isPlayingBackward())&&(m.end=u,d&&(m.start=m.current))}return this},restart:function(){switch(this.state){case n.REMOVED:case n.FINISHED:this.seek(),this.parent.makeActive(this);break;case n.PENDING:case n.PENDING_REMOVE:this.parent.reset(this);break;case n.DESTROYED:console.warn("Cannot restart destroyed Tween",this);break;default:this.seek();break}return this.paused=!1,this.hasStarted=!1,this},nextState:function(){if(this.loopCounter>0)this.elapsed=0,this.progress=0,this.loopCounter--,this.initTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(a.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},onCompleteHandler:function(){this.progress=1,this.totalProgress=1,o.prototype.onCompleteHandler.call(this)},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed Tween",this),this):((this.isPendingRemove()||this.isFinished())&&this.seek(),this.paused=!1,this.setActiveState(),this)},seek:function(f,u,d){if(f===void 0&&(f=0),u===void 0&&(u=16.6),d===void 0&&(d=!1),this.isDestroyed())return console.warn("Cannot seek destroyed Tween",this),this;d||(this.isSeeking=!0),this.reset(!0),this.initTweenData(!0),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive");var p=this.paused;if(this.paused=!1,f>0){for(var m=Math.floor(f/u),T=f-m*u,y=0;y<m;y++)this.update(u);T>0&&this.update(T)}return this.paused=p,this.isSeeking=!1,this},initTweenData:function(f){f===void 0&&(f=!1),this.duration=0,this.startDelay=e.MAX_SAFE_INTEGER;for(var u=this.data,d=0;d<this.totalData;d++)u[d].reset(f);this.duration=Math.max(this.duration,.01);var p=this.duration,m=this.completeDelay,T=this.loopCounter,y=this.loopDelay;T>0?this.totalDuration=p+m+(p+y)*T:this.totalDuration=p+m},reset:function(f){return f===void 0&&(f=!1),this.elapsed=0,this.totalElapsed=0,this.progress=0,this.totalProgress=0,this.loopCounter=this.loop,this.loop===-1&&(this.isInfinite=!0,this.loopCounter=n.MAX),f||(this.initTweenData(),this.setActiveState(),this.dispatchEvent(a.TWEEN_ACTIVE,"onActive")),this},update:function(f){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.paused||this.isFinished())return!1;if(f*=this.timeScale*this.parent.timeScale,this.isLoopDelayed())return this.updateLoopCountdown(f),!1;if(this.isCompleteDelayed())return this.updateCompleteDelay(f),!1;this.hasStarted||(this.startDelay-=f,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchEvent(a.TWEEN_START,"onStart"),f=0));var u=!1;if(this.isActive())for(var d=this.data,p=0;p<this.totalData;p++)d[p].update(f)&&(u=!0);this.elapsed+=f,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=f,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),u||this.nextState();var m=this.isPendingRemove();return m&&this.persist&&(this.setFinishedState(),m=!1),m},forward:function(f){return this.update(f),this},rewind:function(f){return this.update(-f),this},dispatchEvent:function(f,u){if(!this.isSeeking){this.emit(f,this,this.targets);var d=this.callbacks[u];d&&d.func.apply(this.callbackScope,[this,this.targets].concat(d.params))}},destroy:function(){o.prototype.destroy.call(this),this.targets=null}});s.register("tween",function(f){return this.scene.sys.tweens.add(f)}),r.register("tween",function(f){return this.scene.sys.tweens.create(f)}),v.exports=l},43960:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(72905),g=t(70402),a=t(83419),r=t(842),s=t(44603),e=t(39429),n=t(86353),h=new a({Extends:g,initialize:function(l){g.call(this,l),this.currentTween=null,this.currentIndex=0},init:function(){return this.loopCounter=this.loop===-1?n.MAX:this.loop,this.setCurrentTween(0),this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this.dispatchEvent(r.TWEEN_ACTIVE,"onActive"),this},add:function(i){var l=this.parent.create(i);Array.isArray(l)||(l=[l]);for(var f=this.data,u=0;u<l.length;u++){var d=l[u];d.parent=this,f.push(d.reset())}return this.totalData=f.length,this},remove:function(i){return o(this.data,i),i.setRemovedState(),i===this.currentTween&&this.nextTween(),this.totalData=this.data.length,this},hasTarget:function(i){for(var l=this.data,f=0;f<this.totalData;f++)if(l[f].hasTarget(i))return!0;return!1},restart:function(){return this.isDestroyed()?(console.warn("Cannot restart destroyed TweenChain",this),this):(this.isRemoved()&&this.parent.makeActive(this),this.resetTweens(),this.paused=!1,this.init())},reset:function(i){return i.seek(),i.setActiveState(),this},makeActive:function(i){return i.reset(),i.setActiveState(),this},nextState:function(){if(this.loopCounter>0)this.loopCounter--,this.resetTweens(),this.loopDelay>0?(this.countdown=this.loopDelay,this.setLoopDelayState()):(this.setActiveState(),this.dispatchEvent(r.TWEEN_LOOP,"onLoop"));else if(this.completeDelay>0)this.countdown=this.completeDelay,this.setCompleteDelayState();else return this.onCompleteHandler(),!0;return!1},play:function(){return this.isDestroyed()?(console.warn("Cannot play destroyed TweenChain",this),this):((this.isPendingRemove()||this.isPending())&&this.resetTweens(),this.paused=!1,this.startDelay>0&&!this.isStartDelayed()?this.setStartDelayState():this.setActiveState(),this)},resetTweens:function(){for(var i=this.data,l=this.totalData,f=0;f<l;f++)i[f].reset(!1);this.currentIndex=0,this.currentTween=i[0]},update:function(i){if(this.isPendingRemove()||this.isDestroyed())return!0;if(this.isFinished()||this.paused)return!1;i*=this.parent.timeScale,this.isLoopDelayed()?this.updateLoopCountdown(i):this.isCompleteDelayed()?this.updateCompleteDelay(i):this.isStartDelayed()&&(i=this.updateStartCountdown(i));var l=!1;return this.isActive()&&this.currentTween&&(this.currentTween.update(i)&&this.nextTween()&&this.nextState(),l=this.isPendingRemove(),l&&this.persist&&(this.setFinishedState(),l=!1)),l},nextTween:function(){return this.currentIndex++,this.currentIndex===this.totalData?!0:(this.setCurrentTween(this.currentIndex),!1)},setCurrentTween:function(i){this.currentIndex=i,this.currentTween=this.data[i],this.currentTween.setActiveState(),this.currentTween.dispatchEvent(r.TWEEN_ACTIVE,"onActive")},dispatchEvent:function(i,l){this.emit(i,this);var f=this.callbacks[l];f&&f.func.apply(this.callbackScope,[this].concat(f.params))},destroy:function(){g.prototype.destroy.call(this),this.currentTween=null}});e.register("tweenchain",function(i){return this.scene.sys.tweens.chain(i)}),s.register("tweenchain",function(i){return this.scene.sys.tweens.create(i)}),v.exports=h},48177:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95042),g=t(45319),a=t(83419),r=t(842),s=new a({Extends:o,initialize:function(n,h,i,l,f,u,d,p,m,T,y,S,C,R,I,L,w){o.call(this,n,h,p,m,T,y,S,C,R,I),this.key=i,this.getActiveValue=u,this.getEndValue=l,this.getStartValue=f,this.ease=d,this.start=0,this.previous=0,this.current=0,this.end=0,this.interpolation=L,this.interpolationData=w},reset:function(e){o.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex],h=this.key;e&&(n[h]=this.start),this.start=0,this.previous=0,this.current=0,this.end=0,this.getActiveValue&&(n[h]=this.getActiveValue(n,h,0))},update:function(e){var n=this.tween,h=n.totalTargets,i=this.targetIndex,l=n.targets[i],f=this.key;if(!l)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.start=this.getStartValue(l,f,l[f],i,h,n),this.end=this.getEndValue(l,f,this.start,i,h,n),this.current=this.start,l[f]=this.start,this.setPlayingForwardState(),!0;var u=this.isPlayingForward(),d=this.isPlayingBackward();if(u||d){var p=this.elapsed,m=this.duration,T=0,y=!1;p+=e,p>=m?(T=p-m,p=m,y=!0):p<0&&(p=0);var S=g(p/m,0,1);if(this.elapsed=p,this.progress=S,this.previous=this.current,y)u?(this.current=this.end,l[f]=this.end,this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(T)):(this.current=this.start,l[f]=this.start,this.setStateFromStart(T));else{u||(S=1-S);var C=this.ease(S);this.interpolation?this.current=this.interpolation(this.interpolationData,C):this.current=this.start+(this.end-this.start)*C,l[f]=this.current}this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,n){var h=this.tween;if(!h.isSeeking){var i=h.targets[this.targetIndex],l=this.key,f=this.current,u=this.previous;h.emit(e,h,l,i,f,u);var d=h.callbacks[n];d&&d.func.apply(h.callbackScope,[h,i,l,f,u].concat(d.params))}},destroy:function(){o.prototype.destroy.call(this),this.getActiveValue=null,this.getEndValue=null,this.getStartValue=null,this.ease=null}});v.exports=s},42220:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(95042),g=t(45319),a=t(83419),r=t(842),s=new a({Extends:o,initialize:function(n,h,i,l,f,u,d,p,m,T,y){o.call(this,n,h,f,u,!1,d,p,m,T,y),this.key="texture",this.startTexture=null,this.endTexture=i,this.startFrame=null,this.endFrame=l,this.yoyo=p!==0},reset:function(e){o.prototype.reset.call(this);var n=this.tween.targets[this.targetIndex];this.startTexture||(this.startTexture=n.texture.key,this.startFrame=n.frame.name),e&&n.setTexture(this.startTexture,this.startFrame)},update:function(e){var n=this.tween,h=this.targetIndex,i=n.targets[h];if(!i)return this.setCompleteState(),!1;if(this.isCountdown&&(this.elapsed-=e,this.elapsed<=0&&(this.elapsed=0,e=0,this.isDelayed()?this.setPendingRenderState():this.isRepeating()?(this.setPlayingForwardState(),this.dispatchEvent(r.TWEEN_REPEAT,"onRepeat")):this.isHolding()&&this.setStateFromEnd(0))),this.isPendingRender())return this.startTexture&&i.setTexture(this.startTexture,this.startFrame),this.setPlayingForwardState(),!0;var l=this.isPlayingForward(),f=this.isPlayingBackward();if(l||f){var u=this.elapsed,d=this.duration,p=0,m=!1;u+=e,u>=d?(p=u-d,u=d,m=!0):u<0&&(u=0);var T=g(u/d,0,1);this.elapsed=u,this.progress=T,m&&(l?(i.setTexture(this.endTexture,this.endFrame),this.hold>0?(this.elapsed=this.hold,this.setHoldState()):this.setStateFromEnd(p)):(i.setTexture(this.startTexture,this.startFrame),this.setStateFromStart(p))),this.dispatchEvent(r.TWEEN_UPDATE,"onUpdate")}return!this.isComplete()},dispatchEvent:function(e,n){var h=this.tween;if(!h.isSeeking){var i=h.targets[this.targetIndex],l=this.key;h.emit(e,h,l,i);var f=h.callbacks[n];f&&f.func.apply(h.callbackScope,[h,i,l].concat(f.params))}},destroy:function(){o.prototype.destroy.call(this),this.startTexture=null,this.endTexture=null,this.startFrame=null,this.endFrame=null}});v.exports=s},86353:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E={CREATED:0,DELAY:2,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING:20,ACTIVE:21,LOOP_DELAY:22,COMPLETE_DELAY:23,START_DELAY:24,PENDING_REMOVE:25,REMOVED:26,FINISHED:27,DESTROYED:28,MAX:999999999999};v.exports=E},83419:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(s){return!!s.get&&typeof s.get=="function"||!!s.set&&typeof s.set=="function"}function t(s,e,n){var h=n?s[e]:Object.getOwnPropertyDescriptor(s,e);return!n&&h.value&&typeof h.value=="object"&&(h=h.value),h&&E(h)?(typeof h.enumerable>"u"&&(h.enumerable=!0),typeof h.configurable>"u"&&(h.configurable=!0),h):!1}function o(s,e){var n=Object.getOwnPropertyDescriptor(s,e);return n?(n.value&&typeof n.value=="object"&&(n=n.value),n.configurable===!1):!1}function g(s,e,n,h){for(var i in e)if(e.hasOwnProperty(i)){var l=t(e,i,n);if(l!==!1){var f=h||s;if(o(f.prototype,i)){if(r.ignoreFinals)continue;throw new Error("cannot override final property '"+i+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(s.prototype,i,l)}else s.prototype[i]=e[i]}}function a(s,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)g(s,e[n].prototype||e[n])}}function r(s){s||(s={});var e,n;if(s.initialize){if(typeof s.initialize!="function")throw new Error("initialize must be a function");e=s.initialize,delete s.initialize}else if(s.Extends){var h=s.Extends;e=function(){h.apply(this,arguments)}}else e=function(){};s.Extends?(e.prototype=Object.create(s.Extends.prototype),e.prototype.constructor=e,n=s.Extends,delete s.Extends):e.prototype.constructor=e;var i=null;return s.Mixins&&(i=s.Mixins,delete s.Mixins),a(e,i),g(e,s,!0,n),e}r.extend=g,r.mixin=a,r.ignoreFinals=!1,v.exports=r},29747:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){};v.exports=E},20242:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return null};v.exports=E},71146:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r){if(r===void 0&&(r=t),g>0){var s=g-t.length;if(s<=0)return null}if(!Array.isArray(o))return t.indexOf(o)===-1?(t.push(o),a&&a.call(r,o),o):null;for(var e=o.length-1;e>=0;)t.indexOf(o[e])!==-1&&o.splice(e,1),e--;if(e=o.length,e===0)return null;g>0&&e>s&&(o.splice(s),e=s);for(var n=0;n<e;n++){var h=o[n];t.push(h),a&&a.call(r,h)}return o};v.exports=E},51067:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a,r,s){if(g===void 0&&(g=0),s===void 0&&(s=t),a>0){var e=a-t.length;if(e<=0)return null}if(!Array.isArray(o))return t.indexOf(o)===-1?(t.splice(g,0,o),r&&r.call(s,o),o):null;for(var n=o.length-1;n>=0;)t.indexOf(o[n])!==-1&&o.pop(),n--;if(n=o.length,n===0)return null;a>0&&n>e&&(o.splice(e),n=e);for(var h=n-1;h>=0;h--){var i=o[h];t.splice(g,0,i),r&&r.call(s,i)}return o};v.exports=E},66905:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.indexOf(o);return g!==-1&&g<t.length&&(t.splice(g,1),t.push(o)),o};v.exports=E},21612:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,r,s,e,n){e===void 0&&(e=0),n===void 0&&(n=a.length);var h=0;if(o(a,e,n))for(var i=e;i<n;i++){var l=a[i];l[r]===s&&h++}return h};v.exports=g},95428:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a,r=[null];for(a=3;a<arguments.length;a++)r.push(arguments[a]);for(a=0;a<t.length;a++)r[0]=t[a],o.apply(g,r);return t};v.exports=E},36914:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,r,s,e,n){if(e===void 0&&(e=0),n===void 0&&(n=a.length),o(a,e,n)){var h,i=[null];for(h=5;h<arguments.length;h++)i.push(arguments[h]);for(h=e;h<n;h++)i[0]=a[h],r.apply(s,i)}return a};v.exports=g},81957:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o.length){if(o.length===1)return o[0]}else return NaN;var a=1,r,s;if(g){if(t<o[0][g])return o[0];for(;o[a][g]<t;)a++}else for(;o[a]<t;)a++;return a>o.length&&(a=o.length),g?(r=o[a-1][g],s=o[a][g],s-t<=t-r?o[a]:o[a-1]):(r=o[a-1],s=o[a],s-t<=t-r?s:r)};v.exports=E},43491:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=[]);for(var g=0;g<t.length;g++)Array.isArray(t[g])?E(t[g],o):o.push(t[g]);return o};v.exports=E},46710:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,r,s,e,n){e===void 0&&(e=0),n===void 0&&(n=a.length);var h=[];if(o(a,e,n))for(var i=e;i<n;i++){var l=a[i];(!r||r&&s===void 0&&l.hasOwnProperty(r)||r&&s!==void 0&&l[r]===s)&&h.push(l)}return h};v.exports=g},58731:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,r,s,e,n){if(e===void 0&&(e=0),n===void 0&&(n=a.length),o(a,e,n))for(var h=e;h<n;h++){var i=a[h];if(!r||r&&s===void 0&&i.hasOwnProperty(r)||r&&s!==void 0&&i[r]===s)return i}return null};v.exports=g},26546:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){o===void 0&&(o=0),g===void 0&&(g=t.length);var a=o+Math.floor(Math.random()*g);return t[a]===void 0?null:t[a]};v.exports=E},85835:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o===g)return t;var a=t.indexOf(o),r=t.indexOf(g);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return a>r||(t.splice(a,1),r===t.length-1?t.push(o):t.splice(r,0,o)),t};v.exports=E},83371:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o===g)return t;var a=t.indexOf(o),r=t.indexOf(g);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return a<r||(t.splice(a,1),r===0?t.unshift(o):t.splice(r,0,o)),t};v.exports=E},70864:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.indexOf(o);if(g>0){var a=t[g-1],r=t.indexOf(a);t[g]=a,t[r]=o}return t};v.exports=E},69693:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=t.indexOf(o);if(a===-1||g<0||g>=t.length)throw new Error("Supplied index out of bounds");return a!==g&&(t.splice(a,1),t.splice(g,0,o)),o};v.exports=E},40853:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.indexOf(o);if(g!==-1&&g<t.length-1){var a=t[g+1],r=t.indexOf(a);t[g]=a,t[r]=o}return t};v.exports=E},20283:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=[],s,e=!1;if((g||a)&&(e=!0,g||(g=""),a||(a="")),o<t)for(s=t;s>=o;s--)e?r.push(g+s.toString()+a):r.push(s);else for(s=t;s<=o;s++)e?r.push(g+s.toString()+a):r.push(s);return r};v.exports=E},593:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(2284),g=function(a,r,s){a===void 0&&(a=0),r===void 0&&(r=null),s===void 0&&(s=1),r===null&&(r=a,a=0);for(var e=[],n=Math.max(o((r-a)/(s||1)),0),h=0;h<n;h++)e.push(a),a+=s;return e};v.exports=g},43886:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */function E(g,a,r){var s=g[a];g[a]=g[r],g[r]=s}function t(g,a){return g<a?-1:g>a?1:0}var o=function(g,a,r,s,e){for(r===void 0&&(r=0),s===void 0&&(s=g.length-1),e===void 0&&(e=t);s>r;){if(s-r>600){var n=s-r+1,h=a-r+1,i=Math.log(n),l=.5*Math.exp(2*i/3),f=.5*Math.sqrt(i*l*(n-l)/n)*(h-n/2<0?-1:1),u=Math.max(r,Math.floor(a-h*l/n+f)),d=Math.min(s,Math.floor(a+(n-h)*l/n+f));o(g,a,u,d,e)}var p=g[a],m=r,T=s;for(E(g,r,a),e(g[s],p)>0&&E(g,r,s);m<T;){for(E(g,m,T),m++,T--;e(g[m],p)<0;)m++;for(;e(g[T],p)>0;)T--}e(g[r],p)===0?E(g,r,T):(T++,E(g,T,s)),T<=a&&(r=T+1),a<=T&&(s=T-1)}};v.exports=o},88492:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=t(33680),a=function(s,e,n){for(var h=[],i=0;i<s.length;i++)for(var l=0;l<e.length;l++)for(var f=0;f<n;f++)h.push({a:s[i],b:e[l]});return h},r=function(s,e,n){var h=o(n,"max",0),i=o(n,"qty",1),l=o(n,"random",!1),f=o(n,"randomB",!1),u=o(n,"repeat",0),d=o(n,"yoyo",!1),p=[];if(f&&g(e),u===-1)if(h===0)u=0;else{var m=s.length*e.length*i;d&&(m*=2),u=Math.ceil(h/m)}for(var T=0;T<=u;T++){var y=a(s,e,i);l&&g(y),p=p.concat(y),d&&(y.reverse(),p=p.concat(y))}return h&&p.splice(h),p};v.exports=r},72905:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19133),g=function(a,r,s,e){e===void 0&&(e=a);var n;if(!Array.isArray(r))return n=a.indexOf(r),n!==-1?(o(a,n),s&&s.call(e,r),r):null;for(var h=r.length-1,i=[];h>=0;){var l=r[h];n=a.indexOf(l),n!==-1&&(o(a,n),i.push(l),s&&s.call(e,l)),h--}return i};v.exports=g},60248:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19133),g=function(a,r,s,e){if(e===void 0&&(e=a),r<0||r>a.length-1)throw new Error("Index out of bounds");var n=o(a,r);return s&&s.call(e,n),n};v.exports=g},81409:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,r,s,e,n){if(r===void 0&&(r=0),s===void 0&&(s=a.length),n===void 0&&(n=a),o(a,r,s)){var h=s-r,i=a.splice(r,h);if(e)for(var l=0;l<i.length;l++){var f=i[l];e.call(n,f)}return i}else return[]};v.exports=g},31856:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(19133),g=function(a,r,s){r===void 0&&(r=0),s===void 0&&(s=a.length);var e=r+Math.floor(Math.random()*s);return o(a,e)};v.exports=g},42169:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=t.indexOf(o),r=t.indexOf(g);return a!==-1&&r===-1?(t[a]=g,!0):!1};v.exports=E},86003:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=1);for(var g=null,a=0;a<o;a++)g=t.shift(),t.push(g);return g};v.exports=E},49498:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){o===void 0&&(o=1);for(var g=null,a=0;a<o;a++)g=t.pop(),t.unshift(g);return g};v.exports=E},82011:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){var r=t.length;if(o<0||o>r||o>=g||g>r){if(a)throw new Error("Range Error: Values outside acceptable range");return!1}else return!0};v.exports=E},89545:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){var g=t.indexOf(o);return g!==-1&&g>0&&(t.splice(g,1),t.unshift(o)),o};v.exports=E},17810:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82011),g=function(a,r,s,e,n){if(e===void 0&&(e=0),n===void 0&&(n=a.length),o(a,e,n))for(var h=e;h<n;h++){var i=a[h];i.hasOwnProperty(r)&&(i[r]=s)}return a};v.exports=g},33680:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){for(var o=t.length-1;o>0;o--){var g=Math.floor(Math.random()*(o+1)),a=t[o];t[o]=t[g],t[g]=a}return t};v.exports=E},90126:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o=/\D/g;return t.sort(function(g,a){return parseInt(g.replace(o,""),10)-parseInt(a.replace(o,""),10)}),t};v.exports=E},19133:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){if(!(o>=t.length)){for(var g=t.length-1,a=t[o],r=o;r<g;r++)t[r]=t[r+1];return t.length=g,a}};v.exports=E},19186:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @author       Angry Bytes (and contributors)
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(82264);function g(e,n){return String(e).localeCompare(n)}function a(e,n){var h=e.length;if(h<=1)return e;for(var i=new Array(h),l=1;l<h;l*=2){r(e,n,l,i);var f=e;e=i,i=f}return e}function r(e,n,h,i){var l=e.length,f=0,u=h*2,d,p,m,T,y;for(d=0;d<l;d+=u)for(p=d+h,m=p+h,p>l&&(p=l),m>l&&(m=l),T=d,y=p;;)if(T<p&&y<m)n(e[T],e[y])<=0?i[f++]=e[T++]:i[f++]=e[y++];else if(T<p)i[f++]=e[T++];else if(y<m)i[f++]=e[y++];else break}var s=function(e,n){if(n===void 0&&(n=g),!e||e.length<2)return e;if(o.features.stableSort)return e.sort(n);var h=a(e,n);return h!==e&&r(h,null,e.length,e),e};v.exports=s},25630:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(o===g)return t;var a=t.indexOf(o),r=t.indexOf(g);if(a<0||r<0)throw new Error("Supplied items must be elements of the same array");return t[a]=g,t[r]=o,t};v.exports=E},37105:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Matrix:t(54915),Add:t(71146),AddAt:t(51067),BringToTop:t(66905),CountAllMatching:t(21612),Each:t(95428),EachInRange:t(36914),FindClosestInSorted:t(81957),Flatten:t(43491),GetAll:t(46710),GetFirst:t(58731),GetRandom:t(26546),MoveDown:t(70864),MoveTo:t(69693),MoveUp:t(40853),MoveAbove:t(85835),MoveBelow:t(83371),NumberArray:t(20283),NumberArrayStep:t(593),QuickSelect:t(43886),Range:t(88492),Remove:t(72905),RemoveAt:t(60248),RemoveBetween:t(81409),RemoveRandomElement:t(31856),Replace:t(42169),RotateLeft:t(86003),RotateRight:t(49498),SafeRange:t(82011),SendToBack:t(89545),SetAll:t(17810),Shuffle:t(33680),SortByDigits:t(90126),SpliceOne:t(19133),StableSort:t(19186),Swap:t(25630)}},86922:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){if(!Array.isArray(t)||!Array.isArray(t[0]))return!1;for(var o=t[0].length,g=1;g<t.length;g++)if(t[g].length!==o)return!1;return!0};v.exports=E},63362:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41836),g=t(86922),a=function(r){var s="";if(!g(r))return s;for(var e=0;e<r.length;e++){for(var n=0;n<r[e].length;n++){var h=r[e][n].toString();h!=="undefined"?s+=o(h,2):s+="?",n<r[e].length-1&&(s+=" |")}if(e<r.length-1){s+=`
`;for(var i=0;i<r[e].length;i++)s+="---",i<r[e].length-1&&(s+="+");s+=`
`}}return s};v.exports=a},92598:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.reverse()};v.exports=E},21224:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){for(var o=0;o<t.length;o++)t[o].reverse();return t};v.exports=E},98717:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37829),g=function(a){return o(a,180)};v.exports=g},44657:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37829),g=function(a,r){r===void 0&&(r=1);for(var s=0;s<r;s++)a=o(a,90);return a};v.exports=g},37829:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(86922),g=t(2429),a=function(r,s){if(s===void 0&&(s=90),!o(r))return null;if(typeof s!="string"&&(s=(s%360+360)%360),s===90||s===-270||s==="rotateLeft")r=g(r),r.reverse();else if(s===-90||s===270||s==="rotateRight")r.reverse(),r=g(r);else if(Math.abs(s)===180||s==="rotate180"){for(var e=0;e<r.length;e++)r[e].reverse();r.reverse()}return r};v.exports=a},92632:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(37829),g=function(a,r){r===void 0&&(r=1);for(var s=0;s<r;s++)a=o(a,-90);return a};v.exports=g},69512:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(86003),g=t(49498),a=function(r,s,e){if(s===void 0&&(s=0),e===void 0&&(e=0),e!==0&&(e<0?o(r,Math.abs(e)):g(r,e)),s!==0)for(var n=0;n<r.length;n++){var h=r[n];s<0?o(h,Math.abs(s)):g(h,s)}return r};v.exports=a},2429:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){for(var o=t.length,g=t[0].length,a=new Array(g),r=0;r<g;r++){a[r]=new Array(o);for(var s=o-1;s>-1;s--)a[r][s]=t[s][r]}return a};v.exports=E},54915:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={CheckMatrix:t(86922),MatrixToString:t(63362),ReverseColumns:t(92598),ReverseRows:t(21224),Rotate180:t(98717),RotateLeft:t(44657),RotateMatrix:t(37829),RotateRight:t(92632),Translate:t(69512),TransposeMatrix:t(2429)}},71334:v=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(o,g){for(var a=new Uint8Array(o),r=a.length,s=g?"data:"+g+";base64,":"",e=0;e<r;e+=3)s+=E[a[e]>>2],s+=E[(a[e]&3)<<4|a[e+1]>>4],s+=E[(a[e+1]&15)<<2|a[e+2]>>6],s+=E[a[e+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s};v.exports=t},53134:v=>{/**
 * @author       Niklas von Hertzen (https://github.com/niklasvh/base64-arraybuffer)
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */for(var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=new Uint8Array(256),o=0;o<E.length;o++)t[E.charCodeAt(o)]=o;var g=function(a){a=a.substr(a.indexOf(",")+1);var r=a.length,s=r*.75,e=0,n,h,i,l;a[r-1]==="="&&(s--,a[r-2]==="="&&s--);for(var f=new ArrayBuffer(s),u=new Uint8Array(f),d=0;d<r;d+=4)n=t[a.charCodeAt(d)],h=t[a.charCodeAt(d+1)],i=t[a.charCodeAt(d+2)],l=t[a.charCodeAt(d+3)],u[e++]=n<<2|h>>4,u[e++]=(h&15)<<4|i>>2,u[e++]=(i&3)<<6|l&63;return f};v.exports=g},65839:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={ArrayBufferToBase64:t(71334),Base64ToArrayBuffer:t(53134)}},91799:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Array:t(37105),Base64:t(65839),Objects:t(1183),String:t(31749),NOOP:t(29747),NULL:t(20242)}},41786:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o={};for(var g in t)Array.isArray(t[g])?o[g]=t[g].slice(0):o[g]=t[g];return o};v.exports=E},62644:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){var o,g,a;if(typeof t!="object"||t===null)return t;o=Array.isArray(t)?[]:{};for(a in t)g=t[a],o[a]=E(g);return o};v.exports=E},79291:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41212),g=function(){var a,r,s,e,n,h,i=arguments[0]||{},l=1,f=arguments.length,u=!1;for(typeof i=="boolean"&&(u=i,i=arguments[1]||{},l=2),f===l&&(i=this,--l);l<f;l++)if((a=arguments[l])!=null)for(r in a)s=i[r],e=a[r],i!==e&&(u&&e&&(o(e)||(n=Array.isArray(e)))?(n?(n=!1,h=s&&Array.isArray(s)?s:[]):h=s&&o(s)?s:{},i[r]=g(u,h,e)):e!==void 0&&(i[r]=e));return i};v.exports=g},23568:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(75508),g=t(35154),a=function(r,s,e){var n=g(r,s,null);if(n===null)return e;if(Array.isArray(n))return o.RND.pick(n);if(typeof n=="object"){if(n.hasOwnProperty("randInt"))return o.RND.integerInRange(n.randInt[0],n.randInt[1]);if(n.hasOwnProperty("randFloat"))return o.RND.realInRange(n.randFloat[0],n.randFloat[1])}else if(typeof n=="function")return n(s);return n};v.exports=a},95540:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){var a=typeof t;return!t||a==="number"||a==="string"?g:t.hasOwnProperty(o)&&t[o]!==void 0?t[o]:g};v.exports=E},82840:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(35154),g=t(45319),a=function(r,s,e,n,h){h===void 0&&(h=e);var i=o(r,s,h);return g(i,e,n)};v.exports=a},35154:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){if(!t&&!a||typeof t=="number")return g;if(t&&t.hasOwnProperty(o))return t[o];if(a&&a.hasOwnProperty(o))return a[o];if(o.indexOf(".")!==-1){for(var r=o.split("."),s=t,e=a,n=g,h=g,i=!0,l=!0,f=0;f<r.length;f++)s&&s.hasOwnProperty(r[f])?(n=s[r[f]],s=s[r[f]]):i=!1,e&&e.hasOwnProperty(r[f])?(h=e[r[f]],e=e[r[f]]):l=!1;return i?n:l?h:g}else return g};v.exports=E},69036:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){for(var g=0;g<o.length;g++)if(!t.hasOwnProperty(o[g]))return!1;return!0};v.exports=E},1985:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){for(var g=0;g<o.length;g++)if(t.hasOwnProperty(o[g]))return!0;return!1};v.exports=E},97022:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.hasOwnProperty(o)};v.exports=E},41212:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){if(!t||typeof t!="object"||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0};v.exports=E},46975:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,r){var s=o(a);for(var e in r)s.hasOwnProperty(e)||(s[e]=r[e]);return s};v.exports=g},269:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(41786),g=function(a,r){var s=o(a);for(var e in r)s.hasOwnProperty(e)&&(s[e]=r[e]);return s};v.exports=g},18254:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var o=t(97022),g=function(a,r){for(var s={},e=0;e<r.length;e++){var n=r[e];o(a,n)&&(s[n]=a[n])}return s};v.exports=g},61622:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g){if(!t||typeof t=="number")return!1;if(t.hasOwnProperty(o))return t[o]=g,!0;if(o.indexOf(".")!==-1){for(var a=o.split("."),r=t,s=t,e=0;e<a.length;e++)if(r.hasOwnProperty(a[e]))s=r,r=r[a[e]];else return!1;return s[a[a.length-1]]=g,!0}return!1};v.exports=E},1183:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Clone:t(41786),DeepCopy:t(62644),Extend:t(79291),GetAdvancedValue:t(23568),GetFastValue:t(95540),GetMinMaxValue:t(82840),GetValue:t(35154),HasAll:t(69036),HasAny:t(1985),HasValue:t(97022),IsPlainObject:t(41212),Merge:t(46975),MergeRight:t(269),Pick:t(18254),SetValue:t(61622)}},27902:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return t.replace(/%([0-9]+)/g,function(g,a){return o[Number(a)-1]})};v.exports=E},41836:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o,g,a){o===void 0&&(o=0),g===void 0&&(g=" "),a===void 0&&(a=3),t=t.toString();var r=0;if(o+1>=t.length)switch(a){case 1:t=new Array(o+1-t.length).join(g)+t;break;case 3:var s=Math.ceil((r=o-t.length)/2),e=r-s;t=new Array(e+1).join(g)+t+new Array(s+1).join(g);break;default:t=t+new Array(o+1-t.length).join(g);break}return t};v.exports=E},33628:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t,o){return o===0?t.slice(1):t.slice(0,o-1)+t.slice(o)};v.exports=E},27671:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t.split("").reverse().join("")};v.exports=E},45650:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=Math.random()*16|0,g=t==="x"?o:o&3|8;return g.toString(16)})};v.exports=E},35355:v=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */var E=function(t){return t&&t[0].toUpperCase()+t.slice(1)};v.exports=E},31749:(v,E,t)=>{/**
 * @author       Richard Davey <rich@phaser.io>
 * @copyright    2013-2024 Phaser Studio Inc.
 * @license      {@link https://opensource.org/licenses/MIT|MIT License}
 */v.exports={Format:t(27902),Pad:t(41836),RemoveAt:t(33628),Reverse:t(27671),UppercaseFirst:t(35355),UUID:t(45650)}}},P={};function M(v){var E=P[v];if(E!==void 0)return E.exports;var t=P[v]={exports:{}};return x[v](t,t.exports,M),t.exports}M.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var D=M(85454);return D})())})(Nl);var jd=Nl.exports;const Ht=Jd(jd);class Zd extends Ht.Scene{constructor(){super({key:"Preloader"})}preload(){this.load.setPath("assets/"),this.load.image("volume-icon","ui/volume-icon.png"),this.load.image("volume-icon_off","ui/volume-icon_off.png"),this.load.audio("theme-song","audio/fat-caps-audionatix.mp3"),this.load.audio("whoosh","audio/whoosh.mp3"),this.load.audio("card-flip","audio/card-flip.mp3"),this.load.audio("card-match","audio/card-match.mp3"),this.load.audio("card-mismatch","audio/card-mismatch.mp3"),this.load.audio("card-slide","audio/card-slide.mp3"),this.load.audio("victory","audio/victory.mp3"),this.load.image("background"),this.load.image("card-back","cards/card-back.png"),this.load.image("card-0","cards/card-0.png"),this.load.image("card-1","cards/card-1.png"),this.load.image("card-2","cards/card-2.png"),this.load.image("card-3","cards/card-3.png"),this.load.image("card-4","cards/card-4.png"),this.load.image("card-5","cards/card-5.png"),this.load.image("heart","ui/heart.png")}create(){this.scene.start("Play")}}const et={CANVAS_WIDTH:1280,CANVAS_HEIGHT:720,BACKGROUND_COLOR:"#f8f8ff",MAX_LEVELS:10,INITIAL_LIVES:3,DEFAULT_LEVEL:1,DEFAULT_SCORE:0,HEALTH_FULL:1,HEALTH_WARNING:.5,HEALTH_CRITICAL:.25,CARD_WIDTH:60,CARD_HEIGHT:84,CARD_BORDER_WIDTH:3,CARD_BORDER_COLOR:13938487,CARD_SHADOW_OFFSET_X:4,CARD_SHADOW_OFFSET_Y:6,CARD_SHADOW_ALPHA:.18,MARGIN:12,SIDEBAR_WIDTH:170,DECK_WIDTH:120,INNER_PADDING:35,CARD_GAP:8,COLORS:{GREEN_FELT:2121776,WHITE:"#ffffff",BLACK:"#000000",PURPLE:"#8c7ae6",LIGHT_PURPLE:"#9c88ff",RED:"#ff0000",GREEN:3066993,YELLOW:15844367,RED_CRITICAL:15158332,GRAY:12303291,LIGHT_GRAY:10592673,BLUE:3447003,DARK_GRAY:"#333333",MEDIUM_GRAY:"#666666",LIGHT_PLACEHOLDER:15658734},ALPHA:{FELT:.35,HEALTH_BG:.15,HEALTH_FILL:.55,RESULT_BAR:.05,HAND_BAR:.05,SIDEBAR:.08,VOLUME_OFF:.5,CARD_SHADOW:.4,DRAGGING:.85},FONT:{TITLE_SIZE:40,OBJECTIVE_SIZE:20,CARD_SIZE:22,SCORE_SIZE:16,CAPTION_SIZE:12,HINT_SIZE:10,STROKE_THICKNESS:4,STROKE_COLOR:"#000000",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:2,SHADOW_BLUR:2},ANIMATION:{FADE_DURATION:500,TWEEN_DURATION:800,BOUNCE_EASING:"Bounce.InOut"},AUDIO:{THEME_VOLUME:.5,SFX_VOLUME:1.3,WHOOSH_VOLUME:1.3},DRAG:{DISTANCE_THRESHOLD:8,DEPTH:100},HAND_SLOTS:8,RESULT_SLOTS:6,LAYOUT:{SCORE_TITLE_Y_OFFSET:14,CURRENT_SCORE_Y_OFFSET:34,CURRENT_SCORE_HEIGHT:44,CALC_TEXT_Y_OFFSET:20,CUMULATED_Y_OFFSET:100,CUMULATED_HEIGHT:80,HEALTH_BAR_HEIGHT:22,HEALTH_BAR_GAMES_COUNTER_WIDTH:110,HEALTH_HINT_Y_OFFSET:12,GAMES_COUNTER_WIDTH:92,GAMES_COUNTER_HEIGHT:30,OBJECTIVE_Y_OFFSET:70,OBJECTIVE_WIDTH:120,OBJECTIVE_HEIGHT:36,OBJECTIVE_CAPTION_Y_OFFSET:6,RESULT_BAR_X_OFFSET:40,RESULT_BAR_WIDTH_OFFSET:80,RESULT_BAR_HEIGHT:110,RESULT_BAR_Y_OFFSET:50,HAND_BAR_X_OFFSET:20,HAND_BAR_WIDTH_OFFSET:40,HAND_BAR_HEIGHT:110,HAND_BAR_Y_OFFSET:150,HAND_CAPTION_Y_OFFSET:25,HEALTH_BAR_INSET:2,HEALTH_BAR_BORDER:4,CALC_TEXT_X_OFFSET:16,CALC_TEXT_WIDTH_OFFSET:32,TEST_LABEL_X_OFFSET:100,TEST_LABEL_Y_OFFSET:75,RESULT_EQUALS_X_OFFSET:8,RESULT_EQUALS_Y_OFFSET:40,RESULT_EQUALS_FONT_SIZE:30,DEFAULT_GAME_TEXT:"1 / 10",DEFAULT_OBJECTIVE_TEXT:"> 17",DEFAULT_ALPHA:.8,HEALTH_BAR_CALC_OFFSET:4},CARD_VALUES:{MIN_NUMBER:0,MAX_NUMBER:9,OPERATORS:["+","-","*","/","^"]},OBJECTIVE:{MIN_COMPARISON_VALUE:1,MAX_COMPARISON_VALUE:100,MIN_DIVISOR:3,MAX_DIVISOR:10,MIN_POWER:2,MAX_POWER:5,MIN_FACTOR:10,MAX_FACTOR:100}},nh=["Greater than","Less than","Equal to","Divisible by","Power of","Prime number","Odd number","Even number","Factor of"],kd=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97],Bl=(A,c,x,P,M,D={})=>{const v=A.add.rectangle(c,x,P,M,D.fill??et.COLORS.GREEN_FELT,D.alpha??et.ALPHA.FELT).setOrigin(0,0);return v.setStrokeStyle(D.strokeWidth??2,D.strokeColor??16777215,.7),v},qd=(A,c,x,P,M,D,v={})=>{const E=A.add.container(c,x),t=Bl(A,0,0,P,M,{fill:v.fill??et.COLORS.GREEN_FELT,alpha:v.alpha??et.ALPHA.FELT}),o=A.add.text(P/2,M/2,D,{fontSize:v.fontSize??et.FONT.SCORE_SIZE,color:v.color??et.COLORS.WHITE,fontStyle:v.fontStyle??"bold",align:v.align??"center",backgroundColor:v.bg??void 0,stroke:et.FONT.STROKE_COLOR,strokeThickness:2,shadow:{offsetX:et.FONT.SHADOW_OFFSET_X,offsetY:et.FONT.SHADOW_OFFSET_Y,color:et.COLORS.BLACK,blur:et.FONT.SHADOW_BLUR,fill:!0}}).setOrigin(.5);return E.add([t,o]),{group:E,box:t,text:o}},Kr=(A,c,x,P,M={})=>A.add.text(c,x,P,{align:"center",strokeThickness:et.FONT.STROKE_THICKNESS,fontSize:M.fontSize??et.FONT.TITLE_SIZE,fontStyle:"bold",color:M.color??et.COLORS.PURPLE}).setOrigin(.5),_d=(A,c,x,P,M)=>{const D=Kr(A,c,x,P);return D.setDepth(3).setInteractive(),A.add.tween({targets:D,duration:et.ANIMATION.TWEEN_DURATION,ease:v=>v>.8,alpha:0,repeat:-1,yoyo:!0}),D.on(Ht.Input.Events.POINTER_OVER,()=>{D.setColor(et.COLORS.LIGHT_PURPLE),A.input.setDefaultCursor("pointer")}),D.on(Ht.Input.Events.POINTER_OUT,()=>{D.setColor(et.COLORS.PURPLE),A.input.setDefaultCursor("default")}),D.on(Ht.Input.Events.POINTER_DOWN,()=>{A.sound.play("whoosh",{volume:et.AUDIO.WHOOSH_VOLUME}),A.add.tween({targets:D,ease:Ht.Math.Easing[et.ANIMATION.BOUNCE_EASING],y:-1e3,onComplete:M})}),D},tc=A=>{const c=A.add.image(25,25,"volume-icon").setName("volume-icon");return c.setInteractive(),c.on(Ht.Input.Events.POINTER_OVER,()=>{A.input.setDefaultCursor("pointer")}),c.on(Ht.Input.Events.POINTER_OUT,()=>{A.input.setDefaultCursor("default")}),c.on(Ht.Input.Events.POINTER_DOWN,()=>{A.sound.volume===0?(A.sound.setVolume(1),c.setTexture("volume-icon"),c.setAlpha(1)):(A.sound.setVolume(0),c.setTexture("volume-icon_off"),c.setAlpha(et.ALPHA.VOLUME_OFF))}),c},ec=(A,c,x,P,M,D="",v={})=>{const{draggable:E=!1}=v,t=A.add.container(c,x),o=A.add.rectangle(et.CARD_SHADOW_OFFSET_X,et.CARD_SHADOW_OFFSET_Y,P,M,0,et.CARD_SHADOW_ALPHA).setOrigin(0,0),g=A.add.rectangle(0,0,P,M,v.fill??16777215,v.alpha??1).setOrigin(0,0);g.setStrokeStyle(et.CARD_BORDER_WIDTH,et.CARD_BORDER_COLOR,1);const a=A.add.text(P/2,M/2,D,{fontSize:v.fontSize??et.FONT.CARD_SIZE,color:v.color??et.COLORS.BLACK,fontStyle:v.fontStyle??"bold",stroke:et.FONT.STROKE_COLOR,strokeThickness:2,shadow:{offsetX:et.FONT.SHADOW_OFFSET_X,offsetY:et.FONT.SHADOW_OFFSET_Y,color:et.COLORS.BLACK,blur:et.FONT.SHADOW_BLUR,fill:!0}}).setOrigin(.5);return t.add([o,g,a]),t.shadow=o,t.slot=null,E&&(t.setSize(P,M),t.setInteractive(new Ht.Geom.Rectangle(P/2,M/2,P,M),Ht.Geom.Rectangle.Contains),A.input.setDraggable(t)),t},ic=()=>{const A=nh[Phaser.Math.Between(0,nh.length-1)];let c="";switch(A){case"Greater than":case"Less than":case"Equal to":{const x=Phaser.Math.Between(et.OBJECTIVE.MIN_COMPARISON_VALUE,et.OBJECTIVE.MAX_COMPARISON_VALUE);c=`${A} ${x}`;break}case"Factor of":{const x=nc();c=`${A} ${x}`;break}case"Divisible by":{const x=Phaser.Math.Between(et.OBJECTIVE.MIN_DIVISOR,et.OBJECTIVE.MAX_DIVISOR);c=`${A} ${x}`;break}case"Power of":{const x=Phaser.Math.Between(et.OBJECTIVE.MIN_POWER,et.OBJECTIVE.MAX_POWER);c=`${A} ${x}`;break}case"Prime number":case"Odd number":case"Even number":c=A}return c},nc=()=>{let A=Phaser.Math.Between(et.OBJECTIVE.MIN_FACTOR,et.OBJECTIVE.MAX_FACTOR);for(;kd.includes(A);)A=Phaser.Math.Between(et.OBJECTIVE.MIN_FACTOR,et.OBJECTIVE.MAX_FACTOR);return A};class sc{constructor(){this.lives=et.INITIAL_LIVES,this.score=et.DEFAULT_SCORE,this.currentLevel=et.DEFAULT_LEVEL,this.currentObjective="",this.isGameActive=!1,this.isGameWon=!1,this.isGameOver=!1,this.handCards=[],this.resultCards=[],this.availableCards=[],this.gamesPlayed=1,this.maxGames=et.MAX_LEVELS,this.initializeGame()}initializeGame(){this.currentObjective=this.generateObjective(),this.isGameActive=!0,this.isGameWon=!1,this.isGameOver=!1}generateObjective(){return ic()}setObjective(c){this.currentObjective=c,this.emitGameEvent("objectiveChanged",c)}generateNewObjective(){const c=this.generateObjective();return this.setObjective(c),c}updateScore(c){this.score+=c,this.emitGameEvent("scoreChanged",this.score)}setScore(c){this.score=c,this.emitGameEvent("scoreChanged",this.score)}updateLives(c){this.lives=Math.max(0,Math.min(et.INITIAL_LIVES,this.lives+c)),this.emitGameEvent("livesChanged",this.lives),this.lives<=0&&this.gameOver()}setLives(c){this.lives=Math.max(0,Math.min(et.INITIAL_LIVES,c)),this.emitGameEvent("livesChanged",this.lives),this.lives<=0&&this.gameOver()}getHealthRatio(){return this.lives/et.INITIAL_LIVES}setGamesProgress(c,x){this.gamesPlayed=c,this.maxGames=x,this.emitGameEvent("gamesProgressChanged",{current:c,total:x})}gameWin(){this.isGameWon=!0,this.isGameActive=!1,this.emitGameEvent("gameWon",{score:this.score,level:this.currentLevel})}gameOver(){this.isGameOver=!0,this.isGameActive=!1,this.emitGameEvent("gameOver",{score:this.score,level:this.currentLevel})}startNewGame(){this.initializeGame(),this.emitGameEvent("gameStarted")}restartGame(){this.lives=et.INITIAL_LIVES,this.score=et.DEFAULT_SCORE,this.currentLevel=et.DEFAULT_LEVEL,this.gamesPlayed=1,this.startNewGame()}setHandCards(c){this.handCards=[...c],this.emitGameEvent("handCardsChanged",this.handCards)}setResultCards(c){this.resultCards=[...c],this.emitGameEvent("resultCardsChanged",this.resultCards)}getGameStatus(){return{lives:this.lives,score:this.score,currentLevel:this.currentLevel,currentObjective:this.currentObjective,gamesPlayed:this.gamesPlayed,maxGames:this.maxGames,isGameActive:this.isGameActive,isGameWon:this.isGameWon,isGameOver:this.isGameOver,healthRatio:this.getHealthRatio()}}emitGameEvent(c,x=null){typeof window<"u"&&window.game&&window.game.events.emit(`game:${c}`,x)}onGameEvent(c,x){typeof window<"u"&&window.game&&window.game.events.on(`game:${c}`,x)}offGameEvent(c,x){typeof window<"u"&&window.game&&window.game.events.off(`game:${c}`,x)}}class pi{constructor(){this.scene=null,this.gameState=new sc}static getInstance(){return pi.instance||(pi.instance=new pi),pi.instance}initialize(c){this.scene=c,this.setupGameEventListeners(),this.gameState.initializeGame()}getGameState(){return this.gameState}generateObjective(){return this.gameState.generateObjective()}setObjective(c){this.gameState.setObjective(c)}getCurrentObjective(){return this.gameState.currentObjective}updateScore(c){this.gameState.updateScore(c)}getCurrentScore(){return this.gameState.score}updateLives(c){this.gameState.updateLives(c)}getCurrentLives(){return this.gameState.lives}getHealthRatio(){return this.gameState.getHealthRatio()}startNewGame(){this.gameState.startNewGame()}restartGame(){this.gameState.restartGame()}getGameStatus(){return this.gameState.getGameStatus()}setupGameEventListeners(){this.gameState.onGameEvent("scoreChanged",c=>{var x,P;if((x=this.scene)!=null&&x.scene.isActive("GameUI")){const M=this.scene.scene.get("GameUI");(P=M.setScore)==null||P.call(M,c)}}),this.gameState.onGameEvent("livesChanged",c=>{var x,P;if((x=this.scene)!=null&&x.scene.isActive("GameUI")){const M=this.gameState.getHealthRatio(),D=this.scene.scene.get("GameUI");(P=D.setHealth)==null||P.call(D,M)}}),this.gameState.onGameEvent("objectiveChanged",c=>{var x,P;if((x=this.scene)!=null&&x.scene.isActive("GameUI")){const M=this.scene.scene.get("GameUI");(P=M.setObjective)==null||P.call(M,c)}}),this.gameState.onGameEvent("gameWon",c=>{var x;(x=this.scene)!=null&&x.scene.isActive("Play")&&this.showGameWon()}),this.gameState.onGameEvent("gameOver",c=>{var x;(x=this.scene)!=null&&x.scene.isActive("Play")&&this.showGameOver()})}showGameWon(){if(this.scene){const c=this.scene.children.getByName("winnerText");c&&(c.setPosition(this.scene.sys.game.scale.width/2,this.scene.sys.game.scale.height/2),c.setInteractive(),c.on("pointerdown",()=>{this.restartGame()}))}}showGameOver(){if(this.scene){const c=this.scene.children.getByName("gameOverText");c&&(c.setPosition(this.scene.sys.game.scale.width/2,this.scene.sys.game.scale.height/2),c.setInteractive(),c.on("pointerdown",()=>{this.restartGame()}))}}}class rc extends Ht.Scene{constructor(){super({key:"Play"})}init(){this.gameManager=pi.getInstance(),this.gameManager.initialize(this),this.cameras.main.fadeIn(et.ANIMATION.FADE_DURATION),this.createVolumeButton()}create(){_d(this,this.sys.game.scale.width/2,this.sys.game.scale.height/2,`Maths Card Game
Click to Play`,()=>{this.sound.get("theme-song")||this.sound.play("theme-song",{loop:!0,volume:et.AUDIO.THEME_VOLUME}),this.startGame()})}restartGame(){this.gameManager.restartGame()}createVolumeButton(){return tc(this)}startGame(){this.scene.launch("GameUI"),Kr(this,this.sys.game.scale.width/2,-1e3,"YOU WIN",{fontSize:et.FONT.TITLE_SIZE,color:et.COLORS.PURPLE}).setName("winnerText").setDepth(3).setInteractive(),Kr(this,this.sys.game.scale.width/2,-1e3,`GAME OVER
Click to restart`,{fontSize:et.FONT.TITLE_SIZE,color:et.COLORS.RED}).setName("gameOverText").setDepth(3).setInteractive()}}const sh=(A,c,x,P,M,D={})=>{const v=A.add.container(c,x),E=A.add.rectangle(0,0,P,M,D.fill??et.COLORS.GRAY,D.alpha??.3).setOrigin(0,0).setStrokeStyle(et.CARD_BORDER_WIDTH,et.COLORS.LIGHT_GRAY).setInteractive();return v.add(E),v.card=null,v.setCard=t=>{t.slot&&t.slot!==v&&(t.slot.card=null),v.card&&v.card!==t&&(v.card.slot=null),v.card=t,t.slot=v,t.setPosition(v.x-v.width/2,v.y)},v.isPointerOver=t=>E.getBounds().contains(t.x,t.y),v};class Lr{static calculateHandSlotPositions(c,x,P){const M=et.INNER_PADDING,D=et.CARD_WIDTH,v=et.CARD_HEIGHT,E=c-M*2,t=Math.max(et.CARD_GAP,(E-P*D)/(P+1)),o=[];let g=M+t;const a=(x-v)/2;for(let r=0;r<P;r++)o.push({x:g,y:a}),g+=D+t;return{positions:o,cardWidth:D,cardHeight:v,gap:t}}static calculateResultSlotPositions(c,x,P){return this.calculateHandSlotPositions(c,x,P)}static calculateMainAreaDimensions(c,x){const P=et.MARGIN,M=et.SIDEBAR_WIDTH,D=et.DECK_WIDTH;return{mainWidth:c-M-D-P*4,mainX:M+P*2,sidebarWidth:M,deckWidth:D,margin:P}}static calculateHealthBarLayout(c,x,P){return{backgroundX:c,backgroundY:x,backgroundWidth:P-et.LAYOUT.HEALTH_BAR_GAMES_COUNTER_WIDTH,backgroundHeight:et.LAYOUT.HEALTH_BAR_HEIGHT,fillX:c+et.LAYOUT.HEALTH_BAR_INSET,fillY:x+et.LAYOUT.HEALTH_BAR_INSET,fillWidth:P-et.LAYOUT.HEALTH_BAR_GAMES_COUNTER_WIDTH-et.LAYOUT.HEALTH_BAR_BORDER,fillHeight:et.LAYOUT.HEALTH_BAR_HEIGHT-et.LAYOUT.HEALTH_BAR_BORDER}}static calculateGamesCounterLayout(c,x,P){return{x:c+P-et.LAYOUT.GAMES_COUNTER_WIDTH,y:x,width:et.LAYOUT.GAMES_COUNTER_WIDTH,height:et.LAYOUT.GAMES_COUNTER_HEIGHT}}static calculateObjectiveLayout(c,x,P){return{x:c+P/2-et.LAYOUT.OBJECTIVE_WIDTH/2,y:x+et.LAYOUT.OBJECTIVE_Y_OFFSET,width:et.LAYOUT.OBJECTIVE_WIDTH,height:et.LAYOUT.OBJECTIVE_HEIGHT,captionX:c+P/2,captionY:x+et.LAYOUT.OBJECTIVE_Y_OFFSET-et.LAYOUT.OBJECTIVE_CAPTION_Y_OFFSET}}static calculateResultBarLayout(c,x,P){return{x:c+et.LAYOUT.RESULT_BAR_X_OFFSET,y:x+et.LAYOUT.RESULT_BAR_Y_OFFSET,width:P-et.LAYOUT.RESULT_BAR_WIDTH_OFFSET,height:et.LAYOUT.RESULT_BAR_HEIGHT,equalsX:c+et.LAYOUT.RESULT_BAR_X_OFFSET+(P-et.LAYOUT.RESULT_BAR_WIDTH_OFFSET)+et.LAYOUT.RESULT_EQUALS_X_OFFSET,equalsY:x+et.LAYOUT.RESULT_BAR_Y_OFFSET+et.LAYOUT.RESULT_EQUALS_Y_OFFSET}}static calculateHandBarLayout(c,x,P){return{x:c+et.LAYOUT.HAND_BAR_X_OFFSET,y:x+et.LAYOUT.HAND_BAR_Y_OFFSET,width:P-et.LAYOUT.HAND_BAR_WIDTH_OFFSET,height:et.LAYOUT.HAND_BAR_HEIGHT,captionX:c+et.LAYOUT.HAND_BAR_X_OFFSET+(P-et.LAYOUT.HAND_BAR_WIDTH_OFFSET)/2,captionY:x+et.LAYOUT.HAND_BAR_Y_OFFSET+et.LAYOUT.HAND_BAR_HEIGHT+et.LAYOUT.HAND_CAPTION_Y_OFFSET}}static calculateSidebarLayout(c,x){const P=et.MARGIN,M=et.SIDEBAR_WIDTH;return{x:P,y:P,width:M,height:x-P*2,scoreTitleX:P+M/2,scoreTitleY:P+et.LAYOUT.SCORE_TITLE_Y_OFFSET,currentScoreX:P+et.INNER_PADDING,currentScoreY:P+et.LAYOUT.CURRENT_SCORE_Y_OFFSET,currentScoreWidth:M-et.INNER_PADDING*2,currentScoreHeight:et.LAYOUT.CURRENT_SCORE_HEIGHT,calcTextX:P+et.LAYOUT.CALC_TEXT_X_OFFSET,calcTextY:P+et.LAYOUT.CURRENT_SCORE_Y_OFFSET+et.LAYOUT.CURRENT_SCORE_HEIGHT+et.LAYOUT.CALC_TEXT_Y_OFFSET,cumulatedX:P+et.INNER_PADDING+20,cumulatedY:x-P-et.LAYOUT.CUMULATED_Y_OFFSET,cumulatedWidth:M-et.INNER_PADDING*2,cumulatedHeight:et.LAYOUT.CUMULATED_HEIGHT}}static calculateTestSectionLayout(c,x,P){return{x:c+P/2+et.LAYOUT.TEST_LABEL_X_OFFSET,y:x+et.LAYOUT.TEST_LABEL_Y_OFFSET}}static calculateCompleteLayout(c,x){const P=this.calculateMainAreaDimensions(c,x),M=this.calculateSidebarLayout(c,x),D=this.calculateHealthBarLayout(P.mainX,P.margin,P.mainWidth),v=this.calculateGamesCounterLayout(P.mainX,P.margin,P.mainWidth),E=this.calculateObjectiveLayout(P.mainX,P.margin,P.mainWidth),t=this.calculateResultBarLayout(P.mainX,E.y,P.mainWidth),o=this.calculateHandBarLayout(P.mainX,t.y,P.mainWidth),g=this.calculateTestSectionLayout(P.mainX,P.margin,P.mainWidth);return{mainArea:P,sidebar:M,healthBar:D,gamesCounter:v,objective:E,resultBar:t,handBar:o,testSection:g}}}class rh{static createStandardCard(c,x,P,M,D=!0){return ec(c,x,P,et.CARD_WIDTH,et.CARD_HEIGHT,M,{draggable:D,fontSize:et.FONT.CARD_SIZE,color:et.COLORS.BLACK})}static createPlaceholderCard(c,x,P){const M=this.createStandardCard(c,x,P,"",!0);return M.list[1].fillColor=et.COLORS.LIGHT_PLACEHOLDER,M.list[2].setText(""),M}static setCardAsPlaceholder(c){c.list[1].fillColor=et.COLORS.LIGHT_PLACEHOLDER,c.list[2].setText("")}static setCardWithContent(c,x){c.list[1].fillColor=16777215,c.list[2].setText(x)}static createCardsFromArray(c,x,P,M=!0){return P.map((D,v)=>{const E=x[v];return this.createStandardCard(c,E.x,E.y,D,M)})}static updateCardsInSlots(c,x,P){for(let M=0;M<x.length;M++){const D=x[M],v=(P[M]??"").toString(),E=P.length===0,t=this.createStandardCard(c,0,0,v,!0);E?this.setCardAsPlaceholder(t):this.setCardWithContent(t,v),D.setCard(t)}}}var ah={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=function(A){const c=[];let x=0;for(let P=0;P<A.length;P++){let M=A.charCodeAt(P);M<128?c[x++]=M:M<2048?(c[x++]=M>>6|192,c[x++]=M&63|128):(M&64512)===55296&&P+1<A.length&&(A.charCodeAt(P+1)&64512)===56320?(M=65536+((M&1023)<<10)+(A.charCodeAt(++P)&1023),c[x++]=M>>18|240,c[x++]=M>>12&63|128,c[x++]=M>>6&63|128,c[x++]=M&63|128):(c[x++]=M>>12|224,c[x++]=M>>6&63|128,c[x++]=M&63|128)}return c},ac=function(A){const c=[];let x=0,P=0;for(;x<A.length;){const M=A[x++];if(M<128)c[P++]=String.fromCharCode(M);else if(M>191&&M<224){const D=A[x++];c[P++]=String.fromCharCode((M&31)<<6|D&63)}else if(M>239&&M<365){const D=A[x++],v=A[x++],E=A[x++],t=((M&7)<<18|(D&63)<<12|(v&63)<<6|E&63)-65536;c[P++]=String.fromCharCode(55296+(t>>10)),c[P++]=String.fromCharCode(56320+(t&1023))}else{const D=A[x++],v=A[x++];c[P++]=String.fromCharCode((M&15)<<12|(D&63)<<6|v&63)}}return c.join("")},Gl={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(A,c){if(!Array.isArray(A))throw Error("encodeByteArray takes an array as a parameter");this.init_();const x=c?this.byteToCharMapWebSafe_:this.byteToCharMap_,P=[];for(let M=0;M<A.length;M+=3){const D=A[M],v=M+1<A.length,E=v?A[M+1]:0,t=M+2<A.length,o=t?A[M+2]:0,g=D>>2,a=(D&3)<<4|E>>4;let r=(E&15)<<2|o>>6,s=o&63;t||(s=64,v||(r=64)),P.push(x[g],x[a],x[r],x[s])}return P.join("")},encodeString(A,c){return this.HAS_NATIVE_SUPPORT&&!c?btoa(A):this.encodeByteArray(Vl(A),c)},decodeString(A,c){return this.HAS_NATIVE_SUPPORT&&!c?atob(A):ac(this.decodeStringToByteArray(A,c))},decodeStringToByteArray(A,c){this.init_();const x=c?this.charToByteMapWebSafe_:this.charToByteMap_,P=[];for(let M=0;M<A.length;){const D=x[A.charAt(M++)],E=M<A.length?x[A.charAt(M)]:0;++M;const o=M<A.length?x[A.charAt(M)]:64;++M;const a=M<A.length?x[A.charAt(M)]:64;if(++M,D==null||E==null||o==null||a==null)throw new oc;const r=D<<2|E>>4;if(P.push(r),o!==64){const s=E<<4&240|o>>2;if(P.push(s),a!==64){const e=o<<6&192|a;P.push(e)}}}return P},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let A=0;A<this.ENCODED_VALS.length;A++)this.byteToCharMap_[A]=this.ENCODED_VALS.charAt(A),this.charToByteMap_[this.byteToCharMap_[A]]=A,this.byteToCharMapWebSafe_[A]=this.ENCODED_VALS_WEBSAFE.charAt(A),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[A]]=A,A>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(A)]=A,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(A)]=A)}}};class oc extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hc=function(A){const c=Vl(A);return Gl.encodeByteArray(c,!0)},Fs=function(A){return hc(A).replace(/\./g,"")},Ul=function(A){try{return Gl.decodeString(A,!0)}catch(c){console.error("base64Decode failed: ",c)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uc=()=>lc().__FIREBASE_DEFAULTS__,fc=()=>{if(typeof process>"u"||typeof ah>"u")return;const A=ah.__FIREBASE_DEFAULTS__;if(A)return JSON.parse(A)},dc=()=>{if(typeof document>"u")return;let A;try{A=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const c=A&&Ul(A[1]);return c&&JSON.parse(c)},Zs=()=>{try{return uc()||fc()||dc()}catch(A){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${A}`);return}},bl=A=>{var c,x;return(x=(c=Zs())===null||c===void 0?void 0:c.emulatorHosts)===null||x===void 0?void 0:x[A]},cc=A=>{const c=bl(A);if(!c)return;const x=c.lastIndexOf(":");if(x<=0||x+1===c.length)throw new Error(`Invalid host ${c} with no separate hostname and port!`);const P=parseInt(c.substring(x+1),10);return c[0]==="["?[c.substring(1,x-1),P]:[c.substring(0,x),P]},zl=()=>{var A;return(A=Zs())===null||A===void 0?void 0:A.config},Xl=A=>{var c;return(c=Zs())===null||c===void 0?void 0:c[`_${A}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((c,x)=>{this.resolve=c,this.reject=x})}wrapCallback(c){return(x,P)=>{x?this.reject(x):this.resolve(P),typeof c=="function"&&(this.promise.catch(()=>{}),c.length===1?c(x):c(x,P))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(A,c){if(A.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const x={alg:"none",type:"JWT"},P=c||"demo-project",M=A.iat||0,D=A.sub||A.user_id;if(!D)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const v=Object.assign({iss:`https://securetoken.google.com/${P}`,aud:P,iat:M,exp:M+3600,auth_time:M,sub:D,user_id:D,firebase:{sign_in_provider:"custom",identities:{}}},A);return[Fs(JSON.stringify(x)),Fs(JSON.stringify(v)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function mc(){var A;const c=(A=Zs())===null||A===void 0?void 0:A.forceEnvironment;if(c==="node")return!0;if(c==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xc(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Wl(){const A=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof A=="object"&&A.id!==void 0}function yc(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Tc(){const A=le();return A.indexOf("MSIE ")>=0||A.indexOf("Trident/")>=0}function Ec(){return!mc()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yl(){try{return typeof indexedDB=="object"}catch{return!1}}function Hl(){return new Promise((A,c)=>{try{let x=!0;const P="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(P);M.onsuccess=()=>{M.result.close(),x||self.indexedDB.deleteDatabase(P),A(!0)},M.onupgradeneeded=()=>{x=!1},M.onerror=()=>{var D;c(((D=M.error)===null||D===void 0?void 0:D.message)||"")}}catch(x){c(x)}})}function Sc(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="FirebaseError";class Ae extends Error{constructor(c,x,P){super(x),this.code=c,this.customData=P,this.name=Cc,Object.setPrototypeOf(this,Ae.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mi.prototype.create)}}class Mi{constructor(c,x,P){this.service=c,this.serviceName=x,this.errors=P}create(c,...x){const P=x[0]||{},M=`${this.service}/${c}`,D=this.errors[c],v=D?Ac(D,P):"Error",E=`${this.serviceName}: ${v} (${M}).`;return new Ae(M,E,P)}}function Ac(A,c){return A.replace(Pc,(x,P)=>{const M=c[P];return M!=null?String(M):`<${P}?>`})}const Pc=/\{\$([^}]+)}/g;function Rc(A){for(const c in A)if(Object.prototype.hasOwnProperty.call(A,c))return!1;return!0}function Bn(A,c){if(A===c)return!0;const x=Object.keys(A),P=Object.keys(c);for(const M of x){if(!P.includes(M))return!1;const D=A[M],v=c[M];if(oh(D)&&oh(v)){if(!Bn(D,v))return!1}else if(D!==v)return!1}for(const M of P)if(!x.includes(M))return!1;return!0}function oh(A){return A!==null&&typeof A=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(A){const c=[];for(const[x,P]of Object.entries(A))Array.isArray(P)?P.forEach(M=>{c.push(encodeURIComponent(x)+"="+encodeURIComponent(M))}):c.push(encodeURIComponent(x)+"="+encodeURIComponent(P));return c.length?"&"+c.join("&"):""}function Cn(A){const c={};return A.replace(/^\?/,"").split("&").forEach(P=>{if(P){const[M,D]=P.split("=");c[decodeURIComponent(M)]=decodeURIComponent(D)}}),c}function An(A){const c=A.indexOf("?");if(!c)return"";const x=A.indexOf("#",c);return A.substring(c,x>0?x:void 0)}function Ic(A,c){const x=new Mc(A,c);return x.subscribe.bind(x)}class Mc{constructor(c,x){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=x,this.task.then(()=>{c(this)}).catch(P=>{this.error(P)})}next(c){this.forEachObserver(x=>{x.next(c)})}error(c){this.forEachObserver(x=>{x.error(c)}),this.close(c)}complete(){this.forEachObserver(c=>{c.complete()}),this.close()}subscribe(c,x,P){let M;if(c===void 0&&x===void 0&&P===void 0)throw new Error("Missing Observer.");wc(c,["next","error","complete"])?M=c:M={next:c,error:x,complete:P},M.next===void 0&&(M.next=Or),M.error===void 0&&(M.error=Or),M.complete===void 0&&(M.complete=Or);const D=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),D}unsubscribeOne(c){this.observers===void 0||this.observers[c]===void 0||(delete this.observers[c],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(c){if(!this.finalized)for(let x=0;x<this.observers.length;x++)this.sendOne(x,c)}sendOne(c,x){this.task.then(()=>{if(this.observers!==void 0&&this.observers[c]!==void 0)try{x(this.observers[c])}catch(P){typeof console<"u"&&console.error&&console.error(P)}})}close(c){this.finalized||(this.finalized=!0,c!==void 0&&(this.finalError=c),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wc(A,c){if(typeof A!="object"||A===null)return!1;for(const x of c)if(x in A&&typeof A[x]=="function")return!0;return!1}function Or(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lc=1e3,Oc=2,Fc=4*60*60*1e3,Dc=.5;function hh(A,c=Lc,x=Oc){const P=c*Math.pow(x,A),M=Math.round(Dc*P*(Math.random()-.5)*2);return Math.min(Fc,P+M)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(A){return A&&A._delegate?A._delegate:A}class Ee{constructor(c,x,P){this.name=c,this.instanceFactory=x,this.type=P,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(c){return this.instantiationMode=c,this}setMultipleInstances(c){return this.multipleInstances=c,this}setServiceProps(c){return this.serviceProps=c,this}setInstanceCreatedCallback(c){return this.onInstanceCreated=c,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(c,x){this.name=c,this.container=x,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(c){const x=this.normalizeInstanceIdentifier(c);if(!this.instancesDeferred.has(x)){const P=new vc;if(this.instancesDeferred.set(x,P),this.isInitialized(x)||this.shouldAutoInitialize())try{const M=this.getOrInitializeService({instanceIdentifier:x});M&&P.resolve(M)}catch{}}return this.instancesDeferred.get(x).promise}getImmediate(c){var x;const P=this.normalizeInstanceIdentifier(c==null?void 0:c.identifier),M=(x=c==null?void 0:c.optional)!==null&&x!==void 0?x:!1;if(this.isInitialized(P)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:P})}catch(D){if(M)return null;throw D}else{if(M)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(c){if(c.name!==this.name)throw Error(`Mismatching Component ${c.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=c,!!this.shouldAutoInitialize()){if(Vc(c))try{this.getOrInitializeService({instanceIdentifier:vi})}catch{}for(const[x,P]of this.instancesDeferred.entries()){const M=this.normalizeInstanceIdentifier(x);try{const D=this.getOrInitializeService({instanceIdentifier:M});P.resolve(D)}catch{}}}}clearInstance(c=vi){this.instancesDeferred.delete(c),this.instancesOptions.delete(c),this.instances.delete(c)}async delete(){const c=Array.from(this.instances.values());await Promise.all([...c.filter(x=>"INTERNAL"in x).map(x=>x.INTERNAL.delete()),...c.filter(x=>"_delete"in x).map(x=>x._delete())])}isComponentSet(){return this.component!=null}isInitialized(c=vi){return this.instances.has(c)}getOptions(c=vi){return this.instancesOptions.get(c)||{}}initialize(c={}){const{options:x={}}=c,P=this.normalizeInstanceIdentifier(c.instanceIdentifier);if(this.isInitialized(P))throw Error(`${this.name}(${P}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const M=this.getOrInitializeService({instanceIdentifier:P,options:x});for(const[D,v]of this.instancesDeferred.entries()){const E=this.normalizeInstanceIdentifier(D);P===E&&v.resolve(M)}return M}onInit(c,x){var P;const M=this.normalizeInstanceIdentifier(x),D=(P=this.onInitCallbacks.get(M))!==null&&P!==void 0?P:new Set;D.add(c),this.onInitCallbacks.set(M,D);const v=this.instances.get(M);return v&&c(v,M),()=>{D.delete(c)}}invokeOnInitCallbacks(c,x){const P=this.onInitCallbacks.get(x);if(P)for(const M of P)try{M(c,x)}catch{}}getOrInitializeService({instanceIdentifier:c,options:x={}}){let P=this.instances.get(c);if(!P&&this.component&&(P=this.component.instanceFactory(this.container,{instanceIdentifier:Bc(c),options:x}),this.instances.set(c,P),this.instancesOptions.set(c,x),this.invokeOnInitCallbacks(P,c),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,c,P)}catch{}return P||null}normalizeInstanceIdentifier(c=vi){return this.component?this.component.multipleInstances?c:vi:c}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Bc(A){return A===vi?void 0:A}function Vc(A){return A.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(c){this.name=c,this.providers=new Map}addComponent(c){const x=this.getProvider(c.name);if(x.isComponentSet())throw new Error(`Component ${c.name} has already been registered with ${this.name}`);x.setComponent(c)}addOrOverwriteComponent(c){this.getProvider(c.name).isComponentSet()&&this.providers.delete(c.name),this.addComponent(c)}getProvider(c){if(this.providers.has(c))return this.providers.get(c);const x=new Nc(c,this);return this.providers.set(c,x),x}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(A){A[A.DEBUG=0]="DEBUG",A[A.VERBOSE=1]="VERBOSE",A[A.INFO=2]="INFO",A[A.WARN=3]="WARN",A[A.ERROR=4]="ERROR",A[A.SILENT=5]="SILENT"})(Ot||(Ot={}));const Uc={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},bc=Ot.INFO,zc={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},Xc=(A,c,...x)=>{if(c<A.logLevel)return;const P=new Date().toISOString(),M=zc[c];if(M)console[M](`[${P}]  ${A.name}:`,...x);else throw new Error(`Attempted to log a message with an invalid logType (value: ${c})`)};class ks{constructor(c){this.name=c,this._logLevel=bc,this._logHandler=Xc,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(c){if(!(c in Ot))throw new TypeError(`Invalid value "${c}" assigned to \`logLevel\``);this._logLevel=c}setLogLevel(c){this._logLevel=typeof c=="string"?Uc[c]:c}get logHandler(){return this._logHandler}set logHandler(c){if(typeof c!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=c}get userLogHandler(){return this._userLogHandler}set userLogHandler(c){this._userLogHandler=c}debug(...c){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...c),this._logHandler(this,Ot.DEBUG,...c)}log(...c){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...c),this._logHandler(this,Ot.VERBOSE,...c)}info(...c){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...c),this._logHandler(this,Ot.INFO,...c)}warn(...c){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...c),this._logHandler(this,Ot.WARN,...c)}error(...c){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...c),this._logHandler(this,Ot.ERROR,...c)}}const Wc=(A,c)=>c.some(x=>A instanceof x);let lh,uh;function Yc(){return lh||(lh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hc(){return uh||(uh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Kl=new WeakMap,$r=new WeakMap,$l=new WeakMap,Fr=new WeakMap,ma=new WeakMap;function Kc(A){const c=new Promise((x,P)=>{const M=()=>{A.removeEventListener("success",D),A.removeEventListener("error",v)},D=()=>{x(ni(A.result)),M()},v=()=>{P(A.error),M()};A.addEventListener("success",D),A.addEventListener("error",v)});return c.then(x=>{x instanceof IDBCursor&&Kl.set(x,A)}).catch(()=>{}),ma.set(c,A),c}function $c(A){if($r.has(A))return;const c=new Promise((x,P)=>{const M=()=>{A.removeEventListener("complete",D),A.removeEventListener("error",v),A.removeEventListener("abort",v)},D=()=>{x(),M()},v=()=>{P(A.error||new DOMException("AbortError","AbortError")),M()};A.addEventListener("complete",D),A.addEventListener("error",v),A.addEventListener("abort",v)});$r.set(A,c)}let Qr={get(A,c,x){if(A instanceof IDBTransaction){if(c==="done")return $r.get(A);if(c==="objectStoreNames")return A.objectStoreNames||$l.get(A);if(c==="store")return x.objectStoreNames[1]?void 0:x.objectStore(x.objectStoreNames[0])}return ni(A[c])},set(A,c,x){return A[c]=x,!0},has(A,c){return A instanceof IDBTransaction&&(c==="done"||c==="store")?!0:c in A}};function Qc(A){Qr=A(Qr)}function Jc(A){return A===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(c,...x){const P=A.call(Dr(this),c,...x);return $l.set(P,c.sort?c.sort():[c]),ni(P)}:Hc().includes(A)?function(...c){return A.apply(Dr(this),c),ni(Kl.get(this))}:function(...c){return ni(A.apply(Dr(this),c))}}function jc(A){return typeof A=="function"?Jc(A):(A instanceof IDBTransaction&&$c(A),Wc(A,Yc())?new Proxy(A,Qr):A)}function ni(A){if(A instanceof IDBRequest)return Kc(A);if(Fr.has(A))return Fr.get(A);const c=jc(A);return c!==A&&(Fr.set(A,c),ma.set(c,A)),c}const Dr=A=>ma.get(A);function Ql(A,c,{blocked:x,upgrade:P,blocking:M,terminated:D}={}){const v=indexedDB.open(A,c),E=ni(v);return P&&v.addEventListener("upgradeneeded",t=>{P(ni(v.result),t.oldVersion,t.newVersion,ni(v.transaction),t)}),x&&v.addEventListener("blocked",t=>x(t.oldVersion,t.newVersion,t)),E.then(t=>{D&&t.addEventListener("close",()=>D()),M&&t.addEventListener("versionchange",o=>M(o.oldVersion,o.newVersion,o))}).catch(()=>{}),E}const Zc=["get","getKey","getAll","getAllKeys","count"],kc=["put","add","delete","clear"],Nr=new Map;function fh(A,c){if(!(A instanceof IDBDatabase&&!(c in A)&&typeof c=="string"))return;if(Nr.get(c))return Nr.get(c);const x=c.replace(/FromIndex$/,""),P=c!==x,M=kc.includes(x);if(!(x in(P?IDBIndex:IDBObjectStore).prototype)||!(M||Zc.includes(x)))return;const D=async function(v,...E){const t=this.transaction(v,M?"readwrite":"readonly");let o=t.store;return P&&(o=o.index(E.shift())),(await Promise.all([o[x](...E),M&&t.done]))[0]};return Nr.set(c,D),D}Qc(A=>({...A,get:(c,x,P)=>fh(c,x)||A.get(c,x,P),has:(c,x)=>!!fh(c,x)||A.has(c,x)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qc{constructor(c){this.container=c}getPlatformInfoString(){return this.container.getProviders().map(x=>{if(_c(x)){const P=x.getImmediate();return`${P.library}/${P.version}`}else return null}).filter(x=>x).join(" ")}}function _c(A){const c=A.getComponent();return(c==null?void 0:c.type)==="VERSION"}const Jr="@firebase/app",dh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye=new ks("@firebase/app"),tv="@firebase/app-compat",ev="@firebase/analytics-compat",iv="@firebase/analytics",nv="@firebase/app-check-compat",sv="@firebase/app-check",rv="@firebase/auth",av="@firebase/auth-compat",ov="@firebase/database",hv="@firebase/data-connect",lv="@firebase/database-compat",uv="@firebase/functions",fv="@firebase/functions-compat",dv="@firebase/installations",cv="@firebase/installations-compat",vv="@firebase/messaging",pv="@firebase/messaging-compat",gv="@firebase/performance",mv="@firebase/performance-compat",xv="@firebase/remote-config",yv="@firebase/remote-config-compat",Tv="@firebase/storage",Ev="@firebase/storage-compat",Sv="@firebase/firestore",Cv="@firebase/vertexai-preview",Av="@firebase/firestore-compat",Pv="firebase",Rv="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="[DEFAULT]",Iv={[Jr]:"fire-core",[tv]:"fire-core-compat",[iv]:"fire-analytics",[ev]:"fire-analytics-compat",[sv]:"fire-app-check",[nv]:"fire-app-check-compat",[rv]:"fire-auth",[av]:"fire-auth-compat",[ov]:"fire-rtdb",[hv]:"fire-data-connect",[lv]:"fire-rtdb-compat",[uv]:"fire-fn",[fv]:"fire-fn-compat",[dv]:"fire-iid",[cv]:"fire-iid-compat",[vv]:"fire-fcm",[pv]:"fire-fcm-compat",[gv]:"fire-perf",[mv]:"fire-perf-compat",[xv]:"fire-rc",[yv]:"fire-rc-compat",[Tv]:"fire-gcs",[Ev]:"fire-gcs-compat",[Sv]:"fire-fst",[Av]:"fire-fst-compat",[Cv]:"fire-vertex","fire-js":"fire-js",[Pv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ds=new Map,Mv=new Map,Zr=new Map;function ch(A,c){try{A.container.addComponent(c)}catch(x){Ye.debug(`Component ${c.name} failed to register with FirebaseApp ${A.name}`,x)}}function Oe(A){const c=A.name;if(Zr.has(c))return Ye.debug(`There were multiple attempts to register component ${c}.`),!1;Zr.set(c,A);for(const x of Ds.values())ch(x,A);for(const x of Mv.values())ch(x,A);return!0}function wi(A,c){const x=A.container.getProvider("heartbeat").getImmediate({optional:!0});return x&&x.triggerHeartbeat(),A.container.getProvider(c)}function Re(A){return A.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},si=new Mi("app","Firebase",wv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(c,x,P){this._isDeleted=!1,this._options=Object.assign({},c),this._config=Object.assign({},x),this._name=x.name,this._automaticDataCollectionEnabled=x.automaticDataCollectionEnabled,this._container=P,this.container.addComponent(new Ee("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(c){this.checkDestroyed(),this._automaticDataCollectionEnabled=c}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(c){this._isDeleted=c}checkDestroyed(){if(this.isDeleted)throw si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=Rv;function Jl(A,c={}){let x=A;typeof c!="object"&&(c={name:c});const P=Object.assign({name:jr,automaticDataCollectionEnabled:!1},c),M=P.name;if(typeof M!="string"||!M)throw si.create("bad-app-name",{appName:String(M)});if(x||(x=zl()),!x)throw si.create("no-options");const D=Ds.get(M);if(D){if(Bn(x,D.options)&&Bn(P,D.config))return D;throw si.create("duplicate-app",{appName:M})}const v=new Gc(M);for(const t of Zr.values())v.addComponent(t);const E=new Lv(x,P,v);return Ds.set(M,E),E}function xa(A=jr){const c=Ds.get(A);if(!c&&A===jr&&zl())return Jl();if(!c)throw si.create("no-app",{appName:A});return c}function ge(A,c,x){var P;let M=(P=Iv[A])!==null&&P!==void 0?P:A;x&&(M+=`-${x}`);const D=M.match(/\s|\//),v=c.match(/\s|\//);if(D||v){const E=[`Unable to register library "${M}" with version "${c}":`];D&&E.push(`library name "${M}" contains illegal characters (whitespace or "/")`),D&&v&&E.push("and"),v&&E.push(`version name "${c}" contains illegal characters (whitespace or "/")`),Ye.warn(E.join(" "));return}Oe(new Ee(`${M}-version`,()=>({library:M,version:c}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="firebase-heartbeat-database",Fv=1,Vn="firebase-heartbeat-store";let Br=null;function jl(){return Br||(Br=Ql(Ov,Fv,{upgrade:(A,c)=>{switch(c){case 0:try{A.createObjectStore(Vn)}catch(x){console.warn(x)}}}}).catch(A=>{throw si.create("idb-open",{originalErrorMessage:A.message})})),Br}async function Dv(A){try{const x=(await jl()).transaction(Vn),P=await x.objectStore(Vn).get(Zl(A));return await x.done,P}catch(c){if(c instanceof Ae)Ye.warn(c.message);else{const x=si.create("idb-get",{originalErrorMessage:c==null?void 0:c.message});Ye.warn(x.message)}}}async function vh(A,c){try{const P=(await jl()).transaction(Vn,"readwrite");await P.objectStore(Vn).put(c,Zl(A)),await P.done}catch(x){if(x instanceof Ae)Ye.warn(x.message);else{const P=si.create("idb-set",{originalErrorMessage:x==null?void 0:x.message});Ye.warn(P.message)}}}function Zl(A){return`${A.name}!${A.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=1024,Bv=30*24*60*60*1e3;class Vv{constructor(c){this.container=c,this._heartbeatsCache=null;const x=this.container.getProvider("app").getImmediate();this._storage=new Uv(x),this._heartbeatsCachePromise=this._storage.read().then(P=>(this._heartbeatsCache=P,P))}async triggerHeartbeat(){var c,x;try{const M=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),D=ph();return((c=this._heartbeatsCache)===null||c===void 0?void 0:c.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((x=this._heartbeatsCache)===null||x===void 0?void 0:x.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===D||this._heartbeatsCache.heartbeats.some(v=>v.date===D)?void 0:(this._heartbeatsCache.heartbeats.push({date:D,agent:M}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(v=>{const E=new Date(v.date).valueOf();return Date.now()-E<=Bv}),this._storage.overwrite(this._heartbeatsCache))}catch(P){Ye.warn(P)}}async getHeartbeatsHeader(){var c;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((c=this._heartbeatsCache)===null||c===void 0?void 0:c.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const x=ph(),{heartbeatsToSend:P,unsentEntries:M}=Gv(this._heartbeatsCache.heartbeats),D=Fs(JSON.stringify({version:2,heartbeats:P}));return this._heartbeatsCache.lastSentHeartbeatDate=x,M.length>0?(this._heartbeatsCache.heartbeats=M,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),D}catch(x){return Ye.warn(x),""}}}function ph(){return new Date().toISOString().substring(0,10)}function Gv(A,c=Nv){const x=[];let P=A.slice();for(const M of A){const D=x.find(v=>v.agent===M.agent);if(D){if(D.dates.push(M.date),gh(x)>c){D.dates.pop();break}}else if(x.push({agent:M.agent,dates:[M.date]}),gh(x)>c){x.pop();break}P=P.slice(1)}return{heartbeatsToSend:x,unsentEntries:P}}class Uv{constructor(c){this.app=c,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Yl()?Hl().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const x=await Dv(this.app);return x!=null&&x.heartbeats?x:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(c){var x;if(await this._canUseIndexedDBPromise){const M=await this.read();return vh(this.app,{lastSentHeartbeatDate:(x=c.lastSentHeartbeatDate)!==null&&x!==void 0?x:M.lastSentHeartbeatDate,heartbeats:c.heartbeats})}else return}async add(c){var x;if(await this._canUseIndexedDBPromise){const M=await this.read();return vh(this.app,{lastSentHeartbeatDate:(x=c.lastSentHeartbeatDate)!==null&&x!==void 0?x:M.lastSentHeartbeatDate,heartbeats:[...M.heartbeats,...c.heartbeats]})}else return}}function gh(A){return Fs(JSON.stringify({version:2,heartbeats:A})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(A){Oe(new Ee("platform-logger",c=>new qc(c),"PRIVATE")),Oe(new Ee("heartbeat",c=>new Vv(c),"PRIVATE")),ge(Jr,dh,A),ge(Jr,dh,"esm2017"),ge("fire-js","")}bv("");function ya(A,c){var x={};for(var P in A)Object.prototype.hasOwnProperty.call(A,P)&&c.indexOf(P)<0&&(x[P]=A[P]);if(A!=null&&typeof Object.getOwnPropertySymbols=="function")for(var M=0,P=Object.getOwnPropertySymbols(A);M<P.length;M++)c.indexOf(P[M])<0&&Object.prototype.propertyIsEnumerable.call(A,P[M])&&(x[P[M]]=A[P[M]]);return x}function kl(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zv=kl,ql=new Mi("auth","Firebase",kl());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new ks("@firebase/auth");function Xv(A,...c){Ns.logLevel<=Ot.WARN&&Ns.warn(`Auth (${tn}): ${A}`,...c)}function Cs(A,...c){Ns.logLevel<=Ot.ERROR&&Ns.error(`Auth (${tn}): ${A}`,...c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(A,...c){throw Ta(A,...c)}function Ie(A,...c){return Ta(A,...c)}function _l(A,c,x){const P=Object.assign(Object.assign({},zv()),{[c]:x});return new Mi("auth","Firebase",P).create(c,{appName:A.name})}function ze(A){return _l(A,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ta(A,...c){if(typeof A!="string"){const x=c[0],P=[...c.slice(1)];return P[0]&&(P[0].appName=A.name),A._errorFactory.create(x,...P)}return ql.create(A,...c)}function Tt(A,c,...x){if(!A)throw Ta(c,...x)}function Ge(A){const c="INTERNAL ASSERTION FAILED: "+A;throw Cs(c),new Error(c)}function He(A,c){A||Ge(c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){var A;return typeof self<"u"&&((A=self.location)===null||A===void 0?void 0:A.href)||""}function Wv(){return mh()==="http:"||mh()==="https:"}function mh(){var A;return typeof self<"u"&&((A=self.location)===null||A===void 0?void 0:A.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Wv()||Wl()||"connection"in navigator)?navigator.onLine:!0}function Hv(){if(typeof navigator>"u")return null;const A=navigator;return A.languages&&A.languages[0]||A.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(c,x){this.shortDelay=c,this.longDelay=x,He(x>c,"Short delay should be less than long delay!"),this.isMobile=gc()||yc()}get(){return Yv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(A,c){He(A.emulator,"Emulator should always be set here");const{url:x}=A.emulator;return c?`${x}${c.startsWith("/")?c.slice(1):c}`:x}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{static initialize(c,x,P){this.fetchImpl=c,x&&(this.headersImpl=x),P&&(this.responseImpl=P)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ge("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ge("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ge("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v=new Kn(3e4,6e4);function li(A,c){return A.tenantId&&!c.tenantId?Object.assign(Object.assign({},c),{tenantId:A.tenantId}):c}async function Qe(A,c,x,P,M={}){return eu(A,M,async()=>{let D={},v={};P&&(c==="GET"?v=P:D={body:JSON.stringify(P)});const E=Hn(Object.assign({key:A.config.apiKey},v)).slice(1),t=await A._getAdditionalHeaders();t["Content-Type"]="application/json",A.languageCode&&(t["X-Firebase-Locale"]=A.languageCode);const o=Object.assign({method:c,headers:t},D);return xc()||(o.referrerPolicy="no-referrer"),tu.fetch()(iu(A,A.config.apiHost,x,E),o)})}async function eu(A,c,x){A._canInitEmulator=!1;const P=Object.assign(Object.assign({},Kv),c);try{const M=new Jv(A),D=await Promise.race([x(),M.promise]);M.clearNetworkTimeout();const v=await D.json();if("needConfirmation"in v)throw ms(A,"account-exists-with-different-credential",v);if(D.ok&&!("errorMessage"in v))return v;{const E=D.ok?v.errorMessage:v.error.message,[t,o]=E.split(" : ");if(t==="FEDERATED_USER_ID_ALREADY_LINKED")throw ms(A,"credential-already-in-use",v);if(t==="EMAIL_EXISTS")throw ms(A,"email-already-in-use",v);if(t==="USER_DISABLED")throw ms(A,"user-disabled",v);const g=P[t]||t.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw _l(A,g,o);Se(A,g)}}catch(M){if(M instanceof Ae)throw M;Se(A,"network-request-failed",{message:String(M)})}}async function $n(A,c,x,P,M={}){const D=await Qe(A,c,x,P,M);return"mfaPendingCredential"in D&&Se(A,"multi-factor-auth-required",{_serverResponse:D}),D}function iu(A,c,x,P){const M=`${c}${x}?${P}`;return A.config.emulator?Ea(A.config,M):`${A.config.apiScheme}://${M}`}function Qv(A){switch(A){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Jv{constructor(c){this.auth=c,this.timer=null,this.promise=new Promise((x,P)=>{this.timer=setTimeout(()=>P(Ie(this.auth,"network-request-failed")),$v.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ms(A,c,x){const P={appName:A.name};x.email&&(P.email=x.email),x.phoneNumber&&(P.phoneNumber=x.phoneNumber);const M=Ie(A,c,P);return M.customData._tokenResponse=x,M}function xh(A){return A!==void 0&&A.enterprise!==void 0}class jv{constructor(c){if(this.siteKey="",this.recaptchaEnforcementState=[],c.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=c.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=c.recaptchaEnforcementState}getProviderEnforcementState(c){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const x of this.recaptchaEnforcementState)if(x.provider&&x.provider===c)return Qv(x.enforcementState);return null}isProviderEnabled(c){return this.getProviderEnforcementState(c)==="ENFORCE"||this.getProviderEnforcementState(c)==="AUDIT"}}async function Zv(A,c){return Qe(A,"GET","/v2/recaptchaConfig",li(A,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kv(A,c){return Qe(A,"POST","/v1/accounts:delete",c)}async function nu(A,c){return Qe(A,"POST","/v1/accounts:lookup",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(A){if(A)try{const c=new Date(Number(A));if(!isNaN(c.getTime()))return c.toUTCString()}catch{}}async function qv(A,c=!1){const x=kt(A),P=await x.getIdToken(c),M=Sa(P);Tt(M&&M.exp&&M.auth_time&&M.iat,x.auth,"internal-error");const D=typeof M.firebase=="object"?M.firebase:void 0,v=D==null?void 0:D.sign_in_provider;return{claims:M,token:P,authTime:wn(Vr(M.auth_time)),issuedAtTime:wn(Vr(M.iat)),expirationTime:wn(Vr(M.exp)),signInProvider:v||null,signInSecondFactor:(D==null?void 0:D.sign_in_second_factor)||null}}function Vr(A){return Number(A)*1e3}function Sa(A){const[c,x,P]=A.split(".");if(c===void 0||x===void 0||P===void 0)return Cs("JWT malformed, contained fewer than 3 sections"),null;try{const M=Ul(x);return M?JSON.parse(M):(Cs("Failed to decode base64 JWT payload"),null)}catch(M){return Cs("Caught error parsing JWT payload as JSON",M==null?void 0:M.toString()),null}}function yh(A){const c=Sa(A);return Tt(c,"internal-error"),Tt(typeof c.exp<"u","internal-error"),Tt(typeof c.iat<"u","internal-error"),Number(c.exp)-Number(c.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(A,c,x=!1){if(x)return c;try{return await c}catch(P){throw P instanceof Ae&&_v(P)&&A.auth.currentUser===A&&await A.auth.signOut(),P}}function _v({code:A}){return A==="auth/user-disabled"||A==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(c){this.user=c,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(c){var x;if(c){const P=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),P}else{this.errorBackoff=3e4;const M=((x=this.user.stsTokenManager.expirationTime)!==null&&x!==void 0?x:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(c=!1){if(!this.isRunning)return;const x=this.getInterval(c);this.timerId=setTimeout(async()=>{await this.iteration()},x)}async iteration(){try{await this.user.getIdToken(!0)}catch(c){(c==null?void 0:c.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(c,x){this.createdAt=c,this.lastLoginAt=x,this._initializeTime()}_initializeTime(){this.lastSignInTime=wn(this.lastLoginAt),this.creationTime=wn(this.createdAt)}_copy(c){this.createdAt=c.createdAt,this.lastLoginAt=c.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(A){var c;const x=A.auth,P=await A.getIdToken(),M=await $i(A,nu(x,{idToken:P}));Tt(M==null?void 0:M.users.length,x,"internal-error");const D=M.users[0];A._notifyReloadListener(D);const v=!((c=D.providerUserInfo)===null||c===void 0)&&c.length?su(D.providerUserInfo):[],E=ip(A.providerData,v),t=A.isAnonymous,o=!(A.email&&D.passwordHash)&&!(E!=null&&E.length),g=t?o:!1,a={uid:D.localId,displayName:D.displayName||null,photoURL:D.photoUrl||null,email:D.email||null,emailVerified:D.emailVerified||!1,phoneNumber:D.phoneNumber||null,tenantId:D.tenantId||null,providerData:E,metadata:new qr(D.createdAt,D.lastLoginAt),isAnonymous:g};Object.assign(A,a)}async function ep(A){const c=kt(A);await Bs(c),await c.auth._persistUserIfCurrent(c),c.auth._notifyListenersIfCurrent(c)}function ip(A,c){return[...A.filter(P=>!c.some(M=>M.providerId===P.providerId)),...c]}function su(A){return A.map(c=>{var{providerId:x}=c,P=ya(c,["providerId"]);return{providerId:x,uid:P.rawId||"",displayName:P.displayName||null,email:P.email||null,phoneNumber:P.phoneNumber||null,photoURL:P.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function np(A,c){const x=await eu(A,{},async()=>{const P=Hn({grant_type:"refresh_token",refresh_token:c}).slice(1),{tokenApiHost:M,apiKey:D}=A.config,v=iu(A,M,"/v1/token",`key=${D}`),E=await A._getAdditionalHeaders();return E["Content-Type"]="application/x-www-form-urlencoded",tu.fetch()(v,{method:"POST",headers:E,body:P})});return{accessToken:x.access_token,expiresIn:x.expires_in,refreshToken:x.refresh_token}}async function sp(A,c){return Qe(A,"POST","/v2/accounts:revokeToken",li(A,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(c){Tt(c.idToken,"internal-error"),Tt(typeof c.idToken<"u","internal-error"),Tt(typeof c.refreshToken<"u","internal-error");const x="expiresIn"in c&&typeof c.expiresIn<"u"?Number(c.expiresIn):yh(c.idToken);this.updateTokensAndExpiration(c.idToken,c.refreshToken,x)}updateFromIdToken(c){Tt(c.length!==0,"internal-error");const x=yh(c);this.updateTokensAndExpiration(c,null,x)}async getToken(c,x=!1){return!x&&this.accessToken&&!this.isExpired?this.accessToken:(Tt(this.refreshToken,c,"user-token-expired"),this.refreshToken?(await this.refresh(c,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(c,x){const{accessToken:P,refreshToken:M,expiresIn:D}=await np(c,x);this.updateTokensAndExpiration(P,M,Number(D))}updateTokensAndExpiration(c,x,P){this.refreshToken=x||null,this.accessToken=c||null,this.expirationTime=Date.now()+P*1e3}static fromJSON(c,x){const{refreshToken:P,accessToken:M,expirationTime:D}=x,v=new Wi;return P&&(Tt(typeof P=="string","internal-error",{appName:c}),v.refreshToken=P),M&&(Tt(typeof M=="string","internal-error",{appName:c}),v.accessToken=M),D&&(Tt(typeof D=="number","internal-error",{appName:c}),v.expirationTime=D),v}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(c){this.accessToken=c.accessToken,this.refreshToken=c.refreshToken,this.expirationTime=c.expirationTime}_clone(){return Object.assign(new Wi,this.toJSON())}_performRefresh(){return Ge("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(A,c){Tt(typeof A=="string"||typeof A>"u","internal-error",{appName:c})}class Ue{constructor(c){var{uid:x,auth:P,stsTokenManager:M}=c,D=ya(c,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tp(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=x,this.auth=P,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=D.displayName||null,this.email=D.email||null,this.emailVerified=D.emailVerified||!1,this.phoneNumber=D.phoneNumber||null,this.photoURL=D.photoURL||null,this.isAnonymous=D.isAnonymous||!1,this.tenantId=D.tenantId||null,this.providerData=D.providerData?[...D.providerData]:[],this.metadata=new qr(D.createdAt||void 0,D.lastLoginAt||void 0)}async getIdToken(c){const x=await $i(this,this.stsTokenManager.getToken(this.auth,c));return Tt(x,this.auth,"internal-error"),this.accessToken!==x&&(this.accessToken=x,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),x}getIdTokenResult(c){return qv(this,c)}reload(){return ep(this)}_assign(c){this!==c&&(Tt(this.uid===c.uid,this.auth,"internal-error"),this.displayName=c.displayName,this.photoURL=c.photoURL,this.email=c.email,this.emailVerified=c.emailVerified,this.phoneNumber=c.phoneNumber,this.isAnonymous=c.isAnonymous,this.tenantId=c.tenantId,this.providerData=c.providerData.map(x=>Object.assign({},x)),this.metadata._copy(c.metadata),this.stsTokenManager._assign(c.stsTokenManager))}_clone(c){const x=new Ue(Object.assign(Object.assign({},this),{auth:c,stsTokenManager:this.stsTokenManager._clone()}));return x.metadata._copy(this.metadata),x}_onReload(c){Tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=c,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(c){this.reloadListener?this.reloadListener(c):this.reloadUserInfo=c}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(c,x=!1){let P=!1;c.idToken&&c.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(c),P=!0),x&&await Bs(this),await this.auth._persistUserIfCurrent(this),P&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Re(this.auth.app))return Promise.reject(ze(this.auth));const c=await this.getIdToken();return await $i(this,kv(this.auth,{idToken:c})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(c=>Object.assign({},c)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(c,x){var P,M,D,v,E,t,o,g;const a=(P=x.displayName)!==null&&P!==void 0?P:void 0,r=(M=x.email)!==null&&M!==void 0?M:void 0,s=(D=x.phoneNumber)!==null&&D!==void 0?D:void 0,e=(v=x.photoURL)!==null&&v!==void 0?v:void 0,n=(E=x.tenantId)!==null&&E!==void 0?E:void 0,h=(t=x._redirectEventId)!==null&&t!==void 0?t:void 0,i=(o=x.createdAt)!==null&&o!==void 0?o:void 0,l=(g=x.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:f,emailVerified:u,isAnonymous:d,providerData:p,stsTokenManager:m}=x;Tt(f&&m,c,"internal-error");const T=Wi.fromJSON(this.name,m);Tt(typeof f=="string",c,"internal-error"),ke(a,c.name),ke(r,c.name),Tt(typeof u=="boolean",c,"internal-error"),Tt(typeof d=="boolean",c,"internal-error"),ke(s,c.name),ke(e,c.name),ke(n,c.name),ke(h,c.name),ke(i,c.name),ke(l,c.name);const y=new Ue({uid:f,auth:c,email:r,emailVerified:u,displayName:a,isAnonymous:d,photoURL:e,phoneNumber:s,tenantId:n,stsTokenManager:T,createdAt:i,lastLoginAt:l});return p&&Array.isArray(p)&&(y.providerData=p.map(S=>Object.assign({},S))),h&&(y._redirectEventId=h),y}static async _fromIdTokenResponse(c,x,P=!1){const M=new Wi;M.updateFromServerResponse(x);const D=new Ue({uid:x.localId,auth:c,stsTokenManager:M,isAnonymous:P});return await Bs(D),D}static async _fromGetAccountInfoResponse(c,x,P){const M=x.users[0];Tt(M.localId!==void 0,"internal-error");const D=M.providerUserInfo!==void 0?su(M.providerUserInfo):[],v=!(M.email&&M.passwordHash)&&!(D!=null&&D.length),E=new Wi;E.updateFromIdToken(P);const t=new Ue({uid:M.localId,auth:c,stsTokenManager:E,isAnonymous:v}),o={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:D,metadata:new qr(M.createdAt,M.lastLoginAt),isAnonymous:!(M.email&&M.passwordHash)&&!(D!=null&&D.length)};return Object.assign(t,o),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th=new Map;function be(A){He(A instanceof Function,"Expected a class definition");let c=Th.get(A);return c?(He(c instanceof A,"Instance stored in cache mismatched with class"),c):(c=new A,Th.set(A,c),c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(c,x){this.storage[c]=x}async _get(c){const x=this.storage[c];return x===void 0?null:x}async _remove(c){delete this.storage[c]}_addListener(c,x){}_removeListener(c,x){}}ru.type="NONE";const Eh=ru;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(A,c,x){return`firebase:${A}:${c}:${x}`}class Yi{constructor(c,x,P){this.persistence=c,this.auth=x,this.userKey=P;const{config:M,name:D}=this.auth;this.fullUserKey=As(this.userKey,M.apiKey,D),this.fullPersistenceKey=As("persistence",M.apiKey,D),this.boundEventHandler=x._onStorageEvent.bind(x),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(c){return this.persistence._set(this.fullUserKey,c.toJSON())}async getCurrentUser(){const c=await this.persistence._get(this.fullUserKey);return c?Ue._fromJSON(this.auth,c):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(c){if(this.persistence===c)return;const x=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=c,x)return this.setCurrentUser(x)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(c,x,P="authUser"){if(!x.length)return new Yi(be(Eh),c,P);const M=(await Promise.all(x.map(async o=>{if(await o._isAvailable())return o}))).filter(o=>o);let D=M[0]||be(Eh);const v=As(P,c.config.apiKey,c.name);let E=null;for(const o of x)try{const g=await o._get(v);if(g){const a=Ue._fromJSON(c,g);o!==D&&(E=a),D=o;break}}catch{}const t=M.filter(o=>o._shouldAllowMigration);return!D._shouldAllowMigration||!t.length?new Yi(D,c,P):(D=t[0],E&&await D._set(v,E.toJSON()),await Promise.all(x.map(async o=>{if(o!==D)try{await o._remove(v)}catch{}})),new Yi(D,c,P))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(A){const c=A.toLowerCase();if(c.includes("opera/")||c.includes("opr/")||c.includes("opios/"))return"Opera";if(lu(c))return"IEMobile";if(c.includes("msie")||c.includes("trident/"))return"IE";if(c.includes("edge/"))return"Edge";if(au(c))return"Firefox";if(c.includes("silk/"))return"Silk";if(fu(c))return"Blackberry";if(du(c))return"Webos";if(ou(c))return"Safari";if((c.includes("chrome/")||hu(c))&&!c.includes("edge/"))return"Chrome";if(uu(c))return"Android";{const x=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,P=A.match(x);if((P==null?void 0:P.length)===2)return P[1]}return"Other"}function au(A=le()){return/firefox\//i.test(A)}function ou(A=le()){const c=A.toLowerCase();return c.includes("safari/")&&!c.includes("chrome/")&&!c.includes("crios/")&&!c.includes("android")}function hu(A=le()){return/crios\//i.test(A)}function lu(A=le()){return/iemobile/i.test(A)}function uu(A=le()){return/android/i.test(A)}function fu(A=le()){return/blackberry/i.test(A)}function du(A=le()){return/webos/i.test(A)}function Ca(A=le()){return/iphone|ipad|ipod/i.test(A)||/macintosh/i.test(A)&&/mobile/i.test(A)}function rp(A=le()){var c;return Ca(A)&&!!(!((c=window.navigator)===null||c===void 0)&&c.standalone)}function ap(){return Tc()&&document.documentMode===10}function cu(A=le()){return Ca(A)||uu(A)||du(A)||fu(A)||/windows phone/i.test(A)||lu(A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(A,c=[]){let x;switch(A){case"Browser":x=Sh(le());break;case"Worker":x=`${Sh(le())}-${A}`;break;default:x=A}const P=c.length?c.join(","):"FirebaseCore-web";return`${x}/JsCore/${tn}/${P}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(c){this.auth=c,this.queue=[]}pushCallback(c,x){const P=D=>new Promise((v,E)=>{try{const t=c(D);v(t)}catch(t){E(t)}});P.onAbort=x,this.queue.push(P);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}async runMiddleware(c){if(this.auth.currentUser===c)return;const x=[];try{for(const P of this.queue)await P(c),P.onAbort&&x.push(P.onAbort)}catch(P){x.reverse();for(const M of x)try{M()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:P==null?void 0:P.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hp(A,c={}){return Qe(A,"GET","/v2/passwordPolicy",li(A,c))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=6;class up{constructor(c){var x,P,M,D;const v=c.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(x=v.minPasswordLength)!==null&&x!==void 0?x:lp,v.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=v.maxPasswordLength),v.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=v.containsLowercaseCharacter),v.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=v.containsUppercaseCharacter),v.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=v.containsNumericCharacter),v.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=v.containsNonAlphanumericCharacter),this.enforcementState=c.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(M=(P=c.allowedNonAlphanumericCharacters)===null||P===void 0?void 0:P.join(""))!==null&&M!==void 0?M:"",this.forceUpgradeOnSignin=(D=c.forceUpgradeOnSignin)!==null&&D!==void 0?D:!1,this.schemaVersion=c.schemaVersion}validatePassword(c){var x,P,M,D,v,E;const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(c,t),this.validatePasswordCharacterOptions(c,t),t.isValid&&(t.isValid=(x=t.meetsMinPasswordLength)!==null&&x!==void 0?x:!0),t.isValid&&(t.isValid=(P=t.meetsMaxPasswordLength)!==null&&P!==void 0?P:!0),t.isValid&&(t.isValid=(M=t.containsLowercaseLetter)!==null&&M!==void 0?M:!0),t.isValid&&(t.isValid=(D=t.containsUppercaseLetter)!==null&&D!==void 0?D:!0),t.isValid&&(t.isValid=(v=t.containsNumericCharacter)!==null&&v!==void 0?v:!0),t.isValid&&(t.isValid=(E=t.containsNonAlphanumericCharacter)!==null&&E!==void 0?E:!0),t}validatePasswordLengthOptions(c,x){const P=this.customStrengthOptions.minPasswordLength,M=this.customStrengthOptions.maxPasswordLength;P&&(x.meetsMinPasswordLength=c.length>=P),M&&(x.meetsMaxPasswordLength=c.length<=M)}validatePasswordCharacterOptions(c,x){this.updatePasswordCharacterOptionsStatuses(x,!1,!1,!1,!1);let P;for(let M=0;M<c.length;M++)P=c.charAt(M),this.updatePasswordCharacterOptionsStatuses(x,P>="a"&&P<="z",P>="A"&&P<="Z",P>="0"&&P<="9",this.allowedNonAlphanumericCharacters.includes(P))}updatePasswordCharacterOptionsStatuses(c,x,P,M,D){this.customStrengthOptions.containsLowercaseLetter&&(c.containsLowercaseLetter||(c.containsLowercaseLetter=x)),this.customStrengthOptions.containsUppercaseLetter&&(c.containsUppercaseLetter||(c.containsUppercaseLetter=P)),this.customStrengthOptions.containsNumericCharacter&&(c.containsNumericCharacter||(c.containsNumericCharacter=M)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(c.containsNonAlphanumericCharacter||(c.containsNonAlphanumericCharacter=D))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(c,x,P,M){this.app=c,this.heartbeatServiceProvider=x,this.appCheckServiceProvider=P,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ch(this),this.idTokenSubscription=new Ch(this),this.beforeStateQueue=new op(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ql,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=c.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(c,x){return x&&(this._popupRedirectResolver=be(x)),this._initializationPromise=this.queue(async()=>{var P,M;if(!this._deleted&&(this.persistenceManager=await Yi.create(this,c),!this._deleted)){if(!((P=this._popupRedirectResolver)===null||P===void 0)&&P._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(x),this.lastNotifiedUid=((M=this.currentUser)===null||M===void 0?void 0:M.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const c=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!c)){if(this.currentUser&&c&&this.currentUser.uid===c.uid){this._currentUser._assign(c),await this.currentUser.getIdToken();return}await this._updateCurrentUser(c,!0)}}async initializeCurrentUserFromIdToken(c){try{const x=await nu(this,{idToken:c}),P=await Ue._fromGetAccountInfoResponse(this,x,c);await this.directlySetCurrentUser(P)}catch(x){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",x),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(c){var x;if(Re(this.app)){const v=this.app.settings.authIdToken;return v?new Promise(E=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(v).then(E,E))}):this.directlySetCurrentUser(null)}const P=await this.assertedPersistence.getCurrentUser();let M=P,D=!1;if(c&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const v=(x=this.redirectUser)===null||x===void 0?void 0:x._redirectEventId,E=M==null?void 0:M._redirectEventId,t=await this.tryRedirectSignIn(c);(!v||v===E)&&(t!=null&&t.user)&&(M=t.user,D=!0)}if(!M)return this.directlySetCurrentUser(null);if(!M._redirectEventId){if(D)try{await this.beforeStateQueue.runMiddleware(M)}catch(v){M=P,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(v))}return M?this.reloadAndSetCurrentUserOrClear(M):this.directlySetCurrentUser(null)}return Tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===M._redirectEventId?this.directlySetCurrentUser(M):this.reloadAndSetCurrentUserOrClear(M)}async tryRedirectSignIn(c){let x=null;try{x=await this._popupRedirectResolver._completeRedirectFn(this,c,!0)}catch{await this._setRedirectUser(null)}return x}async reloadAndSetCurrentUserOrClear(c){try{await Bs(c)}catch(x){if((x==null?void 0:x.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(c)}useDeviceLanguage(){this.languageCode=Hv()}async _delete(){this._deleted=!0}async updateCurrentUser(c){if(Re(this.app))return Promise.reject(ze(this));const x=c?kt(c):null;return x&&Tt(x.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(x&&x._clone(this))}async _updateCurrentUser(c,x=!1){if(!this._deleted)return c&&Tt(this.tenantId===c.tenantId,this,"tenant-id-mismatch"),x||await this.beforeStateQueue.runMiddleware(c),this.queue(async()=>{await this.directlySetCurrentUser(c),this.notifyAuthListeners()})}async signOut(){return Re(this.app)?Promise.reject(ze(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(c){return Re(this.app)?Promise.reject(ze(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(be(c))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(c){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const x=this._getPasswordPolicyInternal();return x.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):x.validatePassword(c)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const c=await hp(this),x=new up(c);this.tenantId===null?this._projectPasswordPolicy=x:this._tenantPasswordPolicies[this.tenantId]=x}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(c){this._errorFactory=new Mi("auth","Firebase",c())}onAuthStateChanged(c,x,P){return this.registerStateListener(this.authStateSubscription,c,x,P)}beforeAuthStateChanged(c,x){return this.beforeStateQueue.pushCallback(c,x)}onIdTokenChanged(c,x,P){return this.registerStateListener(this.idTokenSubscription,c,x,P)}authStateReady(){return new Promise((c,x)=>{if(this.currentUser)c();else{const P=this.onAuthStateChanged(()=>{P(),c()},x)}})}async revokeAccessToken(c){if(this.currentUser){const x=await this.currentUser.getIdToken(),P={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:c,idToken:x};this.tenantId!=null&&(P.tenantId=this.tenantId),await sp(this,P)}}toJSON(){var c;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(c=this._currentUser)===null||c===void 0?void 0:c.toJSON()}}async _setRedirectUser(c,x){const P=await this.getOrInitRedirectPersistenceManager(x);return c===null?P.removeCurrentUser():P.setCurrentUser(c)}async getOrInitRedirectPersistenceManager(c){if(!this.redirectPersistenceManager){const x=c&&be(c)||this._popupRedirectResolver;Tt(x,this,"argument-error"),this.redirectPersistenceManager=await Yi.create(this,[be(x._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(c){var x,P;return this._isInitialized&&await this.queue(async()=>{}),((x=this._currentUser)===null||x===void 0?void 0:x._redirectEventId)===c?this._currentUser:((P=this.redirectUser)===null||P===void 0?void 0:P._redirectEventId)===c?this.redirectUser:null}async _persistUserIfCurrent(c){if(c===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(c))}_notifyListenersIfCurrent(c){c===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var c,x;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const P=(x=(c=this.currentUser)===null||c===void 0?void 0:c.uid)!==null&&x!==void 0?x:null;this.lastNotifiedUid!==P&&(this.lastNotifiedUid=P,this.authStateSubscription.next(this.currentUser))}registerStateListener(c,x,P,M){if(this._deleted)return()=>{};const D=typeof x=="function"?x:x.next.bind(x);let v=!1;const E=this._isInitialized?Promise.resolve():this._initializationPromise;if(Tt(E,this,"internal-error"),E.then(()=>{v||D(this.currentUser)}),typeof x=="function"){const t=c.addObserver(x,P,M);return()=>{v=!0,t()}}else{const t=c.addObserver(x);return()=>{v=!0,t()}}}async directlySetCurrentUser(c){this.currentUser&&this.currentUser!==c&&this._currentUser._stopProactiveRefresh(),c&&this.isProactiveRefreshEnabled&&c._startProactiveRefresh(),this.currentUser=c,c?await this.assertedPersistence.setCurrentUser(c):await this.assertedPersistence.removeCurrentUser()}queue(c){return this.operations=this.operations.then(c,c),this.operations}get assertedPersistence(){return Tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(c){!c||this.frameworks.includes(c)||(this.frameworks.push(c),this.frameworks.sort(),this.clientVersion=vu(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var c;const x={"X-Client-Version":this.clientVersion};this.app.options.appId&&(x["X-Firebase-gmpid"]=this.app.options.appId);const P=await((c=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||c===void 0?void 0:c.getHeartbeatsHeader());P&&(x["X-Firebase-Client"]=P);const M=await this._getAppCheckToken();return M&&(x["X-Firebase-AppCheck"]=M),x}async _getAppCheckToken(){var c;const x=await((c=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||c===void 0?void 0:c.getToken());return x!=null&&x.error&&Xv(`Error while retrieving App Check token: ${x.error}`),x==null?void 0:x.token}}function Li(A){return kt(A)}class Ch{constructor(c){this.auth=c,this.observer=null,this.addObserver=Ic(x=>this.observer=x)}get next(){return Tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qs={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dp(A){qs=A}function pu(A){return qs.loadJS(A)}function cp(){return qs.recaptchaEnterpriseScript}function vp(){return qs.gapiScript}function pp(A){return`__${A}${Math.floor(Math.random()*1e6)}`}const gp="recaptcha-enterprise",mp="NO_RECAPTCHA";class xp{constructor(c){this.type=gp,this.auth=Li(c)}async verify(c="verify",x=!1){async function P(D){if(!x){if(D.tenantId==null&&D._agentRecaptchaConfig!=null)return D._agentRecaptchaConfig.siteKey;if(D.tenantId!=null&&D._tenantRecaptchaConfigs[D.tenantId]!==void 0)return D._tenantRecaptchaConfigs[D.tenantId].siteKey}return new Promise(async(v,E)=>{Zv(D,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(t=>{if(t.recaptchaKey===void 0)E(new Error("recaptcha Enterprise site key undefined"));else{const o=new jv(t);return D.tenantId==null?D._agentRecaptchaConfig=o:D._tenantRecaptchaConfigs[D.tenantId]=o,v(o.siteKey)}}).catch(t=>{E(t)})})}function M(D,v,E){const t=window.grecaptcha;xh(t)?t.enterprise.ready(()=>{t.enterprise.execute(D,{action:c}).then(o=>{v(o)}).catch(()=>{v(mp)})}):E(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((D,v)=>{P(this.auth).then(E=>{if(!x&&xh(window.grecaptcha))M(E,D,v);else{if(typeof window>"u"){v(new Error("RecaptchaVerifier is only supported in browser"));return}let t=cp();t.length!==0&&(t+=E),pu(t).then(()=>{M(E,D,v)}).catch(o=>{v(o)})}}).catch(E=>{v(E)})})}}async function Ah(A,c,x,P=!1){const M=new xp(A);let D;try{D=await M.verify(x)}catch{D=await M.verify(x,!0)}const v=Object.assign({},c);return P?Object.assign(v,{captchaResp:D}):Object.assign(v,{captchaResponse:D}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function _r(A,c,x,P){var M;if(!((M=A._getRecaptchaConfig())===null||M===void 0)&&M.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const D=await Ah(A,c,x,x==="getOobCode");return P(A,D)}else return P(A,c).catch(async D=>{if(D.code==="auth/missing-recaptcha-token"){console.log(`${x} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const v=await Ah(A,c,x,x==="getOobCode");return P(A,v)}else return Promise.reject(D)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(A,c){const x=wi(A,"auth");if(x.isInitialized()){const M=x.getImmediate(),D=x.getOptions();if(Bn(D,c??{}))return M;Se(M,"already-initialized")}return x.initialize({options:c})}function Tp(A,c){const x=(c==null?void 0:c.persistence)||[],P=(Array.isArray(x)?x:[x]).map(be);c!=null&&c.errorMap&&A._updateErrorMap(c.errorMap),A._initializeWithPersistence(P,c==null?void 0:c.popupRedirectResolver)}function Ep(A,c,x){const P=Li(A);Tt(P._canInitEmulator,P,"emulator-config-failed"),Tt(/^https?:\/\//.test(c),P,"invalid-emulator-scheme");const M=!!(x!=null&&x.disableWarnings),D=gu(c),{host:v,port:E}=Sp(c),t=E===null?"":`:${E}`;P.config.emulator={url:`${D}//${v}${t}/`},P.settings.appVerificationDisabledForTesting=!0,P.emulatorConfig=Object.freeze({host:v,port:E,protocol:D.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||Cp()}function gu(A){const c=A.indexOf(":");return c<0?"":A.substr(0,c+1)}function Sp(A){const c=gu(A),x=/(\/\/)?([^?#/]+)/.exec(A.substr(c.length));if(!x)return{host:"",port:null};const P=x[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(P);if(M){const D=M[1];return{host:D,port:Ph(P.substr(D.length+1))}}else{const[D,v]=P.split(":");return{host:D,port:Ph(v)}}}function Ph(A){if(!A)return null;const c=Number(A);return isNaN(c)?null:c}function Cp(){function A(){const c=document.createElement("p"),x=c.style;c.innerText="Running in emulator mode. Do not use with production credentials.",x.position="fixed",x.width="100%",x.backgroundColor="#ffffff",x.border=".1em solid #000000",x.color="#b50000",x.bottom="0px",x.left="0px",x.margin="0px",x.zIndex="10000",x.textAlign="center",c.classList.add("firebase-emulator-warning"),document.body.appendChild(c)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(c,x){this.providerId=c,this.signInMethod=x}toJSON(){return Ge("not implemented")}_getIdTokenResponse(c){return Ge("not implemented")}_linkToIdToken(c,x){return Ge("not implemented")}_getReauthenticationResolver(c){return Ge("not implemented")}}async function Ap(A,c){return Qe(A,"POST","/v1/accounts:signUp",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pp(A,c){return $n(A,"POST","/v1/accounts:signInWithPassword",li(A,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rp(A,c){return $n(A,"POST","/v1/accounts:signInWithEmailLink",li(A,c))}async function Ip(A,c){return $n(A,"POST","/v1/accounts:signInWithEmailLink",li(A,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn extends Aa{constructor(c,x,P,M=null){super("password",P),this._email=c,this._password=x,this._tenantId=M}static _fromEmailAndPassword(c,x){return new Gn(c,x,"password")}static _fromEmailAndCode(c,x,P=null){return new Gn(c,x,"emailLink",P)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(c){const x=typeof c=="string"?JSON.parse(c):c;if(x!=null&&x.email&&(x!=null&&x.password)){if(x.signInMethod==="password")return this._fromEmailAndPassword(x.email,x.password);if(x.signInMethod==="emailLink")return this._fromEmailAndCode(x.email,x.password,x.tenantId)}return null}async _getIdTokenResponse(c){switch(this.signInMethod){case"password":const x={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _r(c,x,"signInWithPassword",Pp);case"emailLink":return Rp(c,{email:this._email,oobCode:this._password});default:Se(c,"internal-error")}}async _linkToIdToken(c,x){switch(this.signInMethod){case"password":const P={idToken:x,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _r(c,P,"signUpPassword",Ap);case"emailLink":return Ip(c,{idToken:x,email:this._email,oobCode:this._password});default:Se(c,"internal-error")}}_getReauthenticationResolver(c){return this._getIdTokenResponse(c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(A,c){return $n(A,"POST","/v1/accounts:signInWithIdp",li(A,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="http://localhost";class Ti extends Aa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(c){const x=new Ti(c.providerId,c.signInMethod);return c.idToken||c.accessToken?(c.idToken&&(x.idToken=c.idToken),c.accessToken&&(x.accessToken=c.accessToken),c.nonce&&!c.pendingToken&&(x.nonce=c.nonce),c.pendingToken&&(x.pendingToken=c.pendingToken)):c.oauthToken&&c.oauthTokenSecret?(x.accessToken=c.oauthToken,x.secret=c.oauthTokenSecret):Se("argument-error"),x}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(c){const x=typeof c=="string"?JSON.parse(c):c,{providerId:P,signInMethod:M}=x,D=ya(x,["providerId","signInMethod"]);if(!P||!M)return null;const v=new Ti(P,M);return v.idToken=D.idToken||void 0,v.accessToken=D.accessToken||void 0,v.secret=D.secret,v.nonce=D.nonce,v.pendingToken=D.pendingToken||null,v}_getIdTokenResponse(c){const x=this.buildRequest();return Hi(c,x)}_linkToIdToken(c,x){const P=this.buildRequest();return P.idToken=x,Hi(c,P)}_getReauthenticationResolver(c){const x=this.buildRequest();return x.autoCreate=!1,Hi(c,x)}buildRequest(){const c={requestUri:Mp,returnSecureToken:!0};if(this.pendingToken)c.pendingToken=this.pendingToken;else{const x={};this.idToken&&(x.id_token=this.idToken),this.accessToken&&(x.access_token=this.accessToken),this.secret&&(x.oauth_token_secret=this.secret),x.providerId=this.providerId,this.nonce&&!this.pendingToken&&(x.nonce=this.nonce),c.postBody=Hn(x)}return c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(A){switch(A){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Lp(A){const c=Cn(An(A)).link,x=c?Cn(An(c)).deep_link_id:null,P=Cn(An(A)).deep_link_id;return(P?Cn(An(P)).link:null)||P||x||c||A}class Pa{constructor(c){var x,P,M,D,v,E;const t=Cn(An(c)),o=(x=t.apiKey)!==null&&x!==void 0?x:null,g=(P=t.oobCode)!==null&&P!==void 0?P:null,a=wp((M=t.mode)!==null&&M!==void 0?M:null);Tt(o&&g&&a,"argument-error"),this.apiKey=o,this.operation=a,this.code=g,this.continueUrl=(D=t.continueUrl)!==null&&D!==void 0?D:null,this.languageCode=(v=t.languageCode)!==null&&v!==void 0?v:null,this.tenantId=(E=t.tenantId)!==null&&E!==void 0?E:null}static parseLink(c){const x=Lp(c);try{return new Pa(x)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(){this.providerId=en.PROVIDER_ID}static credential(c,x){return Gn._fromEmailAndPassword(c,x)}static credentialWithLink(c,x){const P=Pa.parseLink(x);return Tt(P,"argument-error"),Gn._fromEmailAndCode(c,P.code,P.tenantId)}}en.PROVIDER_ID="password";en.EMAIL_PASSWORD_SIGN_IN_METHOD="password";en.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(c){this.providerId=c,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(c){this.defaultLanguageCode=c}setCustomParameters(c){return this.customParameters=c,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn extends mu{constructor(){super(...arguments),this.scopes=[]}addScope(c){return this.scopes.includes(c)||this.scopes.push(c),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe extends Qn{constructor(){super("facebook.com")}static credential(c){return Ti._fromParams({providerId:qe.PROVIDER_ID,signInMethod:qe.FACEBOOK_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return qe.credentialFromTaggedObject(c)}static credentialFromError(c){return qe.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return qe.credential(c.oauthAccessToken)}catch{return null}}}qe.FACEBOOK_SIGN_IN_METHOD="facebook.com";qe.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e extends Qn{constructor(){super("google.com"),this.addScope("profile")}static credential(c,x){return Ti._fromParams({providerId:_e.PROVIDER_ID,signInMethod:_e.GOOGLE_SIGN_IN_METHOD,idToken:c,accessToken:x})}static credentialFromResult(c){return _e.credentialFromTaggedObject(c)}static credentialFromError(c){return _e.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthIdToken:x,oauthAccessToken:P}=c;if(!x&&!P)return null;try{return _e.credential(x,P)}catch{return null}}}_e.GOOGLE_SIGN_IN_METHOD="google.com";_e.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Qn{constructor(){super("github.com")}static credential(c){return Ti._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GITHUB_SIGN_IN_METHOD,accessToken:c})}static credentialFromResult(c){return ti.credentialFromTaggedObject(c)}static credentialFromError(c){return ti.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c||!("oauthAccessToken"in c)||!c.oauthAccessToken)return null;try{return ti.credential(c.oauthAccessToken)}catch{return null}}}ti.GITHUB_SIGN_IN_METHOD="github.com";ti.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei extends Qn{constructor(){super("twitter.com")}static credential(c,x){return Ti._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.TWITTER_SIGN_IN_METHOD,oauthToken:c,oauthTokenSecret:x})}static credentialFromResult(c){return ei.credentialFromTaggedObject(c)}static credentialFromError(c){return ei.credentialFromTaggedObject(c.customData||{})}static credentialFromTaggedObject({_tokenResponse:c}){if(!c)return null;const{oauthAccessToken:x,oauthTokenSecret:P}=c;if(!x||!P)return null;try{return ei.credential(x,P)}catch{return null}}}ei.TWITTER_SIGN_IN_METHOD="twitter.com";ei.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Op(A,c){return $n(A,"POST","/v1/accounts:signUp",li(A,c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(c){this.user=c.user,this.providerId=c.providerId,this._tokenResponse=c._tokenResponse,this.operationType=c.operationType}static async _fromIdTokenResponse(c,x,P,M=!1){const D=await Ue._fromIdTokenResponse(c,P,M),v=Rh(P);return new Ei({user:D,providerId:v,_tokenResponse:P,operationType:x})}static async _forOperation(c,x,P){await c._updateTokensIfNecessary(P,!0);const M=Rh(P);return new Ei({user:c,providerId:M,_tokenResponse:P,operationType:x})}}function Rh(A){return A.providerId?A.providerId:"phoneNumber"in A?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends Ae{constructor(c,x,P,M){var D;super(x.code,x.message),this.operationType=P,this.user=M,Object.setPrototypeOf(this,Vs.prototype),this.customData={appName:c.name,tenantId:(D=c.tenantId)!==null&&D!==void 0?D:void 0,_serverResponse:x.customData._serverResponse,operationType:P}}static _fromErrorAndOperation(c,x,P,M){return new Vs(c,x,P,M)}}function xu(A,c,x,P){return(c==="reauthenticate"?x._getReauthenticationResolver(A):x._getIdTokenResponse(A)).catch(D=>{throw D.code==="auth/multi-factor-auth-required"?Vs._fromErrorAndOperation(A,D,c,P):D})}async function Fp(A,c,x=!1){const P=await $i(A,c._linkToIdToken(A.auth,await A.getIdToken()),x);return Ei._forOperation(A,"link",P)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(A,c,x=!1){const{auth:P}=A;if(Re(P.app))return Promise.reject(ze(P));const M="reauthenticate";try{const D=await $i(A,xu(P,M,c,A),x);Tt(D.idToken,P,"internal-error");const v=Sa(D.idToken);Tt(v,P,"internal-error");const{sub:E}=v;return Tt(A.uid===E,P,"user-mismatch"),Ei._forOperation(A,M,D)}catch(D){throw(D==null?void 0:D.code)==="auth/user-not-found"&&Se(P,"user-mismatch"),D}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yu(A,c,x=!1){if(Re(A.app))return Promise.reject(ze(A));const P="signIn",M=await xu(A,P,c),D=await Ei._fromIdTokenResponse(A,P,M);return x||await A._updateCurrentUser(D.user),D}async function Np(A,c){return yu(Li(A),c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(A){const c=Li(A);c._getPasswordPolicyInternal()&&await c._updatePasswordPolicy()}async function Ih(A,c,x){if(Re(A.app))return Promise.reject(ze(A));const P=Li(A),v=await _r(P,{returnSecureToken:!0,email:c,password:x,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Op).catch(t=>{throw t.code==="auth/password-does-not-meet-requirements"&&Tu(A),t}),E=await Ei._fromIdTokenResponse(P,"signIn",v);return await P._updateCurrentUser(E.user),E}function Bp(A,c,x){return Re(A.app)?Promise.reject(ze(A)):Np(kt(A),en.credential(c,x)).catch(async P=>{throw P.code==="auth/password-does-not-meet-requirements"&&Tu(A),P})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vp(A,c){return Qe(A,"POST","/v1/accounts:update",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mh(A,{displayName:c,photoURL:x}){if(c===void 0&&x===void 0)return;const P=kt(A),D={idToken:await P.getIdToken(),displayName:c,photoUrl:x,returnSecureToken:!0},v=await $i(P,Vp(P.auth,D));P.displayName=v.displayName||null,P.photoURL=v.photoUrl||null;const E=P.providerData.find(({providerId:t})=>t==="password");E&&(E.displayName=P.displayName,E.photoURL=P.photoURL),await P._updateTokensIfNecessary(v)}function Gp(A,c,x,P){return kt(A).onIdTokenChanged(c,x,P)}function Up(A,c,x){return kt(A).beforeAuthStateChanged(c,x)}function bp(A,c,x,P){return kt(A).onAuthStateChanged(c,x,P)}function zp(A){return kt(A).signOut()}const Gs="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(c,x){this.storageRetriever=c,this.type=x}_isAvailable(){try{return this.storage?(this.storage.setItem(Gs,"1"),this.storage.removeItem(Gs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(c,x){return this.storage.setItem(c,JSON.stringify(x)),Promise.resolve()}_get(c){const x=this.storage.getItem(c);return Promise.resolve(x?JSON.parse(x):null)}_remove(c){return this.storage.removeItem(c),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=1e3,Wp=10;class Su extends Eu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(c,x)=>this.onStorageEvent(c,x),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cu(),this._shouldAllowMigration=!0}forAllChangedKeys(c){for(const x of Object.keys(this.listeners)){const P=this.storage.getItem(x),M=this.localCache[x];P!==M&&c(x,M,P)}}onStorageEvent(c,x=!1){if(!c.key){this.forAllChangedKeys((v,E,t)=>{this.notifyListeners(v,t)});return}const P=c.key;x?this.detachListener():this.stopPolling();const M=()=>{const v=this.storage.getItem(P);!x&&this.localCache[P]===v||this.notifyListeners(P,v)},D=this.storage.getItem(P);ap()&&D!==c.newValue&&c.newValue!==c.oldValue?setTimeout(M,Wp):M()}notifyListeners(c,x){this.localCache[c]=x;const P=this.listeners[c];if(P)for(const M of Array.from(P))M(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((c,x,P)=>{this.onStorageEvent(new StorageEvent("storage",{key:c,oldValue:x,newValue:P}),!0)})},Xp)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(c,x){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[c]||(this.listeners[c]=new Set,this.localCache[c]=this.storage.getItem(c)),this.listeners[c].add(x)}_removeListener(c,x){this.listeners[c]&&(this.listeners[c].delete(x),this.listeners[c].size===0&&delete this.listeners[c]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(c,x){await super._set(c,x),this.localCache[c]=JSON.stringify(x)}async _get(c){const x=await super._get(c);return this.localCache[c]=JSON.stringify(x),x}async _remove(c){await super._remove(c),delete this.localCache[c]}}Su.type="LOCAL";const Yp=Su;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Eu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(c,x){}_removeListener(c,x){}}Cu.type="SESSION";const Au=Cu;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(A){return Promise.all(A.map(async c=>{try{return{fulfilled:!0,value:await c}}catch(x){return{fulfilled:!1,reason:x}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(c){this.eventTarget=c,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(c){const x=this.receivers.find(M=>M.isListeningto(c));if(x)return x;const P=new _s(c);return this.receivers.push(P),P}isListeningto(c){return this.eventTarget===c}async handleEvent(c){const x=c,{eventId:P,eventType:M,data:D}=x.data,v=this.handlersMap[M];if(!(v!=null&&v.size))return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:M});const E=Array.from(v).map(async o=>o(x.origin,D)),t=await Hp(E);x.ports[0].postMessage({status:"done",eventId:P,eventType:M,response:t})}_subscribe(c,x){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[c]||(this.handlersMap[c]=new Set),this.handlersMap[c].add(x)}_unsubscribe(c,x){this.handlersMap[c]&&x&&this.handlersMap[c].delete(x),(!x||this.handlersMap[c].size===0)&&delete this.handlersMap[c],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_s.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ra(A="",c=10){let x="";for(let P=0;P<c;P++)x+=Math.floor(Math.random()*10);return A+x}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(c){this.target=c,this.handlers=new Set}removeMessageHandler(c){c.messageChannel&&(c.messageChannel.port1.removeEventListener("message",c.onMessage),c.messageChannel.port1.close()),this.handlers.delete(c)}async _send(c,x,P=50){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let D,v;return new Promise((E,t)=>{const o=Ra("",20);M.port1.start();const g=setTimeout(()=>{t(new Error("unsupported_event"))},P);v={messageChannel:M,onMessage(a){const r=a;if(r.data.eventId===o)switch(r.data.status){case"ack":clearTimeout(g),D=setTimeout(()=>{t(new Error("timeout"))},3e3);break;case"done":clearTimeout(D),E(r.data.response);break;default:clearTimeout(g),clearTimeout(D),t(new Error("invalid_response"));break}}},this.handlers.add(v),M.port1.addEventListener("message",v.onMessage),this.target.postMessage({eventType:c,eventId:o,data:x},[M.port2])}).finally(()=>{v&&this.removeMessageHandler(v)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(){return window}function $p(A){Me().location.href=A}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(){return typeof Me().WorkerGlobalScope<"u"&&typeof Me().importScripts=="function"}async function Qp(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Jp(){var A;return((A=navigator==null?void 0:navigator.serviceWorker)===null||A===void 0?void 0:A.controller)||null}function jp(){return Pu()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru="firebaseLocalStorageDb",Zp=1,Us="firebaseLocalStorage",Iu="fbase_key";class Jn{constructor(c){this.request=c}toPromise(){return new Promise((c,x)=>{this.request.addEventListener("success",()=>{c(this.request.result)}),this.request.addEventListener("error",()=>{x(this.request.error)})})}}function tr(A,c){return A.transaction([Us],c?"readwrite":"readonly").objectStore(Us)}function kp(){const A=indexedDB.deleteDatabase(Ru);return new Jn(A).toPromise()}function ta(){const A=indexedDB.open(Ru,Zp);return new Promise((c,x)=>{A.addEventListener("error",()=>{x(A.error)}),A.addEventListener("upgradeneeded",()=>{const P=A.result;try{P.createObjectStore(Us,{keyPath:Iu})}catch(M){x(M)}}),A.addEventListener("success",async()=>{const P=A.result;P.objectStoreNames.contains(Us)?c(P):(P.close(),await kp(),c(await ta()))})})}async function wh(A,c,x){const P=tr(A,!0).put({[Iu]:c,value:x});return new Jn(P).toPromise()}async function qp(A,c){const x=tr(A,!1).get(c),P=await new Jn(x).toPromise();return P===void 0?null:P.value}function Lh(A,c){const x=tr(A,!0).delete(c);return new Jn(x).toPromise()}const _p=800,tg=3;class Mu{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ta(),this.db)}async _withRetries(c){let x=0;for(;;)try{const P=await this._openDb();return await c(P)}catch(P){if(x++>tg)throw P;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Pu()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_s._getInstance(jp()),this.receiver._subscribe("keyChanged",async(c,x)=>({keyProcessed:(await this._poll()).includes(x.key)})),this.receiver._subscribe("ping",async(c,x)=>["keyChanged"])}async initializeSender(){var c,x;if(this.activeServiceWorker=await Qp(),!this.activeServiceWorker)return;this.sender=new Kp(this.activeServiceWorker);const P=await this.sender._send("ping",{},800);P&&!((c=P[0])===null||c===void 0)&&c.fulfilled&&!((x=P[0])===null||x===void 0)&&x.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(c){if(!(!this.sender||!this.activeServiceWorker||Jp()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:c},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const c=await ta();return await wh(c,Gs,"1"),await Lh(c,Gs),!0}catch{}return!1}async _withPendingWrite(c){this.pendingWrites++;try{await c()}finally{this.pendingWrites--}}async _set(c,x){return this._withPendingWrite(async()=>(await this._withRetries(P=>wh(P,c,x)),this.localCache[c]=x,this.notifyServiceWorker(c)))}async _get(c){const x=await this._withRetries(P=>qp(P,c));return this.localCache[c]=x,x}async _remove(c){return this._withPendingWrite(async()=>(await this._withRetries(x=>Lh(x,c)),delete this.localCache[c],this.notifyServiceWorker(c)))}async _poll(){const c=await this._withRetries(M=>{const D=tr(M,!1).getAll();return new Jn(D).toPromise()});if(!c)return[];if(this.pendingWrites!==0)return[];const x=[],P=new Set;if(c.length!==0)for(const{fbase_key:M,value:D}of c)P.add(M),JSON.stringify(this.localCache[M])!==JSON.stringify(D)&&(this.notifyListeners(M,D),x.push(M));for(const M of Object.keys(this.localCache))this.localCache[M]&&!P.has(M)&&(this.notifyListeners(M,null),x.push(M));return x}notifyListeners(c,x){this.localCache[c]=x;const P=this.listeners[c];if(P)for(const M of Array.from(P))M(x)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_p)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(c,x){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[c]||(this.listeners[c]=new Set,this._get(c)),this.listeners[c].add(x)}_removeListener(c,x){this.listeners[c]&&(this.listeners[c].delete(x),this.listeners[c].size===0&&delete this.listeners[c]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Mu.type="LOCAL";const eg=Mu;new Kn(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(A,c){return c?be(c):(Tt(A._popupRedirectResolver,A,"argument-error"),A._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends Aa{constructor(c){super("custom","custom"),this.params=c}_getIdTokenResponse(c){return Hi(c,this._buildIdpRequest())}_linkToIdToken(c,x){return Hi(c,this._buildIdpRequest(x))}_getReauthenticationResolver(c){return Hi(c,this._buildIdpRequest())}_buildIdpRequest(c){const x={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return c&&(x.idToken=c),x}}function ng(A){return yu(A.auth,new Ia(A),A.bypassAuthState)}function sg(A){const{auth:c,user:x}=A;return Tt(x,c,"internal-error"),Dp(x,new Ia(A),A.bypassAuthState)}async function rg(A){const{auth:c,user:x}=A;return Tt(x,c,"internal-error"),Fp(x,new Ia(A),A.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(c,x,P,M,D=!1){this.auth=c,this.resolver=P,this.user=M,this.bypassAuthState=D,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(x)?x:[x]}execute(){return new Promise(async(c,x)=>{this.pendingPromise={resolve:c,reject:x};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(P){this.reject(P)}})}async onAuthEvent(c){const{urlResponse:x,sessionId:P,postBody:M,tenantId:D,error:v,type:E}=c;if(v){this.reject(v);return}const t={auth:this.auth,requestUri:x,sessionId:P,tenantId:D||void 0,postBody:M||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(E)(t))}catch(o){this.reject(o)}}onError(c){this.reject(c)}getIdpTask(c){switch(c){case"signInViaPopup":case"signInViaRedirect":return ng;case"linkViaPopup":case"linkViaRedirect":return rg;case"reauthViaPopup":case"reauthViaRedirect":return sg;default:Se(this.auth,"internal-error")}}resolve(c){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(c),this.unregisterAndCleanUp()}reject(c){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(c),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new Kn(2e3,1e4);class zi extends wu{constructor(c,x,P,M,D){super(c,x,M,D),this.provider=P,this.authWindow=null,this.pollId=null,zi.currentPopupAction&&zi.currentPopupAction.cancel(),zi.currentPopupAction=this}async executeNotNull(){const c=await this.execute();return Tt(c,this.auth,"internal-error"),c}async onExecution(){He(this.filter.length===1,"Popup operations only handle one event");const c=Ra();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],c),this.authWindow.associatedEvent=c,this.resolver._originValidation(this.auth).catch(x=>{this.reject(x)}),this.resolver._isIframeWebStorageSupported(this.auth,x=>{x||this.reject(Ie(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var c;return((c=this.authWindow)===null||c===void 0?void 0:c.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zi.currentPopupAction=null}pollUserCancellation(){const c=()=>{var x,P;if(!((P=(x=this.authWindow)===null||x===void 0?void 0:x.window)===null||P===void 0)&&P.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(c,ag.get())};c()}}zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="pendingRedirect",Ps=new Map;class hg extends wu{constructor(c,x,P=!1){super(c,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],x,void 0,P),this.eventId=null}async execute(){let c=Ps.get(this.auth._key());if(!c){try{const P=await lg(this.resolver,this.auth)?await super.execute():null;c=()=>Promise.resolve(P)}catch(x){c=()=>Promise.reject(x)}Ps.set(this.auth._key(),c)}return this.bypassAuthState||Ps.set(this.auth._key(),()=>Promise.resolve(null)),c()}async onAuthEvent(c){if(c.type==="signInViaRedirect")return super.onAuthEvent(c);if(c.type==="unknown"){this.resolve(null);return}if(c.eventId){const x=await this.auth._redirectUserForId(c.eventId);if(x)return this.user=x,super.onAuthEvent(c);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lg(A,c){const x=dg(c),P=fg(A);if(!await P._isAvailable())return!1;const M=await P._get(x)==="true";return await P._remove(x),M}function ug(A,c){Ps.set(A._key(),c)}function fg(A){return be(A._redirectPersistence)}function dg(A){return As(og,A.config.apiKey,A.name)}async function cg(A,c,x=!1){if(Re(A.app))return Promise.reject(ze(A));const P=Li(A),M=ig(P,c),v=await new hg(P,M,x).execute();return v&&!x&&(delete v.user._redirectEventId,await P._persistUserIfCurrent(v.user),await P._setRedirectUser(null,c)),v}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vg=10*60*1e3;class pg{constructor(c){this.auth=c,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(c){this.consumers.add(c),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,c)&&(this.sendToConsumer(this.queuedRedirectEvent,c),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(c){this.consumers.delete(c)}onEvent(c){if(this.hasEventBeenHandled(c))return!1;let x=!1;return this.consumers.forEach(P=>{this.isEventForConsumer(c,P)&&(x=!0,this.sendToConsumer(c,P),this.saveEventToCache(c))}),this.hasHandledPotentialRedirect||!gg(c)||(this.hasHandledPotentialRedirect=!0,x||(this.queuedRedirectEvent=c,x=!0)),x}sendToConsumer(c,x){var P;if(c.error&&!Lu(c)){const M=((P=c.error.code)===null||P===void 0?void 0:P.split("auth/")[1])||"internal-error";x.onError(Ie(this.auth,M))}else x.onAuthEvent(c)}isEventForConsumer(c,x){const P=x.eventId===null||!!c.eventId&&c.eventId===x.eventId;return x.filter.includes(c.type)&&P}hasEventBeenHandled(c){return Date.now()-this.lastProcessedEventTime>=vg&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oh(c))}saveEventToCache(c){this.cachedEventUids.add(Oh(c)),this.lastProcessedEventTime=Date.now()}}function Oh(A){return[A.type,A.eventId,A.sessionId,A.tenantId].filter(c=>c).join("-")}function Lu({type:A,error:c}){return A==="unknown"&&(c==null?void 0:c.code)==="auth/no-auth-event"}function gg(A){switch(A.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lu(A);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mg(A,c={}){return Qe(A,"GET","/v1/projects",c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yg=/^https?/;async function Tg(A){if(A.config.emulator)return;const{authorizedDomains:c}=await mg(A);for(const x of c)try{if(Eg(x))return}catch{}Se(A,"unauthorized-domain")}function Eg(A){const c=kr(),{protocol:x,hostname:P}=new URL(c);if(A.startsWith("chrome-extension://")){const v=new URL(A);return v.hostname===""&&P===""?x==="chrome-extension:"&&A.replace("chrome-extension://","")===c.replace("chrome-extension://",""):x==="chrome-extension:"&&v.hostname===P}if(!yg.test(x))return!1;if(xg.test(A))return P===A;const M=A.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(P)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=new Kn(3e4,6e4);function Fh(){const A=Me().___jsl;if(A!=null&&A.H){for(const c of Object.keys(A.H))if(A.H[c].r=A.H[c].r||[],A.H[c].L=A.H[c].L||[],A.H[c].r=[...A.H[c].L],A.CP)for(let x=0;x<A.CP.length;x++)A.CP[x]=null}}function Cg(A){return new Promise((c,x)=>{var P,M,D;function v(){Fh(),gapi.load("gapi.iframes",{callback:()=>{c(gapi.iframes.getContext())},ontimeout:()=>{Fh(),x(Ie(A,"network-request-failed"))},timeout:Sg.get()})}if(!((M=(P=Me().gapi)===null||P===void 0?void 0:P.iframes)===null||M===void 0)&&M.Iframe)c(gapi.iframes.getContext());else if(!((D=Me().gapi)===null||D===void 0)&&D.load)v();else{const E=pp("iframefcb");return Me()[E]=()=>{gapi.load?v():x(Ie(A,"network-request-failed"))},pu(`${vp()}?onload=${E}`).catch(t=>x(t))}}).catch(c=>{throw Rs=null,c})}let Rs=null;function Ag(A){return Rs=Rs||Cg(A),Rs}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=new Kn(5e3,15e3),Rg="__/auth/iframe",Ig="emulator/auth/iframe",Mg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Lg(A){const c=A.config;Tt(c.authDomain,A,"auth-domain-config-required");const x=c.emulator?Ea(c,Ig):`https://${A.config.authDomain}/${Rg}`,P={apiKey:c.apiKey,appName:A.name,v:tn},M=wg.get(A.config.apiHost);M&&(P.eid=M);const D=A._getFrameworks();return D.length&&(P.fw=D.join(",")),`${x}?${Hn(P).slice(1)}`}async function Og(A){const c=await Ag(A),x=Me().gapi;return Tt(x,A,"internal-error"),c.open({where:document.body,url:Lg(A),messageHandlersFilter:x.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mg,dontclear:!0},P=>new Promise(async(M,D)=>{await P.restyle({setHideOnLeave:!1});const v=Ie(A,"network-request-failed"),E=Me().setTimeout(()=>{D(v)},Pg.get());function t(){Me().clearTimeout(E),M(P)}P.ping(t).then(t,()=>{D(v)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Dg=500,Ng=600,Bg="_blank",Vg="http://localhost";class Dh{constructor(c){this.window=c,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Gg(A,c,x,P=Dg,M=Ng){const D=Math.max((window.screen.availHeight-M)/2,0).toString(),v=Math.max((window.screen.availWidth-P)/2,0).toString();let E="";const t=Object.assign(Object.assign({},Fg),{width:P.toString(),height:M.toString(),top:D,left:v}),o=le().toLowerCase();x&&(E=hu(o)?Bg:x),au(o)&&(c=c||Vg,t.scrollbars="yes");const g=Object.entries(t).reduce((r,[s,e])=>`${r}${s}=${e},`,"");if(rp(o)&&E!=="_self")return Ug(c||"",E),new Dh(null);const a=window.open(c||"",E,g);Tt(a,A,"popup-blocked");try{a.focus()}catch{}return new Dh(a)}function Ug(A,c){const x=document.createElement("a");x.href=A,x.target=c;const P=document.createEvent("MouseEvent");P.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),x.dispatchEvent(P)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bg="__/auth/handler",zg="emulator/auth/handler",Xg=encodeURIComponent("fac");async function Nh(A,c,x,P,M,D){Tt(A.config.authDomain,A,"auth-domain-config-required"),Tt(A.config.apiKey,A,"invalid-api-key");const v={apiKey:A.config.apiKey,appName:A.name,authType:x,redirectUrl:P,v:tn,eventId:M};if(c instanceof mu){c.setDefaultLanguage(A.languageCode),v.providerId=c.providerId||"",Rc(c.getCustomParameters())||(v.customParameters=JSON.stringify(c.getCustomParameters()));for(const[g,a]of Object.entries(D||{}))v[g]=a}if(c instanceof Qn){const g=c.getScopes().filter(a=>a!=="");g.length>0&&(v.scopes=g.join(","))}A.tenantId&&(v.tid=A.tenantId);const E=v;for(const g of Object.keys(E))E[g]===void 0&&delete E[g];const t=await A._getAppCheckToken(),o=t?`#${Xg}=${encodeURIComponent(t)}`:"";return`${Wg(A)}?${Hn(E).slice(1)}${o}`}function Wg({config:A}){return A.emulator?Ea(A,zg):`https://${A.authDomain}/${bg}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="webStorageSupport";class Yg{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Au,this._completeRedirectFn=cg,this._overrideRedirectResult=ug}async _openPopup(c,x,P,M){var D;He((D=this.eventManagers[c._key()])===null||D===void 0?void 0:D.manager,"_initialize() not called before _openPopup()");const v=await Nh(c,x,P,kr(),M);return Gg(c,v,Ra())}async _openRedirect(c,x,P,M){await this._originValidation(c);const D=await Nh(c,x,P,kr(),M);return $p(D),new Promise(()=>{})}_initialize(c){const x=c._key();if(this.eventManagers[x]){const{manager:M,promise:D}=this.eventManagers[x];return M?Promise.resolve(M):(He(D,"If manager is not set, promise should be"),D)}const P=this.initAndGetManager(c);return this.eventManagers[x]={promise:P},P.catch(()=>{delete this.eventManagers[x]}),P}async initAndGetManager(c){const x=await Og(c),P=new pg(c);return x.register("authEvent",M=>(Tt(M==null?void 0:M.authEvent,c,"invalid-auth-event"),{status:P.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[c._key()]={manager:P},this.iframes[c._key()]=x,P}_isIframeWebStorageSupported(c,x){this.iframes[c._key()].send(Gr,{type:Gr},M=>{var D;const v=(D=M==null?void 0:M[0])===null||D===void 0?void 0:D[Gr];v!==void 0&&x(!!v),Se(c,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(c){const x=c._key();return this.originValidationPromises[x]||(this.originValidationPromises[x]=Tg(c)),this.originValidationPromises[x]}get _shouldInitProactively(){return cu()||ou()||Ca()}}const Hg=Yg;var Bh="@firebase/auth",Vh="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(c){this.auth=c,this.internalListeners=new Map}getUid(){var c;return this.assertAuthConfigured(),((c=this.auth.currentUser)===null||c===void 0?void 0:c.uid)||null}async getToken(c){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(c)}:null}addAuthTokenListener(c){if(this.assertAuthConfigured(),this.internalListeners.has(c))return;const x=this.auth.onIdTokenChanged(P=>{c((P==null?void 0:P.stsTokenManager.accessToken)||null)});this.internalListeners.set(c,x),this.updateProactiveRefresh()}removeAuthTokenListener(c){this.assertAuthConfigured();const x=this.internalListeners.get(c);x&&(this.internalListeners.delete(c),x(),this.updateProactiveRefresh())}assertAuthConfigured(){Tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(A){switch(A){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Qg(A){Oe(new Ee("auth",(c,{options:x})=>{const P=c.getProvider("app").getImmediate(),M=c.getProvider("heartbeat"),D=c.getProvider("app-check-internal"),{apiKey:v,authDomain:E}=P.options;Tt(v&&!v.includes(":"),"invalid-api-key",{appName:P.name});const t={apiKey:v,authDomain:E,clientPlatform:A,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vu(A)},o=new fp(P,M,D,t);return Tp(o,x),o},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((c,x,P)=>{c.getProvider("auth-internal").initialize()})),Oe(new Ee("auth-internal",c=>{const x=Li(c.getProvider("auth").getImmediate());return(P=>new Kg(P))(x)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge(Bh,Vh,$g(A)),ge(Bh,Vh,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg=5*60,jg=Xl("authIdTokenMaxAge")||Jg;let Gh=null;const Zg=A=>async c=>{const x=c&&await c.getIdTokenResult(),P=x&&(new Date().getTime()-Date.parse(x.issuedAtTime))/1e3;if(P&&P>jg)return;const M=x==null?void 0:x.token;Gh!==M&&(Gh=M,await fetch(A,{method:M?"POST":"DELETE",headers:M?{Authorization:`Bearer ${M}`}:{}}))};function kg(A=xa()){const c=wi(A,"auth");if(c.isInitialized())return c.getImmediate();const x=yp(A,{popupRedirectResolver:Hg,persistence:[eg,Yp,Au]}),P=Xl("authTokenSyncURL");if(P&&typeof isSecureContext=="boolean"&&isSecureContext){const D=new URL(P,location.origin);if(location.origin===D.origin){const v=Zg(D.toString());Up(x,v,()=>v(x.currentUser)),Gp(x,E=>v(E))}}const M=bl("auth");return M&&Ep(x,`http://${M}`),x}function qg(){var A,c;return(c=(A=document.getElementsByTagName("head"))===null||A===void 0?void 0:A[0])!==null&&c!==void 0?c:document}dp({loadJS(A){return new Promise((c,x)=>{const P=document.createElement("script");P.setAttribute("src",A),P.onload=c,P.onerror=M=>{const D=Ie("internal-error");D.customData=M,x(D)},P.type="text/javascript",P.charset="UTF-8",qg().appendChild(P)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Qg("Browser");var _g="firebase",tm="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ge(_g,tm,"app");var Uh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,Ou;(function(){var A;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function c(m,T){function y(){}y.prototype=T.prototype,m.D=T.prototype,m.prototype=new y,m.prototype.constructor=m,m.C=function(S,C,R){for(var I=Array(arguments.length-2),L=2;L<arguments.length;L++)I[L-2]=arguments[L];return T.prototype[C].apply(S,I)}}function x(){this.blockSize=-1}function P(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}c(P,x),P.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function M(m,T,y){y||(y=0);var S=Array(16);if(typeof T=="string")for(var C=0;16>C;++C)S[C]=T.charCodeAt(y++)|T.charCodeAt(y++)<<8|T.charCodeAt(y++)<<16|T.charCodeAt(y++)<<24;else for(C=0;16>C;++C)S[C]=T[y++]|T[y++]<<8|T[y++]<<16|T[y++]<<24;T=m.g[0],y=m.g[1],C=m.g[2];var R=m.g[3],I=T+(R^y&(C^R))+S[0]+3614090360&4294967295;T=y+(I<<7&4294967295|I>>>25),I=R+(C^T&(y^C))+S[1]+3905402710&4294967295,R=T+(I<<12&4294967295|I>>>20),I=C+(y^R&(T^y))+S[2]+606105819&4294967295,C=R+(I<<17&4294967295|I>>>15),I=y+(T^C&(R^T))+S[3]+3250441966&4294967295,y=C+(I<<22&4294967295|I>>>10),I=T+(R^y&(C^R))+S[4]+4118548399&4294967295,T=y+(I<<7&4294967295|I>>>25),I=R+(C^T&(y^C))+S[5]+1200080426&4294967295,R=T+(I<<12&4294967295|I>>>20),I=C+(y^R&(T^y))+S[6]+2821735955&4294967295,C=R+(I<<17&4294967295|I>>>15),I=y+(T^C&(R^T))+S[7]+4249261313&4294967295,y=C+(I<<22&4294967295|I>>>10),I=T+(R^y&(C^R))+S[8]+1770035416&4294967295,T=y+(I<<7&4294967295|I>>>25),I=R+(C^T&(y^C))+S[9]+2336552879&4294967295,R=T+(I<<12&4294967295|I>>>20),I=C+(y^R&(T^y))+S[10]+4294925233&4294967295,C=R+(I<<17&4294967295|I>>>15),I=y+(T^C&(R^T))+S[11]+2304563134&4294967295,y=C+(I<<22&4294967295|I>>>10),I=T+(R^y&(C^R))+S[12]+1804603682&4294967295,T=y+(I<<7&4294967295|I>>>25),I=R+(C^T&(y^C))+S[13]+4254626195&4294967295,R=T+(I<<12&4294967295|I>>>20),I=C+(y^R&(T^y))+S[14]+2792965006&4294967295,C=R+(I<<17&4294967295|I>>>15),I=y+(T^C&(R^T))+S[15]+1236535329&4294967295,y=C+(I<<22&4294967295|I>>>10),I=T+(C^R&(y^C))+S[1]+4129170786&4294967295,T=y+(I<<5&4294967295|I>>>27),I=R+(y^C&(T^y))+S[6]+3225465664&4294967295,R=T+(I<<9&4294967295|I>>>23),I=C+(T^y&(R^T))+S[11]+643717713&4294967295,C=R+(I<<14&4294967295|I>>>18),I=y+(R^T&(C^R))+S[0]+3921069994&4294967295,y=C+(I<<20&4294967295|I>>>12),I=T+(C^R&(y^C))+S[5]+3593408605&4294967295,T=y+(I<<5&4294967295|I>>>27),I=R+(y^C&(T^y))+S[10]+38016083&4294967295,R=T+(I<<9&4294967295|I>>>23),I=C+(T^y&(R^T))+S[15]+3634488961&4294967295,C=R+(I<<14&4294967295|I>>>18),I=y+(R^T&(C^R))+S[4]+3889429448&4294967295,y=C+(I<<20&4294967295|I>>>12),I=T+(C^R&(y^C))+S[9]+568446438&4294967295,T=y+(I<<5&4294967295|I>>>27),I=R+(y^C&(T^y))+S[14]+3275163606&4294967295,R=T+(I<<9&4294967295|I>>>23),I=C+(T^y&(R^T))+S[3]+4107603335&4294967295,C=R+(I<<14&4294967295|I>>>18),I=y+(R^T&(C^R))+S[8]+1163531501&4294967295,y=C+(I<<20&4294967295|I>>>12),I=T+(C^R&(y^C))+S[13]+2850285829&4294967295,T=y+(I<<5&4294967295|I>>>27),I=R+(y^C&(T^y))+S[2]+4243563512&4294967295,R=T+(I<<9&4294967295|I>>>23),I=C+(T^y&(R^T))+S[7]+1735328473&4294967295,C=R+(I<<14&4294967295|I>>>18),I=y+(R^T&(C^R))+S[12]+2368359562&4294967295,y=C+(I<<20&4294967295|I>>>12),I=T+(y^C^R)+S[5]+4294588738&4294967295,T=y+(I<<4&4294967295|I>>>28),I=R+(T^y^C)+S[8]+2272392833&4294967295,R=T+(I<<11&4294967295|I>>>21),I=C+(R^T^y)+S[11]+1839030562&4294967295,C=R+(I<<16&4294967295|I>>>16),I=y+(C^R^T)+S[14]+4259657740&4294967295,y=C+(I<<23&4294967295|I>>>9),I=T+(y^C^R)+S[1]+2763975236&4294967295,T=y+(I<<4&4294967295|I>>>28),I=R+(T^y^C)+S[4]+1272893353&4294967295,R=T+(I<<11&4294967295|I>>>21),I=C+(R^T^y)+S[7]+4139469664&4294967295,C=R+(I<<16&4294967295|I>>>16),I=y+(C^R^T)+S[10]+3200236656&4294967295,y=C+(I<<23&4294967295|I>>>9),I=T+(y^C^R)+S[13]+681279174&4294967295,T=y+(I<<4&4294967295|I>>>28),I=R+(T^y^C)+S[0]+3936430074&4294967295,R=T+(I<<11&4294967295|I>>>21),I=C+(R^T^y)+S[3]+3572445317&4294967295,C=R+(I<<16&4294967295|I>>>16),I=y+(C^R^T)+S[6]+76029189&4294967295,y=C+(I<<23&4294967295|I>>>9),I=T+(y^C^R)+S[9]+3654602809&4294967295,T=y+(I<<4&4294967295|I>>>28),I=R+(T^y^C)+S[12]+3873151461&4294967295,R=T+(I<<11&4294967295|I>>>21),I=C+(R^T^y)+S[15]+530742520&4294967295,C=R+(I<<16&4294967295|I>>>16),I=y+(C^R^T)+S[2]+3299628645&4294967295,y=C+(I<<23&4294967295|I>>>9),I=T+(C^(y|~R))+S[0]+4096336452&4294967295,T=y+(I<<6&4294967295|I>>>26),I=R+(y^(T|~C))+S[7]+1126891415&4294967295,R=T+(I<<10&4294967295|I>>>22),I=C+(T^(R|~y))+S[14]+2878612391&4294967295,C=R+(I<<15&4294967295|I>>>17),I=y+(R^(C|~T))+S[5]+4237533241&4294967295,y=C+(I<<21&4294967295|I>>>11),I=T+(C^(y|~R))+S[12]+1700485571&4294967295,T=y+(I<<6&4294967295|I>>>26),I=R+(y^(T|~C))+S[3]+2399980690&4294967295,R=T+(I<<10&4294967295|I>>>22),I=C+(T^(R|~y))+S[10]+4293915773&4294967295,C=R+(I<<15&4294967295|I>>>17),I=y+(R^(C|~T))+S[1]+2240044497&4294967295,y=C+(I<<21&4294967295|I>>>11),I=T+(C^(y|~R))+S[8]+1873313359&4294967295,T=y+(I<<6&4294967295|I>>>26),I=R+(y^(T|~C))+S[15]+4264355552&4294967295,R=T+(I<<10&4294967295|I>>>22),I=C+(T^(R|~y))+S[6]+2734768916&4294967295,C=R+(I<<15&4294967295|I>>>17),I=y+(R^(C|~T))+S[13]+1309151649&4294967295,y=C+(I<<21&4294967295|I>>>11),I=T+(C^(y|~R))+S[4]+4149444226&4294967295,T=y+(I<<6&4294967295|I>>>26),I=R+(y^(T|~C))+S[11]+3174756917&4294967295,R=T+(I<<10&4294967295|I>>>22),I=C+(T^(R|~y))+S[2]+718787259&4294967295,C=R+(I<<15&4294967295|I>>>17),I=y+(R^(C|~T))+S[9]+3951481745&4294967295,m.g[0]=m.g[0]+T&4294967295,m.g[1]=m.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,m.g[2]=m.g[2]+C&4294967295,m.g[3]=m.g[3]+R&4294967295}P.prototype.u=function(m,T){T===void 0&&(T=m.length);for(var y=T-this.blockSize,S=this.B,C=this.h,R=0;R<T;){if(C==0)for(;R<=y;)M(this,m,R),R+=this.blockSize;if(typeof m=="string"){for(;R<T;)if(S[C++]=m.charCodeAt(R++),C==this.blockSize){M(this,S),C=0;break}}else for(;R<T;)if(S[C++]=m[R++],C==this.blockSize){M(this,S),C=0;break}}this.h=C,this.o+=T},P.prototype.v=function(){var m=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);m[0]=128;for(var T=1;T<m.length-8;++T)m[T]=0;var y=8*this.o;for(T=m.length-8;T<m.length;++T)m[T]=y&255,y/=256;for(this.u(m),m=Array(16),T=y=0;4>T;++T)for(var S=0;32>S;S+=8)m[y++]=this.g[T]>>>S&255;return m};function D(m,T){var y=E;return Object.prototype.hasOwnProperty.call(y,m)?y[m]:y[m]=T(m)}function v(m,T){this.h=T;for(var y=[],S=!0,C=m.length-1;0<=C;C--){var R=m[C]|0;S&&R==T||(y[C]=R,S=!1)}this.g=y}var E={};function t(m){return-128<=m&&128>m?D(m,function(T){return new v([T|0],0>T?-1:0)}):new v([m|0],0>m?-1:0)}function o(m){if(isNaN(m)||!isFinite(m))return a;if(0>m)return h(o(-m));for(var T=[],y=1,S=0;m>=y;S++)T[S]=m/y|0,y*=4294967296;return new v(T,0)}function g(m,T){if(m.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(m.charAt(0)=="-")return h(g(m.substring(1),T));if(0<=m.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=o(Math.pow(T,8)),S=a,C=0;C<m.length;C+=8){var R=Math.min(8,m.length-C),I=parseInt(m.substring(C,C+R),T);8>R?(R=o(Math.pow(T,R)),S=S.j(R).add(o(I))):(S=S.j(y),S=S.add(o(I)))}return S}var a=t(0),r=t(1),s=t(16777216);A=v.prototype,A.m=function(){if(n(this))return-h(this).m();for(var m=0,T=1,y=0;y<this.g.length;y++){var S=this.i(y);m+=(0<=S?S:4294967296+S)*T,T*=4294967296}return m},A.toString=function(m){if(m=m||10,2>m||36<m)throw Error("radix out of range: "+m);if(e(this))return"0";if(n(this))return"-"+h(this).toString(m);for(var T=o(Math.pow(m,6)),y=this,S="";;){var C=u(y,T).g;y=i(y,C.j(T));var R=((0<y.g.length?y.g[0]:y.h)>>>0).toString(m);if(y=C,e(y))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},A.i=function(m){return 0>m?0:m<this.g.length?this.g[m]:this.h};function e(m){if(m.h!=0)return!1;for(var T=0;T<m.g.length;T++)if(m.g[T]!=0)return!1;return!0}function n(m){return m.h==-1}A.l=function(m){return m=i(this,m),n(m)?-1:e(m)?0:1};function h(m){for(var T=m.g.length,y=[],S=0;S<T;S++)y[S]=~m.g[S];return new v(y,~m.h).add(r)}A.abs=function(){return n(this)?h(this):this},A.add=function(m){for(var T=Math.max(this.g.length,m.g.length),y=[],S=0,C=0;C<=T;C++){var R=S+(this.i(C)&65535)+(m.i(C)&65535),I=(R>>>16)+(this.i(C)>>>16)+(m.i(C)>>>16);S=I>>>16,R&=65535,I&=65535,y[C]=I<<16|R}return new v(y,y[y.length-1]&-2147483648?-1:0)};function i(m,T){return m.add(h(T))}A.j=function(m){if(e(this)||e(m))return a;if(n(this))return n(m)?h(this).j(h(m)):h(h(this).j(m));if(n(m))return h(this.j(h(m)));if(0>this.l(s)&&0>m.l(s))return o(this.m()*m.m());for(var T=this.g.length+m.g.length,y=[],S=0;S<2*T;S++)y[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<m.g.length;C++){var R=this.i(S)>>>16,I=this.i(S)&65535,L=m.i(C)>>>16,w=m.i(C)&65535;y[2*S+2*C]+=I*w,l(y,2*S+2*C),y[2*S+2*C+1]+=R*w,l(y,2*S+2*C+1),y[2*S+2*C+1]+=I*L,l(y,2*S+2*C+1),y[2*S+2*C+2]+=R*L,l(y,2*S+2*C+2)}for(S=0;S<T;S++)y[S]=y[2*S+1]<<16|y[2*S];for(S=T;S<2*T;S++)y[S]=0;return new v(y,0)};function l(m,T){for(;(m[T]&65535)!=m[T];)m[T+1]+=m[T]>>>16,m[T]&=65535,T++}function f(m,T){this.g=m,this.h=T}function u(m,T){if(e(T))throw Error("division by zero");if(e(m))return new f(a,a);if(n(m))return T=u(h(m),T),new f(h(T.g),h(T.h));if(n(T))return T=u(m,h(T)),new f(h(T.g),T.h);if(30<m.g.length){if(n(m)||n(T))throw Error("slowDivide_ only works with positive integers.");for(var y=r,S=T;0>=S.l(m);)y=d(y),S=d(S);var C=p(y,1),R=p(S,1);for(S=p(S,2),y=p(y,2);!e(S);){var I=R.add(S);0>=I.l(m)&&(C=C.add(y),R=I),S=p(S,1),y=p(y,1)}return T=i(m,C.j(T)),new f(C,T)}for(C=a;0<=m.l(T);){for(y=Math.max(1,Math.floor(m.m()/T.m())),S=Math.ceil(Math.log(y)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=o(y),I=R.j(T);n(I)||0<I.l(m);)y-=S,R=o(y),I=R.j(T);e(R)&&(R=r),C=C.add(R),m=i(m,I)}return new f(C,m)}A.A=function(m){return u(this,m).h},A.and=function(m){for(var T=Math.max(this.g.length,m.g.length),y=[],S=0;S<T;S++)y[S]=this.i(S)&m.i(S);return new v(y,this.h&m.h)},A.or=function(m){for(var T=Math.max(this.g.length,m.g.length),y=[],S=0;S<T;S++)y[S]=this.i(S)|m.i(S);return new v(y,this.h|m.h)},A.xor=function(m){for(var T=Math.max(this.g.length,m.g.length),y=[],S=0;S<T;S++)y[S]=this.i(S)^m.i(S);return new v(y,this.h^m.h)};function d(m){for(var T=m.g.length+1,y=[],S=0;S<T;S++)y[S]=m.i(S)<<1|m.i(S-1)>>>31;return new v(y,m.h)}function p(m,T){var y=T>>5;T%=32;for(var S=m.g.length-y,C=[],R=0;R<S;R++)C[R]=0<T?m.i(R+y)>>>T|m.i(R+y+1)<<32-T:m.i(R+y);return new v(C,m.h)}P.prototype.digest=P.prototype.v,P.prototype.reset=P.prototype.s,P.prototype.update=P.prototype.u,Ou=P,v.prototype.add=v.prototype.add,v.prototype.multiply=v.prototype.j,v.prototype.modulo=v.prototype.A,v.prototype.compare=v.prototype.l,v.prototype.toNumber=v.prototype.m,v.prototype.toString=v.prototype.toString,v.prototype.getBits=v.prototype.i,v.fromNumber=o,v.fromString=g,yi=v}).apply(typeof Uh<"u"?Uh:typeof self<"u"?self:typeof window<"u"?window:{});var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fu,Pn,Du,Is,ea,Nu,Bu,Vu;(function(){var A,c=typeof Object.defineProperties=="function"?Object.defineProperty:function(N,H,J){return N==Array.prototype||N==Object.prototype||(N[H]=J.value),N};function x(N){N=[typeof globalThis=="object"&&globalThis,N,typeof window=="object"&&window,typeof self=="object"&&self,typeof xs=="object"&&xs];for(var H=0;H<N.length;++H){var J=N[H];if(J&&J.Math==Math)return J}throw Error("Cannot find global object")}var P=x(this);function M(N,H){if(H)t:{var J=P;N=N.split(".");for(var k=0;k<N.length-1;k++){var it=N[k];if(!(it in J))break t;J=J[it]}N=N[N.length-1],k=J[N],H=H(k),H!=k&&H!=null&&c(J,N,{configurable:!0,writable:!0,value:H})}}function D(N,H){N instanceof String&&(N+="");var J=0,k=!1,it={next:function(){if(!k&&J<N.length){var rt=J++;return{value:H(rt,N[rt]),done:!1}}return k=!0,{done:!0,value:void 0}}};return it[Symbol.iterator]=function(){return it},it}M("Array.prototype.values",function(N){return N||function(){return D(this,function(H,J){return J})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var v=v||{},E=this||self;function t(N){var H=typeof N;return H=H!="object"?H:N?Array.isArray(N)?"array":H:"null",H=="array"||H=="object"&&typeof N.length=="number"}function o(N){var H=typeof N;return H=="object"&&N!=null||H=="function"}function g(N,H,J){return N.call.apply(N.bind,arguments)}function a(N,H,J){if(!N)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var it=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(it,k),N.apply(H,it)}}return function(){return N.apply(H,arguments)}}function r(N,H,J){return r=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:a,r.apply(null,arguments)}function s(N,H){var J=Array.prototype.slice.call(arguments,1);return function(){var k=J.slice();return k.push.apply(k,arguments),N.apply(this,k)}}function e(N,H){function J(){}J.prototype=H.prototype,N.aa=H.prototype,N.prototype=new J,N.prototype.constructor=N,N.Qb=function(k,it,rt){for(var dt=Array(arguments.length-2),Gt=2;Gt<arguments.length;Gt++)dt[Gt-2]=arguments[Gt];return H.prototype[it].apply(k,dt)}}function n(N){const H=N.length;if(0<H){const J=Array(H);for(let k=0;k<H;k++)J[k]=N[k];return J}return[]}function h(N,H){for(let J=1;J<arguments.length;J++){const k=arguments[J];if(t(k)){const it=N.length||0,rt=k.length||0;N.length=it+rt;for(let dt=0;dt<rt;dt++)N[it+dt]=k[dt]}else N.push(k)}}class i{constructor(H,J){this.i=H,this.j=J,this.h=0,this.g=null}get(){let H;return 0<this.h?(this.h--,H=this.g,this.g=H.next,H.next=null):H=this.i(),H}}function l(N){return/^[\s\xa0]*$/.test(N)}function f(){var N=E.navigator;return N&&(N=N.userAgent)?N:""}function u(N){return u[" "](N),N}u[" "]=function(){};var d=f().indexOf("Gecko")!=-1&&!(f().toLowerCase().indexOf("webkit")!=-1&&f().indexOf("Edge")==-1)&&!(f().indexOf("Trident")!=-1||f().indexOf("MSIE")!=-1)&&f().indexOf("Edge")==-1;function p(N,H,J){for(const k in N)H.call(J,N[k],k,N)}function m(N,H){for(const J in N)H.call(void 0,N[J],J,N)}function T(N){const H={};for(const J in N)H[J]=N[J];return H}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(N,H){let J,k;for(let it=1;it<arguments.length;it++){k=arguments[it];for(J in k)N[J]=k[J];for(let rt=0;rt<y.length;rt++)J=y[rt],Object.prototype.hasOwnProperty.call(k,J)&&(N[J]=k[J])}}function C(N){var H=1;N=N.split(":");const J=[];for(;0<H&&N.length;)J.push(N.shift()),H--;return N.length&&J.push(N.join(":")),J}function R(N){E.setTimeout(()=>{throw N},0)}function I(){var N=b;let H=null;return N.g&&(H=N.g,N.g=N.g.next,N.g||(N.h=null),H.next=null),H}class L{constructor(){this.h=this.g=null}add(H,J){const k=w.get();k.set(H,J),this.h?this.h.next=k:this.g=k,this.h=k}}var w=new i(()=>new O,N=>N.reset());class O{constructor(){this.next=this.g=this.h=null}set(H,J){this.h=H,this.g=J,this.next=null}reset(){this.next=this.g=this.h=null}}let B,V=!1,b=new L,X=()=>{const N=E.Promise.resolve(void 0);B=()=>{N.then(K)}};var K=()=>{for(var N;N=I();){try{N.h.call(N.g)}catch(J){R(J)}var H=w;H.j(N),100>H.h&&(H.h++,N.next=H.g,H.g=N)}V=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(N,H){this.type=N,this.g=this.target=H,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var W=function(){if(!E.addEventListener||!Object.defineProperty)return!1;var N=!1,H=Object.defineProperty({},"passive",{get:function(){N=!0}});try{const J=()=>{};E.addEventListener("test",J,H),E.removeEventListener("test",J,H)}catch{}return N}();function F(N,H){if(U.call(this,N?N.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,N){var J=this.type=N.type,k=N.changedTouches&&N.changedTouches.length?N.changedTouches[0]:null;if(this.target=N.target||N.srcElement,this.g=H,H=N.relatedTarget){if(d){t:{try{u(H.nodeName);var it=!0;break t}catch{}it=!1}it||(H=null)}}else J=="mouseover"?H=N.fromElement:J=="mouseout"&&(H=N.toElement);this.relatedTarget=H,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0),this.button=N.button,this.key=N.key||"",this.ctrlKey=N.ctrlKey,this.altKey=N.altKey,this.shiftKey=N.shiftKey,this.metaKey=N.metaKey,this.pointerId=N.pointerId||0,this.pointerType=typeof N.pointerType=="string"?N.pointerType:G[N.pointerType]||"",this.state=N.state,this.i=N,N.defaultPrevented&&F.aa.h.call(this)}}e(F,U);var G={2:"touch",3:"pen",4:"mouse"};F.prototype.h=function(){F.aa.h.call(this);var N=this.i;N.preventDefault?N.preventDefault():N.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),Y=0;function $(N,H,J,k,it){this.listener=N,this.proxy=null,this.src=H,this.type=J,this.capture=!!k,this.ha=it,this.key=++Y,this.da=this.fa=!1}function j(N){N.da=!0,N.listener=null,N.proxy=null,N.src=null,N.ha=null}function Z(N){this.src=N,this.g={},this.h=0}Z.prototype.add=function(N,H,J,k,it){var rt=N.toString();N=this.g[rt],N||(N=this.g[rt]=[],this.h++);var dt=_(N,H,k,it);return-1<dt?(H=N[dt],J||(H.fa=!1)):(H=new $(H,this.src,rt,!!k,it),H.fa=J,N.push(H)),H};function q(N,H){var J=H.type;if(J in N.g){var k=N.g[J],it=Array.prototype.indexOf.call(k,H,void 0),rt;(rt=0<=it)&&Array.prototype.splice.call(k,it,1),rt&&(j(H),N.g[J].length==0&&(delete N.g[J],N.h--))}}function _(N,H,J,k){for(var it=0;it<N.length;++it){var rt=N[it];if(!rt.da&&rt.listener==H&&rt.capture==!!J&&rt.ha==k)return it}return-1}var tt="closure_lm_"+(1e6*Math.random()|0),nt={};function at(N,H,J,k,it){if(k&&k.once)return vt(N,H,J,k,it);if(Array.isArray(H)){for(var rt=0;rt<H.length;rt++)at(N,H[rt],J,k,it);return null}return J=St(J),N&&N[z]?N.K(H,J,o(k)?!!k.capture:!!k,it):st(N,H,J,!1,k,it)}function st(N,H,J,k,it,rt){if(!H)throw Error("Invalid event type");var dt=o(it)?!!it.capture:!!it,Gt=ft(N);if(Gt||(N[tt]=Gt=new Z(N)),J=Gt.add(H,J,k,dt,rt),J.proxy)return J;if(k=lt(),J.proxy=k,k.src=N,k.listener=J,N.addEventListener)W||(it=dt),it===void 0&&(it=!1),N.addEventListener(H.toString(),k,it);else if(N.attachEvent)N.attachEvent(ot(H.toString()),k);else if(N.addListener&&N.removeListener)N.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return J}function lt(){function N(J){return H.call(N.src,N.listener,J)}const H=ct;return N}function vt(N,H,J,k,it){if(Array.isArray(H)){for(var rt=0;rt<H.length;rt++)vt(N,H[rt],J,k,it);return null}return J=St(J),N&&N[z]?N.L(H,J,o(k)?!!k.capture:!!k,it):st(N,H,J,!0,k,it)}function mt(N,H,J,k,it){if(Array.isArray(H))for(var rt=0;rt<H.length;rt++)mt(N,H[rt],J,k,it);else k=o(k)?!!k.capture:!!k,J=St(J),N&&N[z]?(N=N.i,H=String(H).toString(),H in N.g&&(rt=N.g[H],J=_(rt,J,k,it),-1<J&&(j(rt[J]),Array.prototype.splice.call(rt,J,1),rt.length==0&&(delete N.g[H],N.h--)))):N&&(N=ft(N))&&(H=N.g[H.toString()],N=-1,H&&(N=_(H,J,k,it)),(J=-1<N?H[N]:null)&&pt(J))}function pt(N){if(typeof N!="number"&&N&&!N.da){var H=N.src;if(H&&H[z])q(H.i,N);else{var J=N.type,k=N.proxy;H.removeEventListener?H.removeEventListener(J,k,N.capture):H.detachEvent?H.detachEvent(ot(J),k):H.addListener&&H.removeListener&&H.removeListener(k),(J=ft(H))?(q(J,N),J.h==0&&(J.src=null,H[tt]=null)):j(N)}}}function ot(N){return N in nt?nt[N]:nt[N]="on"+N}function ct(N,H){if(N.da)N=!0;else{H=new F(H,this);var J=N.listener,k=N.ha||N.src;N.fa&&pt(N),N=J.call(k,H)}return N}function ft(N){return N=N[tt],N instanceof Z?N:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(N){return typeof N=="function"?N:(N[Et]||(N[Et]=function(H){return N.handleEvent(H)}),N[Et])}function It(){Q.call(this),this.i=new Z(this),this.M=this,this.F=null}e(It,Q),It.prototype[z]=!0,It.prototype.removeEventListener=function(N,H,J,k){mt(this,N,H,J,k)};function Mt(N,H){var J,k=N.F;if(k)for(J=[];k;k=k.F)J.push(k);if(N=N.M,k=H.type||H,typeof H=="string")H=new U(H,N);else if(H instanceof U)H.target=H.target||N;else{var it=H;H=new U(k,N),S(H,it)}if(it=!0,J)for(var rt=J.length-1;0<=rt;rt--){var dt=H.g=J[rt];it=wt(dt,k,!0,H)&&it}if(dt=H.g=N,it=wt(dt,k,!0,H)&&it,it=wt(dt,k,!1,H)&&it,J)for(rt=0;rt<J.length;rt++)dt=H.g=J[rt],it=wt(dt,k,!1,H)&&it}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var N=this.i,H;for(H in N.g){for(var J=N.g[H],k=0;k<J.length;k++)j(J[k]);delete N.g[H],N.h--}}this.F=null},It.prototype.K=function(N,H,J,k){return this.i.add(String(N),H,!1,J,k)},It.prototype.L=function(N,H,J,k){return this.i.add(String(N),H,!0,J,k)};function wt(N,H,J,k){if(H=N.i.g[String(H)],!H)return!0;H=H.concat();for(var it=!0,rt=0;rt<H.length;++rt){var dt=H[rt];if(dt&&!dt.da&&dt.capture==J){var Gt=dt.listener,qt=dt.ha||dt.src;dt.fa&&q(N.i,dt),it=Gt.call(qt,k)!==!1&&it}}return it&&!k.defaultPrevented}function Rt(N,H,J){if(typeof N=="function")J&&(N=r(N,J));else if(N&&typeof N.handleEvent=="function")N=r(N.handleEvent,N);else throw Error("Invalid listener argument");return 2147483647<Number(H)?-1:E.setTimeout(N,H||0)}function zt(N){N.g=Rt(()=>{N.g=null,N.i&&(N.i=!1,zt(N))},N.l);const H=N.h;N.h=null,N.m.apply(null,H)}class Bt extends Q{constructor(H,J){super(),this.m=H,this.l=J,this.h=null,this.i=!1,this.g=null}j(H){this.h=arguments,this.g?this.i=!0:zt(this)}N(){super.N(),this.g&&(E.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(N){Q.call(this),this.h=N,this.g={}}e(Xt,Q);var $t=[];function ne(N){p(N.g,function(H,J){this.g.hasOwnProperty(J)&&pt(H)},N),N.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),ne(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var me=E.JSON.stringify,De=E.JSON.parse,Ne=class{stringify(N){return E.JSON.stringify(N,void 0)}parse(N){return E.JSON.parse(N,void 0)}};function xe(){}xe.prototype.h=null;function Pe(N){return N.h||(N.h=N.i())}function co(){}var hn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gr(){U.call(this,"d")}e(gr,U);function mr(){U.call(this,"c")}e(mr,U);var ui={},vo=null;function is(){return vo=vo||new It}ui.La="serverreachability";function po(N){U.call(this,ui.La,N)}e(po,U);function ln(N){const H=is();Mt(H,new po(H))}ui.STAT_EVENT="statevent";function go(N,H){U.call(this,ui.STAT_EVENT,N),this.stat=H}e(go,U);function ue(N){const H=is();Mt(H,new go(H,N))}ui.Ma="timingevent";function mo(N,H){U.call(this,ui.Ma,N),this.size=H}e(mo,U);function un(N,H){if(typeof N!="function")throw Error("Fn must not be null and must be a function");return E.setTimeout(function(){N()},H)}function fn(){this.g=!0}fn.prototype.xa=function(){this.g=!1};function Ad(N,H,J,k,it,rt){N.info(function(){if(N.g)if(rt)for(var dt="",Gt=rt.split("&"),qt=0;qt<Gt.length;qt++){var Dt=Gt[qt].split("=");if(1<Dt.length){var se=Dt[0];Dt=Dt[1];var re=se.split("_");dt=2<=re.length&&re[1]=="type"?dt+(se+"="+Dt+"&"):dt+(se+"=redacted&")}}else dt=null;else dt=rt;return"XMLHTTP REQ ("+k+") [attempt "+it+"]: "+H+`
`+J+`
`+dt})}function Pd(N,H,J,k,it,rt,dt){N.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+it+"]: "+H+`
`+J+`
`+rt+" "+dt})}function Di(N,H,J,k){N.info(function(){return"XMLHTTP TEXT ("+H+"): "+Id(N,J)+(k?" "+k:"")})}function Rd(N,H){N.info(function(){return"TIMEOUT: "+H})}fn.prototype.info=function(){};function Id(N,H){if(!N.g)return H;if(!H)return null;try{var J=JSON.parse(H);if(J){for(N=0;N<J.length;N++)if(Array.isArray(J[N])){var k=J[N];if(!(2>k.length)){var it=k[1];if(Array.isArray(it)&&!(1>it.length)){var rt=it[0];if(rt!="noop"&&rt!="stop"&&rt!="close")for(var dt=1;dt<it.length;dt++)it[dt]=""}}}}return me(J)}catch{return H}}var ns={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},xo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xr;function ss(){}e(ss,xe),ss.prototype.g=function(){return new XMLHttpRequest},ss.prototype.i=function(){return{}},xr=new ss;function Je(N,H,J,k){this.j=N,this.i=H,this.l=J,this.R=k||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yo}function yo(){this.i=null,this.g="",this.h=!1}var To={},yr={};function Tr(N,H,J){N.L=1,N.v=hs(Be(H)),N.m=J,N.P=!0,Eo(N,null)}function Eo(N,H){N.F=Date.now(),rs(N),N.A=Be(N.v);var J=N.A,k=N.R;Array.isArray(k)||(k=[String(k)]),Bo(J.i,"t",k),N.C=0,J=N.j.J,N.h=new yo,N.g=_o(N.j,J?H:null,!N.m),0<N.O&&(N.M=new Bt(r(N.Y,N,N.g),N.O)),H=N.U,J=N.g,k=N.ca;var it="readystatechange";Array.isArray(it)||(it&&($t[0]=it.toString()),it=$t);for(var rt=0;rt<it.length;rt++){var dt=at(J,it[rt],k||H.handleEvent,!1,H.h||H);if(!dt)break;H.g[dt.key]=dt}H=N.H?T(N.H):{},N.m?(N.u||(N.u="POST"),H["Content-Type"]="application/x-www-form-urlencoded",N.g.ea(N.A,N.u,N.m,H)):(N.u="GET",N.g.ea(N.A,N.u,null,H)),ln(),Ad(N.i,N.u,N.A,N.l,N.R,N.m)}Je.prototype.ca=function(N){N=N.target;const H=this.M;H&&Ve(N)==3?H.j():this.Y(N)},Je.prototype.Y=function(N){try{if(N==this.g)t:{const re=Ve(this.g);var H=this.g.Ba();const Vi=this.g.Z();if(!(3>re)&&(re!=3||this.g&&(this.h.h||this.g.oa()||Wo(this.g)))){this.J||re!=4||H==7||(H==8||0>=Vi?ln(3):ln(2)),Er(this);var J=this.g.Z();this.X=J;e:if(So(this)){var k=Wo(this.g);N="";var it=k.length,rt=Ve(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){fi(this),dn(this);var dt="";break e}this.h.i=new E.TextDecoder}for(H=0;H<it;H++)this.h.h=!0,N+=this.h.i.decode(k[H],{stream:!(rt&&H==it-1)});k.length=0,this.h.g+=N,this.C=0,dt=this.h.g}else dt=this.g.oa();if(this.o=J==200,Pd(this.i,this.u,this.A,this.l,this.R,re,J),this.o){if(this.T&&!this.K){e:{if(this.g){var Gt,qt=this.g;if((Gt=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!l(Gt)){var Dt=Gt;break e}}Dt=null}if(J=Dt)Di(this.i,this.l,J,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sr(this,J);else{this.o=!1,this.s=3,ue(12),fi(this),dn(this);break t}}if(this.P){J=!0;let ye;for(;!this.J&&this.C<dt.length;)if(ye=Md(this,dt),ye==yr){re==4&&(this.s=4,ue(14),J=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(ye==To){this.s=4,ue(15),Di(this.i,this.l,dt,"[Invalid Chunk]"),J=!1;break}else Di(this.i,this.l,ye,null),Sr(this,ye);if(So(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),re!=4||dt.length!=0||this.h.h||(this.s=1,ue(16),J=!1),this.o=this.o&&J,!J)Di(this.i,this.l,dt,"[Invalid Chunked Response]"),fi(this),dn(this);else if(0<dt.length&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.ba&&!se.M&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+dt.length),Mr(se),se.M=!0,ue(11))}}else Di(this.i,this.l,dt,null),Sr(this,dt);re==4&&fi(this),this.o&&!this.J&&(re==4?jo(this.j,this):(this.o=!1,rs(this)))}else Kd(this.g),J==400&&0<dt.indexOf("Unknown SID")?(this.s=3,ue(12)):(this.s=0,ue(13)),fi(this),dn(this)}}}catch{}finally{}};function So(N){return N.g?N.u=="GET"&&N.L!=2&&N.j.Ca:!1}function Md(N,H){var J=N.C,k=H.indexOf(`
`,J);return k==-1?yr:(J=Number(H.substring(J,k)),isNaN(J)?To:(k+=1,k+J>H.length?yr:(H=H.slice(k,k+J),N.C=k+J,H)))}Je.prototype.cancel=function(){this.J=!0,fi(this)};function rs(N){N.S=Date.now()+N.I,Co(N,N.I)}function Co(N,H){if(N.B!=null)throw Error("WatchDog timer not null");N.B=un(r(N.ba,N),H)}function Er(N){N.B&&(E.clearTimeout(N.B),N.B=null)}Je.prototype.ba=function(){this.B=null;const N=Date.now();0<=N-this.S?(Rd(this.i,this.A),this.L!=2&&(ln(),ue(17)),fi(this),this.s=2,dn(this)):Co(this,this.S-N)};function dn(N){N.j.G==0||N.J||jo(N.j,N)}function fi(N){Er(N);var H=N.M;H&&typeof H.ma=="function"&&H.ma(),N.M=null,ne(N.U),N.g&&(H=N.g,N.g=null,H.abort(),H.ma())}function Sr(N,H){try{var J=N.j;if(J.G!=0&&(J.g==N||Cr(J.h,N))){if(!N.K&&Cr(J.h,N)&&J.G==3){try{var k=J.Da.g.parse(H)}catch{k=null}if(Array.isArray(k)&&k.length==3){var it=k;if(it[0]==0){t:if(!J.u){if(J.g)if(J.g.F+3e3<N.F)vs(J),ds(J);else break t;Ir(J),ue(18)}}else J.za=it[1],0<J.za-J.T&&37500>it[2]&&J.F&&J.v==0&&!J.C&&(J.C=un(r(J.Za,J),6e3));if(1>=Ro(J.h)&&J.ca){try{J.ca()}catch{}J.ca=void 0}}else ci(J,11)}else if((N.K||J.g==N)&&vs(J),!l(H))for(it=J.Da.g.parse(H),H=0;H<it.length;H++){let Dt=it[H];if(J.T=Dt[0],Dt=Dt[1],J.G==2)if(Dt[0]=="c"){J.K=Dt[1],J.ia=Dt[2];const se=Dt[3];se!=null&&(J.la=se,J.j.info("VER="+J.la));const re=Dt[4];re!=null&&(J.Aa=re,J.j.info("SVER="+J.Aa));const Vi=Dt[5];Vi!=null&&typeof Vi=="number"&&0<Vi&&(k=1.5*Vi,J.L=k,J.j.info("backChannelRequestTimeoutMs_="+k)),k=J;const ye=N.g;if(ye){const gs=ye.g?ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gs){var rt=k.h;rt.g||gs.indexOf("spdy")==-1&&gs.indexOf("quic")==-1&&gs.indexOf("h2")==-1||(rt.j=rt.l,rt.g=new Set,rt.h&&(Ar(rt,rt.h),rt.h=null))}if(k.D){const wr=ye.g?ye.g.getResponseHeader("X-HTTP-Session-Id"):null;wr&&(k.ya=wr,Ut(k.I,k.D,wr))}}J.G=3,J.l&&J.l.ua(),J.ba&&(J.R=Date.now()-N.F,J.j.info("Handshake RTT: "+J.R+"ms")),k=J;var dt=N;if(k.qa=qo(k,k.J?k.ia:null,k.W),dt.K){Io(k.h,dt);var Gt=dt,qt=k.L;qt&&(Gt.I=qt),Gt.B&&(Er(Gt),rs(Gt)),k.g=dt}else Qo(k);0<J.i.length&&cs(J)}else Dt[0]!="stop"&&Dt[0]!="close"||ci(J,7);else J.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?ci(J,7):Rr(J):Dt[0]!="noop"&&J.l&&J.l.ta(Dt),J.v=0)}}ln(4)}catch{}}var wd=class{constructor(N,H){this.g=N,this.map=H}};function Ao(N){this.l=N||10,E.PerformanceNavigationTiming?(N=E.performance.getEntriesByType("navigation"),N=0<N.length&&(N[0].nextHopProtocol=="hq"||N[0].nextHopProtocol=="h2")):N=!!(E.chrome&&E.chrome.loadTimes&&E.chrome.loadTimes()&&E.chrome.loadTimes().wasFetchedViaSpdy),this.j=N?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Po(N){return N.h?!0:N.g?N.g.size>=N.j:!1}function Ro(N){return N.h?1:N.g?N.g.size:0}function Cr(N,H){return N.h?N.h==H:N.g?N.g.has(H):!1}function Ar(N,H){N.g?N.g.add(H):N.h=H}function Io(N,H){N.h&&N.h==H?N.h=null:N.g&&N.g.has(H)&&N.g.delete(H)}Ao.prototype.cancel=function(){if(this.i=Mo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const N of this.g.values())N.cancel();this.g.clear()}};function Mo(N){if(N.h!=null)return N.i.concat(N.h.D);if(N.g!=null&&N.g.size!==0){let H=N.i;for(const J of N.g.values())H=H.concat(J.D);return H}return n(N.i)}function Ld(N){if(N.V&&typeof N.V=="function")return N.V();if(typeof Map<"u"&&N instanceof Map||typeof Set<"u"&&N instanceof Set)return Array.from(N.values());if(typeof N=="string")return N.split("");if(t(N)){for(var H=[],J=N.length,k=0;k<J;k++)H.push(N[k]);return H}H=[],J=0;for(k in N)H[J++]=N[k];return H}function Od(N){if(N.na&&typeof N.na=="function")return N.na();if(!N.V||typeof N.V!="function"){if(typeof Map<"u"&&N instanceof Map)return Array.from(N.keys());if(!(typeof Set<"u"&&N instanceof Set)){if(t(N)||typeof N=="string"){var H=[];N=N.length;for(var J=0;J<N;J++)H.push(J);return H}H=[],J=0;for(const k in N)H[J++]=k;return H}}}function wo(N,H){if(N.forEach&&typeof N.forEach=="function")N.forEach(H,void 0);else if(t(N)||typeof N=="string")Array.prototype.forEach.call(N,H,void 0);else for(var J=Od(N),k=Ld(N),it=k.length,rt=0;rt<it;rt++)H.call(void 0,k[rt],J&&J[rt],N)}var Lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Fd(N,H){if(N){N=N.split("&");for(var J=0;J<N.length;J++){var k=N[J].indexOf("="),it=null;if(0<=k){var rt=N[J].substring(0,k);it=N[J].substring(k+1)}else rt=N[J];H(rt,it?decodeURIComponent(it.replace(/\+/g," ")):"")}}}function di(N){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,N instanceof di){this.h=N.h,as(this,N.j),this.o=N.o,this.g=N.g,os(this,N.s),this.l=N.l;var H=N.i,J=new pn;J.i=H.i,H.g&&(J.g=new Map(H.g),J.h=H.h),Oo(this,J),this.m=N.m}else N&&(H=String(N).match(Lo))?(this.h=!1,as(this,H[1]||"",!0),this.o=cn(H[2]||""),this.g=cn(H[3]||"",!0),os(this,H[4]),this.l=cn(H[5]||"",!0),Oo(this,H[6]||"",!0),this.m=cn(H[7]||"")):(this.h=!1,this.i=new pn(null,this.h))}di.prototype.toString=function(){var N=[],H=this.j;H&&N.push(vn(H,Fo,!0),":");var J=this.g;return(J||H=="file")&&(N.push("//"),(H=this.o)&&N.push(vn(H,Fo,!0),"@"),N.push(encodeURIComponent(String(J)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),J=this.s,J!=null&&N.push(":",String(J))),(J=this.l)&&(this.g&&J.charAt(0)!="/"&&N.push("/"),N.push(vn(J,J.charAt(0)=="/"?Bd:Nd,!0))),(J=this.i.toString())&&N.push("?",J),(J=this.m)&&N.push("#",vn(J,Gd)),N.join("")};function Be(N){return new di(N)}function as(N,H,J){N.j=J?cn(H,!0):H,N.j&&(N.j=N.j.replace(/:$/,""))}function os(N,H){if(H){if(H=Number(H),isNaN(H)||0>H)throw Error("Bad port number "+H);N.s=H}else N.s=null}function Oo(N,H,J){H instanceof pn?(N.i=H,Ud(N.i,N.h)):(J||(H=vn(H,Vd)),N.i=new pn(H,N.h))}function Ut(N,H,J){N.i.set(H,J)}function hs(N){return Ut(N,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),N}function cn(N,H){return N?H?decodeURI(N.replace(/%25/g,"%2525")):decodeURIComponent(N):""}function vn(N,H,J){return typeof N=="string"?(N=encodeURI(N).replace(H,Dd),J&&(N=N.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N):null}function Dd(N){return N=N.charCodeAt(0),"%"+(N>>4&15).toString(16)+(N&15).toString(16)}var Fo=/[#\/\?@]/g,Nd=/[#\?:]/g,Bd=/[#\?]/g,Vd=/[#\?@]/g,Gd=/#/g;function pn(N,H){this.h=this.g=null,this.i=N||null,this.j=!!H}function je(N){N.g||(N.g=new Map,N.h=0,N.i&&Fd(N.i,function(H,J){N.add(decodeURIComponent(H.replace(/\+/g," ")),J)}))}A=pn.prototype,A.add=function(N,H){je(this),this.i=null,N=Ni(this,N);var J=this.g.get(N);return J||this.g.set(N,J=[]),J.push(H),this.h+=1,this};function Do(N,H){je(N),H=Ni(N,H),N.g.has(H)&&(N.i=null,N.h-=N.g.get(H).length,N.g.delete(H))}function No(N,H){return je(N),H=Ni(N,H),N.g.has(H)}A.forEach=function(N,H){je(this),this.g.forEach(function(J,k){J.forEach(function(it){N.call(H,it,k,this)},this)},this)},A.na=function(){je(this);const N=Array.from(this.g.values()),H=Array.from(this.g.keys()),J=[];for(let k=0;k<H.length;k++){const it=N[k];for(let rt=0;rt<it.length;rt++)J.push(H[k])}return J},A.V=function(N){je(this);let H=[];if(typeof N=="string")No(this,N)&&(H=H.concat(this.g.get(Ni(this,N))));else{N=Array.from(this.g.values());for(let J=0;J<N.length;J++)H=H.concat(N[J])}return H},A.set=function(N,H){return je(this),this.i=null,N=Ni(this,N),No(this,N)&&(this.h-=this.g.get(N).length),this.g.set(N,[H]),this.h+=1,this},A.get=function(N,H){return N?(N=this.V(N),0<N.length?String(N[0]):H):H};function Bo(N,H,J){Do(N,H),0<J.length&&(N.i=null,N.g.set(Ni(N,H),n(J)),N.h+=J.length)}A.toString=function(){if(this.i)return this.i;if(!this.g)return"";const N=[],H=Array.from(this.g.keys());for(var J=0;J<H.length;J++){var k=H[J];const rt=encodeURIComponent(String(k)),dt=this.V(k);for(k=0;k<dt.length;k++){var it=rt;dt[k]!==""&&(it+="="+encodeURIComponent(String(dt[k]))),N.push(it)}}return this.i=N.join("&")};function Ni(N,H){return H=String(H),N.j&&(H=H.toLowerCase()),H}function Ud(N,H){H&&!N.j&&(je(N),N.i=null,N.g.forEach(function(J,k){var it=k.toLowerCase();k!=it&&(Do(this,k),Bo(this,it,J))},N)),N.j=H}function bd(N,H){const J=new fn;if(E.Image){const k=new Image;k.onload=s(Ze,J,"TestLoadImage: loaded",!0,H,k),k.onerror=s(Ze,J,"TestLoadImage: error",!1,H,k),k.onabort=s(Ze,J,"TestLoadImage: abort",!1,H,k),k.ontimeout=s(Ze,J,"TestLoadImage: timeout",!1,H,k),E.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=N}else H(!1)}function zd(N,H){const J=new fn,k=new AbortController,it=setTimeout(()=>{k.abort(),Ze(J,"TestPingServer: timeout",!1,H)},1e4);fetch(N,{signal:k.signal}).then(rt=>{clearTimeout(it),rt.ok?Ze(J,"TestPingServer: ok",!0,H):Ze(J,"TestPingServer: server error",!1,H)}).catch(()=>{clearTimeout(it),Ze(J,"TestPingServer: error",!1,H)})}function Ze(N,H,J,k,it){try{it&&(it.onload=null,it.onerror=null,it.onabort=null,it.ontimeout=null),k(J)}catch{}}function Xd(){this.g=new Ne}function Wd(N,H,J){const k=J||"";try{wo(N,function(it,rt){let dt=it;o(it)&&(dt=me(it)),H.push(k+rt+"="+encodeURIComponent(dt))})}catch(it){throw H.push(k+"type="+encodeURIComponent("_badmap")),it}}function ls(N){this.l=N.Ub||null,this.j=N.eb||!1}e(ls,xe),ls.prototype.g=function(){return new us(this.l,this.j)},ls.prototype.i=function(N){return function(){return N}}({});function us(N,H){It.call(this),this.D=N,this.o=H,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}e(us,It),A=us.prototype,A.open=function(N,H){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=N,this.A=H,this.readyState=1,mn(this)},A.send=function(N){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const H={headers:this.u,method:this.B,credentials:this.m,cache:void 0};N&&(H.body=N),(this.D||E).fetch(new Request(this.A,H)).then(this.Sa.bind(this),this.ga.bind(this))},A.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gn(this)),this.readyState=0},A.Sa=function(N){if(this.g&&(this.l=N,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=N.headers,this.readyState=2,mn(this)),this.g&&(this.readyState=3,mn(this),this.g)))if(this.responseType==="arraybuffer")N.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof E.ReadableStream<"u"&&"body"in N){if(this.j=N.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Vo(this)}else N.text().then(this.Ra.bind(this),this.ga.bind(this))};function Vo(N){N.j.read().then(N.Pa.bind(N)).catch(N.ga.bind(N))}A.Pa=function(N){if(this.g){if(this.o&&N.value)this.response.push(N.value);else if(!this.o){var H=N.value?N.value:new Uint8Array(0);(H=this.v.decode(H,{stream:!N.done}))&&(this.response=this.responseText+=H)}N.done?gn(this):mn(this),this.readyState==3&&Vo(this)}},A.Ra=function(N){this.g&&(this.response=this.responseText=N,gn(this))},A.Qa=function(N){this.g&&(this.response=N,gn(this))},A.ga=function(){this.g&&gn(this)};function gn(N){N.readyState=4,N.l=null,N.j=null,N.v=null,mn(N)}A.setRequestHeader=function(N,H){this.u.append(N,H)},A.getResponseHeader=function(N){return this.h&&this.h.get(N.toLowerCase())||""},A.getAllResponseHeaders=function(){if(!this.h)return"";const N=[],H=this.h.entries();for(var J=H.next();!J.done;)J=J.value,N.push(J[0]+": "+J[1]),J=H.next();return N.join(`\r
`)};function mn(N){N.onreadystatechange&&N.onreadystatechange.call(N)}Object.defineProperty(us.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(N){this.m=N?"include":"same-origin"}});function Go(N){let H="";return p(N,function(J,k){H+=k,H+=":",H+=J,H+=`\r
`}),H}function Pr(N,H,J){t:{for(k in J){var k=!1;break t}k=!0}k||(J=Go(J),typeof N=="string"?J!=null&&encodeURIComponent(String(J)):Ut(N,H,J))}function Yt(N){It.call(this),this.headers=new Map,this.o=N||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}e(Yt,It);var Yd=/^https?$/i,Hd=["POST","PUT"];A=Yt.prototype,A.Ha=function(N){this.J=N},A.ea=function(N,H,J,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+N);H=H?H.toUpperCase():"GET",this.D=N,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xr.g(),this.v=this.o?Pe(this.o):Pe(xr),this.g.onreadystatechange=r(this.Ea,this);try{this.B=!0,this.g.open(H,String(N),!0),this.B=!1}catch(rt){Uo(this,rt);return}if(N=J||"",J=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var it in k)J.set(it,k[it]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const rt of k.keys())J.set(rt,k.get(rt));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(J.keys()).find(rt=>rt.toLowerCase()=="content-type"),it=E.FormData&&N instanceof E.FormData,!(0<=Array.prototype.indexOf.call(Hd,H,void 0))||k||it||J.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[rt,dt]of J)this.g.setRequestHeader(rt,dt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Xo(this),this.u=!0,this.g.send(N),this.u=!1}catch(rt){Uo(this,rt)}};function Uo(N,H){N.h=!1,N.g&&(N.j=!0,N.g.abort(),N.j=!1),N.l=H,N.m=5,bo(N),fs(N)}function bo(N){N.A||(N.A=!0,Mt(N,"complete"),Mt(N,"error"))}A.abort=function(N){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=N||7,Mt(this,"complete"),Mt(this,"abort"),fs(this))},A.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),fs(this,!0)),Yt.aa.N.call(this)},A.Ea=function(){this.s||(this.B||this.u||this.j?zo(this):this.bb())},A.bb=function(){zo(this)};function zo(N){if(N.h&&typeof v<"u"&&(!N.v[1]||Ve(N)!=4||N.Z()!=2)){if(N.u&&Ve(N)==4)Rt(N.Ea,0,N);else if(Mt(N,"readystatechange"),Ve(N)==4){N.h=!1;try{const dt=N.Z();t:switch(dt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var H=!0;break t;default:H=!1}var J;if(!(J=H)){var k;if(k=dt===0){var it=String(N.D).match(Lo)[1]||null;!it&&E.self&&E.self.location&&(it=E.self.location.protocol.slice(0,-1)),k=!Yd.test(it?it.toLowerCase():"")}J=k}if(J)Mt(N,"complete"),Mt(N,"success");else{N.m=6;try{var rt=2<Ve(N)?N.g.statusText:""}catch{rt=""}N.l=rt+" ["+N.Z()+"]",bo(N)}}finally{fs(N)}}}}function fs(N,H){if(N.g){Xo(N);const J=N.g,k=N.v[0]?()=>{}:null;N.g=null,N.v=null,H||Mt(N,"ready");try{J.onreadystatechange=k}catch{}}}function Xo(N){N.I&&(E.clearTimeout(N.I),N.I=null)}A.isActive=function(){return!!this.g};function Ve(N){return N.g?N.g.readyState:0}A.Z=function(){try{return 2<Ve(this)?this.g.status:-1}catch{return-1}},A.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},A.Oa=function(N){if(this.g){var H=this.g.responseText;return N&&H.indexOf(N)==0&&(H=H.substring(N.length)),De(H)}};function Wo(N){try{if(!N.g)return null;if("response"in N.g)return N.g.response;switch(N.H){case"":case"text":return N.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in N.g)return N.g.mozResponseArrayBuffer}return null}catch{return null}}function Kd(N){const H={};N=(N.g&&2<=Ve(N)&&N.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<N.length;k++){if(l(N[k]))continue;var J=C(N[k]);const it=J[0];if(J=J[1],typeof J!="string")continue;J=J.trim();const rt=H[it]||[];H[it]=rt,rt.push(J)}m(H,function(k){return k.join(", ")})}A.Ba=function(){return this.m},A.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xn(N,H,J){return J&&J.internalChannelParams&&J.internalChannelParams[N]||H}function Yo(N){this.Aa=0,this.i=[],this.j=new fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xn("failFast",!1,N),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xn("baseRetryDelayMs",5e3,N),this.cb=xn("retryDelaySeedMs",1e4,N),this.Wa=xn("forwardChannelMaxRetries",2,N),this.wa=xn("forwardChannelRequestTimeoutMs",2e4,N),this.pa=N&&N.xmlHttpFactory||void 0,this.Xa=N&&N.Tb||void 0,this.Ca=N&&N.useFetchStreams||!1,this.L=void 0,this.J=N&&N.supportsCrossDomainXhr||!1,this.K="",this.h=new Ao(N&&N.concurrentRequestLimit),this.Da=new Xd,this.P=N&&N.fastHandshake||!1,this.O=N&&N.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=N&&N.Rb||!1,N&&N.xa&&this.j.xa(),N&&N.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&N&&N.detectBufferingProxy||!1,this.ja=void 0,N&&N.longPollingTimeout&&0<N.longPollingTimeout&&(this.ja=N.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}A=Yo.prototype,A.la=8,A.G=1,A.connect=function(N,H,J,k){ue(0),this.W=N,this.H=H||{},J&&k!==void 0&&(this.H.OSID=J,this.H.OAID=k),this.F=this.X,this.I=qo(this,null,this.W),cs(this)};function Rr(N){if(Ho(N),N.G==3){var H=N.U++,J=Be(N.I);if(Ut(J,"SID",N.K),Ut(J,"RID",H),Ut(J,"TYPE","terminate"),yn(N,J),H=new Je(N,N.j,H),H.L=2,H.v=hs(Be(J)),J=!1,E.navigator&&E.navigator.sendBeacon)try{J=E.navigator.sendBeacon(H.v.toString(),"")}catch{}!J&&E.Image&&(new Image().src=H.v,J=!0),J||(H.g=_o(H.j,null),H.g.ea(H.v)),H.F=Date.now(),rs(H)}ko(N)}function ds(N){N.g&&(Mr(N),N.g.cancel(),N.g=null)}function Ho(N){ds(N),N.u&&(E.clearTimeout(N.u),N.u=null),vs(N),N.h.cancel(),N.s&&(typeof N.s=="number"&&E.clearTimeout(N.s),N.s=null)}function cs(N){if(!Po(N.h)&&!N.s){N.s=!0;var H=N.Ga;B||X(),V||(B(),V=!0),b.add(H,N),N.B=0}}function $d(N,H){return Ro(N.h)>=N.h.j-(N.s?1:0)?!1:N.s?(N.i=H.D.concat(N.i),!0):N.G==1||N.G==2||N.B>=(N.Va?0:N.Wa)?!1:(N.s=un(r(N.Ga,N,H),Zo(N,N.B)),N.B++,!0)}A.Ga=function(N){if(this.s)if(this.s=null,this.G==1){if(!N){this.U=Math.floor(1e5*Math.random()),N=this.U++;const it=new Je(this,this.j,N);let rt=this.o;if(this.S&&(rt?(rt=T(rt),S(rt,this.S)):rt=this.S),this.m!==null||this.O||(it.H=rt,rt=null),this.P)t:{for(var H=0,J=0;J<this.i.length;J++){e:{var k=this.i[J];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break e}k=void 0}if(k===void 0)break;if(H+=k,4096<H){H=J;break t}if(H===4096||J===this.i.length-1){H=J+1;break t}}H=1e3}else H=1e3;H=$o(this,it,H),J=Be(this.I),Ut(J,"RID",N),Ut(J,"CVER",22),this.D&&Ut(J,"X-HTTP-Session-Id",this.D),yn(this,J),rt&&(this.O?H="headers="+encodeURIComponent(String(Go(rt)))+"&"+H:this.m&&Pr(J,this.m,rt)),Ar(this.h,it),this.Ua&&Ut(J,"TYPE","init"),this.P?(Ut(J,"$req",H),Ut(J,"SID","null"),it.T=!0,Tr(it,J,null)):Tr(it,J,H),this.G=2}}else this.G==3&&(N?Ko(this,N):this.i.length==0||Po(this.h)||Ko(this))};function Ko(N,H){var J;H?J=H.l:J=N.U++;const k=Be(N.I);Ut(k,"SID",N.K),Ut(k,"RID",J),Ut(k,"AID",N.T),yn(N,k),N.m&&N.o&&Pr(k,N.m,N.o),J=new Je(N,N.j,J,N.B+1),N.m===null&&(J.H=N.o),H&&(N.i=H.D.concat(N.i)),H=$o(N,J,1e3),J.I=Math.round(.5*N.wa)+Math.round(.5*N.wa*Math.random()),Ar(N.h,J),Tr(J,k,H)}function yn(N,H){N.H&&p(N.H,function(J,k){Ut(H,k,J)}),N.l&&wo({},function(J,k){Ut(H,k,J)})}function $o(N,H,J){J=Math.min(N.i.length,J);var k=N.l?r(N.l.Na,N.l,N):null;t:{var it=N.i;let rt=-1;for(;;){const dt=["count="+J];rt==-1?0<J?(rt=it[0].g,dt.push("ofs="+rt)):rt=0:dt.push("ofs="+rt);let Gt=!0;for(let qt=0;qt<J;qt++){let Dt=it[qt].g;const se=it[qt].map;if(Dt-=rt,0>Dt)rt=Math.max(0,it[qt].g-100),Gt=!1;else try{Wd(se,dt,"req"+Dt+"_")}catch{k&&k(se)}}if(Gt){k=dt.join("&");break t}}}return N=N.i.splice(0,J),H.D=N,k}function Qo(N){if(!N.g&&!N.u){N.Y=1;var H=N.Fa;B||X(),V||(B(),V=!0),b.add(H,N),N.v=0}}function Ir(N){return N.g||N.u||3<=N.v?!1:(N.Y++,N.u=un(r(N.Fa,N),Zo(N,N.v)),N.v++,!0)}A.Fa=function(){if(this.u=null,Jo(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var N=2*this.R;this.j.info("BP detection timer enabled: "+N),this.A=un(r(this.ab,this),N)}},A.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ue(10),ds(this),Jo(this))};function Mr(N){N.A!=null&&(E.clearTimeout(N.A),N.A=null)}function Jo(N){N.g=new Je(N,N.j,"rpc",N.Y),N.m===null&&(N.g.H=N.o),N.g.O=0;var H=Be(N.qa);Ut(H,"RID","rpc"),Ut(H,"SID",N.K),Ut(H,"AID",N.T),Ut(H,"CI",N.F?"0":"1"),!N.F&&N.ja&&Ut(H,"TO",N.ja),Ut(H,"TYPE","xmlhttp"),yn(N,H),N.m&&N.o&&Pr(H,N.m,N.o),N.L&&(N.g.I=N.L);var J=N.g;N=N.ia,J.L=1,J.v=hs(Be(H)),J.m=null,J.P=!0,Eo(J,N)}A.Za=function(){this.C!=null&&(this.C=null,ds(this),Ir(this),ue(19))};function vs(N){N.C!=null&&(E.clearTimeout(N.C),N.C=null)}function jo(N,H){var J=null;if(N.g==H){vs(N),Mr(N),N.g=null;var k=2}else if(Cr(N.h,H))J=H.D,Io(N.h,H),k=1;else return;if(N.G!=0){if(H.o)if(k==1){J=H.m?H.m.length:0,H=Date.now()-H.F;var it=N.B;k=is(),Mt(k,new mo(k,J)),cs(N)}else Qo(N);else if(it=H.s,it==3||it==0&&0<H.X||!(k==1&&$d(N,H)||k==2&&Ir(N)))switch(J&&0<J.length&&(H=N.h,H.i=H.i.concat(J)),it){case 1:ci(N,5);break;case 4:ci(N,10);break;case 3:ci(N,6);break;default:ci(N,2)}}}function Zo(N,H){let J=N.Ta+Math.floor(Math.random()*N.cb);return N.isActive()||(J*=2),J*H}function ci(N,H){if(N.j.info("Error code "+H),H==2){var J=r(N.fb,N),k=N.Xa;const it=!k;k=new di(k||"//www.google.com/images/cleardot.gif"),E.location&&E.location.protocol=="http"||as(k,"https"),hs(k),it?bd(k.toString(),J):zd(k.toString(),J)}else ue(2);N.G=0,N.l&&N.l.sa(H),ko(N),Ho(N)}A.fb=function(N){N?(this.j.info("Successfully pinged google.com"),ue(2)):(this.j.info("Failed to ping google.com"),ue(1))};function ko(N){if(N.G=0,N.ka=[],N.l){const H=Mo(N.h);(H.length!=0||N.i.length!=0)&&(h(N.ka,H),h(N.ka,N.i),N.h.i.length=0,n(N.i),N.i.length=0),N.l.ra()}}function qo(N,H,J){var k=J instanceof di?Be(J):new di(J);if(k.g!="")H&&(k.g=H+"."+k.g),os(k,k.s);else{var it=E.location;k=it.protocol,H=H?H+"."+it.hostname:it.hostname,it=+it.port;var rt=new di(null);k&&as(rt,k),H&&(rt.g=H),it&&os(rt,it),J&&(rt.l=J),k=rt}return J=N.D,H=N.ya,J&&H&&Ut(k,J,H),Ut(k,"VER",N.la),yn(N,k),k}function _o(N,H,J){if(H&&!N.J)throw Error("Can't create secondary domain capable XhrIo object.");return H=N.Ca&&!N.pa?new Yt(new ls({eb:J})):new Yt(N.pa),H.Ha(N.J),H}A.isActive=function(){return!!this.l&&this.l.isActive(this)};function th(){}A=th.prototype,A.ua=function(){},A.ta=function(){},A.sa=function(){},A.ra=function(){},A.isActive=function(){return!0},A.Na=function(){};function ps(){}ps.prototype.g=function(N,H){return new ce(N,H)};function ce(N,H){It.call(this),this.g=new Yo(H),this.l=N,this.h=H&&H.messageUrlParams||null,N=H&&H.messageHeaders||null,H&&H.clientProtocolHeaderRequired&&(N?N["X-Client-Protocol"]="webchannel":N={"X-Client-Protocol":"webchannel"}),this.g.o=N,N=H&&H.initMessageHeaders||null,H&&H.messageContentType&&(N?N["X-WebChannel-Content-Type"]=H.messageContentType:N={"X-WebChannel-Content-Type":H.messageContentType}),H&&H.va&&(N?N["X-WebChannel-Client-Profile"]=H.va:N={"X-WebChannel-Client-Profile":H.va}),this.g.S=N,(N=H&&H.Sb)&&!l(N)&&(this.g.m=N),this.v=H&&H.supportsCrossDomainXhr||!1,this.u=H&&H.sendRawJson||!1,(H=H&&H.httpSessionIdParam)&&!l(H)&&(this.g.D=H,N=this.h,N!==null&&H in N&&(N=this.h,H in N&&delete N[H])),this.j=new Bi(this)}e(ce,It),ce.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ce.prototype.close=function(){Rr(this.g)},ce.prototype.o=function(N){var H=this.g;if(typeof N=="string"){var J={};J.__data__=N,N=J}else this.u&&(J={},J.__data__=me(N),N=J);H.i.push(new wd(H.Ya++,N)),H.G==3&&cs(H)},ce.prototype.N=function(){this.g.l=null,delete this.j,Rr(this.g),delete this.g,ce.aa.N.call(this)};function eh(N){gr.call(this),N.__headers__&&(this.headers=N.__headers__,this.statusCode=N.__status__,delete N.__headers__,delete N.__status__);var H=N.__sm__;if(H){t:{for(const J in H){N=J;break t}N=void 0}(this.i=N)&&(N=this.i,H=H!==null&&N in H?H[N]:void 0),this.data=H}else this.data=N}e(eh,gr);function ih(){mr.call(this),this.status=1}e(ih,mr);function Bi(N){this.g=N}e(Bi,th),Bi.prototype.ua=function(){Mt(this.g,"a")},Bi.prototype.ta=function(N){Mt(this.g,new eh(N))},Bi.prototype.sa=function(N){Mt(this.g,new ih)},Bi.prototype.ra=function(){Mt(this.g,"b")},ps.prototype.createWebChannel=ps.prototype.g,ce.prototype.send=ce.prototype.o,ce.prototype.open=ce.prototype.m,ce.prototype.close=ce.prototype.close,Vu=function(){return new ps},Bu=function(){return is()},Nu=ui,ea={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ns.NO_ERROR=0,ns.TIMEOUT=8,ns.HTTP_ERROR=6,Is=ns,xo.COMPLETE="complete",Du=xo,co.EventType=hn,hn.OPEN="a",hn.CLOSE="b",hn.ERROR="c",hn.MESSAGE="d",It.prototype.listen=It.prototype.K,Pn=co,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,Fu=Yt}).apply(typeof xs<"u"?xs:typeof self<"u"?self:typeof window<"u"?window:{});const bh="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(c){this.uid=c}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(c){return c.uid===this.uid}}oe.UNAUTHENTICATED=new oe(null),oe.GOOGLE_CREDENTIALS=new oe("google-credentials-uid"),oe.FIRST_PARTY=new oe("first-party-uid"),oe.MOCK_USER=new oe("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si=new ks("@firebase/firestore");function Tn(){return Si.logLevel}function xt(A,...c){if(Si.logLevel<=Ot.DEBUG){const x=c.map(Ma);Si.debug(`Firestore (${nn}): ${A}`,...x)}}function Ke(A,...c){if(Si.logLevel<=Ot.ERROR){const x=c.map(Ma);Si.error(`Firestore (${nn}): ${A}`,...x)}}function Qi(A,...c){if(Si.logLevel<=Ot.WARN){const x=c.map(Ma);Si.warn(`Firestore (${nn}): ${A}`,...x)}}function Ma(A){if(typeof A=="string")return A;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(x){return JSON.stringify(x)}(A)}catch{return A}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(A="Unexpected state"){const c=`FIRESTORE (${nn}) INTERNAL ASSERTION FAILED: `+A;throw Ke(c),new Error(c)}function Vt(A,c){A||Ct()}function Pt(A,c){return A}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class gt extends Ae{constructor(c,x){super(c,x),this.code=c,this.message=x,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(){this.promise=new Promise((c,x)=>{this.resolve=c,this.reject=x})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(c,x){this.user=x,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${c}`)}}class em{getToken(){return Promise.resolve(null)}invalidateToken(){}start(c,x){c.enqueueRetryable(()=>x(oe.UNAUTHENTICATED))}shutdown(){}}class im{constructor(c){this.token=c,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(c,x){this.changeListener=x,c.enqueueRetryable(()=>x(this.token.user))}shutdown(){this.changeListener=null}}class nm{constructor(c){this.t=c,this.currentUser=oe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(c,x){Vt(this.o===void 0);let P=this.i;const M=t=>this.i!==P?(P=this.i,x(t)):Promise.resolve();let D=new Xe;this.o=()=>{this.i++,this.currentUser=this.u(),D.resolve(),D=new Xe,c.enqueueRetryable(()=>M(this.currentUser))};const v=()=>{const t=D;c.enqueueRetryable(async()=>{await t.promise,await M(this.currentUser)})},E=t=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.o&&(this.auth.addAuthTokenListener(this.o),v())};this.t.onInit(t=>E(t)),setTimeout(()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?E(t):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),D.resolve(),D=new Xe)}},0),v()}getToken(){const c=this.i,x=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(x).then(P=>this.i!==c?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):P?(Vt(typeof P.accessToken=="string"),new Gu(P.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const c=this.auth&&this.auth.getUid();return Vt(c===null||typeof c=="string"),new oe(c)}}class sm{constructor(c,x,P){this.l=c,this.h=x,this.P=P,this.type="FirstParty",this.user=oe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const c=this.T();return c&&this.I.set("Authorization",c),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rm{constructor(c,x,P){this.l=c,this.h=x,this.P=P}getToken(){return Promise.resolve(new sm(this.l,this.h,this.P))}start(c,x){c.enqueueRetryable(()=>x(oe.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class am{constructor(c){this.value=c,this.type="AppCheck",this.headers=new Map,c&&c.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class om{constructor(c){this.A=c,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(c,x){Vt(this.o===void 0);const P=D=>{D.error!=null&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${D.error.message}`);const v=D.token!==this.R;return this.R=D.token,xt("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?x(D.token):Promise.resolve()};this.o=D=>{c.enqueueRetryable(()=>P(D))};const M=D=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=D,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(D=>M(D)),setTimeout(()=>{if(!this.appCheck){const D=this.A.getImmediate({optional:!0});D?M(D):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const c=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(c).then(x=>x?(Vt(typeof x.token=="string"),this.R=x.token,new am(x.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(A){const c=typeof self<"u"&&(self.crypto||self.msCrypto),x=new Uint8Array(A);if(c&&typeof c.getRandomValues=="function")c.getRandomValues(x);else for(let P=0;P<A;P++)x[P]=Math.floor(256*Math.random());return x}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{static newId(){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",x=Math.floor(256/c.length)*c.length;let P="";for(;P.length<20;){const M=hm(40);for(let D=0;D<M.length;++D)P.length<20&&M[D]<x&&(P+=c.charAt(M[D]%c.length))}return P}}function Nt(A,c){return A<c?-1:A>c?1:0}function Ji(A,c,x){return A.length===c.length&&A.every((P,M)=>x(P,c[M]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(c,x){if(this.seconds=c,this.nanoseconds=x,x<0)throw new gt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+x);if(x>=1e9)throw new gt(ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+x);if(c<-62135596800)throw new gt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+c);if(c>=253402300800)throw new gt(ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+c)}static now(){return jt.fromMillis(Date.now())}static fromDate(c){return jt.fromMillis(c.getTime())}static fromMillis(c){const x=Math.floor(c/1e3),P=Math.floor(1e6*(c-1e3*x));return new jt(x,P)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(c){return this.seconds===c.seconds?Nt(this.nanoseconds,c.nanoseconds):Nt(this.seconds,c.seconds)}isEqual(c){return c.seconds===this.seconds&&c.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const c=this.seconds- -62135596800;return String(c).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(c){this.timestamp=c}static fromTimestamp(c){return new At(c)}static min(){return new At(new jt(0,0))}static max(){return new At(new jt(253402300799,999999999))}compareTo(c){return this.timestamp._compareTo(c.timestamp)}isEqual(c){return this.timestamp.isEqual(c.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(c,x,P){x===void 0?x=0:x>c.length&&Ct(),P===void 0?P=c.length-x:P>c.length-x&&Ct(),this.segments=c,this.offset=x,this.len=P}get length(){return this.len}isEqual(c){return Un.comparator(this,c)===0}child(c){const x=this.segments.slice(this.offset,this.limit());return c instanceof Un?c.forEach(P=>{x.push(P)}):x.push(c),this.construct(x)}limit(){return this.offset+this.length}popFirst(c){return c=c===void 0?1:c,this.construct(this.segments,this.offset+c,this.length-c)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(c){return this.segments[this.offset+c]}isEmpty(){return this.length===0}isPrefixOf(c){if(c.length<this.length)return!1;for(let x=0;x<this.length;x++)if(this.get(x)!==c.get(x))return!1;return!0}isImmediateParentOf(c){if(this.length+1!==c.length)return!1;for(let x=0;x<this.length;x++)if(this.get(x)!==c.get(x))return!1;return!0}forEach(c){for(let x=this.offset,P=this.limit();x<P;x++)c(this.segments[x])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(c,x){const P=Math.min(c.length,x.length);for(let M=0;M<P;M++){const D=c.get(M),v=x.get(M);if(D<v)return-1;if(D>v)return 1}return c.length<x.length?-1:c.length>x.length?1:0}}class bt extends Un{construct(c,x,P){return new bt(c,x,P)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...c){const x=[];for(const P of c){if(P.indexOf("//")>=0)throw new gt(ht.INVALID_ARGUMENT,`Invalid segment (${P}). Paths must not contain // in them.`);x.push(...P.split("/").filter(M=>M.length>0))}return new bt(x)}static emptyPath(){return new bt([])}}const lm=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class te extends Un{construct(c,x,P){return new te(c,x,P)}static isValidIdentifier(c){return lm.test(c)}canonicalString(){return this.toArray().map(c=>(c=c.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),te.isValidIdentifier(c)||(c="`"+c+"`"),c)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new te(["__name__"])}static fromServerFormat(c){const x=[];let P="",M=0;const D=()=>{if(P.length===0)throw new gt(ht.INVALID_ARGUMENT,`Invalid field path (${c}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);x.push(P),P=""};let v=!1;for(;M<c.length;){const E=c[M];if(E==="\\"){if(M+1===c.length)throw new gt(ht.INVALID_ARGUMENT,"Path has trailing escape character: "+c);const t=c[M+1];if(t!=="\\"&&t!=="."&&t!=="`")throw new gt(ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+c);P+=t,M+=2}else E==="`"?(v=!v,M++):E!=="."||v?(P+=E,M++):(D(),M++)}if(D(),v)throw new gt(ht.INVALID_ARGUMENT,"Unterminated ` in path: "+c);return new te(x)}static emptyPath(){return new te([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(c){this.path=c}static fromPath(c){return new yt(bt.fromString(c))}static fromName(c){return new yt(bt.fromString(c).popFirst(5))}static empty(){return new yt(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(c){return this.path.length>=2&&this.path.get(this.path.length-2)===c}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(c){return c!==null&&bt.comparator(this.path,c.path)===0}toString(){return this.path.toString()}static comparator(c,x){return bt.comparator(c.path,x.path)}static isDocumentKey(c){return c.length%2==0}static fromSegments(c){return new yt(new bt(c.slice()))}}function um(A,c){const x=A.toTimestamp().seconds,P=A.toTimestamp().nanoseconds+1,M=At.fromTimestamp(P===1e9?new jt(x+1,0):new jt(x,P));return new ai(M,yt.empty(),c)}function fm(A){return new ai(A.readTime,A.key,-1)}class ai{constructor(c,x,P){this.readTime=c,this.documentKey=x,this.largestBatchId=P}static min(){return new ai(At.min(),yt.empty(),-1)}static max(){return new ai(At.max(),yt.empty(),-1)}}function dm(A,c){let x=A.readTime.compareTo(c.readTime);return x!==0?x:(x=yt.comparator(A.documentKey,c.documentKey),x!==0?x:Nt(A.largestBatchId,c.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vm{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(c){this.onCommittedListeners.push(c)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(c=>c())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jn(A){if(A.code!==ht.FAILED_PRECONDITION||A.message!==cm)throw A;xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(c){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,c(x=>{this.isDone=!0,this.result=x,this.nextCallback&&this.nextCallback(x)},x=>{this.isDone=!0,this.error=x,this.catchCallback&&this.catchCallback(x)})}catch(c){return this.next(void 0,c)}next(c,x){return this.callbackAttached&&Ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(x,this.error):this.wrapSuccess(c,this.result):new ut((P,M)=>{this.nextCallback=D=>{this.wrapSuccess(c,D).next(P,M)},this.catchCallback=D=>{this.wrapFailure(x,D).next(P,M)}})}toPromise(){return new Promise((c,x)=>{this.next(c,x)})}wrapUserFunction(c){try{const x=c();return x instanceof ut?x:ut.resolve(x)}catch(x){return ut.reject(x)}}wrapSuccess(c,x){return c?this.wrapUserFunction(()=>c(x)):ut.resolve(x)}wrapFailure(c,x){return c?this.wrapUserFunction(()=>c(x)):ut.reject(x)}static resolve(c){return new ut((x,P)=>{x(c)})}static reject(c){return new ut((x,P)=>{P(c)})}static waitFor(c){return new ut((x,P)=>{let M=0,D=0,v=!1;c.forEach(E=>{++M,E.next(()=>{++D,v&&D===M&&x()},t=>P(t))}),v=!0,D===M&&x()})}static or(c){let x=ut.resolve(!1);for(const P of c)x=x.next(M=>M?ut.resolve(M):P());return x}static forEach(c,x){const P=[];return c.forEach((M,D)=>{P.push(x.call(this,M,D))}),this.waitFor(P)}static mapArray(c,x){return new ut((P,M)=>{const D=c.length,v=new Array(D);let E=0;for(let t=0;t<D;t++){const o=t;x(c[o]).next(g=>{v[o]=g,++E,E===D&&P(v)},g=>M(g))}})}static doWhile(c,x){return new ut((P,M)=>{const D=()=>{c()===!0?x().next(()=>{D()},M):P()};D()})}}function pm(A){const c=A.match(/Android ([\d.]+)/i),x=c?c[1].split(".").slice(0,2).join("."):"-1";return Number(x)}function Zn(A){return A.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(c,x){this.previousValue=c,x&&(x.sequenceNumberHandler=P=>this.ie(P),this.se=P=>x.writeSequenceNumber(P))}ie(c){return this.previousValue=Math.max(c,this.previousValue),this.previousValue}next(){const c=++this.previousValue;return this.se&&this.se(c),c}}wa.oe=-1;function er(A){return A==null}function bs(A){return A===0&&1/A==-1/0}function gm(A){return typeof A=="number"&&Number.isInteger(A)&&!bs(A)&&A<=Number.MAX_SAFE_INTEGER&&A>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zh(A){let c=0;for(const x in A)Object.prototype.hasOwnProperty.call(A,x)&&c++;return c}function sn(A,c){for(const x in A)Object.prototype.hasOwnProperty.call(A,x)&&c(x,A[x])}function bu(A){for(const c in A)if(Object.prototype.hasOwnProperty.call(A,c))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(c,x){this.comparator=c,this.root=x||_t.EMPTY}insert(c,x){return new Wt(this.comparator,this.root.insert(c,x,this.comparator).copy(null,null,_t.BLACK,null,null))}remove(c){return new Wt(this.comparator,this.root.remove(c,this.comparator).copy(null,null,_t.BLACK,null,null))}get(c){let x=this.root;for(;!x.isEmpty();){const P=this.comparator(c,x.key);if(P===0)return x.value;P<0?x=x.left:P>0&&(x=x.right)}return null}indexOf(c){let x=0,P=this.root;for(;!P.isEmpty();){const M=this.comparator(c,P.key);if(M===0)return x+P.left.size;M<0?P=P.left:(x+=P.left.size+1,P=P.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(c){return this.root.inorderTraversal(c)}forEach(c){this.inorderTraversal((x,P)=>(c(x,P),!1))}toString(){const c=[];return this.inorderTraversal((x,P)=>(c.push(`${x}:${P}`),!1)),`{${c.join(", ")}}`}reverseTraversal(c){return this.root.reverseTraversal(c)}getIterator(){return new ys(this.root,null,this.comparator,!1)}getIteratorFrom(c){return new ys(this.root,c,this.comparator,!1)}getReverseIterator(){return new ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(c){return new ys(this.root,c,this.comparator,!0)}}class ys{constructor(c,x,P,M){this.isReverse=M,this.nodeStack=[];let D=1;for(;!c.isEmpty();)if(D=x?P(c.key,x):1,x&&M&&(D*=-1),D<0)c=this.isReverse?c.left:c.right;else{if(D===0){this.nodeStack.push(c);break}this.nodeStack.push(c),c=this.isReverse?c.right:c.left}}getNext(){let c=this.nodeStack.pop();const x={key:c.key,value:c.value};if(this.isReverse)for(c=c.left;!c.isEmpty();)this.nodeStack.push(c),c=c.right;else for(c=c.right;!c.isEmpty();)this.nodeStack.push(c),c=c.left;return x}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const c=this.nodeStack[this.nodeStack.length-1];return{key:c.key,value:c.value}}}class _t{constructor(c,x,P,M,D){this.key=c,this.value=x,this.color=P??_t.RED,this.left=M??_t.EMPTY,this.right=D??_t.EMPTY,this.size=this.left.size+1+this.right.size}copy(c,x,P,M,D){return new _t(c??this.key,x??this.value,P??this.color,M??this.left,D??this.right)}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,x,P){let M=this;const D=P(c,M.key);return M=D<0?M.copy(null,null,null,M.left.insert(c,x,P),null):D===0?M.copy(null,x,null,null,null):M.copy(null,null,null,null,M.right.insert(c,x,P)),M.fixUp()}removeMin(){if(this.left.isEmpty())return _t.EMPTY;let c=this;return c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.removeMin(),null),c.fixUp()}remove(c,x){let P,M=this;if(x(c,M.key)<0)M.left.isEmpty()||M.left.isRed()||M.left.left.isRed()||(M=M.moveRedLeft()),M=M.copy(null,null,null,M.left.remove(c,x),null);else{if(M.left.isRed()&&(M=M.rotateRight()),M.right.isEmpty()||M.right.isRed()||M.right.left.isRed()||(M=M.moveRedRight()),x(c,M.key)===0){if(M.right.isEmpty())return _t.EMPTY;P=M.right.min(),M=M.copy(P.key,P.value,null,null,M.right.removeMin())}M=M.copy(null,null,null,null,M.right.remove(c,x))}return M.fixUp()}isRed(){return this.color}fixUp(){let c=this;return c.right.isRed()&&!c.left.isRed()&&(c=c.rotateLeft()),c.left.isRed()&&c.left.left.isRed()&&(c=c.rotateRight()),c.left.isRed()&&c.right.isRed()&&(c=c.colorFlip()),c}moveRedLeft(){let c=this.colorFlip();return c.right.left.isRed()&&(c=c.copy(null,null,null,null,c.right.rotateRight()),c=c.rotateLeft(),c=c.colorFlip()),c}moveRedRight(){let c=this.colorFlip();return c.left.left.isRed()&&(c=c.rotateRight(),c=c.colorFlip()),c}rotateLeft(){const c=this.copy(null,null,_t.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight(){const c=this.copy(null,null,_t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip(){const c=this.left.copy(null,null,!this.left.color,null,null),x=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,x)}checkMaxDepth(){const c=this.check();return Math.pow(2,c)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ct();const c=this.left.check();if(c!==this.right.check())throw Ct();return c+(this.isRed()?0:1)}}_t.EMPTY=null,_t.RED=!0,_t.BLACK=!1;_t.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct()}get value(){throw Ct()}get color(){throw Ct()}get left(){throw Ct()}get right(){throw Ct()}copy(c,x,P,M,D){return this}insert(c,x,P){return new _t(c,x)}remove(c,x){return this}isEmpty(){return!0}inorderTraversal(c){return!1}reverseTraversal(c){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(c){this.comparator=c,this.data=new Wt(this.comparator)}has(c){return this.data.get(c)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(c){return this.data.indexOf(c)}forEach(c){this.data.inorderTraversal((x,P)=>(c(x),!1))}forEachInRange(c,x){const P=this.data.getIteratorFrom(c[0]);for(;P.hasNext();){const M=P.getNext();if(this.comparator(M.key,c[1])>=0)return;x(M.key)}}forEachWhile(c,x){let P;for(P=x!==void 0?this.data.getIteratorFrom(x):this.data.getIterator();P.hasNext();)if(!c(P.getNext().key))return}firstAfterOrEqual(c){const x=this.data.getIteratorFrom(c);return x.hasNext()?x.getNext().key:null}getIterator(){return new Xh(this.data.getIterator())}getIteratorFrom(c){return new Xh(this.data.getIteratorFrom(c))}add(c){return this.copy(this.data.remove(c).insert(c,!0))}delete(c){return this.has(c)?this.copy(this.data.remove(c)):this}isEmpty(){return this.data.isEmpty()}unionWith(c){let x=this;return x.size<c.size&&(x=c,c=this),c.forEach(P=>{x=x.add(P)}),x}isEqual(c){if(!(c instanceof ee)||this.size!==c.size)return!1;const x=this.data.getIterator(),P=c.data.getIterator();for(;x.hasNext();){const M=x.getNext().key,D=P.getNext().key;if(this.comparator(M,D)!==0)return!1}return!0}toArray(){const c=[];return this.forEach(x=>{c.push(x)}),c}toString(){const c=[];return this.forEach(x=>c.push(x)),"SortedSet("+c.toString()+")"}copy(c){const x=new ee(this.comparator);return x.data=c,x}}class Xh{constructor(c){this.iter=c}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(c){this.fields=c,c.sort(te.comparator)}static empty(){return new Te([])}unionWith(c){let x=new ee(te.comparator);for(const P of this.fields)x=x.add(P);for(const P of c)x=x.add(P);return new Te(x.toArray())}covers(c){for(const x of this.fields)if(x.isPrefixOf(c))return!0;return!1}isEqual(c){return Ji(this.fields,c.fields,(x,P)=>x.isEqual(P))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(c){this.binaryString=c}static fromBase64String(c){const x=function(M){try{return atob(M)}catch(D){throw typeof DOMException<"u"&&D instanceof DOMException?new zu("Invalid base64 string: "+D):D}}(c);return new ie(x)}static fromUint8Array(c){const x=function(M){let D="";for(let v=0;v<M.length;++v)D+=String.fromCharCode(M[v]);return D}(c);return new ie(x)}[Symbol.iterator](){let c=0;return{next:()=>c<this.binaryString.length?{value:this.binaryString.charCodeAt(c++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(x){return btoa(x)}(this.binaryString)}toUint8Array(){return function(x){const P=new Uint8Array(x.length);for(let M=0;M<x.length;M++)P[M]=x.charCodeAt(M);return P}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(c){return Nt(this.binaryString,c.binaryString)}isEqual(c){return this.binaryString===c.binaryString}}ie.EMPTY_BYTE_STRING=new ie("");const mm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(A){if(Vt(!!A),typeof A=="string"){let c=0;const x=mm.exec(A);if(Vt(!!x),x[1]){let M=x[1];M=(M+"000000000").substr(0,9),c=Number(M)}const P=new Date(A);return{seconds:Math.floor(P.getTime()/1e3),nanos:c}}return{seconds:Kt(A.seconds),nanos:Kt(A.nanos)}}function Kt(A){return typeof A=="number"?A:typeof A=="string"?Number(A):0}function Ci(A){return typeof A=="string"?ie.fromBase64String(A):ie.fromUint8Array(A)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(A){var c,x;return((x=(((c=A==null?void 0:A.mapValue)===null||c===void 0?void 0:c.fields)||{}).__type__)===null||x===void 0?void 0:x.stringValue)==="server_timestamp"}function Oa(A){const c=A.mapValue.fields.__previous_value__;return La(c)?Oa(c):c}function bn(A){const c=oi(A.mapValue.fields.__local_write_time__.timestampValue);return new jt(c.seconds,c.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(c,x,P,M,D,v,E,t,o){this.databaseId=c,this.appId=x,this.persistenceKey=P,this.host=M,this.ssl=D,this.forceLongPolling=v,this.autoDetectLongPolling=E,this.longPollingOptions=t,this.useFetchStreams=o}}class zn{constructor(c,x){this.projectId=c,this.database=x||"(default)"}static empty(){return new zn("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(c){return c instanceof zn&&c.projectId===this.projectId&&c.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ai(A){return"nullValue"in A?0:"booleanValue"in A?1:"integerValue"in A||"doubleValue"in A?2:"timestampValue"in A?3:"stringValue"in A?5:"bytesValue"in A?6:"referenceValue"in A?7:"geoPointValue"in A?8:"arrayValue"in A?9:"mapValue"in A?La(A)?4:Tm(A)?9007199254740991:ym(A)?10:11:Ct()}function Fe(A,c){if(A===c)return!0;const x=Ai(A);if(x!==Ai(c))return!1;switch(x){case 0:case 9007199254740991:return!0;case 1:return A.booleanValue===c.booleanValue;case 4:return bn(A).isEqual(bn(c));case 3:return function(M,D){if(typeof M.timestampValue=="string"&&typeof D.timestampValue=="string"&&M.timestampValue.length===D.timestampValue.length)return M.timestampValue===D.timestampValue;const v=oi(M.timestampValue),E=oi(D.timestampValue);return v.seconds===E.seconds&&v.nanos===E.nanos}(A,c);case 5:return A.stringValue===c.stringValue;case 6:return function(M,D){return Ci(M.bytesValue).isEqual(Ci(D.bytesValue))}(A,c);case 7:return A.referenceValue===c.referenceValue;case 8:return function(M,D){return Kt(M.geoPointValue.latitude)===Kt(D.geoPointValue.latitude)&&Kt(M.geoPointValue.longitude)===Kt(D.geoPointValue.longitude)}(A,c);case 2:return function(M,D){if("integerValue"in M&&"integerValue"in D)return Kt(M.integerValue)===Kt(D.integerValue);if("doubleValue"in M&&"doubleValue"in D){const v=Kt(M.doubleValue),E=Kt(D.doubleValue);return v===E?bs(v)===bs(E):isNaN(v)&&isNaN(E)}return!1}(A,c);case 9:return Ji(A.arrayValue.values||[],c.arrayValue.values||[],Fe);case 10:case 11:return function(M,D){const v=M.mapValue.fields||{},E=D.mapValue.fields||{};if(zh(v)!==zh(E))return!1;for(const t in v)if(v.hasOwnProperty(t)&&(E[t]===void 0||!Fe(v[t],E[t])))return!1;return!0}(A,c);default:return Ct()}}function Xn(A,c){return(A.values||[]).find(x=>Fe(x,c))!==void 0}function ji(A,c){if(A===c)return 0;const x=Ai(A),P=Ai(c);if(x!==P)return Nt(x,P);switch(x){case 0:case 9007199254740991:return 0;case 1:return Nt(A.booleanValue,c.booleanValue);case 2:return function(D,v){const E=Kt(D.integerValue||D.doubleValue),t=Kt(v.integerValue||v.doubleValue);return E<t?-1:E>t?1:E===t?0:isNaN(E)?isNaN(t)?0:-1:1}(A,c);case 3:return Wh(A.timestampValue,c.timestampValue);case 4:return Wh(bn(A),bn(c));case 5:return Nt(A.stringValue,c.stringValue);case 6:return function(D,v){const E=Ci(D),t=Ci(v);return E.compareTo(t)}(A.bytesValue,c.bytesValue);case 7:return function(D,v){const E=D.split("/"),t=v.split("/");for(let o=0;o<E.length&&o<t.length;o++){const g=Nt(E[o],t[o]);if(g!==0)return g}return Nt(E.length,t.length)}(A.referenceValue,c.referenceValue);case 8:return function(D,v){const E=Nt(Kt(D.latitude),Kt(v.latitude));return E!==0?E:Nt(Kt(D.longitude),Kt(v.longitude))}(A.geoPointValue,c.geoPointValue);case 9:return Yh(A.arrayValue,c.arrayValue);case 10:return function(D,v){var E,t,o,g;const a=D.fields||{},r=v.fields||{},s=(E=a.value)===null||E===void 0?void 0:E.arrayValue,e=(t=r.value)===null||t===void 0?void 0:t.arrayValue,n=Nt(((o=s==null?void 0:s.values)===null||o===void 0?void 0:o.length)||0,((g=e==null?void 0:e.values)===null||g===void 0?void 0:g.length)||0);return n!==0?n:Yh(s,e)}(A.mapValue,c.mapValue);case 11:return function(D,v){if(D===Ts.mapValue&&v===Ts.mapValue)return 0;if(D===Ts.mapValue)return 1;if(v===Ts.mapValue)return-1;const E=D.fields||{},t=Object.keys(E),o=v.fields||{},g=Object.keys(o);t.sort(),g.sort();for(let a=0;a<t.length&&a<g.length;++a){const r=Nt(t[a],g[a]);if(r!==0)return r;const s=ji(E[t[a]],o[g[a]]);if(s!==0)return s}return Nt(t.length,g.length)}(A.mapValue,c.mapValue);default:throw Ct()}}function Wh(A,c){if(typeof A=="string"&&typeof c=="string"&&A.length===c.length)return Nt(A,c);const x=oi(A),P=oi(c),M=Nt(x.seconds,P.seconds);return M!==0?M:Nt(x.nanos,P.nanos)}function Yh(A,c){const x=A.values||[],P=c.values||[];for(let M=0;M<x.length&&M<P.length;++M){const D=ji(x[M],P[M]);if(D)return D}return Nt(x.length,P.length)}function Zi(A){return ia(A)}function ia(A){return"nullValue"in A?"null":"booleanValue"in A?""+A.booleanValue:"integerValue"in A?""+A.integerValue:"doubleValue"in A?""+A.doubleValue:"timestampValue"in A?function(x){const P=oi(x);return`time(${P.seconds},${P.nanos})`}(A.timestampValue):"stringValue"in A?A.stringValue:"bytesValue"in A?function(x){return Ci(x).toBase64()}(A.bytesValue):"referenceValue"in A?function(x){return yt.fromName(x).toString()}(A.referenceValue):"geoPointValue"in A?function(x){return`geo(${x.latitude},${x.longitude})`}(A.geoPointValue):"arrayValue"in A?function(x){let P="[",M=!0;for(const D of x.values||[])M?M=!1:P+=",",P+=ia(D);return P+"]"}(A.arrayValue):"mapValue"in A?function(x){const P=Object.keys(x.fields||{}).sort();let M="{",D=!0;for(const v of P)D?D=!1:M+=",",M+=`${v}:${ia(x.fields[v])}`;return M+"}"}(A.mapValue):Ct()}function Hh(A,c){return{referenceValue:`projects/${A.projectId}/databases/${A.database}/documents/${c.path.canonicalString()}`}}function na(A){return!!A&&"integerValue"in A}function Fa(A){return!!A&&"arrayValue"in A}function Kh(A){return!!A&&"nullValue"in A}function $h(A){return!!A&&"doubleValue"in A&&isNaN(Number(A.doubleValue))}function Ms(A){return!!A&&"mapValue"in A}function ym(A){var c,x;return((x=(((c=A==null?void 0:A.mapValue)===null||c===void 0?void 0:c.fields)||{}).__type__)===null||x===void 0?void 0:x.stringValue)==="__vector__"}function Ln(A){if(A.geoPointValue)return{geoPointValue:Object.assign({},A.geoPointValue)};if(A.timestampValue&&typeof A.timestampValue=="object")return{timestampValue:Object.assign({},A.timestampValue)};if(A.mapValue){const c={mapValue:{fields:{}}};return sn(A.mapValue.fields,(x,P)=>c.mapValue.fields[x]=Ln(P)),c}if(A.arrayValue){const c={arrayValue:{values:[]}};for(let x=0;x<(A.arrayValue.values||[]).length;++x)c.arrayValue.values[x]=Ln(A.arrayValue.values[x]);return c}return Object.assign({},A)}function Tm(A){return(((A.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(c){this.value=c}static empty(){return new pe({mapValue:{}})}field(c){if(c.isEmpty())return this.value;{let x=this.value;for(let P=0;P<c.length-1;++P)if(x=(x.mapValue.fields||{})[c.get(P)],!Ms(x))return null;return x=(x.mapValue.fields||{})[c.lastSegment()],x||null}}set(c,x){this.getFieldsMap(c.popLast())[c.lastSegment()]=Ln(x)}setAll(c){let x=te.emptyPath(),P={},M=[];c.forEach((v,E)=>{if(!x.isImmediateParentOf(E)){const t=this.getFieldsMap(x);this.applyChanges(t,P,M),P={},M=[],x=E.popLast()}v?P[E.lastSegment()]=Ln(v):M.push(E.lastSegment())});const D=this.getFieldsMap(x);this.applyChanges(D,P,M)}delete(c){const x=this.field(c.popLast());Ms(x)&&x.mapValue.fields&&delete x.mapValue.fields[c.lastSegment()]}isEqual(c){return Fe(this.value,c.value)}getFieldsMap(c){let x=this.value;x.mapValue.fields||(x.mapValue={fields:{}});for(let P=0;P<c.length;++P){let M=x.mapValue.fields[c.get(P)];Ms(M)&&M.mapValue.fields||(M={mapValue:{fields:{}}},x.mapValue.fields[c.get(P)]=M),x=M}return x.mapValue.fields}applyChanges(c,x,P){sn(x,(M,D)=>c[M]=D);for(const M of P)delete c[M]}clone(){return new pe(Ln(this.value))}}function Xu(A){const c=[];return sn(A.fields,(x,P)=>{const M=new te([x]);if(Ms(P)){const D=Xu(P.mapValue).fields;if(D.length===0)c.push(M);else for(const v of D)c.push(M.child(v))}else c.push(M)}),new Te(c)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(c,x,P,M,D,v,E){this.key=c,this.documentType=x,this.version=P,this.readTime=M,this.createTime=D,this.data=v,this.documentState=E}static newInvalidDocument(c){return new he(c,0,At.min(),At.min(),At.min(),pe.empty(),0)}static newFoundDocument(c,x,P,M){return new he(c,1,x,At.min(),P,M,0)}static newNoDocument(c,x){return new he(c,2,x,At.min(),At.min(),pe.empty(),0)}static newUnknownDocument(c,x){return new he(c,3,x,At.min(),At.min(),pe.empty(),2)}convertToFoundDocument(c,x){return!this.createTime.isEqual(At.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=c),this.version=c,this.documentType=1,this.data=x,this.documentState=0,this}convertToNoDocument(c){return this.version=c,this.documentType=2,this.data=pe.empty(),this.documentState=0,this}convertToUnknownDocument(c){return this.version=c,this.documentType=3,this.data=pe.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=At.min(),this}setReadTime(c){return this.readTime=c,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(c){return c instanceof he&&this.key.isEqual(c.key)&&this.version.isEqual(c.version)&&this.documentType===c.documentType&&this.documentState===c.documentState&&this.data.isEqual(c.data)}mutableCopy(){return new he(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(c,x){this.position=c,this.inclusive=x}}function Qh(A,c,x){let P=0;for(let M=0;M<A.position.length;M++){const D=c[M],v=A.position[M];if(D.field.isKeyField()?P=yt.comparator(yt.fromName(v.referenceValue),x.key):P=ji(v,x.data.field(D.field)),D.dir==="desc"&&(P*=-1),P!==0)break}return P}function Jh(A,c){if(A===null)return c===null;if(c===null||A.inclusive!==c.inclusive||A.position.length!==c.position.length)return!1;for(let x=0;x<A.position.length;x++)if(!Fe(A.position[x],c.position[x]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(c,x="asc"){this.field=c,this.dir=x}}function Em(A,c){return A.dir===c.dir&&A.field.isEqual(c.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{}class Jt extends Wu{constructor(c,x,P){super(),this.field=c,this.op=x,this.value=P}static create(c,x,P){return c.isKeyField()?x==="in"||x==="not-in"?this.createKeyFieldInFilter(c,x,P):new Cm(c,x,P):x==="array-contains"?new Rm(c,P):x==="in"?new Im(c,P):x==="not-in"?new Mm(c,P):x==="array-contains-any"?new wm(c,P):new Jt(c,x,P)}static createKeyFieldInFilter(c,x,P){return x==="in"?new Am(c,P):new Pm(c,P)}matches(c){const x=c.data.field(this.field);return this.op==="!="?x!==null&&this.matchesComparison(ji(x,this.value)):x!==null&&Ai(this.value)===Ai(x)&&this.matchesComparison(ji(x,this.value))}matchesComparison(c){switch(this.op){case"<":return c<0;case"<=":return c<=0;case"==":return c===0;case"!=":return c!==0;case">":return c>0;case">=":return c>=0;default:return Ct()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ce extends Wu{constructor(c,x){super(),this.filters=c,this.op=x,this.ae=null}static create(c,x){return new Ce(c,x)}matches(c){return Yu(this)?this.filters.find(x=>!x.matches(c))===void 0:this.filters.find(x=>x.matches(c))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((c,x)=>c.concat(x.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Yu(A){return A.op==="and"}function Hu(A){return Sm(A)&&Yu(A)}function Sm(A){for(const c of A.filters)if(c instanceof Ce)return!1;return!0}function sa(A){if(A instanceof Jt)return A.field.canonicalString()+A.op.toString()+Zi(A.value);if(Hu(A))return A.filters.map(c=>sa(c)).join(",");{const c=A.filters.map(x=>sa(x)).join(",");return`${A.op}(${c})`}}function Ku(A,c){return A instanceof Jt?function(P,M){return M instanceof Jt&&P.op===M.op&&P.field.isEqual(M.field)&&Fe(P.value,M.value)}(A,c):A instanceof Ce?function(P,M){return M instanceof Ce&&P.op===M.op&&P.filters.length===M.filters.length?P.filters.reduce((D,v,E)=>D&&Ku(v,M.filters[E]),!0):!1}(A,c):void Ct()}function $u(A){return A instanceof Jt?function(x){return`${x.field.canonicalString()} ${x.op} ${Zi(x.value)}`}(A):A instanceof Ce?function(x){return x.op.toString()+" {"+x.getFilters().map($u).join(" ,")+"}"}(A):"Filter"}class Cm extends Jt{constructor(c,x,P){super(c,x,P),this.key=yt.fromName(P.referenceValue)}matches(c){const x=yt.comparator(c.key,this.key);return this.matchesComparison(x)}}class Am extends Jt{constructor(c,x){super(c,"in",x),this.keys=Qu("in",x)}matches(c){return this.keys.some(x=>x.isEqual(c.key))}}class Pm extends Jt{constructor(c,x){super(c,"not-in",x),this.keys=Qu("not-in",x)}matches(c){return!this.keys.some(x=>x.isEqual(c.key))}}function Qu(A,c){var x;return(((x=c.arrayValue)===null||x===void 0?void 0:x.values)||[]).map(P=>yt.fromName(P.referenceValue))}class Rm extends Jt{constructor(c,x){super(c,"array-contains",x)}matches(c){const x=c.data.field(this.field);return Fa(x)&&Xn(x.arrayValue,this.value)}}class Im extends Jt{constructor(c,x){super(c,"in",x)}matches(c){const x=c.data.field(this.field);return x!==null&&Xn(this.value.arrayValue,x)}}class Mm extends Jt{constructor(c,x){super(c,"not-in",x)}matches(c){if(Xn(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const x=c.data.field(this.field);return x!==null&&!Xn(this.value.arrayValue,x)}}class wm extends Jt{constructor(c,x){super(c,"array-contains-any",x)}matches(c){const x=c.data.field(this.field);return!(!Fa(x)||!x.arrayValue.values)&&x.arrayValue.values.some(P=>Xn(this.value.arrayValue,P))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(c,x=null,P=[],M=[],D=null,v=null,E=null){this.path=c,this.collectionGroup=x,this.orderBy=P,this.filters=M,this.limit=D,this.startAt=v,this.endAt=E,this.ue=null}}function jh(A,c=null,x=[],P=[],M=null,D=null,v=null){return new Lm(A,c,x,P,M,D,v)}function Da(A){const c=Pt(A);if(c.ue===null){let x=c.path.canonicalString();c.collectionGroup!==null&&(x+="|cg:"+c.collectionGroup),x+="|f:",x+=c.filters.map(P=>sa(P)).join(","),x+="|ob:",x+=c.orderBy.map(P=>function(D){return D.field.canonicalString()+D.dir}(P)).join(","),er(c.limit)||(x+="|l:",x+=c.limit),c.startAt&&(x+="|lb:",x+=c.startAt.inclusive?"b:":"a:",x+=c.startAt.position.map(P=>Zi(P)).join(",")),c.endAt&&(x+="|ub:",x+=c.endAt.inclusive?"a:":"b:",x+=c.endAt.position.map(P=>Zi(P)).join(",")),c.ue=x}return c.ue}function Na(A,c){if(A.limit!==c.limit||A.orderBy.length!==c.orderBy.length)return!1;for(let x=0;x<A.orderBy.length;x++)if(!Em(A.orderBy[x],c.orderBy[x]))return!1;if(A.filters.length!==c.filters.length)return!1;for(let x=0;x<A.filters.length;x++)if(!Ku(A.filters[x],c.filters[x]))return!1;return A.collectionGroup===c.collectionGroup&&!!A.path.isEqual(c.path)&&!!Jh(A.startAt,c.startAt)&&Jh(A.endAt,c.endAt)}function ra(A){return yt.isDocumentKey(A.path)&&A.collectionGroup===null&&A.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(c,x=null,P=[],M=[],D=null,v="F",E=null,t=null){this.path=c,this.collectionGroup=x,this.explicitOrderBy=P,this.filters=M,this.limit=D,this.limitType=v,this.startAt=E,this.endAt=t,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Om(A,c,x,P,M,D,v,E){return new kn(A,c,x,P,M,D,v,E)}function Ba(A){return new kn(A)}function Zh(A){return A.filters.length===0&&A.limit===null&&A.startAt==null&&A.endAt==null&&(A.explicitOrderBy.length===0||A.explicitOrderBy.length===1&&A.explicitOrderBy[0].field.isKeyField())}function Ju(A){return A.collectionGroup!==null}function On(A){const c=Pt(A);if(c.ce===null){c.ce=[];const x=new Set;for(const D of c.explicitOrderBy)c.ce.push(D),x.add(D.field.canonicalString());const P=c.explicitOrderBy.length>0?c.explicitOrderBy[c.explicitOrderBy.length-1].dir:"asc";(function(v){let E=new ee(te.comparator);return v.filters.forEach(t=>{t.getFlattenedFilters().forEach(o=>{o.isInequality()&&(E=E.add(o.field))})}),E})(c).forEach(D=>{x.has(D.canonicalString())||D.isKeyField()||c.ce.push(new Xs(D,P))}),x.has(te.keyField().canonicalString())||c.ce.push(new Xs(te.keyField(),P))}return c.ce}function we(A){const c=Pt(A);return c.le||(c.le=Fm(c,On(A))),c.le}function Fm(A,c){if(A.limitType==="F")return jh(A.path,A.collectionGroup,c,A.filters,A.limit,A.startAt,A.endAt);{c=c.map(M=>{const D=M.dir==="desc"?"asc":"desc";return new Xs(M.field,D)});const x=A.endAt?new zs(A.endAt.position,A.endAt.inclusive):null,P=A.startAt?new zs(A.startAt.position,A.startAt.inclusive):null;return jh(A.path,A.collectionGroup,c,A.filters,A.limit,x,P)}}function aa(A,c){const x=A.filters.concat([c]);return new kn(A.path,A.collectionGroup,A.explicitOrderBy.slice(),x,A.limit,A.limitType,A.startAt,A.endAt)}function oa(A,c,x){return new kn(A.path,A.collectionGroup,A.explicitOrderBy.slice(),A.filters.slice(),c,x,A.startAt,A.endAt)}function ir(A,c){return Na(we(A),we(c))&&A.limitType===c.limitType}function ju(A){return`${Da(we(A))}|lt:${A.limitType}`}function Gi(A){return`Query(target=${function(x){let P=x.path.canonicalString();return x.collectionGroup!==null&&(P+=" collectionGroup="+x.collectionGroup),x.filters.length>0&&(P+=`, filters: [${x.filters.map(M=>$u(M)).join(", ")}]`),er(x.limit)||(P+=", limit: "+x.limit),x.orderBy.length>0&&(P+=`, orderBy: [${x.orderBy.map(M=>function(v){return`${v.field.canonicalString()} (${v.dir})`}(M)).join(", ")}]`),x.startAt&&(P+=", startAt: ",P+=x.startAt.inclusive?"b:":"a:",P+=x.startAt.position.map(M=>Zi(M)).join(",")),x.endAt&&(P+=", endAt: ",P+=x.endAt.inclusive?"a:":"b:",P+=x.endAt.position.map(M=>Zi(M)).join(",")),`Target(${P})`}(we(A))}; limitType=${A.limitType})`}function nr(A,c){return c.isFoundDocument()&&function(P,M){const D=M.key.path;return P.collectionGroup!==null?M.key.hasCollectionId(P.collectionGroup)&&P.path.isPrefixOf(D):yt.isDocumentKey(P.path)?P.path.isEqual(D):P.path.isImmediateParentOf(D)}(A,c)&&function(P,M){for(const D of On(P))if(!D.field.isKeyField()&&M.data.field(D.field)===null)return!1;return!0}(A,c)&&function(P,M){for(const D of P.filters)if(!D.matches(M))return!1;return!0}(A,c)&&function(P,M){return!(P.startAt&&!function(v,E,t){const o=Qh(v,E,t);return v.inclusive?o<=0:o<0}(P.startAt,On(P),M)||P.endAt&&!function(v,E,t){const o=Qh(v,E,t);return v.inclusive?o>=0:o>0}(P.endAt,On(P),M))}(A,c)}function Dm(A){return A.collectionGroup||(A.path.length%2==1?A.path.lastSegment():A.path.get(A.path.length-2))}function Zu(A){return(c,x)=>{let P=!1;for(const M of On(A)){const D=Nm(M,c,x);if(D!==0)return D;P=P||M.field.isKeyField()}return 0}}function Nm(A,c,x){const P=A.field.isKeyField()?yt.comparator(c.key,x.key):function(D,v,E){const t=v.data.field(D),o=E.data.field(D);return t!==null&&o!==null?ji(t,o):Ct()}(A.field,c,x);switch(A.dir){case"asc":return P;case"desc":return-1*P;default:return Ct()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(c,x){this.mapKeyFn=c,this.equalsFn=x,this.inner={},this.innerSize=0}get(c){const x=this.mapKeyFn(c),P=this.inner[x];if(P!==void 0){for(const[M,D]of P)if(this.equalsFn(M,c))return D}}has(c){return this.get(c)!==void 0}set(c,x){const P=this.mapKeyFn(c),M=this.inner[P];if(M===void 0)return this.inner[P]=[[c,x]],void this.innerSize++;for(let D=0;D<M.length;D++)if(this.equalsFn(M[D][0],c))return void(M[D]=[c,x]);M.push([c,x]),this.innerSize++}delete(c){const x=this.mapKeyFn(c),P=this.inner[x];if(P===void 0)return!1;for(let M=0;M<P.length;M++)if(this.equalsFn(P[M][0],c))return P.length===1?delete this.inner[x]:P.splice(M,1),this.innerSize--,!0;return!1}forEach(c){sn(this.inner,(x,P)=>{for(const[M,D]of P)c(M,D)})}isEmpty(){return bu(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=new Wt(yt.comparator);function $e(){return Bm}const ku=new Wt(yt.comparator);function Rn(...A){let c=ku;for(const x of A)c=c.insert(x.key,x);return c}function qu(A){let c=ku;return A.forEach((x,P)=>c=c.insert(x,P.overlayedDocument)),c}function gi(){return Fn()}function _u(){return Fn()}function Fn(){return new rn(A=>A.toString(),(A,c)=>A.isEqual(c))}const Vm=new Wt(yt.comparator),Gm=new ee(yt.comparator);function Lt(...A){let c=Gm;for(const x of A)c=c.add(x);return c}const Um=new ee(Nt);function bm(){return Um}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(A,c){if(A.useProto3Json){if(isNaN(c))return{doubleValue:"NaN"};if(c===1/0)return{doubleValue:"Infinity"};if(c===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bs(c)?"-0":c}}function tf(A){return{integerValue:""+A}}function zm(A,c){return gm(c)?tf(c):Va(A,c)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this._=void 0}}function Xm(A,c,x){return A instanceof Ws?function(M,D){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:M.seconds,nanos:M.nanoseconds}}}};return D&&La(D)&&(D=Oa(D)),D&&(v.fields.__previous_value__=D),{mapValue:v}}(x,c):A instanceof Wn?nf(A,c):A instanceof Yn?sf(A,c):function(M,D){const v=ef(M,D),E=kh(v)+kh(M.Pe);return na(v)&&na(M.Pe)?tf(E):Va(M.serializer,E)}(A,c)}function Wm(A,c,x){return A instanceof Wn?nf(A,c):A instanceof Yn?sf(A,c):x}function ef(A,c){return A instanceof Ys?function(P){return na(P)||function(D){return!!D&&"doubleValue"in D}(P)}(c)?c:{integerValue:0}:null}class Ws extends sr{}class Wn extends sr{constructor(c){super(),this.elements=c}}function nf(A,c){const x=rf(c);for(const P of A.elements)x.some(M=>Fe(M,P))||x.push(P);return{arrayValue:{values:x}}}class Yn extends sr{constructor(c){super(),this.elements=c}}function sf(A,c){let x=rf(c);for(const P of A.elements)x=x.filter(M=>!Fe(M,P));return{arrayValue:{values:x}}}class Ys extends sr{constructor(c,x){super(),this.serializer=c,this.Pe=x}}function kh(A){return Kt(A.integerValue||A.doubleValue)}function rf(A){return Fa(A)&&A.arrayValue.values?A.arrayValue.values.slice():[]}function Ym(A,c){return A.field.isEqual(c.field)&&function(P,M){return P instanceof Wn&&M instanceof Wn||P instanceof Yn&&M instanceof Yn?Ji(P.elements,M.elements,Fe):P instanceof Ys&&M instanceof Ys?Fe(P.Pe,M.Pe):P instanceof Ws&&M instanceof Ws}(A.transform,c.transform)}class Hm{constructor(c,x){this.version=c,this.transformResults=x}}class We{constructor(c,x){this.updateTime=c,this.exists=x}static none(){return new We}static exists(c){return new We(void 0,c)}static updateTime(c){return new We(c)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(c){return this.exists===c.exists&&(this.updateTime?!!c.updateTime&&this.updateTime.isEqual(c.updateTime):!c.updateTime)}}function ws(A,c){return A.updateTime!==void 0?c.isFoundDocument()&&c.version.isEqual(A.updateTime):A.exists===void 0||A.exists===c.isFoundDocument()}class rr{}function af(A,c){if(!A.hasLocalMutations||c&&c.fields.length===0)return null;if(c===null)return A.isNoDocument()?new hf(A.key,We.none()):new qn(A.key,A.data,We.none());{const x=A.data,P=pe.empty();let M=new ee(te.comparator);for(let D of c.fields)if(!M.has(D)){let v=x.field(D);v===null&&D.length>1&&(D=D.popLast(),v=x.field(D)),v===null?P.delete(D):P.set(D,v),M=M.add(D)}return new Oi(A.key,P,new Te(M.toArray()),We.none())}}function Km(A,c,x){A instanceof qn?function(M,D,v){const E=M.value.clone(),t=_h(M.fieldTransforms,D,v.transformResults);E.setAll(t),D.convertToFoundDocument(v.version,E).setHasCommittedMutations()}(A,c,x):A instanceof Oi?function(M,D,v){if(!ws(M.precondition,D))return void D.convertToUnknownDocument(v.version);const E=_h(M.fieldTransforms,D,v.transformResults),t=D.data;t.setAll(of(M)),t.setAll(E),D.convertToFoundDocument(v.version,t).setHasCommittedMutations()}(A,c,x):function(M,D,v){D.convertToNoDocument(v.version).setHasCommittedMutations()}(0,c,x)}function Dn(A,c,x,P){return A instanceof qn?function(D,v,E,t){if(!ws(D.precondition,v))return E;const o=D.value.clone(),g=tl(D.fieldTransforms,t,v);return o.setAll(g),v.convertToFoundDocument(v.version,o).setHasLocalMutations(),null}(A,c,x,P):A instanceof Oi?function(D,v,E,t){if(!ws(D.precondition,v))return E;const o=tl(D.fieldTransforms,t,v),g=v.data;return g.setAll(of(D)),g.setAll(o),v.convertToFoundDocument(v.version,g).setHasLocalMutations(),E===null?null:E.unionWith(D.fieldMask.fields).unionWith(D.fieldTransforms.map(a=>a.field))}(A,c,x,P):function(D,v,E){return ws(D.precondition,v)?(v.convertToNoDocument(v.version).setHasLocalMutations(),null):E}(A,c,x)}function $m(A,c){let x=null;for(const P of A.fieldTransforms){const M=c.data.field(P.field),D=ef(P.transform,M||null);D!=null&&(x===null&&(x=pe.empty()),x.set(P.field,D))}return x||null}function qh(A,c){return A.type===c.type&&!!A.key.isEqual(c.key)&&!!A.precondition.isEqual(c.precondition)&&!!function(P,M){return P===void 0&&M===void 0||!(!P||!M)&&Ji(P,M,(D,v)=>Ym(D,v))}(A.fieldTransforms,c.fieldTransforms)&&(A.type===0?A.value.isEqual(c.value):A.type!==1||A.data.isEqual(c.data)&&A.fieldMask.isEqual(c.fieldMask))}class qn extends rr{constructor(c,x,P,M=[]){super(),this.key=c,this.value=x,this.precondition=P,this.fieldTransforms=M,this.type=0}getFieldMask(){return null}}class Oi extends rr{constructor(c,x,P,M,D=[]){super(),this.key=c,this.data=x,this.fieldMask=P,this.precondition=M,this.fieldTransforms=D,this.type=1}getFieldMask(){return this.fieldMask}}function of(A){const c=new Map;return A.fieldMask.fields.forEach(x=>{if(!x.isEmpty()){const P=A.data.field(x);c.set(x,P)}}),c}function _h(A,c,x){const P=new Map;Vt(A.length===x.length);for(let M=0;M<x.length;M++){const D=A[M],v=D.transform,E=c.data.field(D.field);P.set(D.field,Wm(v,E,x[M]))}return P}function tl(A,c,x){const P=new Map;for(const M of A){const D=M.transform,v=x.data.field(M.field);P.set(M.field,Xm(D,v,c))}return P}class hf extends rr{constructor(c,x){super(),this.key=c,this.precondition=x,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qm extends rr{constructor(c,x){super(),this.key=c,this.precondition=x,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(c,x,P,M){this.batchId=c,this.localWriteTime=x,this.baseMutations=P,this.mutations=M}applyToRemoteDocument(c,x){const P=x.mutationResults;for(let M=0;M<this.mutations.length;M++){const D=this.mutations[M];D.key.isEqual(c.key)&&Km(D,c,P[M])}}applyToLocalView(c,x){for(const P of this.baseMutations)P.key.isEqual(c.key)&&(x=Dn(P,c,x,this.localWriteTime));for(const P of this.mutations)P.key.isEqual(c.key)&&(x=Dn(P,c,x,this.localWriteTime));return x}applyToLocalDocumentSet(c,x){const P=_u();return this.mutations.forEach(M=>{const D=c.get(M.key),v=D.overlayedDocument;let E=this.applyToLocalView(v,D.mutatedFields);E=x.has(M.key)?null:E;const t=af(v,E);t!==null&&P.set(M.key,t),v.isValidDocument()||v.convertToNoDocument(At.min())}),P}keys(){return this.mutations.reduce((c,x)=>c.add(x.key),Lt())}isEqual(c){return this.batchId===c.batchId&&Ji(this.mutations,c.mutations,(x,P)=>qh(x,P))&&Ji(this.baseMutations,c.baseMutations,(x,P)=>qh(x,P))}}class Ga{constructor(c,x,P,M){this.batch=c,this.commitVersion=x,this.mutationResults=P,this.docVersions=M}static from(c,x,P){Vt(c.mutations.length===P.length);let M=function(){return Vm}();const D=c.mutations;for(let v=0;v<D.length;v++)M=M.insert(D[v].key,P[v].version);return new Ga(c,x,P,M)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(c,x){this.largestBatchId=c,this.mutation=x}getKey(){return this.mutation.key}isEqual(c){return c!==null&&this.mutation===c.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(c,x){this.count=c,this.unchangedNames=x}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt,Ft;function km(A){switch(A){default:return Ct();case ht.CANCELLED:case ht.UNKNOWN:case ht.DEADLINE_EXCEEDED:case ht.RESOURCE_EXHAUSTED:case ht.INTERNAL:case ht.UNAVAILABLE:case ht.UNAUTHENTICATED:return!1;case ht.INVALID_ARGUMENT:case ht.NOT_FOUND:case ht.ALREADY_EXISTS:case ht.PERMISSION_DENIED:case ht.FAILED_PRECONDITION:case ht.ABORTED:case ht.OUT_OF_RANGE:case ht.UNIMPLEMENTED:case ht.DATA_LOSS:return!0}}function lf(A){if(A===void 0)return Ke("GRPC error has no .code"),ht.UNKNOWN;switch(A){case Qt.OK:return ht.OK;case Qt.CANCELLED:return ht.CANCELLED;case Qt.UNKNOWN:return ht.UNKNOWN;case Qt.DEADLINE_EXCEEDED:return ht.DEADLINE_EXCEEDED;case Qt.RESOURCE_EXHAUSTED:return ht.RESOURCE_EXHAUSTED;case Qt.INTERNAL:return ht.INTERNAL;case Qt.UNAVAILABLE:return ht.UNAVAILABLE;case Qt.UNAUTHENTICATED:return ht.UNAUTHENTICATED;case Qt.INVALID_ARGUMENT:return ht.INVALID_ARGUMENT;case Qt.NOT_FOUND:return ht.NOT_FOUND;case Qt.ALREADY_EXISTS:return ht.ALREADY_EXISTS;case Qt.PERMISSION_DENIED:return ht.PERMISSION_DENIED;case Qt.FAILED_PRECONDITION:return ht.FAILED_PRECONDITION;case Qt.ABORTED:return ht.ABORTED;case Qt.OUT_OF_RANGE:return ht.OUT_OF_RANGE;case Qt.UNIMPLEMENTED:return ht.UNIMPLEMENTED;case Qt.DATA_LOSS:return ht.DATA_LOSS;default:return Ct()}}(Ft=Qt||(Qt={}))[Ft.OK=0]="OK",Ft[Ft.CANCELLED=1]="CANCELLED",Ft[Ft.UNKNOWN=2]="UNKNOWN",Ft[Ft.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ft[Ft.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ft[Ft.NOT_FOUND=5]="NOT_FOUND",Ft[Ft.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ft[Ft.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ft[Ft.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ft[Ft.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ft[Ft.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ft[Ft.ABORTED=10]="ABORTED",Ft[Ft.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ft[Ft.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ft[Ft.INTERNAL=13]="INTERNAL",Ft[Ft.UNAVAILABLE=14]="UNAVAILABLE",Ft[Ft.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m=new yi([4294967295,4294967295],0);function el(A){const c=qm().encode(A),x=new Ou;return x.update(c),new Uint8Array(x.digest())}function il(A){const c=new DataView(A.buffer),x=c.getUint32(0,!0),P=c.getUint32(4,!0),M=c.getUint32(8,!0),D=c.getUint32(12,!0);return[new yi([x,P],0),new yi([M,D],0)]}class Ua{constructor(c,x,P){if(this.bitmap=c,this.padding=x,this.hashCount=P,x<0||x>=8)throw new In(`Invalid padding: ${x}`);if(P<0)throw new In(`Invalid hash count: ${P}`);if(c.length>0&&this.hashCount===0)throw new In(`Invalid hash count: ${P}`);if(c.length===0&&x!==0)throw new In(`Invalid padding when bitmap length is 0: ${x}`);this.Ie=8*c.length-x,this.Te=yi.fromNumber(this.Ie)}Ee(c,x,P){let M=c.add(x.multiply(yi.fromNumber(P)));return M.compare(_m)===1&&(M=new yi([M.getBits(0),M.getBits(1)],0)),M.modulo(this.Te).toNumber()}de(c){return(this.bitmap[Math.floor(c/8)]&1<<c%8)!=0}mightContain(c){if(this.Ie===0)return!1;const x=el(c),[P,M]=il(x);for(let D=0;D<this.hashCount;D++){const v=this.Ee(P,M,D);if(!this.de(v))return!1}return!0}static create(c,x,P){const M=c%8==0?0:8-c%8,D=new Uint8Array(Math.ceil(c/8)),v=new Ua(D,M,x);return P.forEach(E=>v.insert(E)),v}insert(c){if(this.Ie===0)return;const x=el(c),[P,M]=il(x);for(let D=0;D<this.hashCount;D++){const v=this.Ee(P,M,D);this.Ae(v)}}Ae(c){const x=Math.floor(c/8),P=c%8;this.bitmap[x]|=1<<P}}class In extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(c,x,P,M,D){this.snapshotVersion=c,this.targetChanges=x,this.targetMismatches=P,this.documentUpdates=M,this.resolvedLimboDocuments=D}static createSynthesizedRemoteEventForCurrentChange(c,x,P){const M=new Map;return M.set(c,_n.createSynthesizedTargetChangeForCurrentChange(c,x,P)),new ar(At.min(),M,new Wt(Nt),$e(),Lt())}}class _n{constructor(c,x,P,M,D){this.resumeToken=c,this.current=x,this.addedDocuments=P,this.modifiedDocuments=M,this.removedDocuments=D}static createSynthesizedTargetChangeForCurrentChange(c,x,P){return new _n(P,x,Lt(),Lt(),Lt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(c,x,P,M){this.Re=c,this.removedTargetIds=x,this.key=P,this.Ve=M}}class uf{constructor(c,x){this.targetId=c,this.me=x}}class ff{constructor(c,x,P=ie.EMPTY_BYTE_STRING,M=null){this.state=c,this.targetIds=x,this.resumeToken=P,this.cause=M}}class nl{constructor(){this.fe=0,this.ge=rl(),this.pe=ie.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(c){c.approximateByteSize()>0&&(this.we=!0,this.pe=c)}ve(){let c=Lt(),x=Lt(),P=Lt();return this.ge.forEach((M,D)=>{switch(D){case 0:c=c.add(M);break;case 2:x=x.add(M);break;case 1:P=P.add(M);break;default:Ct()}}),new _n(this.pe,this.ye,c,x,P)}Ce(){this.we=!1,this.ge=rl()}Fe(c,x){this.we=!0,this.ge=this.ge.insert(c,x)}Me(c){this.we=!0,this.ge=this.ge.remove(c)}xe(){this.fe+=1}Oe(){this.fe-=1,Vt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class t0{constructor(c){this.Le=c,this.Be=new Map,this.ke=$e(),this.qe=sl(),this.Qe=new Wt(Nt)}Ke(c){for(const x of c.Re)c.Ve&&c.Ve.isFoundDocument()?this.$e(x,c.Ve):this.Ue(x,c.key,c.Ve);for(const x of c.removedTargetIds)this.Ue(x,c.key,c.Ve)}We(c){this.forEachTarget(c,x=>{const P=this.Ge(x);switch(c.state){case 0:this.ze(x)&&P.De(c.resumeToken);break;case 1:P.Oe(),P.Se||P.Ce(),P.De(c.resumeToken);break;case 2:P.Oe(),P.Se||this.removeTarget(x);break;case 3:this.ze(x)&&(P.Ne(),P.De(c.resumeToken));break;case 4:this.ze(x)&&(this.je(x),P.De(c.resumeToken));break;default:Ct()}})}forEachTarget(c,x){c.targetIds.length>0?c.targetIds.forEach(x):this.Be.forEach((P,M)=>{this.ze(M)&&x(M)})}He(c){const x=c.targetId,P=c.me.count,M=this.Je(x);if(M){const D=M.target;if(ra(D))if(P===0){const v=new yt(D.path);this.Ue(x,v,he.newNoDocument(v,At.min()))}else Vt(P===1);else{const v=this.Ye(x);if(v!==P){const E=this.Ze(c),t=E?this.Xe(E,c,v):1;if(t!==0){this.je(x);const o=t===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(x,o)}}}}}Ze(c){const x=c.me.unchangedNames;if(!x||!x.bits)return null;const{bits:{bitmap:P="",padding:M=0},hashCount:D=0}=x;let v,E;try{v=Ci(P).toUint8Array()}catch(t){if(t instanceof zu)return Qi("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{E=new Ua(v,M,D)}catch(t){return Qi(t instanceof In?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return E.Ie===0?null:E}Xe(c,x,P){return x.me.count===P-this.nt(c,x.targetId)?0:2}nt(c,x){const P=this.Le.getRemoteKeysForTarget(x);let M=0;return P.forEach(D=>{const v=this.Le.tt(),E=`projects/${v.projectId}/databases/${v.database}/documents/${D.path.canonicalString()}`;c.mightContain(E)||(this.Ue(x,D,null),M++)}),M}rt(c){const x=new Map;this.Be.forEach((D,v)=>{const E=this.Je(v);if(E){if(D.current&&ra(E.target)){const t=new yt(E.target.path);this.ke.get(t)!==null||this.it(v,t)||this.Ue(v,t,he.newNoDocument(t,c))}D.be&&(x.set(v,D.ve()),D.Ce())}});let P=Lt();this.qe.forEach((D,v)=>{let E=!0;v.forEachWhile(t=>{const o=this.Je(t);return!o||o.purpose==="TargetPurposeLimboResolution"||(E=!1,!1)}),E&&(P=P.add(D))}),this.ke.forEach((D,v)=>v.setReadTime(c));const M=new ar(c,x,this.Qe,this.ke,P);return this.ke=$e(),this.qe=sl(),this.Qe=new Wt(Nt),M}$e(c,x){if(!this.ze(c))return;const P=this.it(c,x.key)?2:0;this.Ge(c).Fe(x.key,P),this.ke=this.ke.insert(x.key,x),this.qe=this.qe.insert(x.key,this.st(x.key).add(c))}Ue(c,x,P){if(!this.ze(c))return;const M=this.Ge(c);this.it(c,x)?M.Fe(x,1):M.Me(x),this.qe=this.qe.insert(x,this.st(x).delete(c)),P&&(this.ke=this.ke.insert(x,P))}removeTarget(c){this.Be.delete(c)}Ye(c){const x=this.Ge(c).ve();return this.Le.getRemoteKeysForTarget(c).size+x.addedDocuments.size-x.removedDocuments.size}xe(c){this.Ge(c).xe()}Ge(c){let x=this.Be.get(c);return x||(x=new nl,this.Be.set(c,x)),x}st(c){let x=this.qe.get(c);return x||(x=new ee(Nt),this.qe=this.qe.insert(c,x)),x}ze(c){const x=this.Je(c)!==null;return x||xt("WatchChangeAggregator","Detected inactive target",c),x}Je(c){const x=this.Be.get(c);return x&&x.Se?null:this.Le.ot(c)}je(c){this.Be.set(c,new nl),this.Le.getRemoteKeysForTarget(c).forEach(x=>{this.Ue(c,x,null)})}it(c,x){return this.Le.getRemoteKeysForTarget(c).has(x)}}function sl(){return new Wt(yt.comparator)}function rl(){return new Wt(yt.comparator)}const e0={asc:"ASCENDING",desc:"DESCENDING"},i0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n0={and:"AND",or:"OR"};class s0{constructor(c,x){this.databaseId=c,this.useProto3Json=x}}function ha(A,c){return A.useProto3Json||er(c)?c:{value:c}}function Hs(A,c){return A.useProto3Json?`${new Date(1e3*c.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+c.nanoseconds).slice(-9)}Z`:{seconds:""+c.seconds,nanos:c.nanoseconds}}function df(A,c){return A.useProto3Json?c.toBase64():c.toUint8Array()}function r0(A,c){return Hs(A,c.toTimestamp())}function Le(A){return Vt(!!A),At.fromTimestamp(function(x){const P=oi(x);return new jt(P.seconds,P.nanos)}(A))}function ba(A,c){return la(A,c).canonicalString()}function la(A,c){const x=function(M){return new bt(["projects",M.projectId,"databases",M.database])}(A).child("documents");return c===void 0?x:x.child(c)}function cf(A){const c=bt.fromString(A);return Vt(xf(c)),c}function ua(A,c){return ba(A.databaseId,c.path)}function Ur(A,c){const x=cf(c);if(x.get(1)!==A.databaseId.projectId)throw new gt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+x.get(1)+" vs "+A.databaseId.projectId);if(x.get(3)!==A.databaseId.database)throw new gt(ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+x.get(3)+" vs "+A.databaseId.database);return new yt(pf(x))}function vf(A,c){return ba(A.databaseId,c)}function a0(A){const c=cf(A);return c.length===4?bt.emptyPath():pf(c)}function fa(A){return new bt(["projects",A.databaseId.projectId,"databases",A.databaseId.database]).canonicalString()}function pf(A){return Vt(A.length>4&&A.get(4)==="documents"),A.popFirst(5)}function al(A,c,x){return{name:ua(A,c),fields:x.value.mapValue.fields}}function o0(A,c){let x;if("targetChange"in c){c.targetChange;const P=function(o){return o==="NO_CHANGE"?0:o==="ADD"?1:o==="REMOVE"?2:o==="CURRENT"?3:o==="RESET"?4:Ct()}(c.targetChange.targetChangeType||"NO_CHANGE"),M=c.targetChange.targetIds||[],D=function(o,g){return o.useProto3Json?(Vt(g===void 0||typeof g=="string"),ie.fromBase64String(g||"")):(Vt(g===void 0||g instanceof Buffer||g instanceof Uint8Array),ie.fromUint8Array(g||new Uint8Array))}(A,c.targetChange.resumeToken),v=c.targetChange.cause,E=v&&function(o){const g=o.code===void 0?ht.UNKNOWN:lf(o.code);return new gt(g,o.message||"")}(v);x=new ff(P,M,D,E||null)}else if("documentChange"in c){c.documentChange;const P=c.documentChange;P.document,P.document.name,P.document.updateTime;const M=Ur(A,P.document.name),D=Le(P.document.updateTime),v=P.document.createTime?Le(P.document.createTime):At.min(),E=new pe({mapValue:{fields:P.document.fields}}),t=he.newFoundDocument(M,D,v,E),o=P.targetIds||[],g=P.removedTargetIds||[];x=new Ls(o,g,t.key,t)}else if("documentDelete"in c){c.documentDelete;const P=c.documentDelete;P.document;const M=Ur(A,P.document),D=P.readTime?Le(P.readTime):At.min(),v=he.newNoDocument(M,D),E=P.removedTargetIds||[];x=new Ls([],E,v.key,v)}else if("documentRemove"in c){c.documentRemove;const P=c.documentRemove;P.document;const M=Ur(A,P.document),D=P.removedTargetIds||[];x=new Ls([],D,M,null)}else{if(!("filter"in c))return Ct();{c.filter;const P=c.filter;P.targetId;const{count:M=0,unchangedNames:D}=P,v=new Zm(M,D),E=P.targetId;x=new uf(E,v)}}return x}function h0(A,c){let x;if(c instanceof qn)x={update:al(A,c.key,c.value)};else if(c instanceof hf)x={delete:ua(A,c.key)};else if(c instanceof Oi)x={update:al(A,c.key,c.data),updateMask:m0(c.fieldMask)};else{if(!(c instanceof Qm))return Ct();x={verify:ua(A,c.key)}}return c.fieldTransforms.length>0&&(x.updateTransforms=c.fieldTransforms.map(P=>function(D,v){const E=v.transform;if(E instanceof Ws)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(E instanceof Wn)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:E.elements}};if(E instanceof Yn)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:E.elements}};if(E instanceof Ys)return{fieldPath:v.field.canonicalString(),increment:E.Pe};throw Ct()}(0,P))),c.precondition.isNone||(x.currentDocument=function(M,D){return D.updateTime!==void 0?{updateTime:r0(M,D.updateTime)}:D.exists!==void 0?{exists:D.exists}:Ct()}(A,c.precondition)),x}function l0(A,c){return A&&A.length>0?(Vt(c!==void 0),A.map(x=>function(M,D){let v=M.updateTime?Le(M.updateTime):Le(D);return v.isEqual(At.min())&&(v=Le(D)),new Hm(v,M.transformResults||[])}(x,c))):[]}function u0(A,c){return{documents:[vf(A,c.path)]}}function f0(A,c){const x={structuredQuery:{}},P=c.path;let M;c.collectionGroup!==null?(M=P,x.structuredQuery.from=[{collectionId:c.collectionGroup,allDescendants:!0}]):(M=P.popLast(),x.structuredQuery.from=[{collectionId:P.lastSegment()}]),x.parent=vf(A,M);const D=function(o){if(o.length!==0)return mf(Ce.create(o,"and"))}(c.filters);D&&(x.structuredQuery.where=D);const v=function(o){if(o.length!==0)return o.map(g=>function(r){return{field:Ui(r.field),direction:v0(r.dir)}}(g))}(c.orderBy);v&&(x.structuredQuery.orderBy=v);const E=ha(A,c.limit);return E!==null&&(x.structuredQuery.limit=E),c.startAt&&(x.structuredQuery.startAt=function(o){return{before:o.inclusive,values:o.position}}(c.startAt)),c.endAt&&(x.structuredQuery.endAt=function(o){return{before:!o.inclusive,values:o.position}}(c.endAt)),{_t:x,parent:M}}function d0(A){let c=a0(A.parent);const x=A.structuredQuery,P=x.from?x.from.length:0;let M=null;if(P>0){Vt(P===1);const g=x.from[0];g.allDescendants?M=g.collectionId:c=c.child(g.collectionId)}let D=[];x.where&&(D=function(a){const r=gf(a);return r instanceof Ce&&Hu(r)?r.getFilters():[r]}(x.where));let v=[];x.orderBy&&(v=function(a){return a.map(r=>function(e){return new Xs(bi(e.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(r))}(x.orderBy));let E=null;x.limit&&(E=function(a){let r;return r=typeof a=="object"?a.value:a,er(r)?null:r}(x.limit));let t=null;x.startAt&&(t=function(a){const r=!!a.before,s=a.values||[];return new zs(s,r)}(x.startAt));let o=null;return x.endAt&&(o=function(a){const r=!a.before,s=a.values||[];return new zs(s,r)}(x.endAt)),Om(c,M,v,D,E,"F",t,o)}function c0(A,c){const x=function(M){switch(M){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct()}}(c.purpose);return x==null?null:{"goog-listen-tags":x}}function gf(A){return A.unaryFilter!==void 0?function(x){switch(x.unaryFilter.op){case"IS_NAN":const P=bi(x.unaryFilter.field);return Jt.create(P,"==",{doubleValue:NaN});case"IS_NULL":const M=bi(x.unaryFilter.field);return Jt.create(M,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const D=bi(x.unaryFilter.field);return Jt.create(D,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const v=bi(x.unaryFilter.field);return Jt.create(v,"!=",{nullValue:"NULL_VALUE"});default:return Ct()}}(A):A.fieldFilter!==void 0?function(x){return Jt.create(bi(x.fieldFilter.field),function(M){switch(M){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ct()}}(x.fieldFilter.op),x.fieldFilter.value)}(A):A.compositeFilter!==void 0?function(x){return Ce.create(x.compositeFilter.filters.map(P=>gf(P)),function(M){switch(M){case"AND":return"and";case"OR":return"or";default:return Ct()}}(x.compositeFilter.op))}(A):Ct()}function v0(A){return e0[A]}function p0(A){return i0[A]}function g0(A){return n0[A]}function Ui(A){return{fieldPath:A.canonicalString()}}function bi(A){return te.fromServerFormat(A.fieldPath)}function mf(A){return A instanceof Jt?function(x){if(x.op==="=="){if($h(x.value))return{unaryFilter:{field:Ui(x.field),op:"IS_NAN"}};if(Kh(x.value))return{unaryFilter:{field:Ui(x.field),op:"IS_NULL"}}}else if(x.op==="!="){if($h(x.value))return{unaryFilter:{field:Ui(x.field),op:"IS_NOT_NAN"}};if(Kh(x.value))return{unaryFilter:{field:Ui(x.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(x.field),op:p0(x.op),value:x.value}}}(A):A instanceof Ce?function(x){const P=x.getFilters().map(M=>mf(M));return P.length===1?P[0]:{compositeFilter:{op:g0(x.op),filters:P}}}(A):Ct()}function m0(A){const c=[];return A.fields.forEach(x=>c.push(x.canonicalString())),{fieldPaths:c}}function xf(A){return A.length>=4&&A.get(0)==="projects"&&A.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(c,x,P,M,D=At.min(),v=At.min(),E=ie.EMPTY_BYTE_STRING,t=null){this.target=c,this.targetId=x,this.purpose=P,this.sequenceNumber=M,this.snapshotVersion=D,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=E,this.expectedCount=t}withSequenceNumber(c){return new ii(this.target,this.targetId,this.purpose,c,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(c,x){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,x,this.lastLimboFreeSnapshotVersion,c,null)}withExpectedCount(c){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,c)}withLastLimboFreeSnapshotVersion(c){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,c,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(c){this.ct=c}}function y0(A){const c=d0({parent:A.parent,structuredQuery:A.structuredQuery});return A.limitType==="LAST"?oa(c,c.limit,"L"):c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.un=new E0}addToCollectionParentIndex(c,x){return this.un.add(x),ut.resolve()}getCollectionParents(c,x){return ut.resolve(this.un.getEntries(x))}addFieldIndex(c,x){return ut.resolve()}deleteFieldIndex(c,x){return ut.resolve()}deleteAllFieldIndexes(c){return ut.resolve()}createTargetIndexes(c,x){return ut.resolve()}getDocumentsMatchingTarget(c,x){return ut.resolve(null)}getIndexType(c,x){return ut.resolve(0)}getFieldIndexes(c,x){return ut.resolve([])}getNextCollectionGroupToUpdate(c){return ut.resolve(null)}getMinOffset(c,x){return ut.resolve(ai.min())}getMinOffsetFromCollectionGroup(c,x){return ut.resolve(ai.min())}updateCollectionGroup(c,x,P){return ut.resolve()}updateIndexEntries(c,x){return ut.resolve()}}class E0{constructor(){this.index={}}add(c){const x=c.lastSegment(),P=c.popLast(),M=this.index[x]||new ee(bt.comparator),D=!M.has(P);return this.index[x]=M.add(P),D}has(c){const x=c.lastSegment(),P=c.popLast(),M=this.index[x];return M&&M.has(P)}getEntries(c){return(this.index[c]||new ee(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(c){this.Ln=c}next(){return this.Ln+=2,this.Ln}static Bn(){return new ki(0)}static kn(){return new ki(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0{constructor(){this.changes=new rn(c=>c.toString(),(c,x)=>c.isEqual(x)),this.changesApplied=!1}addEntry(c){this.assertNotApplied(),this.changes.set(c.key,c)}removeEntry(c,x){this.assertNotApplied(),this.changes.set(c,he.newInvalidDocument(c).setReadTime(x))}getEntry(c,x){this.assertNotApplied();const P=this.changes.get(x);return P!==void 0?ut.resolve(P):this.getFromCache(c,x)}getEntries(c,x){return this.getAllFromCache(c,x)}apply(c){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(c)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(c,x){this.overlayedDocument=c,this.mutatedFields=x}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(c,x,P,M){this.remoteDocumentCache=c,this.mutationQueue=x,this.documentOverlayCache=P,this.indexManager=M}getDocument(c,x){let P=null;return this.documentOverlayCache.getOverlay(c,x).next(M=>(P=M,this.remoteDocumentCache.getEntry(c,x))).next(M=>(P!==null&&Dn(P.mutation,M,Te.empty(),jt.now()),M))}getDocuments(c,x){return this.remoteDocumentCache.getEntries(c,x).next(P=>this.getLocalViewOfDocuments(c,P,Lt()).next(()=>P))}getLocalViewOfDocuments(c,x,P=Lt()){const M=gi();return this.populateOverlays(c,M,x).next(()=>this.computeViews(c,x,M,P).next(D=>{let v=Rn();return D.forEach((E,t)=>{v=v.insert(E,t.overlayedDocument)}),v}))}getOverlayedDocuments(c,x){const P=gi();return this.populateOverlays(c,P,x).next(()=>this.computeViews(c,x,P,Lt()))}populateOverlays(c,x,P){const M=[];return P.forEach(D=>{x.has(D)||M.push(D)}),this.documentOverlayCache.getOverlays(c,M).next(D=>{D.forEach((v,E)=>{x.set(v,E)})})}computeViews(c,x,P,M){let D=$e();const v=Fn(),E=function(){return Fn()}();return x.forEach((t,o)=>{const g=P.get(o.key);M.has(o.key)&&(g===void 0||g.mutation instanceof Oi)?D=D.insert(o.key,o):g!==void 0?(v.set(o.key,g.mutation.getFieldMask()),Dn(g.mutation,o,g.mutation.getFieldMask(),jt.now())):v.set(o.key,Te.empty())}),this.recalculateAndSaveOverlays(c,D).next(t=>(t.forEach((o,g)=>v.set(o,g)),x.forEach((o,g)=>{var a;return E.set(o,new C0(g,(a=v.get(o))!==null&&a!==void 0?a:null))}),E))}recalculateAndSaveOverlays(c,x){const P=Fn();let M=new Wt((v,E)=>v-E),D=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(c,x).next(v=>{for(const E of v)E.keys().forEach(t=>{const o=x.get(t);if(o===null)return;let g=P.get(t)||Te.empty();g=E.applyToLocalView(o,g),P.set(t,g);const a=(M.get(E.batchId)||Lt()).add(t);M=M.insert(E.batchId,a)})}).next(()=>{const v=[],E=M.getReverseIterator();for(;E.hasNext();){const t=E.getNext(),o=t.key,g=t.value,a=_u();g.forEach(r=>{if(!D.has(r)){const s=af(x.get(r),P.get(r));s!==null&&a.set(r,s),D=D.add(r)}}),v.push(this.documentOverlayCache.saveOverlays(c,o,a))}return ut.waitFor(v)}).next(()=>P)}recalculateAndSaveOverlaysForDocumentKeys(c,x){return this.remoteDocumentCache.getEntries(c,x).next(P=>this.recalculateAndSaveOverlays(c,P))}getDocumentsMatchingQuery(c,x,P,M){return function(v){return yt.isDocumentKey(v.path)&&v.collectionGroup===null&&v.filters.length===0}(x)?this.getDocumentsMatchingDocumentQuery(c,x.path):Ju(x)?this.getDocumentsMatchingCollectionGroupQuery(c,x,P,M):this.getDocumentsMatchingCollectionQuery(c,x,P,M)}getNextDocuments(c,x,P,M){return this.remoteDocumentCache.getAllFromCollectionGroup(c,x,P,M).next(D=>{const v=M-D.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(c,x,P.largestBatchId,M-D.size):ut.resolve(gi());let E=-1,t=D;return v.next(o=>ut.forEach(o,(g,a)=>(E<a.largestBatchId&&(E=a.largestBatchId),D.get(g)?ut.resolve():this.remoteDocumentCache.getEntry(c,g).next(r=>{t=t.insert(g,r)}))).next(()=>this.populateOverlays(c,o,D)).next(()=>this.computeViews(c,t,o,Lt())).next(g=>({batchId:E,changes:qu(g)})))})}getDocumentsMatchingDocumentQuery(c,x){return this.getDocument(c,new yt(x)).next(P=>{let M=Rn();return P.isFoundDocument()&&(M=M.insert(P.key,P)),M})}getDocumentsMatchingCollectionGroupQuery(c,x,P,M){const D=x.collectionGroup;let v=Rn();return this.indexManager.getCollectionParents(c,D).next(E=>ut.forEach(E,t=>{const o=function(a,r){return new kn(r,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(x,t.child(D));return this.getDocumentsMatchingCollectionQuery(c,o,P,M).next(g=>{g.forEach((a,r)=>{v=v.insert(a,r)})})}).next(()=>v))}getDocumentsMatchingCollectionQuery(c,x,P,M){let D;return this.documentOverlayCache.getOverlaysForCollection(c,x.path,P.largestBatchId).next(v=>(D=v,this.remoteDocumentCache.getDocumentsMatchingQuery(c,x,P,D,M))).next(v=>{D.forEach((t,o)=>{const g=o.getKey();v.get(g)===null&&(v=v.insert(g,he.newInvalidDocument(g)))});let E=Rn();return v.forEach((t,o)=>{const g=D.get(t);g!==void 0&&Dn(g.mutation,o,Te.empty(),jt.now()),nr(x,o)&&(E=E.insert(t,o))}),E})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(c){this.serializer=c,this.hr=new Map,this.Pr=new Map}getBundleMetadata(c,x){return ut.resolve(this.hr.get(x))}saveBundleMetadata(c,x){return this.hr.set(x.id,function(M){return{id:M.id,version:M.version,createTime:Le(M.createTime)}}(x)),ut.resolve()}getNamedQuery(c,x){return ut.resolve(this.Pr.get(x))}saveNamedQuery(c,x){return this.Pr.set(x.name,function(M){return{name:M.name,query:y0(M.bundledQuery),readTime:Le(M.readTime)}}(x)),ut.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.overlays=new Wt(yt.comparator),this.Ir=new Map}getOverlay(c,x){return ut.resolve(this.overlays.get(x))}getOverlays(c,x){const P=gi();return ut.forEach(x,M=>this.getOverlay(c,M).next(D=>{D!==null&&P.set(M,D)})).next(()=>P)}saveOverlays(c,x,P){return P.forEach((M,D)=>{this.ht(c,x,D)}),ut.resolve()}removeOverlaysForBatchId(c,x,P){const M=this.Ir.get(P);return M!==void 0&&(M.forEach(D=>this.overlays=this.overlays.remove(D)),this.Ir.delete(P)),ut.resolve()}getOverlaysForCollection(c,x,P){const M=gi(),D=x.length+1,v=new yt(x.child("")),E=this.overlays.getIteratorFrom(v);for(;E.hasNext();){const t=E.getNext().value,o=t.getKey();if(!x.isPrefixOf(o.path))break;o.path.length===D&&t.largestBatchId>P&&M.set(t.getKey(),t)}return ut.resolve(M)}getOverlaysForCollectionGroup(c,x,P,M){let D=new Wt((o,g)=>o-g);const v=this.overlays.getIterator();for(;v.hasNext();){const o=v.getNext().value;if(o.getKey().getCollectionGroup()===x&&o.largestBatchId>P){let g=D.get(o.largestBatchId);g===null&&(g=gi(),D=D.insert(o.largestBatchId,g)),g.set(o.getKey(),o)}}const E=gi(),t=D.getIterator();for(;t.hasNext()&&(t.getNext().value.forEach((o,g)=>E.set(o,g)),!(E.size()>=M)););return ut.resolve(E)}ht(c,x,P){const M=this.overlays.get(P.key);if(M!==null){const v=this.Ir.get(M.largestBatchId).delete(P.key);this.Ir.set(M.largestBatchId,v)}this.overlays=this.overlays.insert(P.key,new jm(x,P));let D=this.Ir.get(x);D===void 0&&(D=Lt(),this.Ir.set(x,D)),this.Ir.set(x,D.add(P.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(){this.sessionToken=ie.EMPTY_BYTE_STRING}getSessionToken(c){return ut.resolve(this.sessionToken)}setSessionToken(c,x){return this.sessionToken=x,ut.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(){this.Tr=new ee(Zt.Er),this.dr=new ee(Zt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(c,x){const P=new Zt(c,x);this.Tr=this.Tr.add(P),this.dr=this.dr.add(P)}Rr(c,x){c.forEach(P=>this.addReference(P,x))}removeReference(c,x){this.Vr(new Zt(c,x))}mr(c,x){c.forEach(P=>this.removeReference(P,x))}gr(c){const x=new yt(new bt([])),P=new Zt(x,c),M=new Zt(x,c+1),D=[];return this.dr.forEachInRange([P,M],v=>{this.Vr(v),D.push(v.key)}),D}pr(){this.Tr.forEach(c=>this.Vr(c))}Vr(c){this.Tr=this.Tr.delete(c),this.dr=this.dr.delete(c)}yr(c){const x=new yt(new bt([])),P=new Zt(x,c),M=new Zt(x,c+1);let D=Lt();return this.dr.forEachInRange([P,M],v=>{D=D.add(v.key)}),D}containsKey(c){const x=new Zt(c,0),P=this.Tr.firstAfterOrEqual(x);return P!==null&&c.isEqual(P.key)}}class Zt{constructor(c,x){this.key=c,this.wr=x}static Er(c,x){return yt.comparator(c.key,x.key)||Nt(c.wr,x.wr)}static Ar(c,x){return Nt(c.wr,x.wr)||yt.comparator(c.key,x.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(c,x){this.indexManager=c,this.referenceDelegate=x,this.mutationQueue=[],this.Sr=1,this.br=new ee(Zt.Er)}checkEmpty(c){return ut.resolve(this.mutationQueue.length===0)}addMutationBatch(c,x,P,M){const D=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const v=new Jm(D,x,P,M);this.mutationQueue.push(v);for(const E of M)this.br=this.br.add(new Zt(E.key,D)),this.indexManager.addToCollectionParentIndex(c,E.key.path.popLast());return ut.resolve(v)}lookupMutationBatch(c,x){return ut.resolve(this.Dr(x))}getNextMutationBatchAfterBatchId(c,x){const P=x+1,M=this.vr(P),D=M<0?0:M;return ut.resolve(this.mutationQueue.length>D?this.mutationQueue[D]:null)}getHighestUnacknowledgedBatchId(){return ut.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(c){return ut.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(c,x){const P=new Zt(x,0),M=new Zt(x,Number.POSITIVE_INFINITY),D=[];return this.br.forEachInRange([P,M],v=>{const E=this.Dr(v.wr);D.push(E)}),ut.resolve(D)}getAllMutationBatchesAffectingDocumentKeys(c,x){let P=new ee(Nt);return x.forEach(M=>{const D=new Zt(M,0),v=new Zt(M,Number.POSITIVE_INFINITY);this.br.forEachInRange([D,v],E=>{P=P.add(E.wr)})}),ut.resolve(this.Cr(P))}getAllMutationBatchesAffectingQuery(c,x){const P=x.path,M=P.length+1;let D=P;yt.isDocumentKey(D)||(D=D.child(""));const v=new Zt(new yt(D),0);let E=new ee(Nt);return this.br.forEachWhile(t=>{const o=t.key.path;return!!P.isPrefixOf(o)&&(o.length===M&&(E=E.add(t.wr)),!0)},v),ut.resolve(this.Cr(E))}Cr(c){const x=[];return c.forEach(P=>{const M=this.Dr(P);M!==null&&x.push(M)}),x}removeMutationBatch(c,x){Vt(this.Fr(x.batchId,"removed")===0),this.mutationQueue.shift();let P=this.br;return ut.forEach(x.mutations,M=>{const D=new Zt(M.key,x.batchId);return P=P.delete(D),this.referenceDelegate.markPotentiallyOrphaned(c,M.key)}).next(()=>{this.br=P})}On(c){}containsKey(c,x){const P=new Zt(x,0),M=this.br.firstAfterOrEqual(P);return ut.resolve(x.isEqual(M&&M.key))}performConsistencyCheck(c){return this.mutationQueue.length,ut.resolve()}Fr(c,x){return this.vr(c)}vr(c){return this.mutationQueue.length===0?0:c-this.mutationQueue[0].batchId}Dr(c){const x=this.vr(c);return x<0||x>=this.mutationQueue.length?null:this.mutationQueue[x]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(c){this.Mr=c,this.docs=function(){return new Wt(yt.comparator)}(),this.size=0}setIndexManager(c){this.indexManager=c}addEntry(c,x){const P=x.key,M=this.docs.get(P),D=M?M.size:0,v=this.Mr(x);return this.docs=this.docs.insert(P,{document:x.mutableCopy(),size:v}),this.size+=v-D,this.indexManager.addToCollectionParentIndex(c,P.path.popLast())}removeEntry(c){const x=this.docs.get(c);x&&(this.docs=this.docs.remove(c),this.size-=x.size)}getEntry(c,x){const P=this.docs.get(x);return ut.resolve(P?P.document.mutableCopy():he.newInvalidDocument(x))}getEntries(c,x){let P=$e();return x.forEach(M=>{const D=this.docs.get(M);P=P.insert(M,D?D.document.mutableCopy():he.newInvalidDocument(M))}),ut.resolve(P)}getDocumentsMatchingQuery(c,x,P,M){let D=$e();const v=x.path,E=new yt(v.child("")),t=this.docs.getIteratorFrom(E);for(;t.hasNext();){const{key:o,value:{document:g}}=t.getNext();if(!v.isPrefixOf(o.path))break;o.path.length>v.length+1||dm(fm(g),P)<=0||(M.has(g.key)||nr(x,g))&&(D=D.insert(g.key,g.mutableCopy()))}return ut.resolve(D)}getAllFromCollectionGroup(c,x,P,M){Ct()}Or(c,x){return ut.forEach(this.docs,P=>x(P))}newChangeBuffer(c){return new L0(this)}getSize(c){return ut.resolve(this.size)}}class L0 extends S0{constructor(c){super(),this.cr=c}applyChanges(c){const x=[];return this.changes.forEach((P,M)=>{M.isValidDocument()?x.push(this.cr.addEntry(c,M)):this.cr.removeEntry(P)}),ut.waitFor(x)}getFromCache(c,x){return this.cr.getEntry(c,x)}getAllFromCache(c,x){return this.cr.getEntries(c,x)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(c){this.persistence=c,this.Nr=new rn(x=>Da(x),Na),this.lastRemoteSnapshotVersion=At.min(),this.highestTargetId=0,this.Lr=0,this.Br=new za,this.targetCount=0,this.kr=ki.Bn()}forEachTarget(c,x){return this.Nr.forEach((P,M)=>x(M)),ut.resolve()}getLastRemoteSnapshotVersion(c){return ut.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(c){return ut.resolve(this.Lr)}allocateTargetId(c){return this.highestTargetId=this.kr.next(),ut.resolve(this.highestTargetId)}setTargetsMetadata(c,x,P){return P&&(this.lastRemoteSnapshotVersion=P),x>this.Lr&&(this.Lr=x),ut.resolve()}Kn(c){this.Nr.set(c.target,c);const x=c.targetId;x>this.highestTargetId&&(this.kr=new ki(x),this.highestTargetId=x),c.sequenceNumber>this.Lr&&(this.Lr=c.sequenceNumber)}addTargetData(c,x){return this.Kn(x),this.targetCount+=1,ut.resolve()}updateTargetData(c,x){return this.Kn(x),ut.resolve()}removeTargetData(c,x){return this.Nr.delete(x.target),this.Br.gr(x.targetId),this.targetCount-=1,ut.resolve()}removeTargets(c,x,P){let M=0;const D=[];return this.Nr.forEach((v,E)=>{E.sequenceNumber<=x&&P.get(E.targetId)===null&&(this.Nr.delete(v),D.push(this.removeMatchingKeysForTargetId(c,E.targetId)),M++)}),ut.waitFor(D).next(()=>M)}getTargetCount(c){return ut.resolve(this.targetCount)}getTargetData(c,x){const P=this.Nr.get(x)||null;return ut.resolve(P)}addMatchingKeys(c,x,P){return this.Br.Rr(x,P),ut.resolve()}removeMatchingKeys(c,x,P){this.Br.mr(x,P);const M=this.persistence.referenceDelegate,D=[];return M&&x.forEach(v=>{D.push(M.markPotentiallyOrphaned(c,v))}),ut.waitFor(D)}removeMatchingKeysForTargetId(c,x){return this.Br.gr(x),ut.resolve()}getMatchingKeysForTargetId(c,x){const P=this.Br.yr(x);return ut.resolve(P)}containsKey(c,x){return ut.resolve(this.Br.containsKey(x))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(c,x){this.qr={},this.overlays={},this.Qr=new wa(0),this.Kr=!1,this.Kr=!0,this.$r=new I0,this.referenceDelegate=c(this),this.Ur=new O0(this),this.indexManager=new T0,this.remoteDocumentCache=function(M){return new w0(M)}(P=>this.referenceDelegate.Wr(P)),this.serializer=new x0(x),this.Gr=new P0(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(c){return this.indexManager}getDocumentOverlayCache(c){let x=this.overlays[c.toKey()];return x||(x=new R0,this.overlays[c.toKey()]=x),x}getMutationQueue(c,x){let P=this.qr[c.toKey()];return P||(P=new M0(x,this.referenceDelegate),this.qr[c.toKey()]=P),P}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(c,x,P){xt("MemoryPersistence","Starting transaction:",c);const M=new D0(this.Qr.next());return this.referenceDelegate.zr(),P(M).next(D=>this.referenceDelegate.jr(M).next(()=>D)).toPromise().then(D=>(M.raiseOnCommittedEvent(),D))}Hr(c,x){return ut.or(Object.values(this.qr).map(P=>()=>P.containsKey(c,x)))}}class D0 extends vm{constructor(c){super(),this.currentSequenceNumber=c}}class Xa{constructor(c){this.persistence=c,this.Jr=new za,this.Yr=null}static Zr(c){return new Xa(c)}get Xr(){if(this.Yr)return this.Yr;throw Ct()}addReference(c,x,P){return this.Jr.addReference(P,x),this.Xr.delete(P.toString()),ut.resolve()}removeReference(c,x,P){return this.Jr.removeReference(P,x),this.Xr.add(P.toString()),ut.resolve()}markPotentiallyOrphaned(c,x){return this.Xr.add(x.toString()),ut.resolve()}removeTarget(c,x){this.Jr.gr(x.targetId).forEach(M=>this.Xr.add(M.toString()));const P=this.persistence.getTargetCache();return P.getMatchingKeysForTargetId(c,x.targetId).next(M=>{M.forEach(D=>this.Xr.add(D.toString()))}).next(()=>P.removeTargetData(c,x))}zr(){this.Yr=new Set}jr(c){const x=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ut.forEach(this.Xr,P=>{const M=yt.fromPath(P);return this.ei(c,M).next(D=>{D||x.removeEntry(M,At.min())})}).next(()=>(this.Yr=null,x.apply(c)))}updateLimboDocument(c,x){return this.ei(c,x).next(P=>{P?this.Xr.delete(x.toString()):this.Xr.add(x.toString())})}Wr(c){return 0}ei(c,x){return ut.or([()=>ut.resolve(this.Jr.containsKey(x)),()=>this.persistence.getTargetCache().containsKey(c,x),()=>this.persistence.Hr(c,x)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(c,x,P,M){this.targetId=c,this.fromCache=x,this.$i=P,this.Ui=M}static Wi(c,x){let P=Lt(),M=Lt();for(const D of x.docChanges)switch(D.type){case 0:P=P.add(D.doc.key);break;case 1:M=M.add(D.doc.key)}return new Wa(c,x.fromCache,P,M)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(c){this._documentReadCount+=c}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Ec()?8:pm(le())>0?6:4}()}initialize(c,x){this.Ji=c,this.indexManager=x,this.Gi=!0}getDocumentsMatchingQuery(c,x,P,M){const D={result:null};return this.Yi(c,x).next(v=>{D.result=v}).next(()=>{if(!D.result)return this.Zi(c,x,M,P).next(v=>{D.result=v})}).next(()=>{if(D.result)return;const v=new N0;return this.Xi(c,x,v).next(E=>{if(D.result=E,this.zi)return this.es(c,x,v,E.size)})}).next(()=>D.result)}es(c,x,P,M){return P.documentReadCount<this.ji?(Tn()<=Ot.DEBUG&&xt("QueryEngine","SDK will not create cache indexes for query:",Gi(x),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),ut.resolve()):(Tn()<=Ot.DEBUG&&xt("QueryEngine","Query:",Gi(x),"scans",P.documentReadCount,"local documents and returns",M,"documents as results."),P.documentReadCount>this.Hi*M?(Tn()<=Ot.DEBUG&&xt("QueryEngine","The SDK decides to create cache indexes for query:",Gi(x),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(c,we(x))):ut.resolve())}Yi(c,x){if(Zh(x))return ut.resolve(null);let P=we(x);return this.indexManager.getIndexType(c,P).next(M=>M===0?null:(x.limit!==null&&M===1&&(x=oa(x,null,"F"),P=we(x)),this.indexManager.getDocumentsMatchingTarget(c,P).next(D=>{const v=Lt(...D);return this.Ji.getDocuments(c,v).next(E=>this.indexManager.getMinOffset(c,P).next(t=>{const o=this.ts(x,E);return this.ns(x,o,v,t.readTime)?this.Yi(c,oa(x,null,"F")):this.rs(c,o,x,t)}))})))}Zi(c,x,P,M){return Zh(x)||M.isEqual(At.min())?ut.resolve(null):this.Ji.getDocuments(c,P).next(D=>{const v=this.ts(x,D);return this.ns(x,v,P,M)?ut.resolve(null):(Tn()<=Ot.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",M.toString(),Gi(x)),this.rs(c,v,x,um(M,-1)).next(E=>E))})}ts(c,x){let P=new ee(Zu(c));return x.forEach((M,D)=>{nr(c,D)&&(P=P.add(D))}),P}ns(c,x,P,M){if(c.limit===null)return!1;if(P.size!==x.size)return!0;const D=c.limitType==="F"?x.last():x.first();return!!D&&(D.hasPendingWrites||D.version.compareTo(M)>0)}Xi(c,x,P){return Tn()<=Ot.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",Gi(x)),this.Ji.getDocumentsMatchingQuery(c,x,ai.min(),P)}rs(c,x,P,M){return this.Ji.getDocumentsMatchingQuery(c,P,M).next(D=>(x.forEach(v=>{D=D.insert(v.key,v)}),D))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(c,x,P,M){this.persistence=c,this.ss=x,this.serializer=M,this.os=new Wt(Nt),this._s=new rn(D=>Da(D),Na),this.us=new Map,this.cs=c.getRemoteDocumentCache(),this.Ur=c.getTargetCache(),this.Gr=c.getBundleCache(),this.ls(P)}ls(c){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(c),this.indexManager=this.persistence.getIndexManager(c),this.mutationQueue=this.persistence.getMutationQueue(c,this.indexManager),this.localDocuments=new A0(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(c){return this.persistence.runTransaction("Collect garbage","readwrite-primary",x=>c.collect(x,this.os))}}function G0(A,c,x,P){return new V0(A,c,x,P)}async function yf(A,c){const x=Pt(A);return await x.persistence.runTransaction("Handle user change","readonly",P=>{let M;return x.mutationQueue.getAllMutationBatches(P).next(D=>(M=D,x.ls(c),x.mutationQueue.getAllMutationBatches(P))).next(D=>{const v=[],E=[];let t=Lt();for(const o of M){v.push(o.batchId);for(const g of o.mutations)t=t.add(g.key)}for(const o of D){E.push(o.batchId);for(const g of o.mutations)t=t.add(g.key)}return x.localDocuments.getDocuments(P,t).next(o=>({hs:o,removedBatchIds:v,addedBatchIds:E}))})})}function U0(A,c){const x=Pt(A);return x.persistence.runTransaction("Acknowledge batch","readwrite-primary",P=>{const M=c.batch.keys(),D=x.cs.newChangeBuffer({trackRemovals:!0});return function(E,t,o,g){const a=o.batch,r=a.keys();let s=ut.resolve();return r.forEach(e=>{s=s.next(()=>g.getEntry(t,e)).next(n=>{const h=o.docVersions.get(e);Vt(h!==null),n.version.compareTo(h)<0&&(a.applyToRemoteDocument(n,o),n.isValidDocument()&&(n.setReadTime(o.commitVersion),g.addEntry(n)))})}),s.next(()=>E.mutationQueue.removeMutationBatch(t,a))}(x,P,c,D).next(()=>D.apply(P)).next(()=>x.mutationQueue.performConsistencyCheck(P)).next(()=>x.documentOverlayCache.removeOverlaysForBatchId(P,M,c.batch.batchId)).next(()=>x.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(P,function(E){let t=Lt();for(let o=0;o<E.mutationResults.length;++o)E.mutationResults[o].transformResults.length>0&&(t=t.add(E.batch.mutations[o].key));return t}(c))).next(()=>x.localDocuments.getDocuments(P,M))})}function Tf(A){const c=Pt(A);return c.persistence.runTransaction("Get last remote snapshot version","readonly",x=>c.Ur.getLastRemoteSnapshotVersion(x))}function b0(A,c){const x=Pt(A),P=c.snapshotVersion;let M=x.os;return x.persistence.runTransaction("Apply remote event","readwrite-primary",D=>{const v=x.cs.newChangeBuffer({trackRemovals:!0});M=x.os;const E=[];c.targetChanges.forEach((g,a)=>{const r=M.get(a);if(!r)return;E.push(x.Ur.removeMatchingKeys(D,g.removedDocuments,a).next(()=>x.Ur.addMatchingKeys(D,g.addedDocuments,a)));let s=r.withSequenceNumber(D.currentSequenceNumber);c.targetMismatches.get(a)!==null?s=s.withResumeToken(ie.EMPTY_BYTE_STRING,At.min()).withLastLimboFreeSnapshotVersion(At.min()):g.resumeToken.approximateByteSize()>0&&(s=s.withResumeToken(g.resumeToken,P)),M=M.insert(a,s),function(n,h,i){return n.resumeToken.approximateByteSize()===0||h.snapshotVersion.toMicroseconds()-n.snapshotVersion.toMicroseconds()>=3e8?!0:i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size>0}(r,s,g)&&E.push(x.Ur.updateTargetData(D,s))});let t=$e(),o=Lt();if(c.documentUpdates.forEach(g=>{c.resolvedLimboDocuments.has(g)&&E.push(x.persistence.referenceDelegate.updateLimboDocument(D,g))}),E.push(z0(D,v,c.documentUpdates).next(g=>{t=g.Ps,o=g.Is})),!P.isEqual(At.min())){const g=x.Ur.getLastRemoteSnapshotVersion(D).next(a=>x.Ur.setTargetsMetadata(D,D.currentSequenceNumber,P));E.push(g)}return ut.waitFor(E).next(()=>v.apply(D)).next(()=>x.localDocuments.getLocalViewOfDocuments(D,t,o)).next(()=>t)}).then(D=>(x.os=M,D))}function z0(A,c,x){let P=Lt(),M=Lt();return x.forEach(D=>P=P.add(D)),c.getEntries(A,P).next(D=>{let v=$e();return x.forEach((E,t)=>{const o=D.get(E);t.isFoundDocument()!==o.isFoundDocument()&&(M=M.add(E)),t.isNoDocument()&&t.version.isEqual(At.min())?(c.removeEntry(E,t.readTime),v=v.insert(E,t)):!o.isValidDocument()||t.version.compareTo(o.version)>0||t.version.compareTo(o.version)===0&&o.hasPendingWrites?(c.addEntry(t),v=v.insert(E,t)):xt("LocalStore","Ignoring outdated watch update for ",E,". Current version:",o.version," Watch version:",t.version)}),{Ps:v,Is:M}})}function X0(A,c){const x=Pt(A);return x.persistence.runTransaction("Get next mutation batch","readonly",P=>(c===void 0&&(c=-1),x.mutationQueue.getNextMutationBatchAfterBatchId(P,c)))}function W0(A,c){const x=Pt(A);return x.persistence.runTransaction("Allocate target","readwrite",P=>{let M;return x.Ur.getTargetData(P,c).next(D=>D?(M=D,ut.resolve(M)):x.Ur.allocateTargetId(P).next(v=>(M=new ii(c,v,"TargetPurposeListen",P.currentSequenceNumber),x.Ur.addTargetData(P,M).next(()=>M))))}).then(P=>{const M=x.os.get(P.targetId);return(M===null||P.snapshotVersion.compareTo(M.snapshotVersion)>0)&&(x.os=x.os.insert(P.targetId,P),x._s.set(c,P.targetId)),P})}async function da(A,c,x){const P=Pt(A),M=P.os.get(c),D=x?"readwrite":"readwrite-primary";try{x||await P.persistence.runTransaction("Release target",D,v=>P.persistence.referenceDelegate.removeTarget(v,M))}catch(v){if(!Zn(v))throw v;xt("LocalStore",`Failed to update sequence numbers for target ${c}: ${v}`)}P.os=P.os.remove(c),P._s.delete(M.target)}function ol(A,c,x){const P=Pt(A);let M=At.min(),D=Lt();return P.persistence.runTransaction("Execute query","readwrite",v=>function(t,o,g){const a=Pt(t),r=a._s.get(g);return r!==void 0?ut.resolve(a.os.get(r)):a.Ur.getTargetData(o,g)}(P,v,we(c)).next(E=>{if(E)return M=E.lastLimboFreeSnapshotVersion,P.Ur.getMatchingKeysForTargetId(v,E.targetId).next(t=>{D=t})}).next(()=>P.ss.getDocumentsMatchingQuery(v,c,x?M:At.min(),x?D:Lt())).next(E=>(Y0(P,Dm(c),E),{documents:E,Ts:D})))}function Y0(A,c,x){let P=A.us.get(c)||At.min();x.forEach((M,D)=>{D.readTime.compareTo(P)>0&&(P=D.readTime)}),A.us.set(c,P)}class hl{constructor(){this.activeTargetIds=bm()}fs(c){this.activeTargetIds=this.activeTargetIds.add(c)}gs(c){this.activeTargetIds=this.activeTargetIds.delete(c)}Vs(){const c={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(c)}}class H0{constructor(){this.so=new hl,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(c){}updateMutationState(c,x,P){}addLocalQueryTarget(c,x=!0){return x&&this.so.fs(c),this.oo[c]||"not-current"}updateQueryState(c,x,P){this.oo[c]=x}removeLocalQueryTarget(c){this.so.gs(c)}isLocalQueryTarget(c){return this.so.activeTargetIds.has(c)}clearQueryState(c){delete this.oo[c]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(c){return this.so.activeTargetIds.has(c)}start(){return this.so=new hl,Promise.resolve()}handleUserChange(c,x,P){}setOnlineState(c){}shutdown(){}writeSequenceNumber(c){}notifyBundleLoaded(c){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{_o(c){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(c){this.ho.push(c)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const c of this.ho)c(0)}lo(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const c of this.ho)c(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Es=null;function br(){return Es===null?Es=function(){return 268435456+Math.round(2147483648*Math.random())}():Es++,"0x"+Es.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(c){this.Io=c.Io,this.To=c.To}Eo(c){this.Ao=c}Ro(c){this.Vo=c}mo(c){this.fo=c}onMessage(c){this.po=c}close(){this.To()}send(c){this.Io(c)}yo(){this.Ao()}wo(){this.Vo()}So(c){this.fo(c)}bo(c){this.po(c)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="WebChannelConnection";class J0 extends class{constructor(x){this.databaseInfo=x,this.databaseId=x.databaseId;const P=x.ssl?"https":"http",M=encodeURIComponent(this.databaseId.projectId),D=encodeURIComponent(this.databaseId.database);this.Do=P+"://"+x.host,this.vo=`projects/${M}/databases/${D}`,this.Co=this.databaseId.database==="(default)"?`project_id=${M}`:`project_id=${M}&database_id=${D}`}get Fo(){return!1}Mo(x,P,M,D,v){const E=br(),t=this.xo(x,P.toUriEncodedString());xt("RestConnection",`Sending RPC '${x}' ${E}:`,t,M);const o={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(o,D,v),this.No(x,t,o,M).then(g=>(xt("RestConnection",`Received RPC '${x}' ${E}: `,g),g),g=>{throw Qi("RestConnection",`RPC '${x}' ${E} failed with error: `,g,"url: ",t,"request:",M),g})}Lo(x,P,M,D,v,E){return this.Mo(x,P,M,D,v)}Oo(x,P,M){x["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+nn}(),x["Content-Type"]="text/plain",this.databaseInfo.appId&&(x["X-Firebase-GMPID"]=this.databaseInfo.appId),P&&P.headers.forEach((D,v)=>x[v]=D),M&&M.headers.forEach((D,v)=>x[v]=D)}xo(x,P){const M=$0[x];return`${this.Do}/v1/${P}:${M}`}terminate(){}}{constructor(c){super(c),this.forceLongPolling=c.forceLongPolling,this.autoDetectLongPolling=c.autoDetectLongPolling,this.useFetchStreams=c.useFetchStreams,this.longPollingOptions=c.longPollingOptions}No(c,x,P,M){const D=br();return new Promise((v,E)=>{const t=new Fu;t.setWithCredentials(!0),t.listenOnce(Du.COMPLETE,()=>{try{switch(t.getLastErrorCode()){case Is.NO_ERROR:const g=t.getResponseJson();xt(ae,`XHR for RPC '${c}' ${D} received:`,JSON.stringify(g)),v(g);break;case Is.TIMEOUT:xt(ae,`RPC '${c}' ${D} timed out`),E(new gt(ht.DEADLINE_EXCEEDED,"Request time out"));break;case Is.HTTP_ERROR:const a=t.getStatus();if(xt(ae,`RPC '${c}' ${D} failed with status:`,a,"response text:",t.getResponseText()),a>0){let r=t.getResponseJson();Array.isArray(r)&&(r=r[0]);const s=r==null?void 0:r.error;if(s&&s.status&&s.message){const e=function(h){const i=h.toLowerCase().replace(/_/g,"-");return Object.values(ht).indexOf(i)>=0?i:ht.UNKNOWN}(s.status);E(new gt(e,s.message))}else E(new gt(ht.UNKNOWN,"Server responded with status "+t.getStatus()))}else E(new gt(ht.UNAVAILABLE,"Connection failed."));break;default:Ct()}}finally{xt(ae,`RPC '${c}' ${D} completed.`)}});const o=JSON.stringify(M);xt(ae,`RPC '${c}' ${D} sending request:`,M),t.send(x,"POST",o,P,15)})}Bo(c,x,P){const M=br(),D=[this.Do,"/","google.firestore.v1.Firestore","/",c,"/channel"],v=Vu(),E=Bu(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},o=this.longPollingOptions.timeoutSeconds;o!==void 0&&(t.longPollingTimeout=Math.round(1e3*o)),this.useFetchStreams&&(t.useFetchStreams=!0),this.Oo(t.initMessageHeaders,x,P),t.encodeInitMessageHeaders=!0;const g=D.join("");xt(ae,`Creating RPC '${c}' stream ${M}: ${g}`,t);const a=v.createWebChannel(g,t);let r=!1,s=!1;const e=new Q0({Io:h=>{s?xt(ae,`Not sending because RPC '${c}' stream ${M} is closed:`,h):(r||(xt(ae,`Opening RPC '${c}' stream ${M} transport.`),a.open(),r=!0),xt(ae,`RPC '${c}' stream ${M} sending:`,h),a.send(h))},To:()=>a.close()}),n=(h,i,l)=>{h.listen(i,f=>{try{l(f)}catch(u){setTimeout(()=>{throw u},0)}})};return n(a,Pn.EventType.OPEN,()=>{s||(xt(ae,`RPC '${c}' stream ${M} transport opened.`),e.yo())}),n(a,Pn.EventType.CLOSE,()=>{s||(s=!0,xt(ae,`RPC '${c}' stream ${M} transport closed`),e.So())}),n(a,Pn.EventType.ERROR,h=>{s||(s=!0,Qi(ae,`RPC '${c}' stream ${M} transport errored:`,h),e.So(new gt(ht.UNAVAILABLE,"The operation could not be completed")))}),n(a,Pn.EventType.MESSAGE,h=>{var i;if(!s){const l=h.data[0];Vt(!!l);const f=l,u=f.error||((i=f[0])===null||i===void 0?void 0:i.error);if(u){xt(ae,`RPC '${c}' stream ${M} received error:`,u);const d=u.status;let p=function(y){const S=Qt[y];if(S!==void 0)return lf(S)}(d),m=u.message;p===void 0&&(p=ht.INTERNAL,m="Unknown error status: "+d+" with message "+u.message),s=!0,e.So(new gt(p,m)),a.close()}else xt(ae,`RPC '${c}' stream ${M} received:`,l),e.bo(l)}}),n(E,Nu.STAT_EVENT,h=>{h.stat===ea.PROXY?xt(ae,`RPC '${c}' stream ${M} detected buffering proxy`):h.stat===ea.NOPROXY&&xt(ae,`RPC '${c}' stream ${M} detected no buffering proxy`)}),setTimeout(()=>{e.wo()},0),e}}function zr(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(A){return new s0(A,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(c,x,P=1e3,M=1.5,D=6e4){this.ui=c,this.timerId=x,this.ko=P,this.qo=M,this.Qo=D,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(c){this.cancel();const x=Math.floor(this.Ko+this.zo()),P=Math.max(0,Date.now()-this.Uo),M=Math.max(0,x-P);M>0&&xt("ExponentialBackoff",`Backing off for ${M} ms (base delay: ${this.Ko} ms, delay with jitter: ${x} ms, last attempt: ${P} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,M,()=>(this.Uo=Date.now(),c())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(c,x,P,M,D,v,E,t){this.ui=c,this.Ho=P,this.Jo=M,this.connection=D,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=E,this.listener=t,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ef(c,x)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(c){this.u_(),this.stream.send(c)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(c,x){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,c!==4?this.t_.reset():x&&x.code===ht.RESOURCE_EXHAUSTED?(Ke(x.toString()),Ke("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):x&&x.code===ht.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=c,await this.listener.mo(x)}l_(){}auth(){this.state=1;const c=this.h_(this.Yo),x=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([P,M])=>{this.Yo===x&&this.P_(P,M)},P=>{c(()=>{const M=new gt(ht.UNKNOWN,"Fetching auth token failed: "+P.message);return this.I_(M)})})}P_(c,x){const P=this.h_(this.Yo);this.stream=this.T_(c,x),this.stream.Eo(()=>{P(()=>this.listener.Eo())}),this.stream.Ro(()=>{P(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(M=>{P(()=>this.I_(M))}),this.stream.onMessage(M=>{P(()=>++this.e_==1?this.E_(M):this.onNext(M))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(c){return xt("PersistentStream",`close with error: ${c}`),this.stream=null,this.close(4,c)}h_(c){return x=>{this.ui.enqueueAndForget(()=>this.Yo===c?x():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class j0 extends Sf{constructor(c,x,P,M,D,v){super(c,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",x,P,M,v),this.serializer=D}T_(c,x){return this.connection.Bo("Listen",c,x)}E_(c){return this.onNext(c)}onNext(c){this.t_.reset();const x=o0(this.serializer,c),P=function(D){if(!("targetChange"in D))return At.min();const v=D.targetChange;return v.targetIds&&v.targetIds.length?At.min():v.readTime?Le(v.readTime):At.min()}(c);return this.listener.d_(x,P)}A_(c){const x={};x.database=fa(this.serializer),x.addTarget=function(D,v){let E;const t=v.target;if(E=ra(t)?{documents:u0(D,t)}:{query:f0(D,t)._t},E.targetId=v.targetId,v.resumeToken.approximateByteSize()>0){E.resumeToken=df(D,v.resumeToken);const o=ha(D,v.expectedCount);o!==null&&(E.expectedCount=o)}else if(v.snapshotVersion.compareTo(At.min())>0){E.readTime=Hs(D,v.snapshotVersion.toTimestamp());const o=ha(D,v.expectedCount);o!==null&&(E.expectedCount=o)}return E}(this.serializer,c);const P=c0(this.serializer,c);P&&(x.labels=P),this.a_(x)}R_(c){const x={};x.database=fa(this.serializer),x.removeTarget=c,this.a_(x)}}class Z0 extends Sf{constructor(c,x,P,M,D,v){super(c,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",x,P,M,v),this.serializer=D}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(c,x){return this.connection.Bo("Write",c,x)}E_(c){return Vt(!!c.streamToken),this.lastStreamToken=c.streamToken,Vt(!c.writeResults||c.writeResults.length===0),this.listener.f_()}onNext(c){Vt(!!c.streamToken),this.lastStreamToken=c.streamToken,this.t_.reset();const x=l0(c.writeResults,c.commitTime),P=Le(c.commitTime);return this.listener.g_(P,x)}p_(){const c={};c.database=fa(this.serializer),this.a_(c)}m_(c){const x={streamToken:this.lastStreamToken,writes:c.map(P=>h0(this.serializer,P))};this.a_(x)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends class{}{constructor(c,x,P,M){super(),this.authCredentials=c,this.appCheckCredentials=x,this.connection=P,this.serializer=M,this.y_=!1}w_(){if(this.y_)throw new gt(ht.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(c,x,P,M){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([D,v])=>this.connection.Mo(c,la(x,P),M,D,v)).catch(D=>{throw D.name==="FirebaseError"?(D.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),D):new gt(ht.UNKNOWN,D.toString())})}Lo(c,x,P,M,D){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([v,E])=>this.connection.Lo(c,la(x,P),M,v,E,D)).catch(v=>{throw v.name==="FirebaseError"?(v.code===ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),v):new gt(ht.UNKNOWN,v.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class q0{constructor(c,x){this.asyncQueue=c,this.onlineStateHandler=x,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(c){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${c.toString()}`),this.C_("Offline")))}set(c){this.x_(),this.S_=0,c==="Online"&&(this.D_=!1),this.C_(c)}C_(c){c!==this.state&&(this.state=c,this.onlineStateHandler(c))}F_(c){const x=`Could not reach Cloud Firestore backend. ${c}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ke(x),this.D_=!1):xt("OnlineStateTracker",x)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(c,x,P,M,D){this.localStore=c,this.datastore=x,this.asyncQueue=P,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=D,this.k_._o(v=>{P.enqueueAndForget(async()=>{Fi(this)&&(xt("RemoteStore","Restarting streams for network reachability change."),await async function(t){const o=Pt(t);o.L_.add(4),await ts(o),o.q_.set("Unknown"),o.L_.delete(4),await hr(o)}(this))})}),this.q_=new q0(P,M)}}async function hr(A){if(Fi(A))for(const c of A.B_)await c(!0)}async function ts(A){for(const c of A.B_)await c(!1)}function Cf(A,c){const x=Pt(A);x.N_.has(c.targetId)||(x.N_.set(c.targetId,c),$a(x)?Ka(x):an(x).r_()&&Ha(x,c))}function Ya(A,c){const x=Pt(A),P=an(x);x.N_.delete(c),P.r_()&&Af(x,c),x.N_.size===0&&(P.r_()?P.o_():Fi(x)&&x.q_.set("Unknown"))}function Ha(A,c){if(A.Q_.xe(c.targetId),c.resumeToken.approximateByteSize()>0||c.snapshotVersion.compareTo(At.min())>0){const x=A.remoteSyncer.getRemoteKeysForTarget(c.targetId).size;c=c.withExpectedCount(x)}an(A).A_(c)}function Af(A,c){A.Q_.xe(c),an(A).R_(c)}function Ka(A){A.Q_=new t0({getRemoteKeysForTarget:c=>A.remoteSyncer.getRemoteKeysForTarget(c),ot:c=>A.N_.get(c)||null,tt:()=>A.datastore.serializer.databaseId}),an(A).start(),A.q_.v_()}function $a(A){return Fi(A)&&!an(A).n_()&&A.N_.size>0}function Fi(A){return Pt(A).L_.size===0}function Pf(A){A.Q_=void 0}async function tx(A){A.q_.set("Online")}async function ex(A){A.N_.forEach((c,x)=>{Ha(A,c)})}async function ix(A,c){Pf(A),$a(A)?(A.q_.M_(c),Ka(A)):A.q_.set("Unknown")}async function nx(A,c,x){if(A.q_.set("Online"),c instanceof ff&&c.state===2&&c.cause)try{await async function(M,D){const v=D.cause;for(const E of D.targetIds)M.N_.has(E)&&(await M.remoteSyncer.rejectListen(E,v),M.N_.delete(E),M.Q_.removeTarget(E))}(A,c)}catch(P){xt("RemoteStore","Failed to remove targets %s: %s ",c.targetIds.join(","),P),await Ks(A,P)}else if(c instanceof Ls?A.Q_.Ke(c):c instanceof uf?A.Q_.He(c):A.Q_.We(c),!x.isEqual(At.min()))try{const P=await Tf(A.localStore);x.compareTo(P)>=0&&await function(D,v){const E=D.Q_.rt(v);return E.targetChanges.forEach((t,o)=>{if(t.resumeToken.approximateByteSize()>0){const g=D.N_.get(o);g&&D.N_.set(o,g.withResumeToken(t.resumeToken,v))}}),E.targetMismatches.forEach((t,o)=>{const g=D.N_.get(t);if(!g)return;D.N_.set(t,g.withResumeToken(ie.EMPTY_BYTE_STRING,g.snapshotVersion)),Af(D,t);const a=new ii(g.target,t,o,g.sequenceNumber);Ha(D,a)}),D.remoteSyncer.applyRemoteEvent(E)}(A,x)}catch(P){xt("RemoteStore","Failed to raise snapshot:",P),await Ks(A,P)}}async function Ks(A,c,x){if(!Zn(c))throw c;A.L_.add(1),await ts(A),A.q_.set("Offline"),x||(x=()=>Tf(A.localStore)),A.asyncQueue.enqueueRetryable(async()=>{xt("RemoteStore","Retrying IndexedDB access"),await x(),A.L_.delete(1),await hr(A)})}function Rf(A,c){return c().catch(x=>Ks(A,x,c))}async function lr(A){const c=Pt(A),x=hi(c);let P=c.O_.length>0?c.O_[c.O_.length-1].batchId:-1;for(;sx(c);)try{const M=await X0(c.localStore,P);if(M===null){c.O_.length===0&&x.o_();break}P=M.batchId,rx(c,M)}catch(M){await Ks(c,M)}If(c)&&Mf(c)}function sx(A){return Fi(A)&&A.O_.length<10}function rx(A,c){A.O_.push(c);const x=hi(A);x.r_()&&x.V_&&x.m_(c.mutations)}function If(A){return Fi(A)&&!hi(A).n_()&&A.O_.length>0}function Mf(A){hi(A).start()}async function ax(A){hi(A).p_()}async function ox(A){const c=hi(A);for(const x of A.O_)c.m_(x.mutations)}async function hx(A,c,x){const P=A.O_.shift(),M=Ga.from(P,c,x);await Rf(A,()=>A.remoteSyncer.applySuccessfulWrite(M)),await lr(A)}async function lx(A,c){c&&hi(A).V_&&await async function(P,M){if(function(v){return km(v)&&v!==ht.ABORTED}(M.code)){const D=P.O_.shift();hi(P).s_(),await Rf(P,()=>P.remoteSyncer.rejectFailedWrite(D.batchId,M)),await lr(P)}}(A,c),If(A)&&Mf(A)}async function ul(A,c){const x=Pt(A);x.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const P=Fi(x);x.L_.add(3),await ts(x),P&&x.q_.set("Unknown"),await x.remoteSyncer.handleCredentialChange(c),x.L_.delete(3),await hr(x)}async function ux(A,c){const x=Pt(A);c?(x.L_.delete(2),await hr(x)):c||(x.L_.add(2),await ts(x),x.q_.set("Unknown"))}function an(A){return A.K_||(A.K_=function(x,P,M){const D=Pt(x);return D.w_(),new j0(P,D.connection,D.authCredentials,D.appCheckCredentials,D.serializer,M)}(A.datastore,A.asyncQueue,{Eo:tx.bind(null,A),Ro:ex.bind(null,A),mo:ix.bind(null,A),d_:nx.bind(null,A)}),A.B_.push(async c=>{c?(A.K_.s_(),$a(A)?Ka(A):A.q_.set("Unknown")):(await A.K_.stop(),Pf(A))})),A.K_}function hi(A){return A.U_||(A.U_=function(x,P,M){const D=Pt(x);return D.w_(),new Z0(P,D.connection,D.authCredentials,D.appCheckCredentials,D.serializer,M)}(A.datastore,A.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ax.bind(null,A),mo:lx.bind(null,A),f_:ox.bind(null,A),g_:hx.bind(null,A)}),A.B_.push(async c=>{c?(A.U_.s_(),await lr(A)):(await A.U_.stop(),A.O_.length>0&&(xt("RemoteStore",`Stopping write stream with ${A.O_.length} pending writes`),A.O_=[]))})),A.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(c,x,P,M,D){this.asyncQueue=c,this.timerId=x,this.targetTimeMs=P,this.op=M,this.removalCallback=D,this.deferred=new Xe,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}get promise(){return this.deferred.promise}static createAndSchedule(c,x,P,M,D){const v=Date.now()+P,E=new Qa(c,x,v,M,D);return E.start(P),E}start(c){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),c)}skipDelay(){return this.handleDelayElapsed()}cancel(c){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new gt(ht.CANCELLED,"Operation cancelled"+(c?": "+c:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(c=>this.deferred.resolve(c))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ja(A,c){if(Ke("AsyncQueue",`${c}: ${A}`),Zn(A))return new gt(ht.UNAVAILABLE,`${c}: ${A}`);throw A}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(c){this.comparator=c?(x,P)=>c(x,P)||yt.comparator(x.key,P.key):(x,P)=>yt.comparator(x.key,P.key),this.keyedMap=Rn(),this.sortedSet=new Wt(this.comparator)}static emptySet(c){return new Ki(c.comparator)}has(c){return this.keyedMap.get(c)!=null}get(c){return this.keyedMap.get(c)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(c){const x=this.keyedMap.get(c);return x?this.sortedSet.indexOf(x):-1}get size(){return this.sortedSet.size}forEach(c){this.sortedSet.inorderTraversal((x,P)=>(c(x),!1))}add(c){const x=this.delete(c.key);return x.copy(x.keyedMap.insert(c.key,c),x.sortedSet.insert(c,null))}delete(c){const x=this.get(c);return x?this.copy(this.keyedMap.remove(c),this.sortedSet.remove(x)):this}isEqual(c){if(!(c instanceof Ki)||this.size!==c.size)return!1;const x=this.sortedSet.getIterator(),P=c.sortedSet.getIterator();for(;x.hasNext();){const M=x.getNext().key,D=P.getNext().key;if(!M.isEqual(D))return!1}return!0}toString(){const c=[];return this.forEach(x=>{c.push(x.toString())}),c.length===0?"DocumentSet ()":`DocumentSet (
  `+c.join(`  
`)+`
)`}copy(c,x){const P=new Ki;return P.comparator=this.comparator,P.keyedMap=c,P.sortedSet=x,P}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.W_=new Wt(yt.comparator)}track(c){const x=c.doc.key,P=this.W_.get(x);P?c.type!==0&&P.type===3?this.W_=this.W_.insert(x,c):c.type===3&&P.type!==1?this.W_=this.W_.insert(x,{type:P.type,doc:c.doc}):c.type===2&&P.type===2?this.W_=this.W_.insert(x,{type:2,doc:c.doc}):c.type===2&&P.type===0?this.W_=this.W_.insert(x,{type:0,doc:c.doc}):c.type===1&&P.type===0?this.W_=this.W_.remove(x):c.type===1&&P.type===2?this.W_=this.W_.insert(x,{type:1,doc:P.doc}):c.type===0&&P.type===1?this.W_=this.W_.insert(x,{type:2,doc:c.doc}):Ct():this.W_=this.W_.insert(x,c)}G_(){const c=[];return this.W_.inorderTraversal((x,P)=>{c.push(P)}),c}}class qi{constructor(c,x,P,M,D,v,E,t,o){this.query=c,this.docs=x,this.oldDocs=P,this.docChanges=M,this.mutatedKeys=D,this.fromCache=v,this.syncStateChanged=E,this.excludesMetadataChanges=t,this.hasCachedResults=o}static fromInitialDocuments(c,x,P,M,D){const v=[];return x.forEach(E=>{v.push({type:0,doc:E})}),new qi(c,x,Ki.emptySet(x),v,P,M,!0,!1,D)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(c){if(!(this.fromCache===c.fromCache&&this.hasCachedResults===c.hasCachedResults&&this.syncStateChanged===c.syncStateChanged&&this.mutatedKeys.isEqual(c.mutatedKeys)&&ir(this.query,c.query)&&this.docs.isEqual(c.docs)&&this.oldDocs.isEqual(c.oldDocs)))return!1;const x=this.docChanges,P=c.docChanges;if(x.length!==P.length)return!1;for(let M=0;M<x.length;M++)if(x[M].type!==P[M].type||!x[M].doc.isEqual(P[M].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(c=>c.J_())}}class dx{constructor(){this.queries=dl(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(x,P){const M=Pt(x),D=M.queries;M.queries=dl(),D.forEach((v,E)=>{for(const t of E.j_)t.onError(P)})})(this,new gt(ht.ABORTED,"Firestore shutting down"))}}function dl(){return new rn(A=>ju(A),ir)}async function wf(A,c){const x=Pt(A);let P=3;const M=c.query;let D=x.queries.get(M);D?!D.H_()&&c.J_()&&(P=2):(D=new fx,P=c.J_()?0:1);try{switch(P){case 0:D.z_=await x.onListen(M,!0);break;case 1:D.z_=await x.onListen(M,!1);break;case 2:await x.onFirstRemoteStoreListen(M)}}catch(v){const E=Ja(v,`Initialization of query '${Gi(c.query)}' failed`);return void c.onError(E)}x.queries.set(M,D),D.j_.push(c),c.Z_(x.onlineState),D.z_&&c.X_(D.z_)&&ja(x)}async function Lf(A,c){const x=Pt(A),P=c.query;let M=3;const D=x.queries.get(P);if(D){const v=D.j_.indexOf(c);v>=0&&(D.j_.splice(v,1),D.j_.length===0?M=c.J_()?0:1:!D.H_()&&c.J_()&&(M=2))}switch(M){case 0:return x.queries.delete(P),x.onUnlisten(P,!0);case 1:return x.queries.delete(P),x.onUnlisten(P,!1);case 2:return x.onLastRemoteStoreUnlisten(P);default:return}}function cx(A,c){const x=Pt(A);let P=!1;for(const M of c){const D=M.query,v=x.queries.get(D);if(v){for(const E of v.j_)E.X_(M)&&(P=!0);v.z_=M}}P&&ja(x)}function vx(A,c,x){const P=Pt(A),M=P.queries.get(c);if(M)for(const D of M.j_)D.onError(x);P.queries.delete(c)}function ja(A){A.Y_.forEach(c=>{c.next()})}var ca,cl;(cl=ca||(ca={})).ea="default",cl.Cache="cache";class Of{constructor(c,x,P){this.query=c,this.ta=x,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=P||{}}X_(c){if(!this.options.includeMetadataChanges){const P=[];for(const M of c.docChanges)M.type!==3&&P.push(M);c=new qi(c.query,c.docs,c.oldDocs,P,c.mutatedKeys,c.fromCache,c.syncStateChanged,!0,c.hasCachedResults)}let x=!1;return this.na?this.ia(c)&&(this.ta.next(c),x=!0):this.sa(c,this.onlineState)&&(this.oa(c),x=!0),this.ra=c,x}onError(c){this.ta.error(c)}Z_(c){this.onlineState=c;let x=!1;return this.ra&&!this.na&&this.sa(this.ra,c)&&(this.oa(this.ra),x=!0),x}sa(c,x){if(!c.fromCache||!this.J_())return!0;const P=x!=="Offline";return(!this.options._a||!P)&&(!c.docs.isEmpty()||c.hasCachedResults||x==="Offline")}ia(c){if(c.docChanges.length>0)return!0;const x=this.ra&&this.ra.hasPendingWrites!==c.hasPendingWrites;return!(!c.syncStateChanged&&!x)&&this.options.includeMetadataChanges===!0}oa(c){c=qi.fromInitialDocuments(c.query,c.docs,c.mutatedKeys,c.fromCache,c.hasCachedResults),this.na=!0,this.ta.next(c)}J_(){return this.options.source!==ca.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(c){this.key=c}}class Df{constructor(c){this.key=c}}class px{constructor(c,x){this.query=c,this.Ta=x,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Lt(),this.mutatedKeys=Lt(),this.Aa=Zu(c),this.Ra=new Ki(this.Aa)}get Va(){return this.Ta}ma(c,x){const P=x?x.fa:new fl,M=x?x.Ra:this.Ra;let D=x?x.mutatedKeys:this.mutatedKeys,v=M,E=!1;const t=this.query.limitType==="F"&&M.size===this.query.limit?M.last():null,o=this.query.limitType==="L"&&M.size===this.query.limit?M.first():null;if(c.inorderTraversal((g,a)=>{const r=M.get(g),s=nr(this.query,a)?a:null,e=!!r&&this.mutatedKeys.has(r.key),n=!!s&&(s.hasLocalMutations||this.mutatedKeys.has(s.key)&&s.hasCommittedMutations);let h=!1;r&&s?r.data.isEqual(s.data)?e!==n&&(P.track({type:3,doc:s}),h=!0):this.ga(r,s)||(P.track({type:2,doc:s}),h=!0,(t&&this.Aa(s,t)>0||o&&this.Aa(s,o)<0)&&(E=!0)):!r&&s?(P.track({type:0,doc:s}),h=!0):r&&!s&&(P.track({type:1,doc:r}),h=!0,(t||o)&&(E=!0)),h&&(s?(v=v.add(s),D=n?D.add(g):D.delete(g)):(v=v.delete(g),D=D.delete(g)))}),this.query.limit!==null)for(;v.size>this.query.limit;){const g=this.query.limitType==="F"?v.last():v.first();v=v.delete(g.key),D=D.delete(g.key),P.track({type:1,doc:g})}return{Ra:v,fa:P,ns:E,mutatedKeys:D}}ga(c,x){return c.hasLocalMutations&&x.hasCommittedMutations&&!x.hasLocalMutations}applyChanges(c,x,P,M){const D=this.Ra;this.Ra=c.Ra,this.mutatedKeys=c.mutatedKeys;const v=c.fa.G_();v.sort((g,a)=>function(s,e){const n=h=>{switch(h){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct()}};return n(s)-n(e)}(g.type,a.type)||this.Aa(g.doc,a.doc)),this.pa(P),M=M!=null&&M;const E=x&&!M?this.ya():[],t=this.da.size===0&&this.current&&!M?1:0,o=t!==this.Ea;return this.Ea=t,v.length!==0||o?{snapshot:new qi(this.query,c.Ra,D,v,c.mutatedKeys,t===0,o,!1,!!P&&P.resumeToken.approximateByteSize()>0),wa:E}:{wa:E}}Z_(c){return this.current&&c==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new fl,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(c){return!this.Ta.has(c)&&!!this.Ra.has(c)&&!this.Ra.get(c).hasLocalMutations}pa(c){c&&(c.addedDocuments.forEach(x=>this.Ta=this.Ta.add(x)),c.modifiedDocuments.forEach(x=>{}),c.removedDocuments.forEach(x=>this.Ta=this.Ta.delete(x)),this.current=c.current)}ya(){if(!this.current)return[];const c=this.da;this.da=Lt(),this.Ra.forEach(P=>{this.Sa(P.key)&&(this.da=this.da.add(P.key))});const x=[];return c.forEach(P=>{this.da.has(P)||x.push(new Df(P))}),this.da.forEach(P=>{c.has(P)||x.push(new Ff(P))}),x}ba(c){this.Ta=c.Ts,this.da=Lt();const x=this.ma(c.documents);return this.applyChanges(x,!0)}Da(){return qi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class gx{constructor(c,x,P){this.query=c,this.targetId=x,this.view=P}}class mx{constructor(c){this.key=c,this.va=!1}}class xx{constructor(c,x,P,M,D,v){this.localStore=c,this.remoteStore=x,this.eventManager=P,this.sharedClientState=M,this.currentUser=D,this.maxConcurrentLimboResolutions=v,this.Ca={},this.Fa=new rn(E=>ju(E),ir),this.Ma=new Map,this.xa=new Set,this.Oa=new Wt(yt.comparator),this.Na=new Map,this.La=new za,this.Ba={},this.ka=new Map,this.qa=ki.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function yx(A,c,x=!0){const P=bf(A);let M;const D=P.Fa.get(c);return D?(P.sharedClientState.addLocalQueryTarget(D.targetId),M=D.view.Da()):M=await Nf(P,c,x,!0),M}async function Tx(A,c){const x=bf(A);await Nf(x,c,!0,!1)}async function Nf(A,c,x,P){const M=await W0(A.localStore,we(c)),D=M.targetId,v=A.sharedClientState.addLocalQueryTarget(D,x);let E;return P&&(E=await Ex(A,c,D,v==="current",M.resumeToken)),A.isPrimaryClient&&x&&Cf(A.remoteStore,M),E}async function Ex(A,c,x,P,M){A.Ka=(a,r,s)=>async function(n,h,i,l){let f=h.view.ma(i);f.ns&&(f=await ol(n.localStore,h.query,!1).then(({documents:m})=>h.view.ma(m,f)));const u=l&&l.targetChanges.get(h.targetId),d=l&&l.targetMismatches.get(h.targetId)!=null,p=h.view.applyChanges(f,n.isPrimaryClient,u,d);return pl(n,h.targetId,p.wa),p.snapshot}(A,a,r,s);const D=await ol(A.localStore,c,!0),v=new px(c,D.Ts),E=v.ma(D.documents),t=_n.createSynthesizedTargetChangeForCurrentChange(x,P&&A.onlineState!=="Offline",M),o=v.applyChanges(E,A.isPrimaryClient,t);pl(A,x,o.wa);const g=new gx(c,x,v);return A.Fa.set(c,g),A.Ma.has(x)?A.Ma.get(x).push(c):A.Ma.set(x,[c]),o.snapshot}async function Sx(A,c,x){const P=Pt(A),M=P.Fa.get(c),D=P.Ma.get(M.targetId);if(D.length>1)return P.Ma.set(M.targetId,D.filter(v=>!ir(v,c))),void P.Fa.delete(c);P.isPrimaryClient?(P.sharedClientState.removeLocalQueryTarget(M.targetId),P.sharedClientState.isActiveQueryTarget(M.targetId)||await da(P.localStore,M.targetId,!1).then(()=>{P.sharedClientState.clearQueryState(M.targetId),x&&Ya(P.remoteStore,M.targetId),va(P,M.targetId)}).catch(jn)):(va(P,M.targetId),await da(P.localStore,M.targetId,!0))}async function Cx(A,c){const x=Pt(A),P=x.Fa.get(c),M=x.Ma.get(P.targetId);x.isPrimaryClient&&M.length===1&&(x.sharedClientState.removeLocalQueryTarget(P.targetId),Ya(x.remoteStore,P.targetId))}async function Ax(A,c,x){const P=Ox(A);try{const M=await function(v,E){const t=Pt(v),o=jt.now(),g=E.reduce((s,e)=>s.add(e.key),Lt());let a,r;return t.persistence.runTransaction("Locally write mutations","readwrite",s=>{let e=$e(),n=Lt();return t.cs.getEntries(s,g).next(h=>{e=h,e.forEach((i,l)=>{l.isValidDocument()||(n=n.add(i))})}).next(()=>t.localDocuments.getOverlayedDocuments(s,e)).next(h=>{a=h;const i=[];for(const l of E){const f=$m(l,a.get(l.key).overlayedDocument);f!=null&&i.push(new Oi(l.key,f,Xu(f.value.mapValue),We.exists(!0)))}return t.mutationQueue.addMutationBatch(s,o,i,E)}).next(h=>{r=h;const i=h.applyToLocalDocumentSet(a,n);return t.documentOverlayCache.saveOverlays(s,h.batchId,i)})}).then(()=>({batchId:r.batchId,changes:qu(a)}))}(P.localStore,c);P.sharedClientState.addPendingMutation(M.batchId),function(v,E,t){let o=v.Ba[v.currentUser.toKey()];o||(o=new Wt(Nt)),o=o.insert(E,t),v.Ba[v.currentUser.toKey()]=o}(P,M.batchId,x),await es(P,M.changes),await lr(P.remoteStore)}catch(M){const D=Ja(M,"Failed to persist write");x.reject(D)}}async function Bf(A,c){const x=Pt(A);try{const P=await b0(x.localStore,c);c.targetChanges.forEach((M,D)=>{const v=x.Na.get(D);v&&(Vt(M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size<=1),M.addedDocuments.size>0?v.va=!0:M.modifiedDocuments.size>0?Vt(v.va):M.removedDocuments.size>0&&(Vt(v.va),v.va=!1))}),await es(x,P,c)}catch(P){await jn(P)}}function vl(A,c,x){const P=Pt(A);if(P.isPrimaryClient&&x===0||!P.isPrimaryClient&&x===1){const M=[];P.Fa.forEach((D,v)=>{const E=v.view.Z_(c);E.snapshot&&M.push(E.snapshot)}),function(v,E){const t=Pt(v);t.onlineState=E;let o=!1;t.queries.forEach((g,a)=>{for(const r of a.j_)r.Z_(E)&&(o=!0)}),o&&ja(t)}(P.eventManager,c),M.length&&P.Ca.d_(M),P.onlineState=c,P.isPrimaryClient&&P.sharedClientState.setOnlineState(c)}}async function Px(A,c,x){const P=Pt(A);P.sharedClientState.updateQueryState(c,"rejected",x);const M=P.Na.get(c),D=M&&M.key;if(D){let v=new Wt(yt.comparator);v=v.insert(D,he.newNoDocument(D,At.min()));const E=Lt().add(D),t=new ar(At.min(),new Map,new Wt(Nt),v,E);await Bf(P,t),P.Oa=P.Oa.remove(D),P.Na.delete(c),Za(P)}else await da(P.localStore,c,!1).then(()=>va(P,c,x)).catch(jn)}async function Rx(A,c){const x=Pt(A),P=c.batch.batchId;try{const M=await U0(x.localStore,c);Gf(x,P,null),Vf(x,P),x.sharedClientState.updateMutationState(P,"acknowledged"),await es(x,M)}catch(M){await jn(M)}}async function Ix(A,c,x){const P=Pt(A);try{const M=await function(v,E){const t=Pt(v);return t.persistence.runTransaction("Reject batch","readwrite-primary",o=>{let g;return t.mutationQueue.lookupMutationBatch(o,E).next(a=>(Vt(a!==null),g=a.keys(),t.mutationQueue.removeMutationBatch(o,a))).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,g,E)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,g)).next(()=>t.localDocuments.getDocuments(o,g))})}(P.localStore,c);Gf(P,c,x),Vf(P,c),P.sharedClientState.updateMutationState(c,"rejected",x),await es(P,M)}catch(M){await jn(M)}}function Vf(A,c){(A.ka.get(c)||[]).forEach(x=>{x.resolve()}),A.ka.delete(c)}function Gf(A,c,x){const P=Pt(A);let M=P.Ba[P.currentUser.toKey()];if(M){const D=M.get(c);D&&(x?D.reject(x):D.resolve(),M=M.remove(c)),P.Ba[P.currentUser.toKey()]=M}}function va(A,c,x=null){A.sharedClientState.removeLocalQueryTarget(c);for(const P of A.Ma.get(c))A.Fa.delete(P),x&&A.Ca.$a(P,x);A.Ma.delete(c),A.isPrimaryClient&&A.La.gr(c).forEach(P=>{A.La.containsKey(P)||Uf(A,P)})}function Uf(A,c){A.xa.delete(c.path.canonicalString());const x=A.Oa.get(c);x!==null&&(Ya(A.remoteStore,x),A.Oa=A.Oa.remove(c),A.Na.delete(x),Za(A))}function pl(A,c,x){for(const P of x)P instanceof Ff?(A.La.addReference(P.key,c),Mx(A,P)):P instanceof Df?(xt("SyncEngine","Document no longer in limbo: "+P.key),A.La.removeReference(P.key,c),A.La.containsKey(P.key)||Uf(A,P.key)):Ct()}function Mx(A,c){const x=c.key,P=x.path.canonicalString();A.Oa.get(x)||A.xa.has(P)||(xt("SyncEngine","New document in limbo: "+x),A.xa.add(P),Za(A))}function Za(A){for(;A.xa.size>0&&A.Oa.size<A.maxConcurrentLimboResolutions;){const c=A.xa.values().next().value;A.xa.delete(c);const x=new yt(bt.fromString(c)),P=A.qa.next();A.Na.set(P,new mx(x)),A.Oa=A.Oa.insert(x,P),Cf(A.remoteStore,new ii(we(Ba(x.path)),P,"TargetPurposeLimboResolution",wa.oe))}}async function es(A,c,x){const P=Pt(A),M=[],D=[],v=[];P.Fa.isEmpty()||(P.Fa.forEach((E,t)=>{v.push(P.Ka(t,c,x).then(o=>{var g;if((o||x)&&P.isPrimaryClient){const a=o?!o.fromCache:(g=x==null?void 0:x.targetChanges.get(t.targetId))===null||g===void 0?void 0:g.current;P.sharedClientState.updateQueryState(t.targetId,a?"current":"not-current")}if(o){M.push(o);const a=Wa.Wi(t.targetId,o);D.push(a)}}))}),await Promise.all(v),P.Ca.d_(M),await async function(t,o){const g=Pt(t);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",a=>ut.forEach(o,r=>ut.forEach(r.$i,s=>g.persistence.referenceDelegate.addReference(a,r.targetId,s)).next(()=>ut.forEach(r.Ui,s=>g.persistence.referenceDelegate.removeReference(a,r.targetId,s)))))}catch(a){if(!Zn(a))throw a;xt("LocalStore","Failed to update sequence numbers: "+a)}for(const a of o){const r=a.targetId;if(!a.fromCache){const s=g.os.get(r),e=s.snapshotVersion,n=s.withLastLimboFreeSnapshotVersion(e);g.os=g.os.insert(r,n)}}}(P.localStore,D))}async function wx(A,c){const x=Pt(A);if(!x.currentUser.isEqual(c)){xt("SyncEngine","User change. New user:",c.toKey());const P=await yf(x.localStore,c);x.currentUser=c,function(D,v){D.ka.forEach(E=>{E.forEach(t=>{t.reject(new gt(ht.CANCELLED,v))})}),D.ka.clear()}(x,"'waitForPendingWrites' promise is rejected due to a user change."),x.sharedClientState.handleUserChange(c,P.removedBatchIds,P.addedBatchIds),await es(x,P.hs)}}function Lx(A,c){const x=Pt(A),P=x.Na.get(c);if(P&&P.va)return Lt().add(P.key);{let M=Lt();const D=x.Ma.get(c);if(!D)return M;for(const v of D){const E=x.Fa.get(v);M=M.unionWith(E.view.Va)}return M}}function bf(A){const c=Pt(A);return c.remoteStore.remoteSyncer.applyRemoteEvent=Bf.bind(null,c),c.remoteStore.remoteSyncer.getRemoteKeysForTarget=Lx.bind(null,c),c.remoteStore.remoteSyncer.rejectListen=Px.bind(null,c),c.Ca.d_=cx.bind(null,c.eventManager),c.Ca.$a=vx.bind(null,c.eventManager),c}function Ox(A){const c=Pt(A);return c.remoteStore.remoteSyncer.applySuccessfulWrite=Rx.bind(null,c),c.remoteStore.remoteSyncer.rejectFailedWrite=Ix.bind(null,c),c}class $s{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(c){this.serializer=or(c.databaseInfo.databaseId),this.sharedClientState=this.Wa(c),this.persistence=this.Ga(c),await this.persistence.start(),this.localStore=this.za(c),this.gcScheduler=this.ja(c,this.localStore),this.indexBackfillerScheduler=this.Ha(c,this.localStore)}ja(c,x){return null}Ha(c,x){return null}za(c){return G0(this.persistence,new B0,c.initialUser,this.serializer)}Ga(c){return new F0(Xa.Zr,this.serializer)}Wa(c){return new H0}async terminate(){var c,x;(c=this.gcScheduler)===null||c===void 0||c.stop(),(x=this.indexBackfillerScheduler)===null||x===void 0||x.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$s.provider={build:()=>new $s};class pa{async initialize(c,x){this.localStore||(this.localStore=c.localStore,this.sharedClientState=c.sharedClientState,this.datastore=this.createDatastore(x),this.remoteStore=this.createRemoteStore(x),this.eventManager=this.createEventManager(x),this.syncEngine=this.createSyncEngine(x,!c.synchronizeTabs),this.sharedClientState.onlineStateHandler=P=>vl(this.syncEngine,P,1),this.remoteStore.remoteSyncer.handleCredentialChange=wx.bind(null,this.syncEngine),await ux(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(c){return function(){return new dx}()}createDatastore(c){const x=or(c.databaseInfo.databaseId),P=function(D){return new J0(D)}(c.databaseInfo);return function(D,v,E,t){return new k0(D,v,E,t)}(c.authCredentials,c.appCheckCredentials,P,x)}createRemoteStore(c){return function(P,M,D,v,E){return new _0(P,M,D,v,E)}(this.localStore,this.datastore,c.asyncQueue,x=>vl(this.syncEngine,x,0),function(){return ll.D()?new ll:new K0}())}createSyncEngine(c,x){return function(M,D,v,E,t,o,g){const a=new xx(M,D,v,E,t,o);return g&&(a.Qa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,c.initialUser,c.maxConcurrentLimboResolutions,x)}async terminate(){var c,x;await async function(M){const D=Pt(M);xt("RemoteStore","RemoteStore shutting down."),D.L_.add(5),await ts(D),D.k_.shutdown(),D.q_.set("Unknown")}(this.remoteStore),(c=this.datastore)===null||c===void 0||c.terminate(),(x=this.eventManager)===null||x===void 0||x.terminate()}}pa.provider={build:()=>new pa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(c){this.observer=c,this.muted=!1}next(c){this.muted||this.observer.next&&this.Ya(this.observer.next,c)}error(c){this.muted||(this.observer.error?this.Ya(this.observer.error,c):Ke("Uncaught Error in snapshot listener:",c.toString()))}Za(){this.muted=!0}Ya(c,x){setTimeout(()=>{this.muted||c(x)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(c,x,P,M,D){this.authCredentials=c,this.appCheckCredentials=x,this.asyncQueue=P,this.databaseInfo=M,this.user=oe.UNAUTHENTICATED,this.clientId=Uu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=D,this.authCredentials.start(P,async v=>{xt("FirestoreClient","Received user=",v.uid),await this.authCredentialListener(v),this.user=v}),this.appCheckCredentials.start(P,v=>(xt("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(c){this.authCredentialListener=c}setAppCheckTokenChangeListener(c){this.appCheckCredentialListener=c}terminate(){this.asyncQueue.enterRestrictedMode();const c=new Xe;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),c.resolve()}catch(x){const P=Ja(x,"Failed to shutdown persistence");c.reject(P)}}),c.promise}}async function Xr(A,c){A.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const x=A.configuration;await c.initialize(x);let P=x.initialUser;A.setCredentialChangeListener(async M=>{P.isEqual(M)||(await yf(c.localStore,M),P=M)}),c.persistence.setDatabaseDeletedListener(()=>A.terminate()),A._offlineComponents=c}async function gl(A,c){A.asyncQueue.verifyOperationInProgress();const x=await Dx(A);xt("FirestoreClient","Initializing OnlineComponentProvider"),await c.initialize(x,A.configuration),A.setCredentialChangeListener(P=>ul(c.remoteStore,P)),A.setAppCheckTokenChangeListener((P,M)=>ul(c.remoteStore,M)),A._onlineComponents=c}async function Dx(A){if(!A._offlineComponents)if(A._uninitializedComponentsProvider){xt("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xr(A,A._uninitializedComponentsProvider._offline)}catch(c){const x=c;if(!function(M){return M.name==="FirebaseError"?M.code===ht.FAILED_PRECONDITION||M.code===ht.UNIMPLEMENTED:!(typeof DOMException<"u"&&M instanceof DOMException)||M.code===22||M.code===20||M.code===11}(x))throw x;Qi("Error using user provided cache. Falling back to memory cache: "+x),await Xr(A,new $s)}}else xt("FirestoreClient","Using default OfflineComponentProvider"),await Xr(A,new $s);return A._offlineComponents}async function Xf(A){return A._onlineComponents||(A._uninitializedComponentsProvider?(xt("FirestoreClient","Using user provided OnlineComponentProvider"),await gl(A,A._uninitializedComponentsProvider._online)):(xt("FirestoreClient","Using default OnlineComponentProvider"),await gl(A,new pa))),A._onlineComponents}function Nx(A){return Xf(A).then(c=>c.syncEngine)}async function Wf(A){const c=await Xf(A),x=c.eventManager;return x.onListen=yx.bind(null,c.syncEngine),x.onUnlisten=Sx.bind(null,c.syncEngine),x.onFirstRemoteStoreListen=Tx.bind(null,c.syncEngine),x.onLastRemoteStoreUnlisten=Cx.bind(null,c.syncEngine),x}function Bx(A,c,x={}){const P=new Xe;return A.asyncQueue.enqueueAndForget(async()=>function(D,v,E,t,o){const g=new zf({next:r=>{g.Za(),v.enqueueAndForget(()=>Lf(D,a));const s=r.docs.has(E);!s&&r.fromCache?o.reject(new gt(ht.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&r.fromCache&&t&&t.source==="server"?o.reject(new gt(ht.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):o.resolve(r)},error:r=>o.reject(r)}),a=new Of(Ba(E.path),g,{includeMetadataChanges:!0,_a:!0});return wf(D,a)}(await Wf(A),A.asyncQueue,c,x,P)),P.promise}function Vx(A,c,x={}){const P=new Xe;return A.asyncQueue.enqueueAndForget(async()=>function(D,v,E,t,o){const g=new zf({next:r=>{g.Za(),v.enqueueAndForget(()=>Lf(D,a)),r.fromCache&&t.source==="server"?o.reject(new gt(ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):o.resolve(r)},error:r=>o.reject(r)}),a=new Of(E,g,{includeMetadataChanges:!0,_a:!0});return wf(D,a)}(await Wf(A),A.asyncQueue,c,x,P)),P.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yf(A){const c={};return A.timeoutSeconds!==void 0&&(c.timeoutSeconds=A.timeoutSeconds),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(A,c,x){if(!x)throw new gt(ht.INVALID_ARGUMENT,`Function ${A}() cannot be called with an empty ${c}.`)}function Gx(A,c,x,P){if(c===!0&&P===!0)throw new gt(ht.INVALID_ARGUMENT,`${A} and ${x} cannot be used together.`)}function xl(A){if(!yt.isDocumentKey(A))throw new gt(ht.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${A} has ${A.length}.`)}function yl(A){if(yt.isDocumentKey(A))throw new gt(ht.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${A} has ${A.length}.`)}function ur(A){if(A===void 0)return"undefined";if(A===null)return"null";if(typeof A=="string")return A.length>20&&(A=`${A.substring(0,20)}...`),JSON.stringify(A);if(typeof A=="number"||typeof A=="boolean")return""+A;if(typeof A=="object"){if(A instanceof Array)return"an array";{const c=function(P){return P.constructor?P.constructor.name:null}(A);return c?`a custom ${c} object`:"an object"}}return typeof A=="function"?"a function":Ct()}function Pi(A,c){if("_delegate"in A&&(A=A._delegate),!(A instanceof c)){if(c.name===A.constructor.name)throw new gt(ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const x=ur(A);throw new gt(ht.INVALID_ARGUMENT,`Expected type '${c.name}', but it was: ${x}`)}}return A}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(c){var x,P;if(c.host===void 0){if(c.ssl!==void 0)throw new gt(ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=c.host,this.ssl=(x=c.ssl)===null||x===void 0||x;if(this.credentials=c.credentials,this.ignoreUndefinedProperties=!!c.ignoreUndefinedProperties,this.localCache=c.localCache,c.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(c.cacheSizeBytes!==-1&&c.cacheSizeBytes<1048576)throw new gt(ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=c.cacheSizeBytes}Gx("experimentalForceLongPolling",c.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",c.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!c.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:c.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!c.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yf((P=c.experimentalLongPollingOptions)!==null&&P!==void 0?P:{}),function(D){if(D.timeoutSeconds!==void 0){if(isNaN(D.timeoutSeconds))throw new gt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${D.timeoutSeconds} (must not be NaN)`);if(D.timeoutSeconds<5)throw new gt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${D.timeoutSeconds} (minimum allowed value is 5)`);if(D.timeoutSeconds>30)throw new gt(ht.INVALID_ARGUMENT,`invalid long polling timeout: ${D.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!c.useFetchStreams}isEqual(c){return this.host===c.host&&this.ssl===c.ssl&&this.credentials===c.credentials&&this.cacheSizeBytes===c.cacheSizeBytes&&this.experimentalForceLongPolling===c.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===c.experimentalAutoDetectLongPolling&&function(P,M){return P.timeoutSeconds===M.timeoutSeconds}(this.experimentalLongPollingOptions,c.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===c.ignoreUndefinedProperties&&this.useFetchStreams===c.useFetchStreams}}class fr{constructor(c,x,P,M){this._authCredentials=c,this._appCheckCredentials=x,this._databaseId=P,this._app=M,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tl({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new gt(ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(c){if(this._settingsFrozen)throw new gt(ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tl(c),c.credentials!==void 0&&(this._authCredentials=function(P){if(!P)return new em;switch(P.type){case"firstParty":return new rm(P.sessionIndex||"0",P.iamToken||null,P.authTokenFactory||null);case"provider":return P.client;default:throw new gt(ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(c.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(x){const P=ml.get(x);P&&(xt("ComponentProvider","Removing Datastore"),ml.delete(x),P.terminate())}(this),Promise.resolve()}}function Ux(A,c,x,P={}){var M;const D=(A=Pi(A,fr))._getSettings(),v=`${c}:${x}`;if(D.host!=="firestore.googleapis.com"&&D.host!==v&&Qi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),A._setSettings(Object.assign(Object.assign({},D),{host:v,ssl:!1})),P.mockUserToken){let E,t;if(typeof P.mockUserToken=="string")E=P.mockUserToken,t=oe.MOCK_USER;else{E=pc(P.mockUserToken,(M=A._app)===null||M===void 0?void 0:M.options.projectId);const o=P.mockUserToken.sub||P.mockUserToken.user_id;if(!o)throw new gt(ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t=new oe(o)}A._authCredentials=new im(new Gu(E,t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(c,x,P){this.converter=x,this._query=P,this.type="query",this.firestore=c}withConverter(c){return new on(this.firestore,c,this._query)}}class fe{constructor(c,x,P){this.converter=x,this._key=P,this.type="document",this.firestore=c}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(c){return new fe(this.firestore,c,this._key)}}class ri extends on{constructor(c,x,P){super(c,x,Ba(P)),this._path=P,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const c=this._path.popLast();return c.isEmpty()?null:new fe(this.firestore,null,new yt(c))}withConverter(c){return new ri(this.firestore,c,this._path)}}function bx(A,c,...x){if(A=kt(A),Hf("collection","path",c),A instanceof fr){const P=bt.fromString(c,...x);return yl(P),new ri(A,null,P)}{if(!(A instanceof fe||A instanceof ri))throw new gt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const P=A._path.child(bt.fromString(c,...x));return yl(P),new ri(A.firestore,null,P)}}function Ss(A,c,...x){if(A=kt(A),arguments.length===1&&(c=Uu.newId()),Hf("doc","path",c),A instanceof fr){const P=bt.fromString(c,...x);return xl(P),new fe(A,null,new yt(P))}{if(!(A instanceof fe||A instanceof ri))throw new gt(ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const P=A._path.child(bt.fromString(c,...x));return xl(P),new fe(A.firestore,A instanceof ri?A.converter:null,new yt(P))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(c=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ef(this,"async_queue_retry"),this.Vu=()=>{const P=zr();P&&xt("AsyncQueue","Visibility state changed to "+P.visibilityState),this.t_.jo()},this.mu=c;const x=zr();x&&typeof x.addEventListener=="function"&&x.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(c){this.enqueue(c)}enqueueAndForgetEvenWhileRestricted(c){this.fu(),this.gu(c)}enterRestrictedMode(c){if(!this.Iu){this.Iu=!0,this.Au=c||!1;const x=zr();x&&typeof x.removeEventListener=="function"&&x.removeEventListener("visibilitychange",this.Vu)}}enqueue(c){if(this.fu(),this.Iu)return new Promise(()=>{});const x=new Xe;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(c().then(x.resolve,x.reject),x.promise)).then(()=>x.promise)}enqueueRetryable(c){this.enqueueAndForget(()=>(this.Pu.push(c),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(c){if(!Zn(c))throw c;xt("AsyncQueue","Operation failed with retryable error: "+c)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(c){const x=this.mu.then(()=>(this.du=!0,c().catch(P=>{this.Eu=P,this.du=!1;const M=function(v){let E=v.message||"";return v.stack&&(E=v.stack.includes(v.message)?v.stack:v.message+`
`+v.stack),E}(P);throw Ke("INTERNAL UNHANDLED ERROR: ",M),P}).then(P=>(this.du=!1,P))));return this.mu=x,x}enqueueAfterDelay(c,x,P){this.fu(),this.Ru.indexOf(c)>-1&&(x=0);const M=Qa.createAndSchedule(this,c,x,P,D=>this.yu(D));return this.Tu.push(M),M}fu(){this.Eu&&Ct()}verifyOperationInProgress(){}async wu(){let c;do c=this.mu,await c;while(c!==this.mu)}Su(c){for(const x of this.Tu)if(x.timerId===c)return!0;return!1}bu(c){return this.wu().then(()=>{this.Tu.sort((x,P)=>x.targetTimeMs-P.targetTimeMs);for(const x of this.Tu)if(x.skipDelay(),c!=="all"&&x.timerId===c)break;return this.wu()})}Du(c){this.Ru.push(c)}yu(c){const x=this.Tu.indexOf(c);this.Tu.splice(x,1)}}class dr extends fr{constructor(c,x,P,M){super(c,x,P,M),this.type="firestore",this._queue=new El,this._persistenceKey=(M==null?void 0:M.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const c=this._firestoreClient.terminate();this._queue=new El(c),this._firestoreClient=void 0,await c}}}function zx(A,c){const x=typeof A=="object"?A:xa(),P=typeof A=="string"?A:c||"(default)",M=wi(x,"firestore").getImmediate({identifier:P});if(!M._initialized){const D=cc("firestore");D&&Ux(M,...D)}return M}function ka(A){if(A._terminated)throw new gt(ht.FAILED_PRECONDITION,"The client has already been terminated.");return A._firestoreClient||Xx(A),A._firestoreClient}function Xx(A){var c,x,P;const M=A._freezeSettings(),D=function(E,t,o,g){return new xm(E,t,o,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Yf(g.experimentalLongPollingOptions),g.useFetchStreams)}(A._databaseId,((c=A._app)===null||c===void 0?void 0:c.options.appId)||"",A._persistenceKey,M);A._componentsProvider||!((x=M.localCache)===null||x===void 0)&&x._offlineComponentProvider&&(!((P=M.localCache)===null||P===void 0)&&P._onlineComponentProvider)&&(A._componentsProvider={_offline:M.localCache._offlineComponentProvider,_online:M.localCache._onlineComponentProvider}),A._firestoreClient=new Fx(A._authCredentials,A._appCheckCredentials,A._queue,D,A._componentsProvider&&function(E){const t=E==null?void 0:E._online.build();return{_offline:E==null?void 0:E._offline.build(t),_online:t}}(A._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(c){this._byteString=c}static fromBase64String(c){try{return new _i(ie.fromBase64String(c))}catch(x){throw new gt(ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+x)}}static fromUint8Array(c){return new _i(ie.fromUint8Array(c))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(c){return this._byteString.isEqual(c._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(...c){for(let x=0;x<c.length;++x)if(c[x].length===0)throw new gt(ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new te(c)}isEqual(c){return this._internalPath.isEqual(c._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(c){this._methodName=c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(c,x){if(!isFinite(c)||c<-90||c>90)throw new gt(ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+c);if(!isFinite(x)||x<-180||x>180)throw new gt(ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+x);this._lat=c,this._long=x}get latitude(){return this._lat}get longitude(){return this._long}isEqual(c){return this._lat===c._lat&&this._long===c._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(c){return Nt(this._lat,c._lat)||Nt(this._long,c._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(c){this._values=(c||[]).map(x=>x)}toArray(){return this._values.map(c=>c)}isEqual(c){return function(P,M){if(P.length!==M.length)return!1;for(let D=0;D<P.length;++D)if(P[D]!==M[D])return!1;return!0}(this._values,c._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=/^__.*__$/;class Yx{constructor(c,x,P){this.data=c,this.fieldMask=x,this.fieldTransforms=P}toMutation(c,x){return this.fieldMask!==null?new Oi(c,this.data,this.fieldMask,x,this.fieldTransforms):new qn(c,this.data,x,this.fieldTransforms)}}function $f(A){switch(A){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct()}}class eo{constructor(c,x,P,M,D,v){this.settings=c,this.databaseId=x,this.serializer=P,this.ignoreUndefinedProperties=M,D===void 0&&this.vu(),this.fieldTransforms=D||[],this.fieldMask=v||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(c){return new eo(Object.assign(Object.assign({},this.settings),c),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(c){var x;const P=(x=this.path)===null||x===void 0?void 0:x.child(c),M=this.Fu({path:P,xu:!1});return M.Ou(c),M}Nu(c){var x;const P=(x=this.path)===null||x===void 0?void 0:x.child(c),M=this.Fu({path:P,xu:!1});return M.vu(),M}Lu(c){return this.Fu({path:void 0,xu:!0})}Bu(c){return Qs(c,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(c){return this.fieldMask.find(x=>c.isPrefixOf(x))!==void 0||this.fieldTransforms.find(x=>c.isPrefixOf(x.field))!==void 0}vu(){if(this.path)for(let c=0;c<this.path.length;c++)this.Ou(this.path.get(c))}Ou(c){if(c.length===0)throw this.Bu("Document fields must not be empty");if($f(this.Cu)&&Wx.test(c))throw this.Bu('Document fields cannot begin and end with "__"')}}class Hx{constructor(c,x,P){this.databaseId=c,this.ignoreUndefinedProperties=x,this.serializer=P||or(c)}Qu(c,x,P,M=!1){return new eo({Cu:c,methodName:x,qu:P,path:te.emptyPath(),xu:!1,ku:M},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qf(A){const c=A._freezeSettings(),x=or(A._databaseId);return new Hx(A._databaseId,!!c.ignoreUndefinedProperties,x)}function Kx(A,c,x,P,M,D={}){const v=A.Qu(D.merge||D.mergeFields?2:0,c,x,M);Zf("Data must be an object, but it was:",v,P);const E=Jf(P,v);let t,o;if(D.merge)t=new Te(v.fieldMask),o=v.fieldTransforms;else if(D.mergeFields){const g=[];for(const a of D.mergeFields){const r=Qx(c,a,x);if(!v.contains(r))throw new gt(ht.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);jx(g,r)||g.push(r)}t=new Te(g),o=v.fieldTransforms.filter(a=>t.covers(a.field))}else t=null,o=v.fieldTransforms;return new Yx(new pe(E),t,o)}function $x(A,c,x,P=!1){return io(x,A.Qu(P?4:3,c))}function io(A,c){if(jf(A=kt(A)))return Zf("Unsupported field value:",c,A),Jf(A,c);if(A instanceof Kf)return function(P,M){if(!$f(M.Cu))throw M.Bu(`${P._methodName}() can only be used with update() and set()`);if(!M.path)throw M.Bu(`${P._methodName}() is not currently supported inside arrays`);const D=P._toFieldTransform(M);D&&M.fieldTransforms.push(D)}(A,c),null;if(A===void 0&&c.ignoreUndefinedProperties)return null;if(c.path&&c.fieldMask.push(c.path),A instanceof Array){if(c.settings.xu&&c.Cu!==4)throw c.Bu("Nested arrays are not supported");return function(P,M){const D=[];let v=0;for(const E of P){let t=io(E,M.Lu(v));t==null&&(t={nullValue:"NULL_VALUE"}),D.push(t),v++}return{arrayValue:{values:D}}}(A,c)}return function(P,M){if((P=kt(P))===null)return{nullValue:"NULL_VALUE"};if(typeof P=="number")return zm(M.serializer,P);if(typeof P=="boolean")return{booleanValue:P};if(typeof P=="string")return{stringValue:P};if(P instanceof Date){const D=jt.fromDate(P);return{timestampValue:Hs(M.serializer,D)}}if(P instanceof jt){const D=new jt(P.seconds,1e3*Math.floor(P.nanoseconds/1e3));return{timestampValue:Hs(M.serializer,D)}}if(P instanceof _a)return{geoPointValue:{latitude:P.latitude,longitude:P.longitude}};if(P instanceof _i)return{bytesValue:df(M.serializer,P._byteString)};if(P instanceof fe){const D=M.databaseId,v=P.firestore._databaseId;if(!v.isEqual(D))throw M.Bu(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${D.projectId}/${D.database}`);return{referenceValue:ba(P.firestore._databaseId||M.databaseId,P._key.path)}}if(P instanceof to)return function(v,E){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:v.toArray().map(t=>{if(typeof t!="number")throw E.Bu("VectorValues must only contain numeric values.");return Va(E.serializer,t)})}}}}}}(P,M);throw M.Bu(`Unsupported field value: ${ur(P)}`)}(A,c)}function Jf(A,c){const x={};return bu(A)?c.path&&c.path.length>0&&c.fieldMask.push(c.path):sn(A,(P,M)=>{const D=io(M,c.Mu(P));D!=null&&(x[P]=D)}),{mapValue:{fields:x}}}function jf(A){return!(typeof A!="object"||A===null||A instanceof Array||A instanceof Date||A instanceof jt||A instanceof _a||A instanceof _i||A instanceof fe||A instanceof Kf||A instanceof to)}function Zf(A,c,x){if(!jf(x)||!function(M){return typeof M=="object"&&M!==null&&(Object.getPrototypeOf(M)===Object.prototype||Object.getPrototypeOf(M)===null)}(x)){const P=ur(x);throw P==="an object"?c.Bu(A+" a custom object"):c.Bu(A+" "+P)}}function Qx(A,c,x){if((c=kt(c))instanceof qa)return c._internalPath;if(typeof c=="string")return kf(A,c);throw Qs("Field path arguments must be of type string or ",A,!1,void 0,x)}const Jx=new RegExp("[~\\*/\\[\\]]");function kf(A,c,x){if(c.search(Jx)>=0)throw Qs(`Invalid field path (${c}). Paths must not contain '~', '*', '/', '[', or ']'`,A,!1,void 0,x);try{return new qa(...c.split("."))._internalPath}catch{throw Qs(`Invalid field path (${c}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,A,!1,void 0,x)}}function Qs(A,c,x,P,M){const D=P&&!P.isEmpty(),v=M!==void 0;let E=`Function ${c}() called with invalid data`;x&&(E+=" (via `toFirestore()`)"),E+=". ";let t="";return(D||v)&&(t+=" (found",D&&(t+=` in field ${P}`),v&&(t+=` in document ${M}`),t+=")"),new gt(ht.INVALID_ARGUMENT,E+A+t)}function jx(A,c){return A.some(x=>x.isEqual(c))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(c,x,P,M,D){this._firestore=c,this._userDataWriter=x,this._key=P,this._document=M,this._converter=D}get id(){return this._key.path.lastSegment()}get ref(){return new fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const c=new Zx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(c)}return this._userDataWriter.convertValue(this._document.data.value)}}get(c){if(this._document){const x=this._document.data.field(no("DocumentSnapshot.get",c));if(x!==null)return this._userDataWriter.convertValue(x)}}}class Zx extends qf{data(){return super.data()}}function no(A,c){return typeof c=="string"?kf(A,c):c instanceof qa?c._internalPath:c._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(A){if(A.limitType==="L"&&A.explicitOrderBy.length===0)throw new gt(ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class so{}class qx extends so{}function _x(A,c,...x){let P=[];c instanceof so&&P.push(c),P=P.concat(x),function(D){const v=D.filter(t=>t instanceof ro).length,E=D.filter(t=>t instanceof cr).length;if(v>1||v>0&&E>0)throw new gt(ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(P);for(const M of P)A=M._apply(A);return A}class cr extends qx{constructor(c,x,P){super(),this._field=c,this._op=x,this._value=P,this.type="where"}static _create(c,x,P){return new cr(c,x,P)}_apply(c){const x=this._parse(c);return _f(c._query,x),new on(c.firestore,c.converter,aa(c._query,x))}_parse(c){const x=Qf(c.firestore);return function(D,v,E,t,o,g,a){let r;if(o.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new gt(ht.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){Cl(a,g);const s=[];for(const e of a)s.push(Sl(t,D,e));r={arrayValue:{values:s}}}else r=Sl(t,D,a)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||Cl(a,g),r=$x(E,v,a,g==="in"||g==="not-in");return Jt.create(o,g,r)}(c._query,"where",x,c.firestore._databaseId,this._field,this._op,this._value)}}function ty(A,c,x){const P=c,M=no("where",A);return cr._create(M,P,x)}class ro extends so{constructor(c,x){super(),this.type=c,this._queryConstraints=x}static _create(c,x){return new ro(c,x)}_parse(c){const x=this._queryConstraints.map(P=>P._parse(c)).filter(P=>P.getFilters().length>0);return x.length===1?x[0]:Ce.create(x,this._getOperator())}_apply(c){const x=this._parse(c);return x.getFilters().length===0?c:(function(M,D){let v=M;const E=D.getFlattenedFilters();for(const t of E)_f(v,t),v=aa(v,t)}(c._query,x),new on(c.firestore,c.converter,aa(c._query,x)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Sl(A,c,x){if(typeof(x=kt(x))=="string"){if(x==="")throw new gt(ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ju(c)&&x.indexOf("/")!==-1)throw new gt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${x}' contains a '/' character.`);const P=c.path.child(bt.fromString(x));if(!yt.isDocumentKey(P))throw new gt(ht.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${P}' is not because it has an odd number of segments (${P.length}).`);return Hh(A,new yt(P))}if(x instanceof fe)return Hh(A,x._key);throw new gt(ht.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ur(x)}.`)}function Cl(A,c){if(!Array.isArray(A)||A.length===0)throw new gt(ht.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${c.toString()}' filters.`)}function _f(A,c){const x=function(M,D){for(const v of M)for(const E of v.getFlattenedFilters())if(D.indexOf(E.op)>=0)return E.op;return null}(A.filters,function(M){switch(M){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(c.op));if(x!==null)throw x===c.op?new gt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${c.op.toString()}' filter.`):new gt(ht.INVALID_ARGUMENT,`Invalid query. You cannot use '${c.op.toString()}' filters with '${x.toString()}' filters.`)}class ey{convertValue(c,x="none"){switch(Ai(c)){case 0:return null;case 1:return c.booleanValue;case 2:return Kt(c.integerValue||c.doubleValue);case 3:return this.convertTimestamp(c.timestampValue);case 4:return this.convertServerTimestamp(c,x);case 5:return c.stringValue;case 6:return this.convertBytes(Ci(c.bytesValue));case 7:return this.convertReference(c.referenceValue);case 8:return this.convertGeoPoint(c.geoPointValue);case 9:return this.convertArray(c.arrayValue,x);case 11:return this.convertObject(c.mapValue,x);case 10:return this.convertVectorValue(c.mapValue);default:throw Ct()}}convertObject(c,x){return this.convertObjectMap(c.fields,x)}convertObjectMap(c,x="none"){const P={};return sn(c,(M,D)=>{P[M]=this.convertValue(D,x)}),P}convertVectorValue(c){var x,P,M;const D=(M=(P=(x=c.fields)===null||x===void 0?void 0:x.value.arrayValue)===null||P===void 0?void 0:P.values)===null||M===void 0?void 0:M.map(v=>Kt(v.doubleValue));return new to(D)}convertGeoPoint(c){return new _a(Kt(c.latitude),Kt(c.longitude))}convertArray(c,x){return(c.values||[]).map(P=>this.convertValue(P,x))}convertServerTimestamp(c,x){switch(x){case"previous":const P=Oa(c);return P==null?null:this.convertValue(P,x);case"estimate":return this.convertTimestamp(bn(c));default:return null}}convertTimestamp(c){const x=oi(c);return new jt(x.seconds,x.nanos)}convertDocumentKey(c,x){const P=bt.fromString(c);Vt(xf(P));const M=new zn(P.get(1),P.get(3)),D=new yt(P.popFirst(5));return M.isEqual(x)||Ke(`Document ${D} contains a document reference within a different database (${M.projectId}/${M.database}) which is not supported. It will be treated as a reference in the current database (${x.projectId}/${x.database}) instead.`),D}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(A,c,x){let P;return P=A?x&&(x.merge||x.mergeFields)?A.toFirestore(c,x):A.toFirestore(c):c,P}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(c,x){this.hasPendingWrites=c,this.fromCache=x}isEqual(c){return this.hasPendingWrites===c.hasPendingWrites&&this.fromCache===c.fromCache}}class td extends qf{constructor(c,x,P,M,D,v){super(c,x,P,M,v),this._firestore=c,this._firestoreImpl=c,this.metadata=D}exists(){return super.exists()}data(c={}){if(this._document){if(this._converter){const x=new Os(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(x,c)}return this._userDataWriter.convertValue(this._document.data.value,c.serverTimestamps)}}get(c,x={}){if(this._document){const P=this._document.data.field(no("DocumentSnapshot.get",c));if(P!==null)return this._userDataWriter.convertValue(P,x.serverTimestamps)}}}class Os extends td{data(c={}){return super.data(c)}}class ny{constructor(c,x,P,M){this._firestore=c,this._userDataWriter=x,this._snapshot=M,this.metadata=new Mn(M.hasPendingWrites,M.fromCache),this.query=P}get docs(){const c=[];return this.forEach(x=>c.push(x)),c}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(c,x){this._snapshot.docs.forEach(P=>{c.call(x,new Os(this._firestore,this._userDataWriter,P.key,P,new Mn(this._snapshot.mutatedKeys.has(P.key),this._snapshot.fromCache),this.query.converter))})}docChanges(c={}){const x=!!c.includeMetadataChanges;if(x&&this._snapshot.excludesMetadataChanges)throw new gt(ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===x||(this._cachedChanges=function(M,D){if(M._snapshot.oldDocs.isEmpty()){let v=0;return M._snapshot.docChanges.map(E=>{const t=new Os(M._firestore,M._userDataWriter,E.doc.key,E.doc,new Mn(M._snapshot.mutatedKeys.has(E.doc.key),M._snapshot.fromCache),M.query.converter);return E.doc,{type:"added",doc:t,oldIndex:-1,newIndex:v++}})}{let v=M._snapshot.oldDocs;return M._snapshot.docChanges.filter(E=>D||E.type!==3).map(E=>{const t=new Os(M._firestore,M._userDataWriter,E.doc.key,E.doc,new Mn(M._snapshot.mutatedKeys.has(E.doc.key),M._snapshot.fromCache),M.query.converter);let o=-1,g=-1;return E.type!==0&&(o=v.indexOf(E.doc.key),v=v.delete(E.doc.key)),E.type!==1&&(v=v.add(E.doc),g=v.indexOf(E.doc.key)),{type:sy(E.type),doc:t,oldIndex:o,newIndex:g}})}}(this,x),this._cachedChangesIncludeMetadataChanges=x),this._cachedChanges}}function sy(A){switch(A){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Al(A){A=Pi(A,fe);const c=Pi(A.firestore,dr);return Bx(ka(c),A._key).then(x=>oy(c,A,x))}class ed extends ey{constructor(c){super(),this.firestore=c}convertBytes(c){return new _i(c)}convertReference(c){const x=this.convertDocumentKey(c,this.firestore._databaseId);return new fe(this.firestore,null,x)}}function ry(A){A=Pi(A,on);const c=Pi(A.firestore,dr),x=ka(c),P=new ed(c);return kx(A._query),Vx(x,A._query).then(M=>new ny(c,P,A,M))}function Pl(A,c,x){A=Pi(A,fe);const P=Pi(A.firestore,dr),M=iy(A.converter,c,x);return ay(P,[Kx(Qf(P),"setDoc",A._key,M,A.converter!==null,x).toMutation(A._key,We.none())])}function ay(A,c){return function(P,M){const D=new Xe;return P.asyncQueue.enqueueAndForget(async()=>Ax(await Nx(P),M,D)),D.promise}(ka(A),c)}function oy(A,c,x){const P=x.docs.get(c._key),M=new ed(A);return new td(A,M,c._key,P,new Mn(x.hasPendingWrites,x.fromCache),c.converter)}(function(c,x=!0){(function(M){nn=M})(tn),Oe(new Ee("firestore",(P,{instanceIdentifier:M,options:D})=>{const v=P.getProvider("app").getImmediate(),E=new dr(new nm(P.getProvider("auth-internal")),new om(P.getProvider("app-check-internal")),function(o,g){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new gt(ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zn(o.options.projectId,g)}(v,M),v);return D=Object.assign({useFetchStreams:x},D),E._setSettings(D),E},"PUBLIC").setMultipleInstances(!0)),ge(bh,"4.7.3",c),ge(bh,"4.7.3","esm2017")})();const id="@firebase/installations",ao="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=1e4,sd=`w:${ao}`,rd="FIS_v2",hy="https://firebaseinstallations.googleapis.com/v1",ly=60*60*1e3,uy="installations",fy="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ri=new Mi(uy,fy,dy);function ad(A){return A instanceof Ae&&A.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od({projectId:A}){return`${hy}/projects/${A}/installations`}function hd(A){return{token:A.token,requestStatus:2,expiresIn:vy(A.expiresIn),creationTime:Date.now()}}async function ld(A,c){const P=(await c.json()).error;return Ri.create("request-failed",{requestName:A,serverCode:P.code,serverMessage:P.message,serverStatus:P.status})}function ud({apiKey:A}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":A})}function cy(A,{refreshToken:c}){const x=ud(A);return x.append("Authorization",py(c)),x}async function fd(A){const c=await A();return c.status>=500&&c.status<600?A():c}function vy(A){return Number(A.replace("s","000"))}function py(A){return`${rd} ${A}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy({appConfig:A,heartbeatServiceProvider:c},{fid:x}){const P=od(A),M=ud(A),D=c.getImmediate({optional:!0});if(D){const o=await D.getHeartbeatsHeader();o&&M.append("x-firebase-client",o)}const v={fid:x,authVersion:rd,appId:A.appId,sdkVersion:sd},E={method:"POST",headers:M,body:JSON.stringify(v)},t=await fd(()=>fetch(P,E));if(t.ok){const o=await t.json();return{fid:o.fid||x,registrationStatus:2,refreshToken:o.refreshToken,authToken:hd(o.authToken)}}else throw await ld("Create Installation",t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(A){return new Promise(c=>{setTimeout(c,A)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(A){return btoa(String.fromCharCode(...A)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=/^[cdef][\w-]{21}$/,ga="";function yy(){try{const A=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(A),A[0]=112+A[0]%16;const x=Ty(A);return xy.test(x)?x:ga}catch{return ga}}function Ty(A){return my(A).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(A){return`${A.appName}!${A.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd=new Map;function vd(A,c){const x=vr(A);pd(x,c),Ey(x,c)}function pd(A,c){const x=cd.get(A);if(x)for(const P of x)P(c)}function Ey(A,c){const x=Sy();x&&x.postMessage({key:A,fid:c}),Cy()}let mi=null;function Sy(){return!mi&&"BroadcastChannel"in self&&(mi=new BroadcastChannel("[Firebase] FID Change"),mi.onmessage=A=>{pd(A.data.key,A.data.fid)}),mi}function Cy(){cd.size===0&&mi&&(mi.close(),mi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="firebase-installations-database",Py=1,Ii="firebase-installations-store";let Wr=null;function oo(){return Wr||(Wr=Ql(Ay,Py,{upgrade:(A,c)=>{switch(c){case 0:A.createObjectStore(Ii)}}})),Wr}async function Js(A,c){const x=vr(A),M=(await oo()).transaction(Ii,"readwrite"),D=M.objectStore(Ii),v=await D.get(x);return await D.put(c,x),await M.done,(!v||v.fid!==c.fid)&&vd(A,c.fid),c}async function gd(A){const c=vr(A),P=(await oo()).transaction(Ii,"readwrite");await P.objectStore(Ii).delete(c),await P.done}async function pr(A,c){const x=vr(A),M=(await oo()).transaction(Ii,"readwrite"),D=M.objectStore(Ii),v=await D.get(x),E=c(v);return E===void 0?await D.delete(x):await D.put(E,x),await M.done,E&&(!v||v.fid!==E.fid)&&vd(A,E.fid),E}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ho(A){let c;const x=await pr(A.appConfig,P=>{const M=Ry(P),D=Iy(A,M);return c=D.registrationPromise,D.installationEntry});return x.fid===ga?{installationEntry:await c}:{installationEntry:x,registrationPromise:c}}function Ry(A){const c=A||{fid:yy(),registrationStatus:0};return md(c)}function Iy(A,c){if(c.registrationStatus===0){if(!navigator.onLine){const M=Promise.reject(Ri.create("app-offline"));return{installationEntry:c,registrationPromise:M}}const x={fid:c.fid,registrationStatus:1,registrationTime:Date.now()},P=My(A,x);return{installationEntry:x,registrationPromise:P}}else return c.registrationStatus===1?{installationEntry:c,registrationPromise:wy(A)}:{installationEntry:c}}async function My(A,c){try{const x=await gy(A,c);return Js(A.appConfig,x)}catch(x){throw ad(x)&&x.customData.serverCode===409?await gd(A.appConfig):await Js(A.appConfig,{fid:c.fid,registrationStatus:0}),x}}async function wy(A){let c=await Rl(A.appConfig);for(;c.registrationStatus===1;)await dd(100),c=await Rl(A.appConfig);if(c.registrationStatus===0){const{installationEntry:x,registrationPromise:P}=await ho(A);return P||x}return c}function Rl(A){return pr(A,c=>{if(!c)throw Ri.create("installation-not-found");return md(c)})}function md(A){return Ly(A)?{fid:A.fid,registrationStatus:0}:A}function Ly(A){return A.registrationStatus===1&&A.registrationTime+nd<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oy({appConfig:A,heartbeatServiceProvider:c},x){const P=Fy(A,x),M=cy(A,x),D=c.getImmediate({optional:!0});if(D){const o=await D.getHeartbeatsHeader();o&&M.append("x-firebase-client",o)}const v={installation:{sdkVersion:sd,appId:A.appId}},E={method:"POST",headers:M,body:JSON.stringify(v)},t=await fd(()=>fetch(P,E));if(t.ok){const o=await t.json();return hd(o)}else throw await ld("Generate Auth Token",t)}function Fy(A,{fid:c}){return`${od(A)}/${c}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(A,c=!1){let x;const P=await pr(A.appConfig,D=>{if(!xd(D))throw Ri.create("not-registered");const v=D.authToken;if(!c&&By(v))return D;if(v.requestStatus===1)return x=Dy(A,c),D;{if(!navigator.onLine)throw Ri.create("app-offline");const E=Gy(D);return x=Ny(A,E),E}});return x?await x:P.authToken}async function Dy(A,c){let x=await Il(A.appConfig);for(;x.authToken.requestStatus===1;)await dd(100),x=await Il(A.appConfig);const P=x.authToken;return P.requestStatus===0?lo(A,c):P}function Il(A){return pr(A,c=>{if(!xd(c))throw Ri.create("not-registered");const x=c.authToken;return Uy(x)?Object.assign(Object.assign({},c),{authToken:{requestStatus:0}}):c})}async function Ny(A,c){try{const x=await Oy(A,c),P=Object.assign(Object.assign({},c),{authToken:x});return await Js(A.appConfig,P),x}catch(x){if(ad(x)&&(x.customData.serverCode===401||x.customData.serverCode===404))await gd(A.appConfig);else{const P=Object.assign(Object.assign({},c),{authToken:{requestStatus:0}});await Js(A.appConfig,P)}throw x}}function xd(A){return A!==void 0&&A.registrationStatus===2}function By(A){return A.requestStatus===2&&!Vy(A)}function Vy(A){const c=Date.now();return c<A.creationTime||A.creationTime+A.expiresIn<c+ly}function Gy(A){const c={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},A),{authToken:c})}function Uy(A){return A.requestStatus===1&&A.requestTime+nd<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function by(A){const c=A,{installationEntry:x,registrationPromise:P}=await ho(c);return P?P.catch(console.error):lo(c).catch(console.error),x.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zy(A,c=!1){const x=A;return await Xy(x),(await lo(x,c)).token}async function Xy(A){const{registrationPromise:c}=await ho(A);c&&await c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(A){if(!A||!A.options)throw Yr("App Configuration");if(!A.name)throw Yr("App Name");const c=["projectId","apiKey","appId"];for(const x of c)if(!A.options[x])throw Yr(x);return{appName:A.name,projectId:A.options.projectId,apiKey:A.options.apiKey,appId:A.options.appId}}function Yr(A){return Ri.create("missing-app-config-values",{valueName:A})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yd="installations",Yy="installations-internal",Hy=A=>{const c=A.getProvider("app").getImmediate(),x=Wy(c),P=wi(c,"heartbeat");return{app:c,appConfig:x,heartbeatServiceProvider:P,_delete:()=>Promise.resolve()}},Ky=A=>{const c=A.getProvider("app").getImmediate(),x=wi(c,yd).getImmediate();return{getId:()=>by(x),getToken:M=>zy(x,M)}};function $y(){Oe(new Ee(yd,Hy,"PUBLIC")),Oe(new Ee(Yy,Ky,"PRIVATE"))}$y();ge(id,ao);ge(id,ao,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="analytics",Qy="firebase_id",Jy="origin",jy=60*1e3,Zy="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uo="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de=new ks("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ve=new Mi("analytics","Analytics",ky);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(A){if(!A.startsWith(uo)){const c=ve.create("invalid-gtag-resource",{gtagURL:A});return de.warn(c.message),""}return A}function Td(A){return Promise.all(A.map(c=>c.catch(x=>x)))}function _y(A,c){let x;return window.trustedTypes&&(x=window.trustedTypes.createPolicy(A,c)),x}function t1(A,c){const x=_y("firebase-js-sdk-policy",{createScriptURL:qy}),P=document.createElement("script"),M=`${uo}?l=${A}&id=${c}`;P.src=x?x==null?void 0:x.createScriptURL(M):M,P.async=!0,document.head.appendChild(P)}function e1(A){let c=[];return Array.isArray(window[A])?c=window[A]:window[A]=c,c}async function i1(A,c,x,P,M,D){const v=P[M];try{if(v)await c[v];else{const t=(await Td(x)).find(o=>o.measurementId===M);t&&await c[t.appId]}}catch(E){de.error(E)}A("config",M,D)}async function n1(A,c,x,P,M){try{let D=[];if(M&&M.send_to){let v=M.send_to;Array.isArray(v)||(v=[v]);const E=await Td(x);for(const t of v){const o=E.find(a=>a.measurementId===t),g=o&&c[o.appId];if(g)D.push(g);else{D=[];break}}}D.length===0&&(D=Object.values(c)),await Promise.all(D),A("event",P,M||{})}catch(D){de.error(D)}}function s1(A,c,x,P){async function M(D,...v){try{if(D==="event"){const[E,t]=v;await n1(A,c,x,E,t)}else if(D==="config"){const[E,t]=v;await i1(A,c,x,P,E,t)}else if(D==="consent"){const[E,t]=v;A("consent",E,t)}else if(D==="get"){const[E,t,o]=v;A("get",E,t,o)}else if(D==="set"){const[E]=v;A("set",E)}else A(D,...v)}catch(E){de.error(E)}}return M}function r1(A,c,x,P,M){let D=function(...v){window[P].push(arguments)};return window[M]&&typeof window[M]=="function"&&(D=window[M]),window[M]=s1(D,A,c,x),{gtagCore:D,wrappedGtag:window[M]}}function a1(A){const c=window.document.getElementsByTagName("script");for(const x of Object.values(c))if(x.src&&x.src.includes(uo)&&x.src.includes(A))return x;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=30,h1=1e3;class l1{constructor(c={},x=h1){this.throttleMetadata=c,this.intervalMillis=x}getThrottleMetadata(c){return this.throttleMetadata[c]}setThrottleMetadata(c,x){this.throttleMetadata[c]=x}deleteThrottleMetadata(c){delete this.throttleMetadata[c]}}const Ed=new l1;function u1(A){return new Headers({Accept:"application/json","x-goog-api-key":A})}async function f1(A){var c;const{appId:x,apiKey:P}=A,M={method:"GET",headers:u1(P)},D=Zy.replace("{app-id}",x),v=await fetch(D,M);if(v.status!==200&&v.status!==304){let E="";try{const t=await v.json();!((c=t.error)===null||c===void 0)&&c.message&&(E=t.error.message)}catch{}throw ve.create("config-fetch-failed",{httpStatus:v.status,responseMessage:E})}return v.json()}async function d1(A,c=Ed,x){const{appId:P,apiKey:M,measurementId:D}=A.options;if(!P)throw ve.create("no-app-id");if(!M){if(D)return{measurementId:D,appId:P};throw ve.create("no-api-key")}const v=c.getThrottleMetadata(P)||{backoffCount:0,throttleEndTimeMillis:Date.now()},E=new p1;return setTimeout(async()=>{E.abort()},x!==void 0?x:jy),Sd({appId:P,apiKey:M,measurementId:D},v,E,c)}async function Sd(A,{throttleEndTimeMillis:c,backoffCount:x},P,M=Ed){var D;const{appId:v,measurementId:E}=A;try{await c1(P,c)}catch(t){if(E)return de.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${E} provided in the "measurementId" field in the local Firebase config. [${t==null?void 0:t.message}]`),{appId:v,measurementId:E};throw t}try{const t=await f1(A);return M.deleteThrottleMetadata(v),t}catch(t){const o=t;if(!v1(o)){if(M.deleteThrottleMetadata(v),E)return de.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${E} provided in the "measurementId" field in the local Firebase config. [${o==null?void 0:o.message}]`),{appId:v,measurementId:E};throw t}const g=Number((D=o==null?void 0:o.customData)===null||D===void 0?void 0:D.httpStatus)===503?hh(x,M.intervalMillis,o1):hh(x,M.intervalMillis),a={throttleEndTimeMillis:Date.now()+g,backoffCount:x+1};return M.setThrottleMetadata(v,a),de.debug(`Calling attemptFetch again in ${g} millis`),Sd(A,a,P,M)}}function c1(A,c){return new Promise((x,P)=>{const M=Math.max(c-Date.now(),0),D=setTimeout(x,M);A.addEventListener(()=>{clearTimeout(D),P(ve.create("fetch-throttle",{throttleEndTimeMillis:c}))})})}function v1(A){if(!(A instanceof Ae)||!A.customData)return!1;const c=Number(A.customData.httpStatus);return c===429||c===500||c===503||c===504}class p1{constructor(){this.listeners=[]}addEventListener(c){this.listeners.push(c)}abort(){this.listeners.forEach(c=>c())}}async function g1(A,c,x,P,M){if(M&&M.global){A("event",x,P);return}else{const D=await c,v=Object.assign(Object.assign({},P),{send_to:D});A("event",x,v)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(){if(Yl())try{await Hl()}catch(A){return de.warn(ve.create("indexeddb-unavailable",{errorInfo:A==null?void 0:A.toString()}).message),!1}else return de.warn(ve.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function x1(A,c,x,P,M,D,v){var E;const t=d1(A);t.then(s=>{x[s.measurementId]=s.appId,A.options.measurementId&&s.measurementId!==A.options.measurementId&&de.warn(`The measurement ID in the local Firebase config (${A.options.measurementId}) does not match the measurement ID fetched from the server (${s.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(s=>de.error(s)),c.push(t);const o=m1().then(s=>{if(s)return P.getId()}),[g,a]=await Promise.all([t,o]);a1(D)||t1(D,g.measurementId),M("js",new Date);const r=(E=v==null?void 0:v.config)!==null&&E!==void 0?E:{};return r[Jy]="firebase",r.update=!0,a!=null&&(r[Qy]=a),M("config",g.measurementId,r),g.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(c){this.app=c}_delete(){return delete Nn[this.app.options.appId],Promise.resolve()}}let Nn={},Ml=[];const wl={};let Hr="dataLayer",T1="gtag",Ll,Cd,Ol=!1;function E1(){const A=[];if(Wl()&&A.push("This is a browser extension environment."),Sc()||A.push("Cookies are not available."),A.length>0){const c=A.map((P,M)=>`(${M+1}) ${P}`).join(" "),x=ve.create("invalid-analytics-context",{errorInfo:c});de.warn(x.message)}}function S1(A,c,x){E1();const P=A.options.appId;if(!P)throw ve.create("no-app-id");if(!A.options.apiKey)if(A.options.measurementId)de.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${A.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ve.create("no-api-key");if(Nn[P]!=null)throw ve.create("already-exists",{id:P});if(!Ol){e1(Hr);const{wrappedGtag:D,gtagCore:v}=r1(Nn,Ml,wl,Hr,T1);Cd=D,Ll=v,Ol=!0}return Nn[P]=x1(A,Ml,wl,c,Ll,Hr,x),new y1(A)}function C1(A=xa()){A=kt(A);const c=wi(A,js);return c.isInitialized()?c.getImmediate():A1(A)}function A1(A,c={}){const x=wi(A,js);if(x.isInitialized()){const M=x.getImmediate();if(Bn(c,x.getOptions()))return M;throw ve.create("already-initialized")}return x.initialize({options:c})}function P1(A,c,x,P){A=kt(A),g1(Cd,Nn[A.app.options.appId],c,x,P).catch(M=>de.error(M))}const Fl="@firebase/analytics",Dl="0.10.8";function R1(){Oe(new Ee(js,(c,{options:x})=>{const P=c.getProvider("app").getImmediate(),M=c.getProvider("installations-internal").getImmediate();return S1(P,M,x)},"PUBLIC")),Oe(new Ee("analytics-internal",A,"PRIVATE")),ge(Fl,Dl),ge(Fl,Dl,"esm2017");function A(c){try{const x=c.getProvider(js).getImmediate();return{logEvent:(P,M,D)=>P1(x,P,M,D)}}catch(x){throw ve.create("interop-component-reg-failed",{reason:x})}}}R1();const I1={apiKey:"AIzaSyAsodsLtIQcuhHqkAlDPZHU3DFEeHsp8PU",authDomain:"mathatro.firebaseapp.com",projectId:"mathatro",storageBucket:"mathatro.firebasestorage.app",messagingSenderId:"730963402265",appId:"1:730963402265:web:3b8d50a17dbb6d0f7b9488",measurementId:"G-PCBLWN1V7P"},fo=Jl(I1),En=kg(fo),Sn=zx(fo);C1(fo);class Xi{constructor(){this.COLLECTION_NAME="usernameMappings"}static getInstance(){return Xi.instance||(Xi.instance=new Xi),Xi.instance}async createUsernameMapping(c,x,P){try{const M=Ss(Sn,this.COLLECTION_NAME,c.toLowerCase()),D={username:c.toLowerCase(),email:x,userId:P,createdAt:new Date};await Pl(M,D)}catch(M){throw console.error("Error creating username mapping:",M),M}}async getEmailByUsername(c){try{const x=Ss(Sn,this.COLLECTION_NAME,c.toLowerCase()),P=await Al(x);return P.exists()?P.data().email:null}catch(x){throw console.error("Error getting email by username:",x),x}}async isUsernameTaken(c){try{const x=Ss(Sn,this.COLLECTION_NAME,c.toLowerCase());return(await Al(x)).exists()}catch(x){throw console.error("Error checking if username is taken:",x),x}}async getUsernameByEmail(c){try{const x=_x(bx(Sn,this.COLLECTION_NAME),ty("email","==",c)),P=await ry(x);return P.empty?null:P.docs[0].data().username}catch(x){throw console.error("Error getting username by email:",x),x}}async deleteUsernameMapping(c){try{const x=Ss(Sn,this.COLLECTION_NAME,c.toLowerCase());await Pl(x,{},{merge:!1})}catch(x){throw console.error("Error deleting username mapping:",x),x}}}class xi{constructor(){this.currentUser=null,this.authStateListeners=[],this.usernameService=Xi.getInstance(),bp(En,c=>{c?this.currentUser={uid:c.uid,email:c.email,displayName:c.displayName}:this.currentUser=null,this.authStateListeners.forEach(x=>x(this.currentUser))})}static getInstance(){return xi.instance||(xi.instance=new xi),xi.instance}async signIn(c,x){try{const P=await Bp(En,c,x);return{uid:P.user.uid,email:P.user.email,displayName:P.user.displayName}}catch(P){throw console.error("Sign in error:",P),P}}async signUp(c,x,P){try{const M=await Ih(En,c,x);return P&&M.user&&await Mh(M.user,{displayName:P}),{uid:M.user.uid,email:M.user.email,displayName:M.user.displayName}}catch(M){throw console.error("Sign up error:",M),M}}async signInWithUsername(c,x){try{const P=await this.usernameService.getEmailByUsername(c);if(!P)throw new Error("Username not found");return await this.signIn(P,x)}catch(P){throw console.error("Username sign in error:",P),P}}async signUpWithUsername(c,x,P){try{if(await this.usernameService.isUsernameTaken(c))throw new Error("Username is already taken");const D=await Ih(En,P,x);return D.user&&await Mh(D.user,{displayName:c}),await this.usernameService.createUsernameMapping(c,P,D.user.uid),{uid:D.user.uid,email:D.user.email,displayName:D.user.displayName}}catch(M){throw console.error("Username sign up error:",M),M}}async signOut(){try{await zp(En)}catch(c){throw console.error("Sign out error:",c),c}}getCurrentUser(){return this.currentUser}isAuthenticated(){return this.currentUser!==null}onAuthStateChange(c){return this.authStateListeners.push(c),()=>{const x=this.authStateListeners.indexOf(c);x>-1&&this.authStateListeners.splice(x,1)}}}class M1{constructor(c){this.currentUser=null,this.scene=c,this.authService=xi.getInstance(),this.profileContainer=c.add.container(0,0),this.profileContainer.setDepth(1e3)}create(c,x){const P=this.scene.add.rectangle(c,x,200,80,2899536,.9);P.setStrokeStyle(2,15528177),this.profileContainer.add(P),this.userInfo=this.scene.add.text(c,x-15,"",{fontSize:"14px",color:"#ecf0f1",align:"center"}).setOrigin(.5),this.profileContainer.add(this.userInfo),this.logoutButton=this.scene.add.rectangle(c,x+20,120,25,15158332),this.logoutText=this.scene.add.text(c,x+20,"Logout",{fontSize:"12px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5),this.logoutButton.setInteractive(),this.logoutButton.on("pointerdown",()=>this.handleLogout()),this.profileContainer.add([this.logoutButton,this.logoutText]),this.authService.onAuthStateChange(M=>{this.currentUser=M,this.updateUserInfo()}),this.currentUser=this.authService.getCurrentUser(),this.updateUserInfo()}updateUserInfo(){if(this.currentUser){const c=this.currentUser.displayName||"User",x=this.currentUser.email||"";this.userInfo.setText(`${c}
${x}`),this.profileContainer.setVisible(!0)}else this.profileContainer.setVisible(!1)}async handleLogout(){try{await this.authService.signOut(),this.scene.scene.start("LoginScene")}catch(c){console.error("Logout failed:",c)}}setVisible(c){this.profileContainer.setVisible(c)}destroy(){this.profileContainer.destroy()}}class w1 extends Ht.Scene{constructor(){super({key:"GameUI"})}create(){this.scene.bringToTop();const{width:c,height:x}=this.sys.game.scale;this.input.dragDistanceThreshold=et.DRAG.DISTANCE_THRESHOLD,this.gameManager=pi.getInstance(),this.layout=Lr.calculateCompleteLayout(c,x);const{sidebar:P,healthBar:M,gamesCounter:D,objective:v,resultBar:E,handBar:t,testSection:o}=this.layout;this.rect=(a,r,s,e,n={})=>{const{fill:h=et.COLORS.GREEN_FELT,alpha:i=et.ALPHA.FELT,strokeColor:l=et.COLORS.WHITE,strokeWidth:f=2}=n;return Bl(this,a,r,s,e,{fill:h,alpha:i,strokeColor:l,strokeWidth:f})},this.labelBox=(a,r,s,e,n,h={})=>qd(this,a,r,s,e,n,h),this.sidebar=this.rect(P.x,P.y,P.width,P.height,{fill:et.COLORS.BLACK,alpha:et.ALPHA.SIDEBAR}),this.scoreTitle=this.add.text(P.scoreTitleX,P.scoreTitleY,"Score Board",{fontSize:et.FONT.SCORE_SIZE+2,color:et.COLORS.BLACK}).setOrigin(.5),this.currentScore=this.labelBox(P.currentScoreX,P.currentScoreY,P.currentScoreWidth,P.currentScoreHeight,"current game score"),this.calcText=this.add.text(P.calcTextX,P.calcTextY,`calculations?
mayber multipliers or smth else`,{fontSize:et.FONT.CAPTION_SIZE,color:et.COLORS.DARK_GRAY,wordWrap:{width:P.width-et.LAYOUT.CALC_TEXT_WIDTH_OFFSET}}),this.cumulated=this.labelBox(P.cumulatedX,P.cumulatedY,P.cumulatedWidth,P.cumulatedHeight,`Cumulated score (previous game)
vs
Score needed to pass the level`,{fontSize:et.FONT.CAPTION_SIZE}),this.healthBarBg=this.rect(M.backgroundX,M.backgroundY,M.backgroundWidth,M.backgroundHeight,{fill:et.COLORS.RED,alpha:et.ALPHA.HEALTH_BG}),this.healthBarFill=this.add.rectangle(M.fillX,M.fillY,M.fillWidth,M.fillHeight,et.COLORS.GREEN,et.ALPHA.HEALTH_FILL).setOrigin(0,0),this.healthHint=this.add.text(this.healthBarBg.x,this.healthBarBg.y-et.LAYOUT.HEALTH_HINT_Y_OFFSET,`Health bar
(deduct health if objective is impossible for current hand)`,{fontSize:et.FONT.HINT_SIZE,color:et.COLORS.MEDIUM_GRAY}).setOrigin(0,1),this.gamesCounter=this.labelBox(D.x,D.y,D.width,D.height,et.LAYOUT.DEFAULT_GAME_TEXT),this.objective=this.labelBox(v.x,v.y,v.width,v.height,et.LAYOUT.DEFAULT_OBJECTIVE_TEXT,{fontSize:et.FONT.OBJECTIVE_SIZE,fontStyle:"bold"}),this.objectiveCaption=this.add.text(v.captionX,v.captionY,"Objective",{fontSize:et.FONT.HINT_SIZE,color:et.COLORS.MEDIUM_GRAY}).setOrigin(.5,1),this.objectiveTestLabel=this.add.text(o.x,o.y,"Test Objective",{fontSize:et.FONT.SCORE_SIZE,color:et.COLORS.WHITE,fontStyle:"bold"}),this.objectiveTestLabel.setAlpha(et.LAYOUT.DEFAULT_ALPHA),this.objectiveTestLabel.setInteractive(),this.objectiveTestLabel.on(Ht.Input.Events.POINTER_DOWN,()=>{const a=this.gameManager.generateObjective();this.gameManager.setObjective(a)}),this.resultBar=this.rect(E.x,E.y,E.width,E.height,{fill:et.COLORS.BLACK,alpha:et.ALPHA.RESULT_BAR}),this.equalsText=this.add.text(E.equalsX,E.equalsY,"=  ?",{fontSize:et.LAYOUT.RESULT_EQUALS_FONT_SIZE,color:et.COLORS.BLACK}),this.handBar=this.rect(t.x,t.y,t.width,t.height,{fill:et.COLORS.BLACK,alpha:et.ALPHA.HAND_BAR}),this.handCaption=this.add.text(t.captionX,t.captionY,"Cards, either operator(+,-,*,/) or number (0–9)",{fontSize:et.FONT.CAPTION_SIZE,color:et.COLORS.MEDIUM_GRAY}).setOrigin(.5,0),this.resultContainer=this.add.container(0,0).setDepth(et.DRAG.DEPTH+2),this.handContainer=this.add.container(0,0).setDepth(et.DRAG.DEPTH+2),this.setHealth(et.HEALTH_FULL),this.setGames(et.LAYOUT.DEFAULT_GAME_TEXT);const g=this.gameManager.getCurrentObjective();this.setObjective(g||et.LAYOUT.DEFAULT_OBJECTIVE_TEXT),this.setScore(et.DEFAULT_SCORE),this.createHandSlots(et.HAND_SLOTS),this.updateHand([1,2,3,4,"x","+","/"]),this.createResultSlots(et.RESULT_SLOTS),this.updateResultSlots(["?","?","?","?","?","?"]),this.userProfile=new M1(this),this.userProfile.create(c-120,40),this.createDragEvents()}setHealth(c){const x=Ht.Math.Clamp(c,0,1),P=this.healthBarBg.width-et.LAYOUT.HEALTH_BAR_CALC_OFFSET;this.healthBarFill.width=Math.max(0,P*x);let M=15844367;x>et.HEALTH_WARNING&&(M=3066993),x<=et.HEALTH_CRITICAL&&(M=15158332),this.healthBarFill.fillColor=M}setGames(c){this.gamesCounter.text.setText(c)}setObjective(c){this.objective.text.setText(c)}setScore(c){this.currentScore.text.setText(String(c))}createHandSlots(c){const x=Lr.calculateHandSlotPositions(this.handBar.width,this.handBar.height,c);this.handSlots=[];for(let P=0;P<c;P++){const M=x.positions[P],D=sh(this,this.handBar.x+M.x,this.handBar.y+M.y,x.cardWidth,x.cardHeight,{});this.handSlots.push(D),this.handContainer.add(D)}}updateHand(c=[]){rh.updateCardsInSlots(this,this.handSlots,c),this.handSlots.forEach(x=>{x.card&&(x.card.slot=x,this.handContainer.add(x.card),this.attachCardPointerListeners(x.card))})}createResultSlots(c){const x=Lr.calculateResultSlotPositions(this.resultBar.width,this.resultBar.height,c);this.resultSlots=[];for(let P=0;P<c;P++){const M=x.positions[P],D=sh(this,this.resultBar.x+M.x,this.resultBar.y+M.y,x.cardWidth,x.cardHeight,{});this.resultSlots.push(D),this.resultContainer.add(D)}}updateResultSlots(c=[]){rh.updateCardsInSlots(this,this.resultSlots,c),this.resultSlots.forEach(x=>{x.card&&(x.card.slot=x,this.resultContainer.add(x.card),this.attachCardPointerListeners(x.card))})}createDragEvents(){this.createCardDragStartEventListener(),this.createCardDragHoldEventListener(),this.createCardDragEndEventListener()}createCardDragStartEventListener(){this.input.on(Ht.Input.Events.DRAG_START,(c,x)=>{var P,M;x.setAlpha(et.ALPHA.DRAGGING),(P=x.parentContainer)==null||P.bringToTop(x),(M=x.shadow)==null||M.setAlpha(et.ALPHA.CARD_SHADOW),x.setDepth(et.DRAG.DEPTH)})}createCardDragHoldEventListener(){this.input.on(Ht.Input.Events.DRAG,(c,x,P,M)=>{x.setPosition(P,M)})}createCardDragEndEventListener(){this.input.on(Ht.Input.Events.DRAG_END,(c,x)=>{var D;x.setAlpha(1),(D=x.shadow)==null||D.setAlpha(1),x.setDepth(0);const M=[...this.handSlots,...this.resultSlots||[]].find(v=>v.isPointerOver(c));if(!M){x.slot&&x.slot.setCard(x);return}if(M.card&&M.card!==x){const v=x.slot,E=M.card;M.setCard(x),v&&v.setCard(E)}else M.setCard(x)})}attachCardPointerListeners(c){c.on("pointerdown",function(x){this._wasDrag=!1}),c.on("dragstart",function(x){this._wasDrag=!0}),c.on("pointerup",function(x){var P,M,D,v;if(!this._wasDrag){const E=this.scene;if((P=E.handSlots)!=null&&P.includes(this.slot)){const t=(M=E.resultSlots)==null?void 0:M.find(o=>!o.card);t&&t.setCard(this)}else if((D=E.resultSlots)!=null&&D.includes(this.slot)){const t=(v=E.handSlots)==null?void 0:v.find(o=>!o.card);t&&t.setCard(this)}}})}}class L1 extends Ht.Scene{constructor(){super({key:"LoginScene"}),this.emailInput=null,this.passwordInput=null,this.displayNameInput=null,this.isSignUpMode=!1}create(){const{width:c,height:x}=this.sys.game.scale;this.authService=xi.getInstance(),this.add.rectangle(c/2,x/2,c,x,16316922),this.add.text(c/2,x*.15,"Mathatro",{fontSize:"48px",color:"#2c3e50",fontStyle:"bold"}).setOrigin(.5),this.add.text(c/2,x*.2,"Card Memory Game",{fontSize:"24px",color:"#7f8c8d"}).setOrigin(.5),this.loginContainer=this.add.container(c/2,x*.6),this.signupContainer=this.add.container(c/2,x*.6),this.signupContainer.setVisible(!1),this.createLoginForm(),this.createSignupForm(),this.emailInput=this.createHTMLInput("text","Enter your username",-50),this.passwordInput=this.createHTMLInput("password","Enter your password",10),this.displayNameInput=this.createHTMLInput("text","Enter your username",-80),this.updateInputPositions(),this.errorText=this.add.text(c/2,x*.85,"",{fontSize:"16px",color:"#dc3545",align:"center"}).setOrigin(.5),this.loadingText=this.add.text(c/2,x*.9,"",{fontSize:"16px",color:"#007bff",align:"center"}).setOrigin(.5),this.authService.isAuthenticated()&&this.startGame(),this.authService.onAuthStateChange(P=>{P&&this.startGame()})}createLoginForm(){const c=this.loginContainer,x=this.add.rectangle(0,0,600,400,15330543,.95);x.setStrokeStyle(2,7107965),c.add(x);const P=this.add.text(0,-150,"Login",{fontSize:"28px",color:"#2c3e50",fontStyle:"bold"}).setOrigin(.5);c.add(P),this.createInputField(c,-50,"Username","text"),this.createInputField(c,10,"Password","password");const M=this.add.rectangle(0,80,200,40,2664261),D=this.add.text(0,80,"Login",{fontSize:"18px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);M.setInteractive(),M.on("pointerdown",()=>this.handleLogin()),c.add([M,D]);const v=this.add.text(0,120,"Don't have an account? Sign up",{fontSize:"14px",color:"#007bff"}).setOrigin(.5);v.setInteractive(),v.on("pointerdown",()=>this.switchToSignup()),c.add(v)}createSignupForm(){const c=this.signupContainer,x=this.add.rectangle(0,0,600,500,15330543,.95);x.setStrokeStyle(2,7107965),c.add(x);const P=this.add.text(0,-170,"Sign Up",{fontSize:"28px",color:"#2c3e50",fontStyle:"bold"}).setOrigin(.5);c.add(P),this.createInputField(c,-80,"Username","text"),this.createInputField(c,-20,"Email","email"),this.createInputField(c,40,"Password","password");const M=this.add.rectangle(0,110,200,40,2664261),D=this.add.text(0,110,"Sign Up",{fontSize:"18px",color:"#ffffff",fontStyle:"bold"}).setOrigin(.5);M.setInteractive(),M.on("pointerdown",()=>this.handleSignup()),c.add([M,D]);const v=this.add.text(0,150,"Already have an account? Login",{fontSize:"14px",color:"#007bff"}).setOrigin(.5);v.setInteractive(),v.on("pointerdown",()=>this.switchToLogin()),c.add(v)}createInputField(c,x,P,M){const D=this.add.text(-280,x,P,{fontSize:"16px",color:"#2c3e50"}).setOrigin(0,.5);c.add(D);const v=this.add.rectangle(0,x,350,35,16777215);v.setStrokeStyle(2,7107965),c.add(v)}createHTMLInput(c,x,P){const M=document.createElement("input");M.type=c,M.placeholder=x,M.style.position="absolute",M.style.left="50%",M.style.top="50%",M.style.transform="translate(-50%, -50%)",M.style.width="340px",M.style.height="30px",M.style.padding="5px",M.style.border="none",M.style.borderRadius="3px",M.style.backgroundColor="#ffffff",M.style.color="#2c3e50",M.style.fontSize="14px",M.style.outline="none",M.style.zIndex="1000";const v=this.sys.game.scale.height*.6+P;return M.style.top=`${v}px`,document.body.appendChild(M),M}switchToSignup(){this.isSignUpMode=!0,this.loginContainer.setVisible(!1),this.signupContainer.setVisible(!0),this.updateInputPositions(),this.clearError()}switchToLogin(){this.isSignUpMode=!1,this.loginContainer.setVisible(!0),this.signupContainer.setVisible(!1),this.updateInputPositions(),this.clearError()}updateInputPositions(){const x=this.sys.game.scale.height*.6;this.isSignUpMode?(this.displayNameInput&&(this.displayNameInput.style.top=`${x-80}px`,this.displayNameInput.style.display="block"),this.emailInput&&(this.emailInput.style.top=`${x-20}px`,this.emailInput.placeholder="Enter your email"),this.passwordInput&&(this.passwordInput.style.top=`${x+40}px`,this.passwordInput.placeholder="Enter your password")):(this.displayNameInput&&(this.displayNameInput.style.display="none"),this.emailInput&&(this.emailInput.style.top=`${x-50}px`,this.emailInput.placeholder="Enter your username"),this.passwordInput&&(this.passwordInput.style.top=`${x+10}px`,this.passwordInput.placeholder="Enter your password"))}async handleLogin(){var P,M;const c=((P=this.emailInput)==null?void 0:P.value.trim())||"",x=((M=this.passwordInput)==null?void 0:M.value)||"";if(!c||!x){this.showError("Please fill in all fields");return}this.showLoading("Logging in..."),this.clearError();try{await this.authService.signInWithUsername(c,x)}catch(D){this.hideLoading(),this.showError(this.getErrorMessage(D.message||D.code))}}async handleSignup(){var M,D,v;const c=((M=this.emailInput)==null?void 0:M.value.trim())||"",x=((D=this.passwordInput)==null?void 0:D.value)||"",P=((v=this.displayNameInput)==null?void 0:v.value.trim())||"";if(!c||!x||!P){this.showError("Please fill in all fields");return}if(x.length<6){this.showError("Password must be at least 6 characters");return}this.showLoading("Creating account..."),this.clearError();try{await this.authService.signUpWithUsername(P,x,c)}catch(E){this.hideLoading(),this.showError(this.getErrorMessage(E.message||E.code))}}startGame(){this.removeHTMLInputs(),this.scene.start("Preloader")}removeHTMLInputs(){var c,x,P,M,D,v;(x=(c=this.emailInput)==null?void 0:c.parentNode)==null||x.removeChild(this.emailInput),(M=(P=this.passwordInput)==null?void 0:P.parentNode)==null||M.removeChild(this.passwordInput),(v=(D=this.displayNameInput)==null?void 0:D.parentNode)==null||v.removeChild(this.displayNameInput),this.emailInput=null,this.passwordInput=null,this.displayNameInput=null}showError(c){this.errorText.setText(c)}clearError(){this.errorText.setText("")}showLoading(c){this.loadingText.setText(c)}hideLoading(){this.loadingText.setText("")}getErrorMessage(c){switch(c){case"auth/user-not-found":return"No account found with this username";case"auth/wrong-password":return"Incorrect password";case"auth/email-already-in-use":return"An account with this email already exists";case"auth/weak-password":return"Password is too weak";case"auth/invalid-email":return"Invalid email address";case"auth/too-many-requests":return"Too many failed attempts. Please try again later";case"Username not found":return"Username not found. Please check your username or sign up for a new account.";case"Username is already taken":return"This username is already taken. Please choose a different username.";default:return"An error occurred. Please try again"}}shutdown(){this.removeHTMLInputs()}}const O1={title:"Card Memory Game",type:Ht.AUTO,width:et.CANVAS_WIDTH,height:et.CANVAS_HEIGHT,parent:"game-container",backgroundColor:et.BACKGROUND_COLOR,pixelArt:!1,scale:{mode:Ht.Scale.FIT,autoCenter:Ht.Scale.CENTER_BOTH},scene:[L1,Zd,rc,w1]};new Ht.Game(O1);
